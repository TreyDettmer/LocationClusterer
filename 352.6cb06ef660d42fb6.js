(()=>{var Yx={1503:(Me,Ne,q)=>{"use strict";var te=q(3269);function ee(Q){var ge=[1/0,1/0,-1/0,-1/0];return te.coordEach(Q,function(ce){ge[0]>ce[0]&&(ge[0]=ce[0]),ge[1]>ce[1]&&(ge[1]=ce[1]),ge[2]<ce[0]&&(ge[2]=ce[0]),ge[3]<ce[1]&&(ge[3]=ce[1])}),ge}ee.default=ee,Ne.Z=ee},8095:Me=>{"use strict";Me.exports={eudist:function(q,W,te){for(var ee=q.length,Q=0,ge=0;ge<ee;ge++){var ce=(q[ge]||0)-(W[ge]||0);Q+=ce*ce}return te?Math.sqrt(Q):Q},mandist:function(q,W,te){for(var ee=q.length,Q=0,ge=0;ge<ee;ge++)Q+=Math.abs((q[ge]||0)-(W[ge]||0));return te?Math.sqrt(Q):Q},dist:function(q,W,te){var ee=Math.abs(q-W);return te?ee:ee*ee}}},945:(Me,Ne,q)=>{"use strict";var W=q(8095),te=W.eudist,ee=W.dist;Me.exports={kmrand:function(ge,ce){for(var X={},Oe=[],Pe=ce<<2,se=ge.length,V=ge[0].length>0;Oe.length<ce&&Pe-- >0;){var Z=ge[Math.floor(Math.random()*se)],ne=V?Z.join("_"):""+Z;X[ne]||(X[ne]=!0,Oe.push(Z))}if(Oe.length<ce)throw new Error("Error initializating clusters");return Oe},kmpp:function(ge,ce){var X=ge[0].length?te:ee,Oe=[],Pe=ge.length,se=ge[0].length>0,Z=ge[Math.floor(Math.random()*Pe)];for(se&&Z.join("_"),Oe.push(Z);Oe.length<ce;){for(var oe=[],k=Oe.length,re=0,$=[],ie=0;ie<Pe;ie++){for(var ue=1/0,Ae=0;Ae<k;Ae++){var fe=X(ge[ie],Oe[Ae]);fe<=ue&&(ue=fe)}oe[ie]=ue}for(var he=0;he<Pe;he++)re+=oe[he];for(var be=0;be<Pe;be++)$[be]={i:be,v:ge[be],pr:oe[be]/re,cs:0};$.sort(function(ke,de){return ke.pr-de.pr}),$[0].cs=$[0].pr;for(var J=1;J<Pe;J++)$[J].cs=$[J-1].cs+$[J].pr;for(var Ge=Math.random(),qe=0;qe<Pe-1&&$[qe++].cs<Ge;);Oe.push($[qe-1].v)}return Oe}}},5331:(Me,Ne,q)=>{"use strict";var W=q(8095),te=q(945),ee=W.eudist,ce=te.kmrand,X=te.kmpp;function Pe(V,Z,ne){ne=ne||[];for(var oe=0;oe<V;oe++)ne[oe]=Z;return ne}Me.exports=function se(V,Z,ne,oe){var k=[],re=[],$=[],ie=[],ue=!1,Ae=oe||1e4,fe=V.length,he=V[0].length,be=he>0,J=[];if(ne)k="kmrand"==ne?ce(V,Z):"kmpp"==ne?X(V,Z):ne;else for(var Ge={};k.length<Z;){var qe=Math.floor(Math.random()*fe);Ge[qe]||(Ge[qe]=!0,k.push(V[qe]))}do{Pe(Z,0,J);for(var ke=0;ke<fe;ke++){for(var de=1/0,wt=0,gt=0;gt<Z;gt++)(ie=be?ee(V[ke],k[gt]):Math.abs(V[ke]-k[gt]))<=de&&(de=ie,wt=gt);$[ke]=wt,J[wt]++}for(var De=[],Be=(re=[],0);Be<Z;Be++)De[Be]=be?Pe(he,0,De[Be]):0,re[Be]=k[Be];if(be){for(var rt=0;rt<Z;rt++)k[rt]=[];for(var st=0;st<fe;st++)for(var St=De[$[st]],At=V[st],Bt=0;Bt<he;Bt++)St[Bt]+=At[Bt];ue=!0;for(var _t=0;_t<Z;_t++){for(var cr=k[_t],sr=De[_t],rr=re[_t],vr=J[_t],fr=0;fr<he;fr++)cr[fr]=sr[fr]/vr||0;if(ue)for(var Yt=0;Yt<he;Yt++)if(rr[Yt]!=cr[Yt]){ue=!1;break}}}else{for(var Dn=0;Dn<fe;Dn++)De[$[Dn]]+=V[Dn];for(var Zr=0;Zr<Z;Zr++)k[Zr]=De[Zr]/J[Zr]||0;ue=!0;for(var pr=0;pr<Z;pr++)if(re[pr]!=k[pr]){ue=!1;break}}ue=ue||--Ae<=0}while(!ue);return{it:1e4-Ae,k:Z,idxs:$,centroids:k}}},8275:(Me,Ne)=>{"use strict";function q(qe,ke,de){void 0===de&&(de={});var wt={type:"Feature"};return(0===de.id||de.id)&&(wt.id=de.id),de.bbox&&(wt.bbox=de.bbox),wt.properties=ke||{},wt.geometry=qe,wt}function te(qe,ke,de){if(void 0===de&&(de={}),!qe)throw new Error("coordinates is required");if(!Array.isArray(qe))throw new Error("coordinates must be an Array");if(qe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!he(qe[0])||!he(qe[1]))throw new Error("coordinates must contain numbers");return q({type:"Point",coordinates:qe},ke,de)}function Q(qe,ke,de){void 0===de&&(de={});for(var wt=0,gt=qe;wt<gt.length;wt++){var De=gt[wt];if(De.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var nt=0;nt<De[De.length-1].length;nt++)if(De[De.length-1][nt]!==De[0][nt])throw new Error("First and last Position are not equivalent.")}return q({type:"Polygon",coordinates:qe},ke,de)}function ce(qe,ke,de){if(void 0===de&&(de={}),qe.length<2)throw new Error("coordinates must be an array of two or more positions");return q({type:"LineString",coordinates:qe},ke,de)}function Oe(qe,ke){void 0===ke&&(ke={});var de={type:"FeatureCollection"};return ke.id&&(de.id=ke.id),ke.bbox&&(de.bbox=ke.bbox),de.features=qe,de}function Pe(qe,ke,de){return void 0===de&&(de={}),q({type:"MultiLineString",coordinates:qe},ke,de)}function se(qe,ke,de){return void 0===de&&(de={}),q({type:"MultiPoint",coordinates:qe},ke,de)}function V(qe,ke,de){return void 0===de&&(de={}),q({type:"MultiPolygon",coordinates:qe},ke,de)}function oe(qe,ke){void 0===ke&&(ke="kilometers");var de=Ne.factors[ke];if(!de)throw new Error(ke+" units is invalid");return qe*de}function k(qe,ke){void 0===ke&&(ke="kilometers");var de=Ne.factors[ke];if(!de)throw new Error(ke+" units is invalid");return qe/de}function ie(qe){return qe%(2*Math.PI)*180/Math.PI}function he(qe){return!isNaN(qe)&&null!==qe&&!Array.isArray(qe)}Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.earthRadius=6371008.8,Ne.factors={centimeters:100*Ne.earthRadius,centimetres:100*Ne.earthRadius,degrees:Ne.earthRadius/111325,feet:3.28084*Ne.earthRadius,inches:39.37*Ne.earthRadius,kilometers:Ne.earthRadius/1e3,kilometres:Ne.earthRadius/1e3,meters:Ne.earthRadius,metres:Ne.earthRadius,miles:Ne.earthRadius/1609.344,millimeters:1e3*Ne.earthRadius,millimetres:1e3*Ne.earthRadius,nauticalmiles:Ne.earthRadius/1852,radians:1,yards:1.0936*Ne.earthRadius},Ne.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/Ne.earthRadius,yards:1.0936133},Ne.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},Ne.feature=q,Ne.geometry=function W(qe,ke,de){switch(void 0===de&&(de={}),qe){case"Point":return te(ke).geometry;case"LineString":return ce(ke).geometry;case"Polygon":return Q(ke).geometry;case"MultiPoint":return se(ke).geometry;case"MultiLineString":return Pe(ke).geometry;case"MultiPolygon":return V(ke).geometry;default:throw new Error(qe+" is invalid")}},Ne.point=te,Ne.points=function ee(qe,ke,de){return void 0===de&&(de={}),Oe(qe.map(function(wt){return te(wt,ke)}),de)},Ne.polygon=Q,Ne.polygons=function ge(qe,ke,de){return void 0===de&&(de={}),Oe(qe.map(function(wt){return Q(wt,ke)}),de)},Ne.lineString=ce,Ne.lineStrings=function X(qe,ke,de){return void 0===de&&(de={}),Oe(qe.map(function(wt){return ce(wt,ke)}),de)},Ne.featureCollection=Oe,Ne.multiLineString=Pe,Ne.multiPoint=se,Ne.multiPolygon=V,Ne.geometryCollection=function Z(qe,ke,de){return void 0===de&&(de={}),q({type:"GeometryCollection",geometries:qe},ke,de)},Ne.round=function ne(qe,ke){if(void 0===ke&&(ke=0),ke&&!(ke>=0))throw new Error("precision must be a positive number");var de=Math.pow(10,ke||0);return Math.round(qe*de)/de},Ne.radiansToLength=oe,Ne.lengthToRadians=k,Ne.lengthToDegrees=function re(qe,ke){return ie(k(qe,ke))},Ne.bearingToAzimuth=function $(qe){var ke=qe%360;return ke<0&&(ke+=360),ke},Ne.radiansToDegrees=ie,Ne.degreesToRadians=function ue(qe){return qe%360*Math.PI/180},Ne.convertLength=function Ae(qe,ke,de){if(void 0===ke&&(ke="kilometers"),void 0===de&&(de="kilometers"),!(qe>=0))throw new Error("length must be a positive number");return oe(k(qe,ke),de)},Ne.convertArea=function fe(qe,ke,de){if(void 0===ke&&(ke="meters"),void 0===de&&(de="kilometers"),!(qe>=0))throw new Error("area must be a positive number");var wt=Ne.areaFactors[ke];if(!wt)throw new Error("invalid original units");var gt=Ne.areaFactors[de];if(!gt)throw new Error("invalid final units");return qe/wt*gt},Ne.isNumber=he,Ne.isObject=function be(qe){return!!qe&&qe.constructor===Object},Ne.validateBBox=function J(qe){if(!qe)throw new Error("bbox is required");if(!Array.isArray(qe))throw new Error("bbox must be an Array");if(4!==qe.length&&6!==qe.length)throw new Error("bbox must be an Array of 4 or 6 numbers");qe.forEach(function(ke){if(!he(ke))throw new Error("bbox must only contain numbers")})},Ne.validateId=function Ge(qe){if(!qe)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof qe))throw new Error("id must be a number or a string")}},3269:(Me,Ne,q)=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});var W=q(8275);function te(ue,Ae,fe){if(null!==ue)for(var he,be,J,Ge,qe,ke,de,De,wt=0,gt=0,nt=ue.type,Be="FeatureCollection"===nt,rt="Feature"===nt,st=Be?ue.features.length:1,Fe=0;Fe<st;Fe++){qe=(De=!!(de=Be?ue.features[Fe].geometry:rt?ue.geometry:ue)&&"GeometryCollection"===de.type)?de.geometries.length:1;for(var St=0;St<qe;St++){var At=0,Bt=0;if(null!==(Ge=De?de.geometries[St]:de)){ke=Ge.coordinates;var _t=Ge.type;switch(wt=!fe||"Polygon"!==_t&&"MultiPolygon"!==_t?0:1,_t){case null:break;case"Point":if(!1===Ae(ke,gt,Fe,At,Bt))return!1;gt++,At++;break;case"LineString":case"MultiPoint":for(he=0;he<ke.length;he++){if(!1===Ae(ke[he],gt,Fe,At,Bt))return!1;gt++,"MultiPoint"===_t&&At++}"LineString"===_t&&At++;break;case"Polygon":case"MultiLineString":for(he=0;he<ke.length;he++){for(be=0;be<ke[he].length-wt;be++){if(!1===Ae(ke[he][be],gt,Fe,At,Bt))return!1;gt++}"MultiLineString"===_t&&At++,"Polygon"===_t&&Bt++}"Polygon"===_t&&At++;break;case"MultiPolygon":for(he=0;he<ke.length;he++){for(Bt=0,be=0;be<ke[he].length;be++){for(J=0;J<ke[he][be].length-wt;J++){if(!1===Ae(ke[he][be][J],gt,Fe,At,Bt))return!1;gt++}Bt++}At++}break;case"GeometryCollection":for(he=0;he<Ge.geometries.length;he++)if(!1===te(Ge.geometries[he],Ae,fe))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Q(ue,Ae){var fe;switch(ue.type){case"FeatureCollection":for(fe=0;fe<ue.features.length&&!1!==Ae(ue.features[fe].properties,fe);fe++);break;case"Feature":Ae(ue.properties,0)}}function ce(ue,Ae){if("Feature"===ue.type)Ae(ue,0);else if("FeatureCollection"===ue.type)for(var fe=0;fe<ue.features.length&&!1!==Ae(ue.features[fe],fe);fe++);}function Pe(ue,Ae){var fe,he,be,J,Ge,qe,ke,de,wt,gt,De=0,nt="FeatureCollection"===ue.type,Be="Feature"===ue.type,rt=nt?ue.features.length:1;for(fe=0;fe<rt;fe++){for(de=nt?ue.features[fe].properties:Be?ue.properties:{},wt=nt?ue.features[fe].bbox:Be?ue.bbox:void 0,gt=nt?ue.features[fe].id:Be?ue.id:void 0,Ge=(ke=!!(qe=nt?ue.features[fe].geometry:Be?ue.geometry:ue)&&"GeometryCollection"===qe.type)?qe.geometries.length:1,be=0;be<Ge;be++)if(null!==(J=ke?qe.geometries[be]:qe))switch(J.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===Ae(J,De,de,wt,gt))return!1;break;case"GeometryCollection":for(he=0;he<J.geometries.length;he++)if(!1===Ae(J.geometries[he],De,de,wt,gt))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===Ae(null,De,de,wt,gt))return!1;De++}}function V(ue,Ae){Pe(ue,function(fe,he,be,J,Ge){var ke,qe=null===fe?null:fe.type;switch(qe){case null:case"Point":case"LineString":case"Polygon":return!1!==Ae(W.feature(fe,be,{bbox:J,id:Ge}),he,0)&&void 0}switch(qe){case"MultiPoint":ke="Point";break;case"MultiLineString":ke="LineString";break;case"MultiPolygon":ke="Polygon"}for(var de=0;de<fe.coordinates.length;de++)if(!1===Ae(W.feature({type:ke,coordinates:fe.coordinates[de]},be),he,de))return!1})}function ne(ue,Ae){V(ue,function(fe,he,be){var J=0;if(fe.geometry){var Ge=fe.geometry.type;if("Point"!==Ge&&"MultiPoint"!==Ge){var qe,ke=0,de=0,wt=0;if(!1===te(fe,function(gt,De,nt,Be,rt){if(void 0===qe||he>ke||Be>de||rt>wt)return qe=gt,ke=he,de=Be,wt=rt,void(J=0);var st=W.lineString([qe,gt],fe.properties);if(!1===Ae(st,he,be,rt,J))return!1;J++,qe=gt}))return!1}}})}function k(ue,Ae){if(!ue)throw new Error("geojson is required");V(ue,function(fe,he,be){if(null!==fe.geometry){var Ge=fe.geometry.coordinates;switch(fe.geometry.type){case"LineString":if(!1===Ae(fe,he,be,0,0))return!1;break;case"Polygon":for(var qe=0;qe<Ge.length;qe++)if(!1===Ae(W.lineString(Ge[qe],fe.properties),he,be,qe))return!1}}})}Ne.coordAll=function Oe(ue){var Ae=[];return te(ue,function(fe){Ae.push(fe)}),Ae},Ne.coordEach=te,Ne.coordReduce=function ee(ue,Ae,fe,he){var be=fe;return te(ue,function(J,Ge,qe,ke,de){be=0===Ge&&void 0===fe?J:Ae(be,J,Ge,qe,ke,de)},he),be},Ne.featureEach=ce,Ne.featureReduce=function X(ue,Ae,fe){var he=fe;return ce(ue,function(be,J){he=0===J&&void 0===fe?be:Ae(he,be,J)}),he},Ne.findPoint=function ie(ue,Ae){if(!W.isObject(Ae=Ae||{}))throw new Error("options is invalid");var qe,fe=Ae.featureIndex||0,he=Ae.multiFeatureIndex||0,be=Ae.geometryIndex||0,J=Ae.coordIndex||0,Ge=Ae.properties;switch(ue.type){case"FeatureCollection":fe<0&&(fe=ue.features.length+fe),Ge=Ge||ue.features[fe].properties,qe=ue.features[fe].geometry;break;case"Feature":Ge=Ge||ue.properties,qe=ue.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":qe=ue;break;default:throw new Error("geojson is invalid")}if(null===qe)return null;var ke=qe.coordinates;switch(qe.type){case"Point":return W.point(ke,Ge,Ae);case"MultiPoint":return he<0&&(he=ke.length+he),W.point(ke[he],Ge,Ae);case"LineString":return J<0&&(J=ke.length+J),W.point(ke[J],Ge,Ae);case"Polygon":return be<0&&(be=ke.length+be),J<0&&(J=ke[be].length+J),W.point(ke[be][J],Ge,Ae);case"MultiLineString":return he<0&&(he=ke.length+he),J<0&&(J=ke[he].length+J),W.point(ke[he][J],Ge,Ae);case"MultiPolygon":return he<0&&(he=ke.length+he),be<0&&(be=ke[he].length+be),J<0&&(J=ke[he][be].length-J),W.point(ke[he][be][J],Ge,Ae)}throw new Error("geojson is invalid")},Ne.findSegment=function $(ue,Ae){if(!W.isObject(Ae=Ae||{}))throw new Error("options is invalid");var qe,fe=Ae.featureIndex||0,he=Ae.multiFeatureIndex||0,be=Ae.geometryIndex||0,J=Ae.segmentIndex||0,Ge=Ae.properties;switch(ue.type){case"FeatureCollection":fe<0&&(fe=ue.features.length+fe),Ge=Ge||ue.features[fe].properties,qe=ue.features[fe].geometry;break;case"Feature":Ge=Ge||ue.properties,qe=ue.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":qe=ue;break;default:throw new Error("geojson is invalid")}if(null===qe)return null;var ke=qe.coordinates;switch(qe.type){case"Point":case"MultiPoint":return null;case"LineString":return J<0&&(J=ke.length+J-1),W.lineString([ke[J],ke[J+1]],Ge,Ae);case"Polygon":return be<0&&(be=ke.length+be),J<0&&(J=ke[be].length+J-1),W.lineString([ke[be][J],ke[be][J+1]],Ge,Ae);case"MultiLineString":return he<0&&(he=ke.length+he),J<0&&(J=ke[he].length+J-1),W.lineString([ke[he][J],ke[he][J+1]],Ge,Ae);case"MultiPolygon":return he<0&&(he=ke.length+he),be<0&&(be=ke[he].length+be),J<0&&(J=ke[he][be].length-J-1),W.lineString([ke[he][be][J],ke[he][be][J+1]],Ge,Ae)}throw new Error("geojson is invalid")},Ne.flattenEach=V,Ne.flattenReduce=function Z(ue,Ae,fe){var he=fe;return V(ue,function(be,J,Ge){he=0===J&&0===Ge&&void 0===fe?be:Ae(he,be,J,Ge)}),he},Ne.geomEach=Pe,Ne.geomReduce=function se(ue,Ae,fe){var he=fe;return Pe(ue,function(be,J,Ge,qe,ke){he=0===J&&void 0===fe?be:Ae(he,be,J,Ge,qe,ke)}),he},Ne.lineEach=k,Ne.lineReduce=function re(ue,Ae,fe){var he=fe;return k(ue,function(be,J,Ge,qe){he=0===J&&void 0===fe?be:Ae(he,be,J,Ge,qe)}),he},Ne.propEach=Q,Ne.propReduce=function ge(ue,Ae,fe){var he=fe;return Q(ue,function(be,J){he=0===J&&void 0===fe?be:Ae(he,be,J)}),he},Ne.segmentEach=ne,Ne.segmentReduce=function oe(ue,Ae,fe){var he=fe,be=!1;return ne(ue,function(J,Ge,qe,ke,de){he=!1===be&&void 0===fe?J:Ae(he,J,Ge,qe,ke,de),be=!0}),he}},5834:(Me,Ne,q)=>{"use strict";var W=q(5203),te=q(5685),ee=te(W("String.prototype.indexOf"));Me.exports=function(ge,ce){var X=W(ge,!!ce);return"function"==typeof X&&ee(ge,".prototype.")>-1?te(X):X}},5685:(Me,Ne,q)=>{"use strict";var W=q(4444),te=q(5203),ee=te("%Function.prototype.apply%"),Q=te("%Function.prototype.call%"),ge=te("%Reflect.apply%",!0)||W.call(Q,ee),ce=te("%Object.getOwnPropertyDescriptor%",!0),X=te("%Object.defineProperty%",!0),Oe=te("%Math.max%");if(X)try{X({},"a",{value:1})}catch{X=null}Me.exports=function(V){var Z=ge(W,Q,arguments);return ce&&X&&ce(Z,"length").configurable&&X(Z,"length",{value:1+Oe(0,V.length-(arguments.length-1))}),Z};var Pe=function(){return ge(W,ee,arguments)};X?X(Me.exports,"apply",{value:Pe}):Me.exports.apply=Pe},1006:function(Me,Ne){var W;!function(te){"use strict";var ee=Math.cosh||function(V){return Math.abs(V)<1e-9?1-V:.5*(Math.exp(V)+Math.exp(-V))},Q=Math.sinh||function(V){return Math.abs(V)<1e-9?V:.5*(Math.exp(V)-Math.exp(-V))},X=function(){throw SyntaxError("Invalid Param")};function Oe(V,Z){var ne=Math.abs(V),oe=Math.abs(Z);return 0===V?Math.log(oe):0===Z?Math.log(ne):ne<3e3&&oe<3e3?.5*Math.log(V*V+Z*Z):(V/=2,Z/=2,.5*Math.log(V*V+Z*Z)+Math.LN2)}var Pe=function(V,Z){var ne={re:0,im:0};if(null==V)ne.re=ne.im=0;else if(void 0!==Z)ne.re=V,ne.im=Z;else switch(typeof V){case"object":if("im"in V&&"re"in V)ne.re=V.re,ne.im=V.im;else if("abs"in V&&"arg"in V){if(!Number.isFinite(V.abs)&&Number.isFinite(V.arg))return se.INFINITY;ne.re=V.abs*Math.cos(V.arg),ne.im=V.abs*Math.sin(V.arg)}else if("r"in V&&"phi"in V){if(!Number.isFinite(V.r)&&Number.isFinite(V.phi))return se.INFINITY;ne.re=V.r*Math.cos(V.phi),ne.im=V.r*Math.sin(V.phi)}else 2===V.length?(ne.re=V[0],ne.im=V[1]):X();break;case"string":ne.im=ne.re=0;var oe=V.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),k=1,re=0;null===oe&&X();for(var $=0;$<oe.length;$++){var ie=oe[$];" "===ie||"\t"===ie||"\n"===ie||("+"===ie?k++:"-"===ie?re++:"i"===ie||"I"===ie?(k+re===0&&X()," "===oe[$+1]||isNaN(oe[$+1])?ne.im+=parseFloat((re%2?"-":"")+"1"):(ne.im+=parseFloat((re%2?"-":"")+oe[$+1]),$++),k=re=0):((k+re===0||isNaN(ie))&&X(),"i"===oe[$+1]||"I"===oe[$+1]?(ne.im+=parseFloat((re%2?"-":"")+ie),$++):ne.re+=parseFloat((re%2?"-":"")+ie),k=re=0))}k+re>0&&X();break;case"number":ne.im=0,ne.re=V;break;default:X()}return isNaN(ne.re)||isNaN(ne.im),ne};function se(V,Z){if(!(this instanceof se))return new se(V,Z);var ne=Pe(V,Z);this.re=ne.re,this.im=ne.im}se.prototype={re:0,im:0,sign:function(){var V=this.abs();return new se(this.re/V,this.im/V)},add:function(V,Z){var ne=new se(V,Z);return this.isInfinite()&&ne.isInfinite()?se.NAN:this.isInfinite()||ne.isInfinite()?se.INFINITY:new se(this.re+ne.re,this.im+ne.im)},sub:function(V,Z){var ne=new se(V,Z);return this.isInfinite()&&ne.isInfinite()?se.NAN:this.isInfinite()||ne.isInfinite()?se.INFINITY:new se(this.re-ne.re,this.im-ne.im)},mul:function(V,Z){var ne=new se(V,Z);return this.isInfinite()&&ne.isZero()||this.isZero()&&ne.isInfinite()?se.NAN:this.isInfinite()||ne.isInfinite()?se.INFINITY:0===ne.im&&0===this.im?new se(this.re*ne.re,0):new se(this.re*ne.re-this.im*ne.im,this.re*ne.im+this.im*ne.re)},div:function(V,Z){var ne=new se(V,Z);if(this.isZero()&&ne.isZero()||this.isInfinite()&&ne.isInfinite())return se.NAN;if(this.isInfinite()||ne.isZero())return se.INFINITY;if(this.isZero()||ne.isInfinite())return se.ZERO;V=this.re,Z=this.im;var re,$,oe=ne.re,k=ne.im;return 0===k?new se(V/oe,Z/oe):Math.abs(oe)<Math.abs(k)?new se((V*($=oe/k)+Z)/(re=oe*$+k),(Z*$-V)/re):new se((V+Z*($=k/oe))/(re=k*$+oe),(Z-V*$)/re)},pow:function(V,Z){var ne=new se(V,Z);if(V=this.re,Z=this.im,ne.isZero())return se.ONE;if(0===ne.im){if(0===Z&&V>0)return new se(Math.pow(V,ne.re),0);if(0===V)switch((ne.re%4+4)%4){case 0:return new se(Math.pow(Z,ne.re),0);case 1:return new se(0,Math.pow(Z,ne.re));case 2:return new se(-Math.pow(Z,ne.re),0);case 3:return new se(0,-Math.pow(Z,ne.re))}}if(0===V&&0===Z&&ne.re>0&&ne.im>=0)return se.ZERO;var oe=Math.atan2(Z,V),k=Oe(V,Z);return V=Math.exp(ne.re*k-ne.im*oe),Z=ne.im*k+ne.re*oe,new se(V*Math.cos(Z),V*Math.sin(Z))},sqrt:function(){var oe,k,V=this.re,Z=this.im,ne=this.abs();if(V>=0){if(0===Z)return new se(Math.sqrt(V),0);oe=.5*Math.sqrt(2*(ne+V))}else oe=Math.abs(Z)/Math.sqrt(2*(ne-V));return k=V<=0?.5*Math.sqrt(2*(ne-V)):Math.abs(Z)/Math.sqrt(2*(ne+V)),new se(oe,Z<0?-k:k)},exp:function(){var V=Math.exp(this.re);return new se(V*Math.cos(this.im),V*Math.sin(this.im))},expm1:function(){var V=this.re,Z=this.im;return new se(Math.expm1(V)*Math.cos(Z)+function(V){var Z=Math.PI/4;if(-Z>V||V>Z)return Math.cos(V)-1;var ne=V*V;return ne*(ne*(ne*(ne*(ne*(ne*(ne*(ne/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(Z),Math.exp(V)*Math.sin(Z))},log:function(){var V=this.re,Z=this.im;return new se(Oe(V,Z),Math.atan2(Z,V))},abs:function(){return V=this.re,Z=this.im,ne=Math.abs(V),oe=Math.abs(Z),ne<3e3&&oe<3e3?Math.sqrt(ne*ne+oe*oe):(ne<oe?(ne=oe,oe=V/Z):oe=Z/V,ne*Math.sqrt(1+oe*oe));var V,Z,ne,oe},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var V=this.re,Z=this.im;return new se(Math.sin(V)*ee(Z),Math.cos(V)*Q(Z))},cos:function(){var V=this.re,Z=this.im;return new se(Math.cos(V)*ee(Z),-Math.sin(V)*Q(Z))},tan:function(){var V=2*this.re,Z=2*this.im,ne=Math.cos(V)+ee(Z);return new se(Math.sin(V)/ne,Q(Z)/ne)},cot:function(){var V=2*this.re,Z=2*this.im,ne=Math.cos(V)-ee(Z);return new se(-Math.sin(V)/ne,Q(Z)/ne)},sec:function(){var V=this.re,Z=this.im,ne=.5*ee(2*Z)+.5*Math.cos(2*V);return new se(Math.cos(V)*ee(Z)/ne,Math.sin(V)*Q(Z)/ne)},csc:function(){var V=this.re,Z=this.im,ne=.5*ee(2*Z)-.5*Math.cos(2*V);return new se(Math.sin(V)*ee(Z)/ne,-Math.cos(V)*Q(Z)/ne)},asin:function(){var V=this.re,Z=this.im,ne=new se(Z*Z-V*V+1,-2*V*Z).sqrt(),oe=new se(ne.re-Z,ne.im+V).log();return new se(oe.im,-oe.re)},acos:function(){var V=this.re,Z=this.im,ne=new se(Z*Z-V*V+1,-2*V*Z).sqrt(),oe=new se(ne.re-Z,ne.im+V).log();return new se(Math.PI/2-oe.im,oe.re)},atan:function(){var V=this.re,Z=this.im;if(0===V){if(1===Z)return new se(0,1/0);if(-1===Z)return new se(0,-1/0)}var ne=V*V+(1-Z)*(1-Z),oe=new se((1-Z*Z-V*V)/ne,-2*V/ne).log();return new se(-.5*oe.im,.5*oe.re)},acot:function(){var V=this.re,Z=this.im;if(0===Z)return new se(Math.atan2(1,V),0);var ne=V*V+Z*Z;return 0!==ne?new se(V/ne,-Z/ne).atan():new se(0!==V?V/0:0,0!==Z?-Z/0:0).atan()},asec:function(){var V=this.re,Z=this.im;if(0===V&&0===Z)return new se(0,1/0);var ne=V*V+Z*Z;return 0!==ne?new se(V/ne,-Z/ne).acos():new se(0!==V?V/0:0,0!==Z?-Z/0:0).acos()},acsc:function(){var V=this.re,Z=this.im;if(0===V&&0===Z)return new se(Math.PI/2,1/0);var ne=V*V+Z*Z;return 0!==ne?new se(V/ne,-Z/ne).asin():new se(0!==V?V/0:0,0!==Z?-Z/0:0).asin()},sinh:function(){var V=this.re,Z=this.im;return new se(Q(V)*Math.cos(Z),ee(V)*Math.sin(Z))},cosh:function(){var V=this.re,Z=this.im;return new se(ee(V)*Math.cos(Z),Q(V)*Math.sin(Z))},tanh:function(){var V=2*this.re,Z=2*this.im,ne=ee(V)+Math.cos(Z);return new se(Q(V)/ne,Math.sin(Z)/ne)},coth:function(){var V=2*this.re,Z=2*this.im,ne=ee(V)-Math.cos(Z);return new se(Q(V)/ne,-Math.sin(Z)/ne)},csch:function(){var V=this.re,Z=this.im,ne=Math.cos(2*Z)-ee(2*V);return new se(-2*Q(V)*Math.cos(Z)/ne,2*ee(V)*Math.sin(Z)/ne)},sech:function(){var V=this.re,Z=this.im,ne=Math.cos(2*Z)+ee(2*V);return new se(2*ee(V)*Math.cos(Z)/ne,-2*Q(V)*Math.sin(Z)/ne)},asinh:function(){var V=this.im;this.im=-this.re,this.re=V;var Z=this.asin();return this.re=-this.im,this.im=V,V=Z.re,Z.re=-Z.im,Z.im=V,Z},acosh:function(){var V=this.acos();if(V.im<=0){var Z=V.re;V.re=-V.im,V.im=Z}else Z=V.im,V.im=-V.re,V.re=Z;return V},atanh:function(){var V=this.re,Z=this.im,ne=V>1&&0===Z,oe=1-V,k=1+V,re=oe*oe+Z*Z,$=0!==re?new se((k*oe-Z*Z)/re,(Z*oe+k*Z)/re):new se(-1!==V?V/0:0,0!==Z?Z/0:0),ie=$.re;return $.re=Oe($.re,$.im)/2,$.im=Math.atan2($.im,ie)/2,ne&&($.im=-$.im),$},acoth:function(){var V=this.re,Z=this.im;if(0===V&&0===Z)return new se(0,Math.PI/2);var ne=V*V+Z*Z;return 0!==ne?new se(V/ne,-Z/ne).atanh():new se(0!==V?V/0:0,0!==Z?-Z/0:0).atanh()},acsch:function(){var V=this.re,Z=this.im;if(0===Z)return new se(0!==V?Math.log(V+Math.sqrt(V*V+1)):1/0,0);var ne=V*V+Z*Z;return 0!==ne?new se(V/ne,-Z/ne).asinh():new se(0!==V?V/0:0,0!==Z?-Z/0:0).asinh()},asech:function(){var V=this.re,Z=this.im;if(this.isZero())return se.INFINITY;var ne=V*V+Z*Z;return 0!==ne?new se(V/ne,-Z/ne).acosh():new se(0!==V?V/0:0,0!==Z?-Z/0:0).acosh()},inverse:function(){if(this.isZero())return se.INFINITY;if(this.isInfinite())return se.ZERO;var V=this.re,Z=this.im,ne=V*V+Z*Z;return new se(V/ne,-Z/ne)},conjugate:function(){return new se(this.re,-this.im)},neg:function(){return new se(-this.re,-this.im)},ceil:function(V){return V=Math.pow(10,V||0),new se(Math.ceil(this.re*V)/V,Math.ceil(this.im*V)/V)},floor:function(V){return V=Math.pow(10,V||0),new se(Math.floor(this.re*V)/V,Math.floor(this.im*V)/V)},round:function(V){return V=Math.pow(10,V||0),new se(Math.round(this.re*V)/V,Math.round(this.im*V)/V)},equals:function(V,Z){var ne=new se(V,Z);return Math.abs(ne.re-this.re)<=se.EPSILON&&Math.abs(ne.im-this.im)<=se.EPSILON},clone:function(){return new se(this.re,this.im)},toString:function(){var V=this.re,Z=this.im,ne="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(V)<se.EPSILON&&(V=0),Math.abs(Z)<se.EPSILON&&(Z=0),0===Z?ne+V:(0!==V?(ne+=V,ne+=" ",Z<0?(Z=-Z,ne+="-"):ne+="+",ne+=" "):Z<0&&(Z=-Z,ne+="-"),1!==Z&&(ne+=Z),ne+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},se.ZERO=new se(0,0),se.ONE=new se(1,0),se.I=new se(0,1),se.PI=new se(Math.PI,0),se.E=new se(Math.E,0),se.INFINITY=new se(1/0,1/0),se.NAN=new se(NaN,NaN),se.EPSILON=1e-15,void 0!==(W=function(){return se}.apply(Ne,[]))&&(Me.exports=W)}()},1335:(Me,Ne,q)=>{"use strict";var W=q(3156),te=q(7253),ee=q(3870),Q=q(7563).orient2d;function ge(fe,he,be){he=Math.max(0,void 0===he?2:he),be=be||0;var J=function oe(fe){for(var he=fe[0],be=fe[0],J=fe[0],Ge=fe[0],qe=0;qe<fe.length;qe++){var ke=fe[qe];ke[0]<he[0]&&(he=ke),ke[0]>J[0]&&(J=ke),ke[1]<be[1]&&(be=ke),ke[1]>Ge[1]&&(Ge=ke)}var de=[he,be,J,Ge],wt=de.slice();for(qe=0;qe<fe.length;qe++)ee(fe[qe],de)||wt.push(fe[qe]);return function Ae(fe){fe.sort(ue);for(var he=[],be=0;be<fe.length;be++){for(;he.length>=2&&V(he[he.length-2],he[he.length-1],fe[be])<=0;)he.pop();he.push(fe[be])}for(var J=[],Ge=fe.length-1;Ge>=0;Ge--){for(;J.length>=2&&V(J[J.length-2],J[J.length-1],fe[Ge])<=0;)J.pop();J.push(fe[Ge])}return J.pop(),he.pop(),he.concat(J)}(wt)}(fe),Ge=new W(16);Ge.toBBox=function(Bt){return{minX:Bt[0],minY:Bt[1],maxX:Bt[0],maxY:Bt[1]}},Ge.compareMinX=function(Bt,_t){return Bt[0]-_t[0]},Ge.compareMinY=function(Bt,_t){return Bt[1]-_t[1]},Ge.load(fe);for(var de,qe=[],ke=0;ke<J.length;ke++){var wt=J[ke];Ge.remove(wt),de=k(wt,de),qe.push(de)}var gt=new W(16);for(ke=0;ke<qe.length;ke++)gt.insert(ne(qe[ke]));for(var De=he*he,nt=be*be;qe.length;){var Be=qe.shift(),rt=Be.p,st=Be.next.p,Fe=re(rt,st);if(!(Fe<nt)){var St=Fe/De;(wt=ce(Ge,Be.prev.p,rt,st,Be.next.next.p,St,gt))&&Math.min(re(wt,rt),re(wt,st))<=St&&(qe.push(Be),qe.push(k(wt,Be)),Ge.remove(wt),gt.remove(Be),gt.insert(ne(Be)),gt.insert(ne(Be.next)))}}Be=de;var At=[];do{At.push(Be.p),Be=Be.next}while(Be!==de);return At.push(Be.p),At}function ce(fe,he,be,J,Ge,qe,ke){for(var de=new te([],X),wt=fe.data;wt;){for(var gt=0;gt<wt.children.length;gt++){var De=wt.children[gt],nt=wt.leaf?$(De,be,J):Oe(be,J,De);nt>qe||de.push({node:De,dist:nt})}for(;de.length&&!de.peek().node.children;){var Be=de.pop(),rt=Be.node,st=$(rt,he,be),Fe=$(rt,J,Ge);if(Be.dist<st&&Be.dist<Fe&&se(be,rt,ke)&&se(J,rt,ke))return rt}(wt=de.pop())&&(wt=wt.node)}return null}function X(fe,he){return fe.dist-he.dist}function Oe(fe,he,be){if(Pe(fe,be)||Pe(he,be))return 0;var J=ie(fe[0],fe[1],he[0],he[1],be.minX,be.minY,be.maxX,be.minY);if(0===J)return 0;var Ge=ie(fe[0],fe[1],he[0],he[1],be.minX,be.minY,be.minX,be.maxY);if(0===Ge)return 0;var qe=ie(fe[0],fe[1],he[0],he[1],be.maxX,be.minY,be.maxX,be.maxY);if(0===qe)return 0;var ke=ie(fe[0],fe[1],he[0],he[1],be.minX,be.maxY,be.maxX,be.maxY);return 0===ke?0:Math.min(J,Ge,qe,ke)}function Pe(fe,he){return fe[0]>=he.minX&&fe[0]<=he.maxX&&fe[1]>=he.minY&&fe[1]<=he.maxY}function se(fe,he,be){for(var J=Math.min(fe[0],he[0]),Ge=Math.min(fe[1],he[1]),qe=Math.max(fe[0],he[0]),ke=Math.max(fe[1],he[1]),de=be.search({minX:J,minY:Ge,maxX:qe,maxY:ke}),wt=0;wt<de.length;wt++)if(Z(de[wt].p,de[wt].next.p,fe,he))return!1;return!0}function V(fe,he,be){return Q(fe[0],fe[1],he[0],he[1],be[0],be[1])}function Z(fe,he,be,J){return fe!==J&&he!==be&&V(fe,he,be)>0!=V(fe,he,J)>0&&V(be,J,fe)>0!=V(be,J,he)>0}function ne(fe){var he=fe.p,be=fe.next.p;return fe.minX=Math.min(he[0],be[0]),fe.minY=Math.min(he[1],be[1]),fe.maxX=Math.max(he[0],be[0]),fe.maxY=Math.max(he[1],be[1]),fe}function k(fe,he){var be={p:fe,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return he?(be.next=he.next,be.prev=he,he.next.prev=be,he.next=be):(be.prev=be,be.next=be),be}function re(fe,he){var be=fe[0]-he[0],J=fe[1]-he[1];return be*be+J*J}function $(fe,he,be){var J=he[0],Ge=he[1],qe=be[0]-J,ke=be[1]-Ge;if(0!==qe||0!==ke){var de=((fe[0]-J)*qe+(fe[1]-Ge)*ke)/(qe*qe+ke*ke);de>1?(J=be[0],Ge=be[1]):de>0&&(J+=qe*de,Ge+=ke*de)}return(qe=fe[0]-J)*qe+(ke=fe[1]-Ge)*ke}function ie(fe,he,be,J,Ge,qe,ke,de){var cr,sr,rr,vr,wt=be-fe,gt=J-he,De=ke-Ge,nt=de-qe,Be=fe-Ge,rt=he-qe,st=wt*wt+gt*gt,Fe=wt*De+gt*nt,St=De*De+nt*nt,At=wt*Be+gt*rt,Bt=De*Be+nt*rt,_t=st*St-Fe*Fe,fr=_t,Yt=_t;0===_t?(sr=0,fr=1,vr=Bt,Yt=St):(vr=st*Bt-Fe*At,(sr=Fe*Bt-St*At)<0?(sr=0,vr=Bt,Yt=St):sr>fr&&(sr=fr,vr=Bt+Fe,Yt=St)),vr<0?(vr=0,-At<0?sr=0:-At>st?sr=fr:(sr=-At,fr=st)):vr>Yt&&(vr=Yt,-At+Fe<0?sr=0:-At+Fe>st?sr=fr:(sr=-At+Fe,fr=st));var Ar=(1-(rr=0===vr?0:vr/Yt))*Ge+rr*ke-((1-(cr=0===sr?0:sr/fr))*fe+cr*be),pt=(1-rr)*qe+rr*de-((1-cr)*he+cr*J);return Ar*Ar+pt*pt}function ue(fe,he){return fe[0]===he[0]?fe[1]-he[1]:fe[0]-he[0]}te.default&&(te=te.default),Me.exports=ge,Me.exports.default=ge},3156:function(Me){Me.exports=function(){"use strict";function Ne(k,re,$,ie,ue){!function Ae(fe,he,be,J,Ge){for(;J>be;){if(J-be>600){var qe=J-be+1,ke=he-be+1,de=Math.log(qe),wt=.5*Math.exp(2*de/3),gt=.5*Math.sqrt(de*wt*(qe-wt)/qe)*(ke-qe/2<0?-1:1);Ae(fe,he,Math.max(be,Math.floor(he-ke*wt/qe+gt)),Math.min(J,Math.floor(he+(qe-ke)*wt/qe+gt)),Ge)}var Be=fe[he],rt=be,st=J;for(q(fe,be,he),Ge(fe[J],Be)>0&&q(fe,be,J);rt<st;){for(q(fe,rt,st),rt++,st--;Ge(fe[rt],Be)<0;)rt++;for(;Ge(fe[st],Be)>0;)st--}0===Ge(fe[be],Be)?q(fe,be,st):q(fe,++st,J),st<=he&&(be=st+1),he<=st&&(J=st-1)}}(k,re,$||0,ie||k.length-1,ue||W)}function q(k,re,$){var ie=k[re];k[re]=k[$],k[$]=ie}function W(k,re){return k<re?-1:k>re?1:0}var te=function(k){void 0===k&&(k=9),this._maxEntries=Math.max(4,k),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function ee(k,re,$){if(!$)return re.indexOf(k);for(var ie=0;ie<re.length;ie++)if($(k,re[ie]))return ie;return-1}function Q(k,re){ge(k,0,k.children.length,re,k)}function ge(k,re,$,ie,ue){ue||(ue=ne(null)),ue.minX=1/0,ue.minY=1/0,ue.maxX=-1/0,ue.maxY=-1/0;for(var Ae=re;Ae<$;Ae++){var fe=k.children[Ae];ce(ue,k.leaf?ie(fe):fe)}return ue}function ce(k,re){return k.minX=Math.min(k.minX,re.minX),k.minY=Math.min(k.minY,re.minY),k.maxX=Math.max(k.maxX,re.maxX),k.maxY=Math.max(k.maxY,re.maxY),k}function X(k,re){return k.minX-re.minX}function Oe(k,re){return k.minY-re.minY}function Pe(k){return(k.maxX-k.minX)*(k.maxY-k.minY)}function se(k){return k.maxX-k.minX+(k.maxY-k.minY)}function V(k,re){return k.minX<=re.minX&&k.minY<=re.minY&&re.maxX<=k.maxX&&re.maxY<=k.maxY}function Z(k,re){return re.minX<=k.maxX&&re.minY<=k.maxY&&re.maxX>=k.minX&&re.maxY>=k.minY}function ne(k){return{children:k,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function oe(k,re,$,ie,ue){for(var Ae=[re,$];Ae.length;)if(!(($=Ae.pop())-(re=Ae.pop())<=ie)){var fe=re+Math.ceil(($-re)/ie/2)*ie;Ne(k,fe,re,$,ue),Ae.push(re,fe,fe,$)}}return te.prototype.all=function(){return this._all(this.data,[])},te.prototype.search=function(k){var re=this.data,$=[];if(!Z(k,re))return $;for(var ie=this.toBBox,ue=[];re;){for(var Ae=0;Ae<re.children.length;Ae++){var fe=re.children[Ae],he=re.leaf?ie(fe):fe;Z(k,he)&&(re.leaf?$.push(fe):V(k,he)?this._all(fe,$):ue.push(fe))}re=ue.pop()}return $},te.prototype.collides=function(k){var re=this.data;if(!Z(k,re))return!1;for(var $=[];re;){for(var ie=0;ie<re.children.length;ie++){var ue=re.children[ie],Ae=re.leaf?this.toBBox(ue):ue;if(Z(k,Ae)){if(re.leaf||V(k,Ae))return!0;$.push(ue)}}re=$.pop()}return!1},te.prototype.load=function(k){if(!k||!k.length)return this;if(k.length<this._minEntries){for(var re=0;re<k.length;re++)this.insert(k[re]);return this}var $=this._build(k.slice(),0,k.length-1,0);if(this.data.children.length)if(this.data.height===$.height)this._splitRoot(this.data,$);else{if(this.data.height<$.height){var ie=this.data;this.data=$,$=ie}this._insert($,this.data.height-$.height-1,!0)}else this.data=$;return this},te.prototype.insert=function(k){return k&&this._insert(k,this.data.height-1),this},te.prototype.clear=function(){return this.data=ne([]),this},te.prototype.remove=function(k,re){if(!k)return this;for(var $,ie,ue,Ae=this.data,fe=this.toBBox(k),he=[],be=[];Ae||he.length;){if(Ae||(Ae=he.pop(),ie=he[he.length-1],$=be.pop(),ue=!0),Ae.leaf){var J=ee(k,Ae.children,re);if(-1!==J)return Ae.children.splice(J,1),he.push(Ae),this._condense(he),this}ue||Ae.leaf||!V(Ae,fe)?ie?($++,Ae=ie.children[$],ue=!1):Ae=null:(he.push(Ae),be.push($),$=0,ie=Ae,Ae=Ae.children[0])}return this},te.prototype.toBBox=function(k){return k},te.prototype.compareMinX=function(k,re){return k.minX-re.minX},te.prototype.compareMinY=function(k,re){return k.minY-re.minY},te.prototype.toJSON=function(){return this.data},te.prototype.fromJSON=function(k){return this.data=k,this},te.prototype._all=function(k,re){for(var $=[];k;)k.leaf?re.push.apply(re,k.children):$.push.apply($,k.children),k=$.pop();return re},te.prototype._build=function(k,re,$,ie){var ue,Ae=$-re+1,fe=this._maxEntries;if(Ae<=fe)return Q(ue=ne(k.slice(re,$+1)),this.toBBox),ue;ie||(ie=Math.ceil(Math.log(Ae)/Math.log(fe)),fe=Math.ceil(Ae/Math.pow(fe,ie-1))),(ue=ne([])).leaf=!1,ue.height=ie;var he=Math.ceil(Ae/fe),be=he*Math.ceil(Math.sqrt(fe));oe(k,re,$,be,this.compareMinX);for(var J=re;J<=$;J+=be){var Ge=Math.min(J+be-1,$);oe(k,J,Ge,he,this.compareMinY);for(var qe=J;qe<=Ge;qe+=he){var ke=Math.min(qe+he-1,Ge);ue.children.push(this._build(k,qe,ke,ie-1))}}return Q(ue,this.toBBox),ue},te.prototype._chooseSubtree=function(k,re,$,ie){for(;ie.push(re),!re.leaf&&ie.length-1!==$;){for(var ue=1/0,Ae=1/0,fe=void 0,he=0;he<re.children.length;he++){var be=re.children[he],J=Pe(be),Ge=(qe=k,ke=be,(Math.max(ke.maxX,qe.maxX)-Math.min(ke.minX,qe.minX))*(Math.max(ke.maxY,qe.maxY)-Math.min(ke.minY,qe.minY))-J);Ge<Ae?(Ae=Ge,ue=J<ue?J:ue,fe=be):Ge===Ae&&J<ue&&(ue=J,fe=be)}re=fe||re.children[0]}var qe,ke;return re},te.prototype._insert=function(k,re,$){var ie=$?k:this.toBBox(k),ue=[],Ae=this._chooseSubtree(ie,this.data,re,ue);for(Ae.children.push(k),ce(Ae,ie);re>=0&&ue[re].children.length>this._maxEntries;)this._split(ue,re),re--;this._adjustParentBBoxes(ie,ue,re)},te.prototype._split=function(k,re){var $=k[re],ie=$.children.length,ue=this._minEntries;this._chooseSplitAxis($,ue,ie);var Ae=this._chooseSplitIndex($,ue,ie),fe=ne($.children.splice(Ae,$.children.length-Ae));fe.height=$.height,fe.leaf=$.leaf,Q($,this.toBBox),Q(fe,this.toBBox),re?k[re-1].children.push(fe):this._splitRoot($,fe)},te.prototype._splitRoot=function(k,re){this.data=ne([k,re]),this.data.height=k.height+1,this.data.leaf=!1,Q(this.data,this.toBBox)},te.prototype._chooseSplitIndex=function(k,re,$){for(var ie,ue,Ae,fe,he,be,J,Ge=1/0,qe=1/0,ke=re;ke<=$-re;ke++){var de=ge(k,0,ke,this.toBBox),wt=ge(k,ke,$,this.toBBox),gt=(ue=de,Ae=wt,void 0,void 0,void 0,void 0,fe=Math.max(ue.minX,Ae.minX),he=Math.max(ue.minY,Ae.minY),be=Math.min(ue.maxX,Ae.maxX),J=Math.min(ue.maxY,Ae.maxY),Math.max(0,be-fe)*Math.max(0,J-he)),De=Pe(de)+Pe(wt);gt<Ge?(Ge=gt,ie=ke,qe=De<qe?De:qe):gt===Ge&&De<qe&&(qe=De,ie=ke)}return ie||$-re},te.prototype._chooseSplitAxis=function(k,re,$){var ie=k.leaf?this.compareMinX:X,ue=k.leaf?this.compareMinY:Oe;this._allDistMargin(k,re,$,ie)<this._allDistMargin(k,re,$,ue)&&k.children.sort(ie)},te.prototype._allDistMargin=function(k,re,$,ie){k.children.sort(ie);for(var ue=this.toBBox,Ae=ge(k,0,re,ue),fe=ge(k,$-re,$,ue),he=se(Ae)+se(fe),be=re;be<$-re;be++){var J=k.children[be];ce(Ae,k.leaf?ue(J):J),he+=se(Ae)}for(var Ge=$-re-1;Ge>=re;Ge--){var qe=k.children[Ge];ce(fe,k.leaf?ue(qe):qe),he+=se(fe)}return he},te.prototype._adjustParentBBoxes=function(k,re,$){for(var ie=$;ie>=0;ie--)ce(re[ie],k)},te.prototype._condense=function(k){for(var re=k.length-1,$=void 0;re>=0;re--)0===k[re].children.length?re>0?($=k[re-1].children).splice($.indexOf(k[re]),1):this.clear():Q(k[re],this.toBBox)},te}()},6952:(Me,Ne,q)=>{var W=q(1356),te=q(3407),ee=q(2e3),Q=q(2342),ge=q(9235),ce=q(2374),X=Date.prototype.getTime;function Pe(Z){return null==Z}function se(Z){return!(!Z||"object"!=typeof Z||"number"!=typeof Z.length||"function"!=typeof Z.copy||"function"!=typeof Z.slice||Z.length>0&&"number"!=typeof Z[0])}Me.exports=function Oe(Z,ne,oe){var k=oe||{};return!!(k.strict?ee(Z,ne):Z===ne)||(!Z||!ne||"object"!=typeof Z&&"object"!=typeof ne?k.strict?ee(Z,ne):Z==ne:function V(Z,ne,oe){var k,re;if(typeof Z!=typeof ne||Pe(Z)||Pe(ne)||Z.prototype!==ne.prototype||te(Z)!==te(ne))return!1;var $=Q(Z),ie=Q(ne);if($!==ie)return!1;if($||ie)return Z.source===ne.source&&ge(Z)===ge(ne);if(ce(Z)&&ce(ne))return X.call(Z)===X.call(ne);var ue=se(Z),Ae=se(ne);if(ue!==Ae)return!1;if(ue||Ae){if(Z.length!==ne.length)return!1;for(k=0;k<Z.length;k++)if(Z[k]!==ne[k])return!1;return!0}if(typeof Z!=typeof ne)return!1;try{var fe=W(Z),he=W(ne)}catch{return!1}if(fe.length!==he.length)return!1;for(fe.sort(),he.sort(),k=fe.length-1;k>=0;k--)if(fe[k]!=he[k])return!1;for(k=fe.length-1;k>=0;k--)if(!Oe(Z[re=fe[k]],ne[re],oe))return!1;return!0}(Z,ne,k))}},2358:(Me,Ne,q)=>{"use strict";var W=q(1356),te="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),ee=Object.prototype.toString,Q=Array.prototype.concat,ge=Object.defineProperty,X=q(7027)(),Oe=ge&&X,Pe=function(V,Z,ne,oe){if(Z in V)if(!0===oe){if(V[Z]===ne)return}else if(!function(V){return"function"==typeof V&&"[object Function]"===ee.call(V)}(oe)||!oe())return;Oe?ge(V,Z,{configurable:!0,enumerable:!1,value:ne,writable:!0}):V[Z]=ne},se=function(V,Z){var ne=arguments.length>2?arguments[2]:{},oe=W(Z);te&&(oe=Q.call(oe,Object.getOwnPropertySymbols(Z)));for(var k=0;k<oe.length;k+=1)Pe(V,oe[k],Z[oe[k]],ne[oe[k]])};se.supportsDescriptors=!!Oe,Me.exports=se},1817:Me=>{function Ne(q,W,te,ee){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(q,W,te,ee)}Ne.prototype.run=function(q,W,te,ee){this._init(q,W,te,ee);for(var Q=0;Q<this._datasetLength;Q++)if(1!==this._visited[Q]){this._visited[Q]=1;var ge=this._regionQuery(Q);if(ge.length<this.minPts)this.noise.push(Q);else{var ce=this.clusters.length;this.clusters.push([]),this._addToCluster(Q,ce),this._expandCluster(ce,ge)}}return this.clusters},Ne.prototype._init=function(q,W,te,ee){if(q){if(!(q instanceof Array))throw Error("Dataset must be of type array, "+typeof q+" given");this.dataset=q,this.clusters=[],this.noise=[],this._datasetLength=q.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}W&&(this.epsilon=W),te&&(this.minPts=te),ee&&(this.distance=ee)},Ne.prototype._expandCluster=function(q,W){for(var te=0;te<W.length;te++){var ee=W[te];if(1!==this._visited[ee]){this._visited[ee]=1;var Q=this._regionQuery(ee);Q.length>=this.minPts&&(W=this._mergeArrays(W,Q))}1!==this._assigned[ee]&&this._addToCluster(ee,q)}},Ne.prototype._addToCluster=function(q,W){this.clusters[W].push(q),this._assigned[q]=1},Ne.prototype._regionQuery=function(q){for(var W=[],te=0;te<this._datasetLength;te++)this.distance(this.dataset[q],this.dataset[te])<this.epsilon&&W.push(te);return W},Ne.prototype._mergeArrays=function(q,W){for(var te=W.length,ee=0;ee<te;ee++){var Q=W[ee];q.indexOf(Q)<0&&q.push(Q)}return q},Ne.prototype._euclideanDistance=function(q,W){for(var te=0,ee=Math.min(q.length,W.length);ee--;)te+=(q[ee]-W[ee])*(q[ee]-W[ee]);return Math.sqrt(te)},Me.exports&&(Me.exports=Ne)},4273:Me=>{function Ne(q,W,te){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(q,W,te)}Ne.prototype.init=function(q,W,te){this.assignments=[],this.centroids=[],typeof q<"u"&&(this.dataset=q),typeof W<"u"&&(this.k=W),typeof te<"u"&&(this.distance=te)},Ne.prototype.run=function(q,W){this.init(q,W);for(var te=this.dataset.length,ee=0;ee<this.k;ee++)this.centroids[ee]=this.randomCentroid();for(var Q=!0;Q;){Q=this.assign();for(var ge=0;ge<this.k;ge++){for(var ce=new Array(se),X=0,Oe=0;Oe<se;Oe++)ce[Oe]=0;for(var Pe=0;Pe<te;Pe++){var se=this.dataset[Pe].length;if(ge===this.assignments[Pe]){for(Oe=0;Oe<se;Oe++)ce[Oe]+=this.dataset[Pe][Oe];X++}}if(X>0){for(Oe=0;Oe<se;Oe++)ce[Oe]/=X;this.centroids[ge]=ce}else this.centroids[ge]=this.randomCentroid(),Q=!0}}return this.getClusters()},Ne.prototype.randomCentroid=function(){var W,te,q=this.dataset.length-1;do{te=Math.round(Math.random()*q),W=this.dataset[te]}while(this.centroids.indexOf(W)>=0);return W},Ne.prototype.assign=function(){for(var te,q=!1,W=this.dataset.length,ee=0;ee<W;ee++)(te=this.argmin(this.dataset[ee],this.centroids,this.distance))!=this.assignments[ee]&&(this.assignments[ee]=te,q=!0);return q},Ne.prototype.getClusters=function(){for(var W,q=new Array(this.k),te=0;te<this.assignments.length;te++)typeof q[W=this.assignments[te]]>"u"&&(q[W]=[]),q[W].push(te);return q},Ne.prototype.argmin=function(q,W,te){for(var ce,ee=Number.MAX_VALUE,Q=0,ge=W.length,X=0;X<ge;X++)(ce=te(q,W[X]))<ee&&(ee=ce,Q=X);return Q},Ne.prototype.distance=function(q,W){for(var te=0,ee=Math.min(q.length,W.length);ee--;){var Q=q[ee]-W[ee];te+=Q*Q}return Math.sqrt(te)},Me.exports&&(Me.exports=Ne)},8680:(Me,Ne,q)=>{if(Me.exports)var W=q(8759);function te(ee,Q,ge,ce){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(ee,Q,ge,ce)}te.prototype.run=function(ee,Q,ge,ce){this._init(ee,Q,ge,ce);for(var X=0,Oe=this.dataset.length;X<Oe;X++)if(1!==this._processed[X]){this._processed[X]=1,this.clusters.push([X]);var Pe=this.clusters.length-1;this._orderedList.push(X);var se=new W(null,null,"asc"),V=this._regionQuery(X);void 0!==this._distanceToCore(X)&&(this._updateQueue(X,V,se),this._expandCluster(Pe,se))}return this.clusters},te.prototype.getReachabilityPlot=function(){for(var ee=[],Q=0,ge=this._orderedList.length;Q<ge;Q++){var ce=this._orderedList[Q];ee.push([ce,this._reachability[ce]])}return ee},te.prototype._init=function(ee,Q,ge,ce){if(ee){if(!(ee instanceof Array))throw Error("Dataset must be of type array, "+typeof ee+" given");this.dataset=ee,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}Q&&(this.epsilon=Q),ge&&(this.minPts=ge),ce&&(this.distance=ce)},te.prototype._updateQueue=function(ee,Q,ge){var ce=this;this._coreDistance=this._distanceToCore(ee),Q.forEach(function(X){if(void 0===ce._processed[X]){var Oe=ce.distance(ce.dataset[ee],ce.dataset[X]),Pe=Math.max(ce._coreDistance,Oe);void 0===ce._reachability[X]?(ce._reachability[X]=Pe,ge.insert(X,Pe)):Pe<ce._reachability[X]&&(ce._reachability[X]=Pe,ge.remove(X),ge.insert(X,Pe))}})},te.prototype._expandCluster=function(ee,Q){for(var ge=Q.getElements(),ce=0,X=ge.length;ce<X;ce++){var Oe=ge[ce];if(void 0===this._processed[Oe]){var Pe=this._regionQuery(Oe);this._processed[Oe]=1,this.clusters[ee].push(Oe),this._orderedList.push(Oe),void 0!==this._distanceToCore(Oe)&&(this._updateQueue(Oe,Pe,Q),this._expandCluster(ee,Q))}}},te.prototype._distanceToCore=function(ee){for(var Q=this.epsilon,ge=0;ge<Q;ge++)if(this._regionQuery(ee,ge).length>=this.minPts)return ge},te.prototype._regionQuery=function(ee,Q){Q=Q||this.epsilon;for(var ge=[],ce=0,X=this.dataset.length;ce<X;ce++)this.distance(this.dataset[ee],this.dataset[ce])<Q&&ge.push(ce);return ge},te.prototype._euclideanDistance=function(ee,Q){for(var ge=0,ce=Math.min(ee.length,Q.length);ce--;)ge+=(ee[ce]-Q[ce])*(ee[ce]-Q[ce]);return Math.sqrt(ge)},Me.exports&&(Me.exports=te)},8759:Me=>{function Ne(q,W,te){this._queue=[],this._priorities=[],this._sorting="desc",this._init(q,W,te)}Ne.prototype.insert=function(q,W){for(var te=this._queue.length,ee=te;ee--;){var Q=this._priorities[ee];"desc"===this._sorting?W>Q&&(te=ee):W<Q&&(te=ee)}this._insertAt(q,W,te)},Ne.prototype.remove=function(q){for(var W=this._queue.length;W--;)if(q===this._queue[W]){this._queue.splice(W,1),this._priorities.splice(W,1);break}},Ne.prototype.forEach=function(q){this._queue.forEach(q)},Ne.prototype.getElements=function(){return this._queue},Ne.prototype.getElementPriority=function(q){return this._priorities[q]},Ne.prototype.getPriorities=function(){return this._priorities},Ne.prototype.getElementsWithPriorities=function(){for(var q=[],W=0,te=this._queue.length;W<te;W++)q.push([this._queue[W],this._priorities[W]]);return q},Ne.prototype._init=function(q,W,te){if(q&&W){if(this._queue=[],this._priorities=[],q.length!==W.length)throw new Error("Arrays must have the same length");for(var ee=0;ee<q.length;ee++)this.insert(q[ee],W[ee])}te&&(this._sorting=te)},Ne.prototype._insertAt=function(q,W,te){this._queue.length===te?(this._queue.push(q),this._priorities.push(W)):(this._queue.splice(te,0,q),this._priorities.splice(te,0,W))},Me.exports&&(Me.exports=Ne)},7470:(Me,Ne,q)=>{Me.exports&&(Me.exports={DBSCAN:q(1817),KMEANS:q(4273),OPTICS:q(8680),PriorityQueue:q(8759)})},5469:Me=>{"use strict";function Ne(De,nt,Be){Be=Be||2;var At,Bt,_t,cr,sr,rr,vr,rt=nt&&nt.length,st=rt?nt[0]*Be:De.length,Fe=q(De,0,st,Be,!0),St=[];if(!Fe||Fe.next===Fe.prev)return St;if(rt&&(Fe=function X(De,nt,Be,rt){var Fe,St,_t,st=[];for(Fe=0,St=nt.length;Fe<St;Fe++)(_t=q(De,nt[Fe]*rt,Fe<St-1?nt[Fe+1]*rt:De.length,rt,!1))===_t.next&&(_t.steiner=!0),st.push(k(_t));for(st.sort(Oe),Fe=0;Fe<st.length;Fe++)Be=Pe(st[Fe],Be);return Be}(De,nt,Fe,Be)),De.length>80*Be){At=_t=De[0],Bt=cr=De[1];for(var fr=Be;fr<st;fr+=Be)(sr=De[fr])<At&&(At=sr),(rr=De[fr+1])<Bt&&(Bt=rr),sr>_t&&(_t=sr),rr>cr&&(cr=rr);vr=0!==(vr=Math.max(_t-At,cr-Bt))?32767/vr:0}return te(Fe,St,Be,At,Bt,vr,0),St}function q(De,nt,Be,rt,st){var Fe,St;if(st===gt(De,nt,Be,rt)>0)for(Fe=nt;Fe<Be;Fe+=rt)St=ke(Fe,De[Fe],De[Fe+1],St);else for(Fe=Be-rt;Fe>=nt;Fe-=rt)St=ke(Fe,De[Fe],De[Fe+1],St);return St&&ue(St,St.next)&&(de(St),St=St.next),St}function W(De,nt){if(!De)return De;nt||(nt=De);var rt,Be=De;do{if(rt=!1,Be.steiner||!ue(Be,Be.next)&&0!==ie(Be.prev,Be,Be.next))Be=Be.next;else{if(de(Be),(Be=nt=Be.prev)===Be.next)break;rt=!0}}while(rt||Be!==nt);return nt}function te(De,nt,Be,rt,st,Fe,St){if(De){!St&&Fe&&function Z(De,nt,Be,rt){var st=De;do{0===st.z&&(st.z=oe(st.x,st.y,nt,Be,rt)),st.prevZ=st.prev,st.nextZ=st.next,st=st.next}while(st!==De);st.prevZ.nextZ=null,st.prevZ=null,function ne(De){var nt,Be,rt,st,Fe,St,At,Bt,_t=1;do{for(Be=De,De=null,Fe=null,St=0;Be;){for(St++,rt=Be,At=0,nt=0;nt<_t&&(At++,rt=rt.nextZ);nt++);for(Bt=_t;At>0||Bt>0&&rt;)0!==At&&(0===Bt||!rt||Be.z<=rt.z)?(st=Be,Be=Be.nextZ,At--):(st=rt,rt=rt.nextZ,Bt--),Fe?Fe.nextZ=st:De=st,st.prevZ=Fe,Fe=st;Be=rt}Fe.nextZ=null,_t*=2}while(St>1)}(st)}(De,rt,st,Fe);for(var Bt,_t,At=De;De.prev!==De.next;)if(Bt=De.prev,_t=De.next,Fe?Q(De,rt,st,Fe):ee(De))nt.push(Bt.i/Be|0),nt.push(De.i/Be|0),nt.push(_t.i/Be|0),de(De),De=_t.next,At=_t.next;else if((De=_t)===At){St?1===St?te(De=ge(W(De),nt,Be),nt,Be,rt,st,Fe,2):2===St&&ce(De,nt,Be,rt,st,Fe):te(W(De),nt,Be,rt,st,Fe,1);break}}}function ee(De){var nt=De.prev,Be=De,rt=De.next;if(ie(nt,Be,rt)>=0)return!1;for(var st=nt.x,Fe=Be.x,St=rt.x,At=nt.y,Bt=Be.y,_t=rt.y,cr=st<Fe?st<St?st:St:Fe<St?Fe:St,sr=At<Bt?At<_t?At:_t:Bt<_t?Bt:_t,rr=st>Fe?st>St?st:St:Fe>St?Fe:St,vr=At>Bt?At>_t?At:_t:Bt>_t?Bt:_t,fr=rt.next;fr!==nt;){if(fr.x>=cr&&fr.x<=rr&&fr.y>=sr&&fr.y<=vr&&re(st,At,Fe,Bt,St,_t,fr.x,fr.y)&&ie(fr.prev,fr,fr.next)>=0)return!1;fr=fr.next}return!0}function Q(De,nt,Be,rt){var st=De.prev,Fe=De,St=De.next;if(ie(st,Fe,St)>=0)return!1;for(var At=st.x,Bt=Fe.x,_t=St.x,cr=st.y,sr=Fe.y,rr=St.y,vr=At<Bt?At<_t?At:_t:Bt<_t?Bt:_t,fr=cr<sr?cr<rr?cr:rr:sr<rr?sr:rr,Yt=At>Bt?At>_t?At:_t:Bt>_t?Bt:_t,Dn=cr>sr?cr>rr?cr:rr:sr>rr?sr:rr,sn=oe(vr,fr,nt,Be,rt),Zr=oe(Yt,Dn,nt,Be,rt),pr=De.prevZ,Ar=De.nextZ;pr&&pr.z>=sn&&Ar&&Ar.z<=Zr;){if(pr.x>=vr&&pr.x<=Yt&&pr.y>=fr&&pr.y<=Dn&&pr!==st&&pr!==St&&re(At,cr,Bt,sr,_t,rr,pr.x,pr.y)&&ie(pr.prev,pr,pr.next)>=0||(pr=pr.prevZ,Ar.x>=vr&&Ar.x<=Yt&&Ar.y>=fr&&Ar.y<=Dn&&Ar!==st&&Ar!==St&&re(At,cr,Bt,sr,_t,rr,Ar.x,Ar.y)&&ie(Ar.prev,Ar,Ar.next)>=0))return!1;Ar=Ar.nextZ}for(;pr&&pr.z>=sn;){if(pr.x>=vr&&pr.x<=Yt&&pr.y>=fr&&pr.y<=Dn&&pr!==st&&pr!==St&&re(At,cr,Bt,sr,_t,rr,pr.x,pr.y)&&ie(pr.prev,pr,pr.next)>=0)return!1;pr=pr.prevZ}for(;Ar&&Ar.z<=Zr;){if(Ar.x>=vr&&Ar.x<=Yt&&Ar.y>=fr&&Ar.y<=Dn&&Ar!==st&&Ar!==St&&re(At,cr,Bt,sr,_t,rr,Ar.x,Ar.y)&&ie(Ar.prev,Ar,Ar.next)>=0)return!1;Ar=Ar.nextZ}return!0}function ge(De,nt,Be){var rt=De;do{var st=rt.prev,Fe=rt.next.next;!ue(st,Fe)&&Ae(st,rt,rt.next,Fe)&&J(st,Fe)&&J(Fe,st)&&(nt.push(st.i/Be|0),nt.push(rt.i/Be|0),nt.push(Fe.i/Be|0),de(rt),de(rt.next),rt=De=Fe),rt=rt.next}while(rt!==De);return W(rt)}function ce(De,nt,Be,rt,st,Fe){var St=De;do{for(var At=St.next.next;At!==St.prev;){if(St.i!==At.i&&$(St,At)){var Bt=qe(St,At);return St=W(St,St.next),Bt=W(Bt,Bt.next),te(St,nt,Be,rt,st,Fe,0),void te(Bt,nt,Be,rt,st,Fe,0)}At=At.next}St=St.next}while(St!==De)}function Oe(De,nt){return De.x-nt.x}function Pe(De,nt){var Be=function se(De,nt){var St,Be=nt,rt=De.x,st=De.y,Fe=-1/0;do{if(st<=Be.y&&st>=Be.next.y&&Be.next.y!==Be.y){var At=Be.x+(st-Be.y)*(Be.next.x-Be.x)/(Be.next.y-Be.y);if(At<=rt&&At>Fe&&(Fe=At,St=Be.x<Be.next.x?Be:Be.next,At===rt))return St}Be=Be.next}while(Be!==nt);if(!St)return null;var rr,Bt=St,_t=St.x,cr=St.y,sr=1/0;Be=St;do{rt>=Be.x&&Be.x>=_t&&rt!==Be.x&&re(st<cr?rt:Fe,st,_t,cr,st<cr?Fe:rt,st,Be.x,Be.y)&&(rr=Math.abs(st-Be.y)/(rt-Be.x),J(Be,De)&&(rr<sr||rr===sr&&(Be.x>St.x||Be.x===St.x&&V(St,Be)))&&(St=Be,sr=rr)),Be=Be.next}while(Be!==Bt);return St}(De,nt);if(!Be)return nt;var rt=qe(Be,De);return W(rt,rt.next),W(Be,Be.next)}function V(De,nt){return ie(De.prev,De,nt.prev)<0&&ie(nt.next,De,De.next)<0}function oe(De,nt,Be,rt,st){return(De=1431655765&((De=858993459&((De=252645135&((De=16711935&((De=(De-Be)*st|0)|De<<8))|De<<4))|De<<2))|De<<1))|(nt=1431655765&((nt=858993459&((nt=252645135&((nt=16711935&((nt=(nt-rt)*st|0)|nt<<8))|nt<<4))|nt<<2))|nt<<1))<<1}function k(De){var nt=De,Be=De;do{(nt.x<Be.x||nt.x===Be.x&&nt.y<Be.y)&&(Be=nt),nt=nt.next}while(nt!==De);return Be}function re(De,nt,Be,rt,st,Fe,St,At){return(st-St)*(nt-At)>=(De-St)*(Fe-At)&&(De-St)*(rt-At)>=(Be-St)*(nt-At)&&(Be-St)*(Fe-At)>=(st-St)*(rt-At)}function $(De,nt){return De.next.i!==nt.i&&De.prev.i!==nt.i&&!function be(De,nt){var Be=De;do{if(Be.i!==De.i&&Be.next.i!==De.i&&Be.i!==nt.i&&Be.next.i!==nt.i&&Ae(Be,Be.next,De,nt))return!0;Be=Be.next}while(Be!==De);return!1}(De,nt)&&(J(De,nt)&&J(nt,De)&&function Ge(De,nt){var Be=De,rt=!1,st=(De.x+nt.x)/2,Fe=(De.y+nt.y)/2;do{Be.y>Fe!=Be.next.y>Fe&&Be.next.y!==Be.y&&st<(Be.next.x-Be.x)*(Fe-Be.y)/(Be.next.y-Be.y)+Be.x&&(rt=!rt),Be=Be.next}while(Be!==De);return rt}(De,nt)&&(ie(De.prev,De,nt.prev)||ie(De,nt.prev,nt))||ue(De,nt)&&ie(De.prev,De,De.next)>0&&ie(nt.prev,nt,nt.next)>0)}function ie(De,nt,Be){return(nt.y-De.y)*(Be.x-nt.x)-(nt.x-De.x)*(Be.y-nt.y)}function ue(De,nt){return De.x===nt.x&&De.y===nt.y}function Ae(De,nt,Be,rt){var st=he(ie(De,nt,Be)),Fe=he(ie(De,nt,rt)),St=he(ie(Be,rt,De)),At=he(ie(Be,rt,nt));return!!(st!==Fe&&St!==At||0===st&&fe(De,Be,nt)||0===Fe&&fe(De,rt,nt)||0===St&&fe(Be,De,rt)||0===At&&fe(Be,nt,rt))}function fe(De,nt,Be){return nt.x<=Math.max(De.x,Be.x)&&nt.x>=Math.min(De.x,Be.x)&&nt.y<=Math.max(De.y,Be.y)&&nt.y>=Math.min(De.y,Be.y)}function he(De){return De>0?1:De<0?-1:0}function J(De,nt){return ie(De.prev,De,De.next)<0?ie(De,nt,De.next)>=0&&ie(De,De.prev,nt)>=0:ie(De,nt,De.prev)<0||ie(De,De.next,nt)<0}function qe(De,nt){var Be=new wt(De.i,De.x,De.y),rt=new wt(nt.i,nt.x,nt.y),st=De.next,Fe=nt.prev;return De.next=nt,nt.prev=De,Be.next=st,st.prev=Be,rt.next=Be,Be.prev=rt,Fe.next=rt,rt.prev=Fe,rt}function ke(De,nt,Be,rt){var st=new wt(De,nt,Be);return rt?(st.next=rt.next,st.prev=rt,rt.next.prev=st,rt.next=st):(st.prev=st,st.next=st),st}function de(De){De.next.prev=De.prev,De.prev.next=De.next,De.prevZ&&(De.prevZ.nextZ=De.nextZ),De.nextZ&&(De.nextZ.prevZ=De.prevZ)}function wt(De,nt,Be){this.i=De,this.x=nt,this.y=Be,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function gt(De,nt,Be,rt){for(var st=0,Fe=nt,St=Be-rt;Fe<Be;Fe+=rt)st+=(De[St]-De[Fe])*(De[Fe+1]+De[St+1]),St=Fe;return st}Me.exports=Ne,Me.exports.default=Ne,Ne.deviation=function(De,nt,Be,rt){var st=nt&&nt.length,St=Math.abs(gt(De,0,st?nt[0]*Be:De.length,Be));if(st)for(var At=0,Bt=nt.length;At<Bt;At++)St-=Math.abs(gt(De,nt[At]*Be,At<Bt-1?nt[At+1]*Be:De.length,Be));var sr=0;for(At=0;At<rt.length;At+=3){var rr=rt[At]*Be,vr=rt[At+1]*Be,fr=rt[At+2]*Be;sr+=Math.abs((De[rr]-De[fr])*(De[vr+1]-De[rr+1])-(De[rr]-De[vr])*(De[fr+1]-De[rr+1]))}return 0===St&&0===sr?0:Math.abs((sr-St)/St)},Ne.flatten=function(De){for(var nt=De[0][0].length,Be={vertices:[],holes:[],dimensions:nt},rt=0,st=0;st<De.length;st++){for(var Fe=0;Fe<De[st].length;Fe++)for(var St=0;St<nt;St++)Be.vertices.push(De[st][Fe][St]);st>0&&Be.holes.push(rt+=De[st-1].length)}return Be}},4613:function(Me,Ne){var W;!function(te){"use strict";var Q={s:1,n:0,d:1};function ge(oe,k){if(isNaN(oe=parseInt(oe,10)))throw ne.InvalidParameter;return oe*k}function ce(oe,k){if(0===k)throw ne.DivisionByZero;var re=Object.create(ne.prototype);re.s=oe<0?-1:1;var $=Z(oe=oe<0?-oe:oe,k);return re.n=oe/$,re.d=k/$,re}function X(oe){for(var k={},re=oe,$=2,ie=4;ie<=re;){for(;re%$==0;)re/=$,k[$]=(k[$]||0)+1;ie+=1+2*$++}return re!==oe?re>1&&(k[re]=(k[re]||0)+1):k[oe]=(k[oe]||0)+1,k}var Oe=function(oe,k){var wt,re=0,$=1,ie=1,ue=0,Ae=0,fe=0,he=1,be=1,J=0,Ge=1,qe=1,ke=1,de=1e7;if(null!=oe)if(void 0!==k){if(ie=(re=oe)*($=k),re%1!=0||$%1!=0)throw ne.NonIntegerParameter}else switch(typeof oe){case"object":if("d"in oe&&"n"in oe)re=oe.n,$=oe.d,"s"in oe&&(re*=oe.s);else{if(!(0 in oe))throw ne.InvalidParameter;re=oe[0],1 in oe&&($=oe[1])}ie=re*$;break;case"number":if(oe<0&&(ie=oe,oe=-oe),oe%1==0)re=oe;else if(oe>0){for(oe>=1&&(oe/=be=Math.pow(10,Math.floor(1+Math.log(oe)/Math.LN10)));Ge<=de&&ke<=de;){if(oe===(wt=(J+qe)/(Ge+ke))){Ge+ke<=de?(re=J+qe,$=Ge+ke):ke>Ge?(re=qe,$=ke):(re=J,$=Ge);break}oe>wt?(J+=qe,Ge+=ke):(qe+=J,ke+=Ge),Ge>de?(re=qe,$=ke):(re=J,$=Ge)}re*=be}else(isNaN(oe)||isNaN(k))&&($=re=NaN);break;case"string":if(null===(Ge=oe.match(/\d+|./g)))throw ne.InvalidParameter;if("-"===Ge[J]?(ie=-1,J++):"+"===Ge[J]&&J++,Ge.length===J+1?Ae=ge(Ge[J++],ie):"."===Ge[J+1]||"."===Ge[J]?("."!==Ge[J]&&(ue=ge(Ge[J++],ie)),(1+ ++J===Ge.length||"("===Ge[J+1]&&")"===Ge[J+3]||"'"===Ge[J+1]&&"'"===Ge[J+3])&&(Ae=ge(Ge[J],ie),he=Math.pow(10,Ge[J].length),J++),("("===Ge[J]&&")"===Ge[J+2]||"'"===Ge[J]&&"'"===Ge[J+2])&&(fe=ge(Ge[J+1],ie),be=Math.pow(10,Ge[J+1].length)-1,J+=3)):"/"===Ge[J+1]||":"===Ge[J+1]?(Ae=ge(Ge[J],ie),he=ge(Ge[J+2],1),J+=3):"/"===Ge[J+3]&&" "===Ge[J+1]&&(ue=ge(Ge[J],ie),Ae=ge(Ge[J+2],ie),he=ge(Ge[J+4],1),J+=5),Ge.length<=J){ie=re=fe+($=he*be)*ue+be*Ae;break}default:throw ne.InvalidParameter}if(0===$)throw ne.DivisionByZero;Q.s=ie<0?-1:1,Q.n=Math.abs(re),Q.d=Math.abs($)};function Z(oe,k){if(!oe)return k;if(!k)return oe;for(;;){if(!(oe%=k))return k;if(!(k%=oe))return oe}}function ne(oe,k){if(Oe(oe,k),!(this instanceof ne))return ce(Q.s*Q.n,Q.d);oe=Z(Q.d,Q.n),this.s=Q.s,this.n=Q.n/oe,this.d=Q.d/oe}ne.DivisionByZero=new Error("Division by Zero"),ne.InvalidParameter=new Error("Invalid argument"),ne.NonIntegerParameter=new Error("Parameters must be integer"),ne.prototype={s:1,n:0,d:1,abs:function(){return ce(this.n,this.d)},neg:function(){return ce(-this.s*this.n,this.d)},add:function(oe,k){return Oe(oe,k),ce(this.s*this.n*Q.d+Q.s*this.d*Q.n,this.d*Q.d)},sub:function(oe,k){return Oe(oe,k),ce(this.s*this.n*Q.d-Q.s*this.d*Q.n,this.d*Q.d)},mul:function(oe,k){return Oe(oe,k),ce(this.s*Q.s*this.n*Q.n,this.d*Q.d)},div:function(oe,k){return Oe(oe,k),ce(this.s*Q.s*this.n*Q.d,this.d*Q.n)},clone:function(){return ce(this.s*this.n,this.d)},mod:function(oe,k){if(isNaN(this.n)||isNaN(this.d))return new ne(NaN);if(void 0===oe)return ce(this.s*this.n%this.d,1);if(Oe(oe,k),0===Q.n&&0===this.d)throw ne.DivisionByZero;return ce(this.s*(Q.d*this.n)%(Q.n*this.d),Q.d*this.d)},gcd:function(oe,k){return Oe(oe,k),ce(Z(Q.n,this.n)*Z(Q.d,this.d),Q.d*this.d)},lcm:function(oe,k){return Oe(oe,k),0===Q.n&&0===this.n?ce(0,1):ce(Q.n*this.n,Z(Q.n,this.n)*Z(Q.d,this.d))},ceil:function(oe){return oe=Math.pow(10,oe||0),isNaN(this.n)||isNaN(this.d)?new ne(NaN):ce(Math.ceil(oe*this.s*this.n/this.d),oe)},floor:function(oe){return oe=Math.pow(10,oe||0),isNaN(this.n)||isNaN(this.d)?new ne(NaN):ce(Math.floor(oe*this.s*this.n/this.d),oe)},round:function(oe){return oe=Math.pow(10,oe||0),isNaN(this.n)||isNaN(this.d)?new ne(NaN):ce(Math.round(oe*this.s*this.n/this.d),oe)},inverse:function(){return ce(this.s*this.d,this.n)},pow:function(oe,k){if(Oe(oe,k),1===Q.d)return Q.s<0?ce(Math.pow(this.s*this.d,Q.n),Math.pow(this.n,Q.n)):ce(Math.pow(this.s*this.n,Q.n),Math.pow(this.d,Q.n));if(this.s<0)return null;var re=X(this.n),$=X(this.d),ie=1,ue=1;for(var Ae in re)if("1"!==Ae){if("0"===Ae){ie=0;break}if(re[Ae]*=Q.n,re[Ae]%Q.d!=0)return null;re[Ae]/=Q.d,ie*=Math.pow(Ae,re[Ae])}for(var Ae in $)if("1"!==Ae){if($[Ae]*=Q.n,$[Ae]%Q.d!=0)return null;$[Ae]/=Q.d,ue*=Math.pow(Ae,$[Ae])}return Q.s<0?ce(ue,ie):ce(ie,ue)},equals:function(oe,k){return Oe(oe,k),this.s*this.n*Q.d==Q.s*Q.n*this.d},compare:function(oe,k){Oe(oe,k);var re=this.s*this.n*Q.d-Q.s*Q.n*this.d;return(0<re)-(re<0)},simplify:function(oe){if(isNaN(this.n)||isNaN(this.d))return this;oe=oe||.001;for(var k=this.abs(),re=k.toContinued(),$=1;$<re.length;$++){for(var ie=ce(re[$-1],1),ue=$-2;ue>=0;ue--)ie=ie.inverse().add(re[ue]);if(ie.sub(k).abs().valueOf()<oe)return ie.mul(this.s)}return this},divisible:function(oe,k){return Oe(oe,k),!(!(Q.n*this.d)||this.n*Q.d%(Q.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(oe){var k,re="",$=this.n,ie=this.d;return this.s<0&&(re+="-"),1===ie?re+=$:(oe&&(k=Math.floor($/ie))>0&&(re+=k,re+=" ",$%=ie),re+=$,re+="/",re+=ie),re},toLatex:function(oe){var k,re="",$=this.n,ie=this.d;return this.s<0&&(re+="-"),1===ie?re+=$:(oe&&(k=Math.floor($/ie))>0&&(re+=k,$%=ie),re+="\\frac{",re+=$,re+="}{",re+=ie,re+="}"),re},toContinued:function(){var oe,k=this.n,re=this.d,$=[];if(isNaN(k)||isNaN(re))return $;do{$.push(Math.floor(k/re)),oe=k%re,k=re,re=oe}while(1!==k);return $},toString:function(oe){var k=this.n,re=this.d;if(isNaN(k)||isNaN(re))return"NaN";oe=oe||15;var $=function se(oe,k){for(;k%2==0;k/=2);for(;k%5==0;k/=5);if(1===k)return 0;for(var re=10%k,$=1;1!==re;$++)if(re=10*re%k,$>2e3)return 0;return $}(0,re),ie=function V(oe,k,re){for(var $=1,ie=function Pe(oe,k,re){for(var $=1;k>0;oe=oe*oe%re,k>>=1)1&k&&($=$*oe%re);return $}(10,re,k),ue=0;ue<300;ue++){if($===ie)return ue;$=10*$%k,ie=10*ie%k}return 0}(0,re,$),ue=this.s<0?"-":"";if(ue+=k/re|0,k%=re,(k*=10)&&(ue+="."),$){for(var Ae=ie;Ae--;)ue+=k/re|0,k%=re,k*=10;for(ue+="(",Ae=$;Ae--;)ue+=k/re|0,k%=re,k*=10;ue+=")"}else for(Ae=oe;k&&Ae--;)ue+=k/re|0,k%=re,k*=10;return ue}},void 0!==(W=function(){return ne}.apply(Ne,[]))&&(Me.exports=W)}()},3457:Me=>{"use strict";var Ne="Function.prototype.bind called on incompatible ",q=Array.prototype.slice,W=Object.prototype.toString,te="[object Function]";Me.exports=function(Q){var ge=this;if("function"!=typeof ge||W.call(ge)!==te)throw new TypeError(Ne+ge);for(var X,ce=q.call(arguments,1),Pe=Math.max(0,ge.length-ce.length),se=[],V=0;V<Pe;V++)se.push("$"+V);if(X=Function("binder","return function ("+se.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof X){var ne=ge.apply(this,ce.concat(q.call(arguments)));return Object(ne)===ne?ne:this}return ge.apply(Q,ce.concat(q.call(arguments)))}),ge.prototype){var Z=function(){};Z.prototype=ge.prototype,X.prototype=new Z,Z.prototype=null}return X}},4444:(Me,Ne,q)=>{"use strict";var W=q(3457);Me.exports=Function.prototype.bind||W},9582:Me=>{"use strict";var Ne=function(){return"string"==typeof function(){}.name},q=Object.getOwnPropertyDescriptor;if(q)try{q([],"length")}catch{q=null}Ne.functionsHaveConfigurableNames=function(){if(!Ne()||!q)return!1;var ee=q(function(){},"name");return!!ee&&!!ee.configurable};var W=Function.prototype.bind;Ne.boundFunctionsHaveNames=function(){return Ne()&&"function"==typeof W&&""!==function(){}.bind().name},Me.exports=Ne},5013:(Me,Ne,q)=>{var W=q(6952),te=function(ce){this.precision=ce&&ce.precision?ce.precision:17,this.direction=!(!ce||!ce.direction)&&ce.direction,this.pseudoNode=!(!ce||!ce.pseudoNode)&&ce.pseudoNode,this.objectComparator=ce&&ce.objectComparator?ce.objectComparator:ge};function ee(ce){return ce.coordinates.map(function(X){return{type:ce.type.replace("Multi",""),coordinates:X}})}function Q(ce,X){return ce.hasOwnProperty("coordinates")?ce.coordinates.length===X.coordinates.length:ce.length===X.length}function ge(ce,X){return W(ce,X,{strict:!0})}te.prototype.compare=function(ce,X){if(ce.type!==X.type||!Q(ce,X))return!1;switch(ce.type){case"Point":return this.compareCoord(ce.coordinates,X.coordinates);case"LineString":return this.compareLine(ce.coordinates,X.coordinates,0,!1);case"Polygon":return this.comparePolygon(ce,X);case"Feature":return this.compareFeature(ce,X);default:if(0===ce.type.indexOf("Multi")){var Oe=this,Pe=ee(ce),se=ee(X);return Pe.every(function(V){return this.some(function(Z){return Oe.compare(V,Z)})},se)}}return!1},te.prototype.compareCoord=function(ce,X){if(ce.length!==X.length)return!1;for(var Oe=0;Oe<ce.length;Oe++)if(ce[Oe].toFixed(this.precision)!==X[Oe].toFixed(this.precision))return!1;return!0},te.prototype.compareLine=function(ce,X,Oe,Pe){if(!Q(ce,X))return!1;var se=this.pseudoNode?ce:this.removePseudo(ce),V=this.pseudoNode?X:this.removePseudo(X);if(!Pe||this.compareCoord(se[0],V[0])||(V=this.fixStartIndex(V,se))){var Z=this.compareCoord(se[Oe],V[Oe]);return this.direction||Z?this.comparePath(se,V):!!this.compareCoord(se[Oe],V[V.length-(1+Oe)])&&this.comparePath(se.slice().reverse(),V)}},te.prototype.fixStartIndex=function(ce,X){for(var Oe,Pe=-1,se=0;se<ce.length;se++)if(this.compareCoord(ce[se],X[0])){Pe=se;break}return Pe>=0&&(Oe=[].concat(ce.slice(Pe,ce.length),ce.slice(1,Pe+1))),Oe},te.prototype.comparePath=function(ce,X){var Oe=this;return ce.every(function(Pe,se){return Oe.compareCoord(Pe,this[se])},X)},te.prototype.comparePolygon=function(ce,X){if(this.compareLine(ce.coordinates[0],X.coordinates[0],1,!0)){var Oe=ce.coordinates.slice(1,ce.coordinates.length),Pe=X.coordinates.slice(1,X.coordinates.length),se=this;return Oe.every(function(V){return this.some(function(Z){return se.compareLine(V,Z,1,!0)})},Pe)}return!1},te.prototype.compareFeature=function(ce,X){return!(ce.id!==X.id||!this.objectComparator(ce.properties,X.properties)||!this.compareBBox(ce,X))&&this.compare(ce.geometry,X.geometry)},te.prototype.compareBBox=function(ce,X){return!!(!ce.bbox&&!X.bbox||ce.bbox&&X.bbox&&this.compareCoord(ce.bbox,X.bbox))},te.prototype.removePseudo=function(ce){return ce},Me.exports=te},5406:(Me,Ne,q)=>{var W=q(7192),te=q(8275),ee=q(3269),Q=q(1503).Z,ge=ee.featureEach,Oe=te.featureCollection;function Pe(se){var V=new W(se);return V.insert=function(Z){if("Feature"!==Z.type)throw new Error("invalid feature");return Z.bbox=Z.bbox?Z.bbox:Q(Z),W.prototype.insert.call(this,Z)},V.load=function(Z){var ne=[];return Array.isArray(Z)?Z.forEach(function(oe){if("Feature"!==oe.type)throw new Error("invalid features");oe.bbox=oe.bbox?oe.bbox:Q(oe),ne.push(oe)}):ge(Z,function(oe){if("Feature"!==oe.type)throw new Error("invalid features");oe.bbox=oe.bbox?oe.bbox:Q(oe),ne.push(oe)}),W.prototype.load.call(this,ne)},V.remove=function(Z,ne){if("Feature"!==Z.type)throw new Error("invalid feature");return Z.bbox=Z.bbox?Z.bbox:Q(Z),W.prototype.remove.call(this,Z,ne)},V.clear=function(){return W.prototype.clear.call(this)},V.search=function(Z){var ne=W.prototype.search.call(this,this.toBBox(Z));return Oe(ne)},V.collides=function(Z){return W.prototype.collides.call(this,this.toBBox(Z))},V.all=function(){var Z=W.prototype.all.call(this);return Oe(Z)},V.toJSON=function(){return W.prototype.toJSON.call(this)},V.fromJSON=function(Z){return W.prototype.fromJSON.call(this,Z)},V.toBBox=function(Z){var ne;if(Z.bbox)ne=Z.bbox;else if(Array.isArray(Z)&&4===Z.length)ne=Z;else if(Array.isArray(Z)&&6===Z.length)ne=[Z[0],Z[1],Z[3],Z[4]];else if("Feature"===Z.type)ne=Q(Z);else{if("FeatureCollection"!==Z.type)throw new Error("invalid geojson");ne=Q(Z)}return{minX:ne[0],minY:ne[1],maxX:ne[2],maxY:ne[3]}},V}Me.exports=Pe,Me.exports.default=Pe},7192:function(Me){Me.exports=function(){"use strict";function Ne(k,re,$,ie,ue){!function Ae(fe,he,be,J,Ge){for(;J>be;){if(J-be>600){var qe=J-be+1,ke=he-be+1,de=Math.log(qe),wt=.5*Math.exp(2*de/3),gt=.5*Math.sqrt(de*wt*(qe-wt)/qe)*(ke-qe/2<0?-1:1);Ae(fe,he,Math.max(be,Math.floor(he-ke*wt/qe+gt)),Math.min(J,Math.floor(he+(qe-ke)*wt/qe+gt)),Ge)}var Be=fe[he],rt=be,st=J;for(q(fe,be,he),Ge(fe[J],Be)>0&&q(fe,be,J);rt<st;){for(q(fe,rt,st),rt++,st--;Ge(fe[rt],Be)<0;)rt++;for(;Ge(fe[st],Be)>0;)st--}0===Ge(fe[be],Be)?q(fe,be,st):q(fe,++st,J),st<=he&&(be=st+1),he<=st&&(J=st-1)}}(k,re,$||0,ie||k.length-1,ue||W)}function q(k,re,$){var ie=k[re];k[re]=k[$],k[$]=ie}function W(k,re){return k<re?-1:k>re?1:0}var te=function(k){void 0===k&&(k=9),this._maxEntries=Math.max(4,k),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function ee(k,re,$){if(!$)return re.indexOf(k);for(var ie=0;ie<re.length;ie++)if($(k,re[ie]))return ie;return-1}function Q(k,re){ge(k,0,k.children.length,re,k)}function ge(k,re,$,ie,ue){ue||(ue=ne(null)),ue.minX=1/0,ue.minY=1/0,ue.maxX=-1/0,ue.maxY=-1/0;for(var Ae=re;Ae<$;Ae++){var fe=k.children[Ae];ce(ue,k.leaf?ie(fe):fe)}return ue}function ce(k,re){return k.minX=Math.min(k.minX,re.minX),k.minY=Math.min(k.minY,re.minY),k.maxX=Math.max(k.maxX,re.maxX),k.maxY=Math.max(k.maxY,re.maxY),k}function X(k,re){return k.minX-re.minX}function Oe(k,re){return k.minY-re.minY}function Pe(k){return(k.maxX-k.minX)*(k.maxY-k.minY)}function se(k){return k.maxX-k.minX+(k.maxY-k.minY)}function V(k,re){return k.minX<=re.minX&&k.minY<=re.minY&&re.maxX<=k.maxX&&re.maxY<=k.maxY}function Z(k,re){return re.minX<=k.maxX&&re.minY<=k.maxY&&re.maxX>=k.minX&&re.maxY>=k.minY}function ne(k){return{children:k,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function oe(k,re,$,ie,ue){for(var Ae=[re,$];Ae.length;)if(!(($=Ae.pop())-(re=Ae.pop())<=ie)){var fe=re+Math.ceil(($-re)/ie/2)*ie;Ne(k,fe,re,$,ue),Ae.push(re,fe,fe,$)}}return te.prototype.all=function(){return this._all(this.data,[])},te.prototype.search=function(k){var re=this.data,$=[];if(!Z(k,re))return $;for(var ie=this.toBBox,ue=[];re;){for(var Ae=0;Ae<re.children.length;Ae++){var fe=re.children[Ae],he=re.leaf?ie(fe):fe;Z(k,he)&&(re.leaf?$.push(fe):V(k,he)?this._all(fe,$):ue.push(fe))}re=ue.pop()}return $},te.prototype.collides=function(k){var re=this.data;if(!Z(k,re))return!1;for(var $=[];re;){for(var ie=0;ie<re.children.length;ie++){var ue=re.children[ie],Ae=re.leaf?this.toBBox(ue):ue;if(Z(k,Ae)){if(re.leaf||V(k,Ae))return!0;$.push(ue)}}re=$.pop()}return!1},te.prototype.load=function(k){if(!k||!k.length)return this;if(k.length<this._minEntries){for(var re=0;re<k.length;re++)this.insert(k[re]);return this}var $=this._build(k.slice(),0,k.length-1,0);if(this.data.children.length)if(this.data.height===$.height)this._splitRoot(this.data,$);else{if(this.data.height<$.height){var ie=this.data;this.data=$,$=ie}this._insert($,this.data.height-$.height-1,!0)}else this.data=$;return this},te.prototype.insert=function(k){return k&&this._insert(k,this.data.height-1),this},te.prototype.clear=function(){return this.data=ne([]),this},te.prototype.remove=function(k,re){if(!k)return this;for(var $,ie,ue,Ae=this.data,fe=this.toBBox(k),he=[],be=[];Ae||he.length;){if(Ae||(Ae=he.pop(),ie=he[he.length-1],$=be.pop(),ue=!0),Ae.leaf){var J=ee(k,Ae.children,re);if(-1!==J)return Ae.children.splice(J,1),he.push(Ae),this._condense(he),this}ue||Ae.leaf||!V(Ae,fe)?ie?($++,Ae=ie.children[$],ue=!1):Ae=null:(he.push(Ae),be.push($),$=0,ie=Ae,Ae=Ae.children[0])}return this},te.prototype.toBBox=function(k){return k},te.prototype.compareMinX=function(k,re){return k.minX-re.minX},te.prototype.compareMinY=function(k,re){return k.minY-re.minY},te.prototype.toJSON=function(){return this.data},te.prototype.fromJSON=function(k){return this.data=k,this},te.prototype._all=function(k,re){for(var $=[];k;)k.leaf?re.push.apply(re,k.children):$.push.apply($,k.children),k=$.pop();return re},te.prototype._build=function(k,re,$,ie){var ue,Ae=$-re+1,fe=this._maxEntries;if(Ae<=fe)return Q(ue=ne(k.slice(re,$+1)),this.toBBox),ue;ie||(ie=Math.ceil(Math.log(Ae)/Math.log(fe)),fe=Math.ceil(Ae/Math.pow(fe,ie-1))),(ue=ne([])).leaf=!1,ue.height=ie;var he=Math.ceil(Ae/fe),be=he*Math.ceil(Math.sqrt(fe));oe(k,re,$,be,this.compareMinX);for(var J=re;J<=$;J+=be){var Ge=Math.min(J+be-1,$);oe(k,J,Ge,he,this.compareMinY);for(var qe=J;qe<=Ge;qe+=he){var ke=Math.min(qe+he-1,Ge);ue.children.push(this._build(k,qe,ke,ie-1))}}return Q(ue,this.toBBox),ue},te.prototype._chooseSubtree=function(k,re,$,ie){for(;ie.push(re),!re.leaf&&ie.length-1!==$;){for(var ue=1/0,Ae=1/0,fe=void 0,he=0;he<re.children.length;he++){var be=re.children[he],J=Pe(be),Ge=(qe=k,ke=be,(Math.max(ke.maxX,qe.maxX)-Math.min(ke.minX,qe.minX))*(Math.max(ke.maxY,qe.maxY)-Math.min(ke.minY,qe.minY))-J);Ge<Ae?(Ae=Ge,ue=J<ue?J:ue,fe=be):Ge===Ae&&J<ue&&(ue=J,fe=be)}re=fe||re.children[0]}var qe,ke;return re},te.prototype._insert=function(k,re,$){var ie=$?k:this.toBBox(k),ue=[],Ae=this._chooseSubtree(ie,this.data,re,ue);for(Ae.children.push(k),ce(Ae,ie);re>=0&&ue[re].children.length>this._maxEntries;)this._split(ue,re),re--;this._adjustParentBBoxes(ie,ue,re)},te.prototype._split=function(k,re){var $=k[re],ie=$.children.length,ue=this._minEntries;this._chooseSplitAxis($,ue,ie);var Ae=this._chooseSplitIndex($,ue,ie),fe=ne($.children.splice(Ae,$.children.length-Ae));fe.height=$.height,fe.leaf=$.leaf,Q($,this.toBBox),Q(fe,this.toBBox),re?k[re-1].children.push(fe):this._splitRoot($,fe)},te.prototype._splitRoot=function(k,re){this.data=ne([k,re]),this.data.height=k.height+1,this.data.leaf=!1,Q(this.data,this.toBBox)},te.prototype._chooseSplitIndex=function(k,re,$){for(var ie,ue,Ae,fe,he,be,J,Ge=1/0,qe=1/0,ke=re;ke<=$-re;ke++){var de=ge(k,0,ke,this.toBBox),wt=ge(k,ke,$,this.toBBox),gt=(ue=de,Ae=wt,void 0,void 0,void 0,void 0,fe=Math.max(ue.minX,Ae.minX),he=Math.max(ue.minY,Ae.minY),be=Math.min(ue.maxX,Ae.maxX),J=Math.min(ue.maxY,Ae.maxY),Math.max(0,be-fe)*Math.max(0,J-he)),De=Pe(de)+Pe(wt);gt<Ge?(Ge=gt,ie=ke,qe=De<qe?De:qe):gt===Ge&&De<qe&&(qe=De,ie=ke)}return ie||$-re},te.prototype._chooseSplitAxis=function(k,re,$){var ie=k.leaf?this.compareMinX:X,ue=k.leaf?this.compareMinY:Oe;this._allDistMargin(k,re,$,ie)<this._allDistMargin(k,re,$,ue)&&k.children.sort(ie)},te.prototype._allDistMargin=function(k,re,$,ie){k.children.sort(ie);for(var ue=this.toBBox,Ae=ge(k,0,re,ue),fe=ge(k,$-re,$,ue),he=se(Ae)+se(fe),be=re;be<$-re;be++){var J=k.children[be];ce(Ae,k.leaf?ue(J):J),he+=se(Ae)}for(var Ge=$-re-1;Ge>=re;Ge--){var qe=k.children[Ge];ce(fe,k.leaf?ue(qe):qe),he+=se(fe)}return he},te.prototype._adjustParentBBoxes=function(k,re,$){for(var ie=$;ie>=0;ie--)ce(re[ie],k)},te.prototype._condense=function(k){for(var re=k.length-1,$=void 0;re>=0;re--)0===k[re].children.length?re>0?($=k[re-1].children).splice($.indexOf(k[re]),1):this.clear():Q(k[re],this.toBBox)},te}()},5203:(Me,Ne,q)=>{"use strict";var W,te=SyntaxError,ee=Function,Q=TypeError,ge=function(de){try{return ee('"use strict"; return ('+de+").constructor;")()}catch{}},ce=Object.getOwnPropertyDescriptor;if(ce)try{ce({},"")}catch{ce=null}var X=function(){throw new Q},Oe=ce?function(){try{return X}catch{try{return ce(arguments,"callee").get}catch{return X}}}():X,Pe=q(2969)(),se=Object.getPrototypeOf||function(de){return de.__proto__},V={},Z=typeof Uint8Array>"u"?W:se(Uint8Array),ne={"%AggregateError%":typeof AggregateError>"u"?W:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?W:ArrayBuffer,"%ArrayIteratorPrototype%":Pe?se([][Symbol.iterator]()):W,"%AsyncFromSyncIteratorPrototype%":W,"%AsyncFunction%":V,"%AsyncGenerator%":V,"%AsyncGeneratorFunction%":V,"%AsyncIteratorPrototype%":V,"%Atomics%":typeof Atomics>"u"?W:Atomics,"%BigInt%":typeof BigInt>"u"?W:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?W:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?W:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?W:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?W:Float32Array,"%Float64Array%":typeof Float64Array>"u"?W:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?W:FinalizationRegistry,"%Function%":ee,"%GeneratorFunction%":V,"%Int8Array%":typeof Int8Array>"u"?W:Int8Array,"%Int16Array%":typeof Int16Array>"u"?W:Int16Array,"%Int32Array%":typeof Int32Array>"u"?W:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Pe?se(se([][Symbol.iterator]())):W,"%JSON%":"object"==typeof JSON?JSON:W,"%Map%":typeof Map>"u"?W:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Pe?W:se((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?W:Promise,"%Proxy%":typeof Proxy>"u"?W:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?W:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?W:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Pe?W:se((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?W:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Pe?se(""[Symbol.iterator]()):W,"%Symbol%":Pe?Symbol:W,"%SyntaxError%":te,"%ThrowTypeError%":Oe,"%TypedArray%":Z,"%TypeError%":Q,"%Uint8Array%":typeof Uint8Array>"u"?W:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?W:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?W:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?W:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?W:WeakMap,"%WeakRef%":typeof WeakRef>"u"?W:WeakRef,"%WeakSet%":typeof WeakSet>"u"?W:WeakSet};try{null.error}catch(de){var oe=se(se(de));ne["%Error.prototype%"]=oe}var k=function de(wt){var gt;if("%AsyncFunction%"===wt)gt=ge("async function () {}");else if("%GeneratorFunction%"===wt)gt=ge("function* () {}");else if("%AsyncGeneratorFunction%"===wt)gt=ge("async function* () {}");else if("%AsyncGenerator%"===wt){var De=de("%AsyncGeneratorFunction%");De&&(gt=De.prototype)}else if("%AsyncIteratorPrototype%"===wt){var nt=de("%AsyncGenerator%");nt&&(gt=se(nt.prototype))}return ne[wt]=gt,gt},re={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$=q(4444),ie=q(3164),ue=$.call(Function.call,Array.prototype.concat),Ae=$.call(Function.apply,Array.prototype.splice),fe=$.call(Function.call,String.prototype.replace),he=$.call(Function.call,String.prototype.slice),be=$.call(Function.call,RegExp.prototype.exec),J=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ge=/\\(\\)?/g,qe=function(wt){var gt=he(wt,0,1),De=he(wt,-1);if("%"===gt&&"%"!==De)throw new te("invalid intrinsic syntax, expected closing `%`");if("%"===De&&"%"!==gt)throw new te("invalid intrinsic syntax, expected opening `%`");var nt=[];return fe(wt,J,function(Be,rt,st,Fe){nt[nt.length]=st?fe(Fe,Ge,"$1"):rt||Be}),nt},ke=function(wt,gt){var nt,De=wt;if(ie(re,De)&&(De="%"+(nt=re[De])[0]+"%"),ie(ne,De)){var Be=ne[De];if(Be===V&&(Be=k(De)),typeof Be>"u"&&!gt)throw new Q("intrinsic "+wt+" exists, but is not available. Please file an issue!");return{alias:nt,name:De,value:Be}}throw new te("intrinsic "+wt+" does not exist!")};Me.exports=function(wt,gt){if("string"!=typeof wt||0===wt.length)throw new Q("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof gt)throw new Q('"allowMissing" argument must be a boolean');if(null===be(/^%?[^%]*%?$/,wt))throw new te("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var De=qe(wt),nt=De.length>0?De[0]:"",Be=ke("%"+nt+"%",gt),rt=Be.name,st=Be.value,Fe=!1,St=Be.alias;St&&(nt=St[0],Ae(De,ue([0,1],St)));for(var At=1,Bt=!0;At<De.length;At+=1){var _t=De[At],cr=he(_t,0,1),sr=he(_t,-1);if(('"'===cr||"'"===cr||"`"===cr||'"'===sr||"'"===sr||"`"===sr)&&cr!==sr)throw new te("property names with quotes must have matching quotes");if(("constructor"===_t||!Bt)&&(Fe=!0),ie(ne,rt="%"+(nt+="."+_t)+"%"))st=ne[rt];else if(null!=st){if(!(_t in st)){if(!gt)throw new Q("base intrinsic for "+wt+" exists, but the property is not available.");return}if(ce&&At+1>=De.length){var rr=ce(st,_t);st=(Bt=!!rr)&&"get"in rr&&!("originalValue"in rr.get)?rr.get:st[_t]}else Bt=ie(st,_t),st=st[_t];Bt&&!Fe&&(ne[rt]=st)}}return st}},7027:(Me,Ne,q)=>{"use strict";var te=q(5203)("%Object.defineProperty%",!0),ee=function(){if(te)try{return te({},"a",{value:1}),!0}catch{return!1}return!1};ee.hasArrayLengthDefineBug=function(){if(!ee())return null;try{return 1!==te([],"length",{value:1}).length}catch{return!0}},Me.exports=ee},2969:(Me,Ne,q)=>{"use strict";var W=typeof Symbol<"u"&&Symbol,te=q(1983);Me.exports=function(){return"function"==typeof W&&"function"==typeof Symbol&&"symbol"==typeof W("foo")&&"symbol"==typeof Symbol("bar")&&te()}},1983:Me=>{"use strict";Me.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var q={},W=Symbol("test"),te=Object(W);if("string"==typeof W||"[object Symbol]"!==Object.prototype.toString.call(W)||"[object Symbol]"!==Object.prototype.toString.call(te))return!1;for(W in q[W]=42,q)return!1;if("function"==typeof Object.keys&&0!==Object.keys(q).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(q).length)return!1;var Q=Object.getOwnPropertySymbols(q);if(1!==Q.length||Q[0]!==W||!Object.prototype.propertyIsEnumerable.call(q,W))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var ge=Object.getOwnPropertyDescriptor(q,W);if(42!==ge.value||!0!==ge.enumerable)return!1}return!0}},6259:(Me,Ne,q)=>{"use strict";var W=q(1983);Me.exports=function(){return W()&&!!Symbol.toStringTag}},3164:(Me,Ne,q)=>{"use strict";var W=q(4444);Me.exports=W.call(Function.call,Object.prototype.hasOwnProperty)},3407:(Me,Ne,q)=>{"use strict";var W=q(6259)(),ee=q(5834)("Object.prototype.toString"),Q=function(Oe){return!(W&&Oe&&"object"==typeof Oe&&Symbol.toStringTag in Oe)&&"[object Arguments]"===ee(Oe)},ge=function(Oe){return!!Q(Oe)||null!==Oe&&"object"==typeof Oe&&"number"==typeof Oe.length&&Oe.length>=0&&"[object Array]"!==ee(Oe)&&"[object Function]"===ee(Oe.callee)},ce=function(){return Q(arguments)}();Q.isLegacyArguments=ge,Me.exports=ce?Q:ge},2374:(Me,Ne,q)=>{"use strict";var W=Date.prototype.getDay,ee=Object.prototype.toString,ge=q(6259)();Me.exports=function(X){return"object"==typeof X&&null!==X&&(ge?function(X){try{return W.call(X),!0}catch{return!1}}(X):"[object Date]"===ee.call(X))}},2342:(Me,Ne,q)=>{"use strict";var ee,Q,ge,ce,W=q(5834),te=q(6259)();if(te){ee=W("Object.prototype.hasOwnProperty"),Q=W("RegExp.prototype.exec"),ge={};var X=function(){throw ge};ce={toString:X,valueOf:X},"symbol"==typeof Symbol.toPrimitive&&(ce[Symbol.toPrimitive]=X)}var Oe=W("Object.prototype.toString"),Pe=Object.getOwnPropertyDescriptor;Me.exports=te?function(Z){if(!Z||"object"!=typeof Z)return!1;var ne=Pe(Z,"lastIndex");if(!ne||!ee(ne,"value"))return!1;try{Q(Z,ce)}catch(k){return k===ge}}:function(Z){return!(!Z||"object"!=typeof Z&&"function"!=typeof Z)&&"[object RegExp]"===Oe(Z)}},9286:Me=>{Me.exports=function Ne(q,W){"use strict";var oe,k,te=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,ee=/(^[ ]*|[ ]*$)/g,Q=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,ge=/^0x[0-9a-f]+$/i,ce=/^0/,X=function(ie){return Ne.insensitive&&(""+ie).toLowerCase()||""+ie},Oe=X(q).replace(ee,"")||"",Pe=X(W).replace(ee,"")||"",se=Oe.replace(te,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),V=Pe.replace(te,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),Z=parseInt(Oe.match(ge),16)||1!==se.length&&Oe.match(Q)&&Date.parse(Oe),ne=parseInt(Pe.match(ge),16)||Z&&Pe.match(Q)&&Date.parse(Pe)||null;if(ne){if(Z<ne)return-1;if(Z>ne)return 1}for(var re=0,$=Math.max(se.length,V.length);re<$;re++){if(oe=!(se[re]||"").match(ce)&&parseFloat(se[re])||se[re]||0,k=!(V[re]||"").match(ce)&&parseFloat(V[re])||V[re]||0,isNaN(oe)!==isNaN(k))return isNaN(oe)?1:-1;if(typeof oe!=typeof k&&(oe+="",k+=""),oe<k)return-1;if(oe>k)return 1}return 0}},346:(Me,Ne,q)=>{"use strict";Me.exports=q(1828)},1828:(Me,Ne)=>{"use strict";function W(Q,ge,ce){ce=ce||[];for(var X=0;X<Q;X++)ce[X]=ge;return ce}var te=function(){function Q(){}return Q.k_means=function(ge,ce){for(var X=[],Oe=ce<<2,Pe={};X.length<ce&&Oe-- >0;){var se=ge[Math.floor(Math.random()*ge.length)],V=ge[0].length>0?se.join("_"):""+se;Pe[V]||(Pe[V]=!0,X.push(se))}if(X.length<ce)throw Error("Failed to initialize clusters");return X},Q.k_means_pp=function(ge,ce){var X=ge[0].length?ee.euclideanDist:ee.dist,Oe=[],Pe=ge[Math.floor(Math.random()*ge.length)];for(Oe.push(Pe),{}[ge[0].length>0?Pe.join("_"):""+Pe]=!0;Oe.length<ce;){var se=[],V=[],Z=0;for(var ne in ge){var oe=1/0;for(var k in Oe){var re=X(ge[ne],Oe[k]);re<=oe&&(oe=re)}se[ne]=oe}for(var $ in ge)Z+=se[$];for(var ie in ge)V[ie]={i:ie,v:ge[ie],pr:se[ie]/Z,cs:0};V.sort(function(he,be){return he.pr-be.pr}),V[0].cs=V[0].pr;for(var ue=1;ue<ge.length;ue++)V[ue].cs=V[ue-1].cs+V[ue].pr;for(var Ae=Math.random(),fe=0;fe<ge.length-1&&V[fe++].cs<Ae;);Oe.push(V[fe-1].v)}return Oe},Q}(),ee=function(){function Q(){}return Q.dist=function(ge,ce,X){var Oe=Math.abs(ge-ce);return X?Oe:Oe*Oe},Q.euclideanDist=function(ge,ce){var X=0;for(var Oe in ge){var Pe=(ge[Oe]||0)-(ce[Oe]||0);X+=Pe*Pe}return X},Q.manhattanDist=function(ge,ce){var X=0,Oe=0;for(var Pe in ge)X+=(Oe=(ge[Pe]||0)-(ce[Pe]||0))>=0?Oe:-Oe;return X},Q}();Ne.default=function(Q,ge,ce,X){var Oe=[],Pe=[],se=!1,V=X||1e4,Z=[];if(ce)Oe="kmeans"===ce?te.k_means(Q,ge):"kmeans++"===ce?te.k_means_pp(Q,ge):Array.from(ce);else for(var ne=[],oe=0;Oe.length<ge;){var k=Math.floor(Math.random()*Q.length);ne[k]||(ne[k]=!0,Oe[oe++]=Q[k])}do{for(var re in W(ge,0,Z),Q){for(var $=1/0,ie=0,ue=0;ue<ge;ue++){var Ae=Q[0].length>0?ee.euclideanDist(Q[re],Oe[ue]):Math.abs(Q[re][0]-Oe[ue][0]);Ae<=$&&($=Ae,ie=ue)}Pe[re]=ie,Z[ie]++}var fe=[],he=[];if(Q[0].length>0)for(var be=0;be<ge;be++)fe[be]=W(Q[0].length,0,fe[be]),he[be]=Oe[be];else for(var J=0;J<ge;J++)fe[J]=0,he[J]=Oe[J];if(Q[0].length>0){for(var Ge=0;Ge<ge;Ge++)Oe[Ge]=[];for(var qe in Q)for(var ke=0;ke<Q[0].length;ke++)fe[Pe[qe]][ke]+=Q[qe][ke];se=!0;for(var de=0;de<ge;de++){for(var wt=Oe[de],gt=0;gt<Q[0].length;gt++)wt[gt]=fe[de][gt]/Z[de]||0;if(se)for(var De=0;De<Q[0].length;De++)if(he[de][De]!=wt[De]){se=!1;break}}}else{for(var nt in Q)fe[Pe[nt]]+=Q[nt];for(var Be=0;Be<ge;Be++)Oe[Be]=[fe[Be]/Z[Be]];se=!0;for(var rt=0;rt<ge;rt++)if(he[rt]!=Oe[rt]){se=!1;break}}se=se||--V<=0}while(!se);return{iterations:(X||1e4)-V,k:ge,indexes:Pe,centroids:Oe}}},4994:(Me,Ne,q)=>{var W=q(4312),te=q(6421),ee=q(5764),Q=q(8685),ge=q(6676);function ce(X){var Oe=-1,Pe=null==X?0:X.length;for(this.clear();++Oe<Pe;){var se=X[Oe];this.set(se[0],se[1])}}ce.prototype.clear=W,ce.prototype.delete=te,ce.prototype.get=ee,ce.prototype.has=Q,ce.prototype.set=ge,Me.exports=ce},9215:(Me,Ne,q)=>{var W=q(1840),te=q(4378),ee=q(4981),Q=q(7343),ge=q(8895);function ce(X){var Oe=-1,Pe=null==X?0:X.length;for(this.clear();++Oe<Pe;){var se=X[Oe];this.set(se[0],se[1])}}ce.prototype.clear=W,ce.prototype.delete=te,ce.prototype.get=ee,ce.prototype.has=Q,ce.prototype.set=ge,Me.exports=ce},1501:(Me,Ne,q)=>{var ee=q(3436)(q(2119),"Map");Me.exports=ee},9850:(Me,Ne,q)=>{var W=q(638),te=q(1184),ee=q(866),Q=q(3771),ge=q(1772);function ce(X){var Oe=-1,Pe=null==X?0:X.length;for(this.clear();++Oe<Pe;){var se=X[Oe];this.set(se[0],se[1])}}ce.prototype.clear=W,ce.prototype.delete=te,ce.prototype.get=ee,ce.prototype.has=Q,ce.prototype.set=ge,Me.exports=ce},6323:(Me,Ne,q)=>{var ee=q(3436)(q(2119),"Set");Me.exports=ee},8849:(Me,Ne,q)=>{var W=q(9850),te=q(4600),ee=q(1387);function Q(ge){var ce=-1,X=null==ge?0:ge.length;for(this.__data__=new W;++ce<X;)this.add(ge[ce])}Q.prototype.add=Q.prototype.push=te,Q.prototype.has=ee,Me.exports=Q},443:(Me,Ne,q)=>{var W=q(2119);Me.exports=W.Symbol},1253:(Me,Ne,q)=>{var W=q(4164);Me.exports=function te(ee,Q){return!(null==ee||!ee.length)&&W(ee,Q,0)>-1}},7609:Me=>{Me.exports=function Ne(q,W,te){for(var ee=-1,Q=null==q?0:q.length;++ee<Q;)if(te(W,q[ee]))return!0;return!1}},2271:(Me,Ne,q)=>{var W=q(5334),te=q(7151),ee=q(9460),Q=q(891),ge=q(8442),ce=q(8159),Oe=Object.prototype.hasOwnProperty;Me.exports=function Pe(se,V){var Z=ee(se),ne=!Z&&te(se),oe=!Z&&!ne&&Q(se),k=!Z&&!ne&&!oe&&ce(se),re=Z||ne||oe||k,$=re?W(se.length,String):[],ie=$.length;for(var ue in se)(V||Oe.call(se,ue))&&(!re||!("length"==ue||oe&&("offset"==ue||"parent"==ue)||k&&("buffer"==ue||"byteLength"==ue||"byteOffset"==ue)||ge(ue,ie)))&&$.push(ue);return $}},4633:Me=>{Me.exports=function Ne(q,W){for(var te=-1,ee=null==q?0:q.length,Q=Array(ee);++te<ee;)Q[te]=W(q[te],te,q);return Q}},4125:(Me,Ne,q)=>{var W=q(8826);Me.exports=function te(ee){var Q=ee.length;return Q?ee[W(0,Q-1)]:void 0}},8906:(Me,Ne,q)=>{var W=q(9454),te=q(9905);Me.exports=function ee(Q){return te(W(Q))}},3503:(Me,Ne,q)=>{var W=q(217);Me.exports=function te(ee,Q){for(var ge=ee.length;ge--;)if(W(ee[ge][0],Q))return ge;return-1}},5317:Me=>{Me.exports=function Ne(q,W,te,ee){for(var Q=q.length,ge=te+(ee?1:-1);ee?ge--:++ge<Q;)if(W(q[ge],ge,q))return ge;return-1}},3337:(Me,Ne,q)=>{var W=q(443),te=q(1318),ee=q(2902),ce=W?W.toStringTag:void 0;Me.exports=function X(Oe){return null==Oe?void 0===Oe?"[object Undefined]":"[object Null]":ce&&ce in Object(Oe)?te(Oe):ee(Oe)}},4164:(Me,Ne,q)=>{var W=q(5317),te=q(968),ee=q(4977);Me.exports=function Q(ge,ce,X){return ce==ce?ee(ge,ce,X):W(ge,te,X)}},186:(Me,Ne,q)=>{var W=q(3337),te=q(2671);Me.exports=function Q(ge){return te(ge)&&"[object Arguments]"==W(ge)}},968:Me=>{Me.exports=function Ne(q){return q!=q}},7304:(Me,Ne,q)=>{var W=q(5946),te=q(1943),ee=q(5940),Q=q(2827),ce=/^\[object .+?Constructor\]$/,V=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Me.exports=function Z(ne){return!(!ee(ne)||te(ne))&&(W(ne)?V:ce).test(Q(ne))}},1083:(Me,Ne,q)=>{var W=q(3337),te=q(6231),ee=q(2671),de={};de["[object Float32Array]"]=de["[object Float64Array]"]=de["[object Int8Array]"]=de["[object Int16Array]"]=de["[object Int32Array]"]=de["[object Uint8Array]"]=de["[object Uint8ClampedArray]"]=de["[object Uint16Array]"]=de["[object Uint32Array]"]=!0,de["[object Arguments]"]=de["[object Array]"]=de["[object ArrayBuffer]"]=de["[object Boolean]"]=de["[object DataView]"]=de["[object Date]"]=de["[object Error]"]=de["[object Function]"]=de["[object Map]"]=de["[object Number]"]=de["[object Object]"]=de["[object RegExp]"]=de["[object Set]"]=de["[object String]"]=de["[object WeakMap]"]=!1,Me.exports=function wt(gt){return ee(gt)&&te(gt.length)&&!!de[W(gt)]}},1172:(Me,Ne,q)=>{var W=q(5488),te=q(5491),Q=Object.prototype.hasOwnProperty;Me.exports=function ge(ce){if(!W(ce))return te(ce);var X=[];for(var Oe in Object(ce))Q.call(ce,Oe)&&"constructor"!=Oe&&X.push(Oe);return X}},8826:Me=>{var Ne=Math.floor,q=Math.random;Me.exports=function W(te,ee){return te+Ne(q()*(ee-te+1))}},1435:(Me,Ne,q)=>{var W=q(4125),te=q(377);Me.exports=function ee(Q){return W(te(Q))}},7522:(Me,Ne,q)=>{var W=q(9905),te=q(377);Me.exports=function ee(Q){return W(te(Q))}},5334:Me=>{Me.exports=function Ne(q,W){for(var te=-1,ee=Array(q);++te<q;)ee[te]=W(te);return ee}},5647:Me=>{Me.exports=function Ne(q){return function(W){return q(W)}}},707:(Me,Ne,q)=>{var W=q(8849),te=q(1253),ee=q(7609),Q=q(5972),ge=q(4575),ce=q(4174);Me.exports=function Oe(Pe,se,V){var Z=-1,ne=te,oe=Pe.length,k=!0,re=[],$=re;if(V)k=!1,ne=ee;else if(oe>=200){var ie=se?null:ge(Pe);if(ie)return ce(ie);k=!1,ne=Q,$=new W}else $=se?[]:re;e:for(;++Z<oe;){var ue=Pe[Z],Ae=se?se(ue):ue;if(ue=V||0!==ue?ue:0,k&&Ae==Ae){for(var fe=$.length;fe--;)if($[fe]===Ae)continue e;se&&$.push(Ae),re.push(ue)}else ne($,Ae,V)||($!==re&&$.push(Ae),re.push(ue))}return re}},9179:(Me,Ne,q)=>{var W=q(4633);Me.exports=function te(ee,Q){return W(Q,function(ge){return ee[ge]})}},5972:Me=>{Me.exports=function Ne(q,W){return q.has(W)}},9454:Me=>{Me.exports=function Ne(q,W){var te=-1,ee=q.length;for(W||(W=Array(ee));++te<ee;)W[te]=q[te];return W}},4610:(Me,Ne,q)=>{var W=q(2119);Me.exports=W["__core-js_shared__"]},4575:(Me,Ne,q)=>{var W=q(6323),te=q(2552),ee=q(4174),ge=W&&1/ee(new W([,-0]))[1]==1/0?function(ce){return new W(ce)}:te;Me.exports=ge},9122:Me=>{var Ne="object"==typeof global&&global&&global.Object===Object&&global;Me.exports=Ne},4537:(Me,Ne,q)=>{var W=q(3819);Me.exports=function te(ee,Q){var ge=ee.__data__;return W(Q)?ge["string"==typeof Q?"string":"hash"]:ge.map}},3436:(Me,Ne,q)=>{var W=q(7304),te=q(1990);Me.exports=function ee(Q,ge){var ce=te(Q,ge);return W(ce)?ce:void 0}},1318:(Me,Ne,q)=>{var W=q(443),te=Object.prototype,ee=te.hasOwnProperty,Q=te.toString,ge=W?W.toStringTag:void 0;Me.exports=function ce(X){var Oe=ee.call(X,ge),Pe=X[ge];try{X[ge]=void 0;var se=!0}catch{}var V=Q.call(X);return se&&(Oe?X[ge]=Pe:delete X[ge]),V}},1990:Me=>{Me.exports=function Ne(q,W){return q?.[W]}},4312:(Me,Ne,q)=>{var W=q(862);Me.exports=function te(){this.__data__=W?W(null):{},this.size=0}},6421:Me=>{Me.exports=function Ne(q){var W=this.has(q)&&delete this.__data__[q];return this.size-=W?1:0,W}},5764:(Me,Ne,q)=>{var W=q(862),Q=Object.prototype.hasOwnProperty;Me.exports=function ge(ce){var X=this.__data__;if(W){var Oe=X[ce];return"__lodash_hash_undefined__"===Oe?void 0:Oe}return Q.call(X,ce)?X[ce]:void 0}},8685:(Me,Ne,q)=>{var W=q(862),ee=Object.prototype.hasOwnProperty;Me.exports=function Q(ge){var ce=this.__data__;return W?void 0!==ce[ge]:ee.call(ce,ge)}},6676:(Me,Ne,q)=>{var W=q(862);Me.exports=function ee(Q,ge){var ce=this.__data__;return this.size+=this.has(Q)?0:1,ce[Q]=W&&void 0===ge?"__lodash_hash_undefined__":ge,this}},8442:Me=>{var q=/^(?:0|[1-9]\d*)$/;Me.exports=function W(te,ee){var Q=typeof te;return!!(ee=ee??9007199254740991)&&("number"==Q||"symbol"!=Q&&q.test(te))&&te>-1&&te%1==0&&te<ee}},3819:Me=>{Me.exports=function Ne(q){var W=typeof q;return"string"==W||"number"==W||"symbol"==W||"boolean"==W?"__proto__"!==q:null===q}},1943:(Me,Ne,q)=>{var Q,W=q(4610),te=(Q=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+Q:"";Me.exports=function ee(Q){return!!te&&te in Q}},5488:Me=>{var Ne=Object.prototype;Me.exports=function q(W){var te=W&&W.constructor;return W===("function"==typeof te&&te.prototype||Ne)}},1840:Me=>{Me.exports=function Ne(){this.__data__=[],this.size=0}},4378:(Me,Ne,q)=>{var W=q(3503),ee=Array.prototype.splice;Me.exports=function Q(ge){var ce=this.__data__,X=W(ce,ge);return!(X<0||(X==ce.length-1?ce.pop():ee.call(ce,X,1),--this.size,0))}},4981:(Me,Ne,q)=>{var W=q(3503);Me.exports=function te(ee){var Q=this.__data__,ge=W(Q,ee);return ge<0?void 0:Q[ge][1]}},7343:(Me,Ne,q)=>{var W=q(3503);Me.exports=function te(ee){return W(this.__data__,ee)>-1}},8895:(Me,Ne,q)=>{var W=q(3503);Me.exports=function te(ee,Q){var ge=this.__data__,ce=W(ge,ee);return ce<0?(++this.size,ge.push([ee,Q])):ge[ce][1]=Q,this}},638:(Me,Ne,q)=>{var W=q(4994),te=q(9215),ee=q(1501);Me.exports=function Q(){this.size=0,this.__data__={hash:new W,map:new(ee||te),string:new W}}},1184:(Me,Ne,q)=>{var W=q(4537);Me.exports=function te(ee){var Q=W(this,ee).delete(ee);return this.size-=Q?1:0,Q}},866:(Me,Ne,q)=>{var W=q(4537);Me.exports=function te(ee){return W(this,ee).get(ee)}},3771:(Me,Ne,q)=>{var W=q(4537);Me.exports=function te(ee){return W(this,ee).has(ee)}},1772:(Me,Ne,q)=>{var W=q(4537);Me.exports=function te(ee,Q){var ge=W(this,ee),ce=ge.size;return ge.set(ee,Q),this.size+=ge.size==ce?0:1,this}},862:(Me,Ne,q)=>{var te=q(3436)(Object,"create");Me.exports=te},5491:(Me,Ne,q)=>{var te=q(9385)(Object.keys,Object);Me.exports=te},3597:(Me,Ne,q)=>{Me=q.nmd(Me);var W=q(9122),te=Ne&&!Ne.nodeType&&Ne,ee=te&&Me&&!Me.nodeType&&Me,ge=ee&&ee.exports===te&&W.process,ce=function(){try{return ee&&ee.require&&ee.require("util").types||ge&&ge.binding&&ge.binding("util")}catch{}}();Me.exports=ce},2902:Me=>{var q=Object.prototype.toString;Me.exports=function W(te){return q.call(te)}},9385:Me=>{Me.exports=function Ne(q,W){return function(te){return q(W(te))}}},2119:(Me,Ne,q)=>{var W=q(9122),te="object"==typeof self&&self&&self.Object===Object&&self,ee=W||te||Function("return this")();Me.exports=ee},4600:Me=>{Me.exports=function q(W){return this.__data__.set(W,"__lodash_hash_undefined__"),this}},1387:Me=>{Me.exports=function Ne(q){return this.__data__.has(q)}},4174:Me=>{Me.exports=function Ne(q){var W=-1,te=Array(q.size);return q.forEach(function(ee){te[++W]=ee}),te}},9905:(Me,Ne,q)=>{var W=q(8826);Me.exports=function te(ee,Q){var ge=-1,ce=ee.length,X=ce-1;for(Q=void 0===Q?ce:Q;++ge<Q;){var Oe=W(ge,X),Pe=ee[Oe];ee[Oe]=ee[ge],ee[ge]=Pe}return ee.length=Q,ee}},4977:Me=>{Me.exports=function Ne(q,W,te){for(var ee=te-1,Q=q.length;++ee<Q;)if(q[ee]===W)return ee;return-1}},2827:Me=>{var q=Function.prototype.toString;Me.exports=function W(te){if(null!=te){try{return q.call(te)}catch{}try{return te+""}catch{}}return""}},217:Me=>{Me.exports=function Ne(q,W){return q===W||q!=q&&W!=W}},7151:(Me,Ne,q)=>{var W=q(186),te=q(2671),ee=Object.prototype,Q=ee.hasOwnProperty,ge=ee.propertyIsEnumerable,ce=W(function(){return arguments}())?W:function(X){return te(X)&&Q.call(X,"callee")&&!ge.call(X,"callee")};Me.exports=ce},9460:Me=>{Me.exports=Array.isArray},6507:(Me,Ne,q)=>{var W=q(5946),te=q(6231);Me.exports=function ee(Q){return null!=Q&&te(Q.length)&&!W(Q)}},891:(Me,Ne,q)=>{Me=q.nmd(Me);var W=q(2119),te=q(3580),ee=Ne&&!Ne.nodeType&&Ne,Q=ee&&Me&&!Me.nodeType&&Me,ce=Q&&Q.exports===ee?W.Buffer:void 0;Me.exports=(ce?ce.isBuffer:void 0)||te},5946:(Me,Ne,q)=>{var W=q(3337),te=q(5940);Me.exports=function X(Oe){if(!te(Oe))return!1;var Pe=W(Oe);return"[object Function]"==Pe||"[object GeneratorFunction]"==Pe||"[object AsyncFunction]"==Pe||"[object Proxy]"==Pe}},6231:Me=>{Me.exports=function q(W){return"number"==typeof W&&W>-1&&W%1==0&&W<=9007199254740991}},5940:Me=>{Me.exports=function Ne(q){var W=typeof q;return null!=q&&("object"==W||"function"==W)}},2671:Me=>{Me.exports=function Ne(q){return null!=q&&"object"==typeof q}},8159:(Me,Ne,q)=>{var W=q(1083),te=q(5647),ee=q(3597),Q=ee&&ee.isTypedArray,ge=Q?te(Q):W;Me.exports=ge},118:(Me,Ne,q)=>{var W=q(2271),te=q(1172),ee=q(6507);Me.exports=function Q(ge){return ee(ge)?W(ge):te(ge)}},2552:Me=>{Me.exports=function Ne(){}},8799:(Me,Ne,q)=>{var W=q(4125),te=q(1435),ee=q(9460);Me.exports=function Q(ge){return(ee(ge)?W:te)(ge)}},9336:(Me,Ne,q)=>{var W=q(8906),te=q(7522),ee=q(9460);Me.exports=function Q(ge){return(ee(ge)?W:te)(ge)}},3580:Me=>{Me.exports=function Ne(){return!1}},836:(Me,Ne,q)=>{var W=q(707);Me.exports=function te(ee){return ee&&ee.length?W(ee):[]}},377:(Me,Ne,q)=>{var W=q(9179),te=q(118);Me.exports=function ee(Q){return null==Q?[]:W(Q,te(Q))}},5943:Me=>{"use strict";var Ne=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;Me.exports=function ee(){try{if(!Object.assign)return!1;var Q=new String("abc");if(Q[5]="de","5"===Object.getOwnPropertyNames(Q)[0])return!1;for(var ge={},ce=0;ce<10;ce++)ge["_"+String.fromCharCode(ce)]=ce;if("0123456789"!==Object.getOwnPropertyNames(ge).map(function(Pe){return ge[Pe]}).join(""))return!1;var Oe={};return"abcdefghijklmnopqrst".split("").forEach(function(Pe){Oe[Pe]=Pe}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},Oe)).join("")}catch{return!1}}()?Object.assign:function(Q,ge){for(var ce,Oe,X=function te(Q){if(null==Q)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Q)}(Q),Pe=1;Pe<arguments.length;Pe++){for(var se in ce=Object(arguments[Pe]))q.call(ce,se)&&(X[se]=ce[se]);if(Ne){Oe=Ne(ce);for(var V=0;V<Oe.length;V++)W.call(ce,Oe[V])&&(X[Oe[V]]=ce[Oe[V]])}}return X}},1175:Me=>{"use strict";var Ne=function(q){return q!=q};Me.exports=function(W,te){return 0===W&&0===te?1/W==1/te:!!(W===te||Ne(W)&&Ne(te))}},2e3:(Me,Ne,q)=>{"use strict";var W=q(2358),te=q(5685),ee=q(1175),Q=q(6305),ge=q(3859),ce=te(Q(),Object);W(ce,{getPolyfill:Q,implementation:ee,shim:ge}),Me.exports=ce},6305:(Me,Ne,q)=>{"use strict";var W=q(1175);Me.exports=function(){return"function"==typeof Object.is?Object.is:W}},3859:(Me,Ne,q)=>{"use strict";var W=q(6305),te=q(2358);Me.exports=function(){var Q=W();return te(Object,{is:Q},{is:function(){return Object.is!==Q}}),Q}},2450:(Me,Ne,q)=>{"use strict";var W;if(!Object.keys){var te=Object.prototype.hasOwnProperty,ee=Object.prototype.toString,Q=q(9978),ge=Object.prototype.propertyIsEnumerable,ce=!ge.call({toString:null},"toString"),X=ge.call(function(){},"prototype"),Oe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Pe=function(ne){var oe=ne.constructor;return oe&&oe.prototype===ne},se={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},V=function(){if(typeof window>"u")return!1;for(var ne in window)try{if(!se["$"+ne]&&te.call(window,ne)&&null!==window[ne]&&"object"==typeof window[ne])try{Pe(window[ne])}catch{return!0}}catch{return!0}return!1}();W=function(oe){var k=null!==oe&&"object"==typeof oe,re="[object Function]"===ee.call(oe),$=Q(oe),ie=k&&"[object String]"===ee.call(oe),ue=[];if(!k&&!re&&!$)throw new TypeError("Object.keys called on a non-object");var Ae=X&&re;if(ie&&oe.length>0&&!te.call(oe,0))for(var fe=0;fe<oe.length;++fe)ue.push(String(fe));if($&&oe.length>0)for(var he=0;he<oe.length;++he)ue.push(String(he));else for(var be in oe)(!Ae||"prototype"!==be)&&te.call(oe,be)&&ue.push(String(be));if(ce)for(var J=function(ne){if(typeof window>"u"||!V)return Pe(ne);try{return Pe(ne)}catch{return!1}}(oe),Ge=0;Ge<Oe.length;++Ge)(!J||"constructor"!==Oe[Ge])&&te.call(oe,Oe[Ge])&&ue.push(Oe[Ge]);return ue}}Me.exports=W},1356:(Me,Ne,q)=>{"use strict";var W=Array.prototype.slice,te=q(9978),ee=Object.keys,Q=ee?function(X){return ee(X)}:q(2450),ge=Object.keys;Q.shim=function(){if(Object.keys){var X=function(){var Oe=Object.keys(arguments);return Oe&&Oe.length===arguments.length}(1,2);X||(Object.keys=function(Pe){return te(Pe)?ge(W.call(Pe)):ge(Pe)})}else Object.keys=Q;return Object.keys||Q},Me.exports=Q},9978:Me=>{"use strict";var Ne=Object.prototype.toString;Me.exports=function(W){var te=Ne.call(W),ee="[object Arguments]"===te;return ee||(ee="[object Array]"!==te&&null!==W&&"object"==typeof W&&"number"==typeof W.length&&W.length>=0&&"[object Function]"===Ne.call(W.callee)),ee}},1766:Me=>{Me.exports=function(q,W,te,ee){var Q=q[0],ge=q[1],ce=!1;void 0===te&&(te=0),void 0===ee&&(ee=W.length);for(var X=(ee-te)/2,Oe=0,Pe=X-1;Oe<X;Pe=Oe++){var se=W[te+2*Oe+0],V=W[te+2*Oe+1],ne=W[te+2*Pe+1];V>ge!=ne>ge&&Q<(W[te+2*Pe+0]-se)*(ge-V)/(ne-V)+se&&(ce=!ce)}return ce}},3870:(Me,Ne,q)=>{var W=q(1766),te=q(2260);Me.exports=function(Q,ge,ce,X){return ge.length>0&&Array.isArray(ge[0])?te(Q,ge,ce,X):W(Q,ge,ce,X)},Me.exports.nested=te,Me.exports.flat=W},2260:Me=>{Me.exports=function(q,W,te,ee){var Q=q[0],ge=q[1],ce=!1;void 0===te&&(te=0),void 0===ee&&(ee=W.length);for(var X=ee-te,Oe=0,Pe=X-1;Oe<X;Pe=Oe++){var se=W[Oe+te][0],V=W[Oe+te][1],ne=W[Pe+te][1];V>ge!=ne>ge&&Q<(W[Pe+te][0]-se)*(ge-V)/(ne-V)+se&&(ce=!ce)}return ce}},9855:function(Me){Me.exports=function(){"use strict";function Ne(pt,Ie){if(!(pt instanceof Ie))throw new TypeError("Cannot call a class as a function")}function q(pt,Ie){for(var we=0;we<Ie.length;we++){var _e=Ie[we];_e.enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),Object.defineProperty(pt,_e.key,_e)}}function W(pt,Ie,we){return Ie&&q(pt.prototype,Ie),we&&q(pt,we),pt}var te=function pt(Ie,we){this.next=null,this.key=Ie,this.data=we,this.left=null,this.right=null};function ee(pt,Ie){return pt>Ie?1:pt<Ie?-1:0}function Q(pt,Ie,we){for(var _e=new te(null,null),Xe=_e,me=_e;;){var ze=we(pt,Ie.key);if(ze<0){if(null===Ie.left)break;if(we(pt,Ie.left.key)<0&&(Ie.left=(Qe=Ie.left).right,Qe.right=Ie,null===(Ie=Qe).left))break;me.left=Ie,me=Ie,Ie=Ie.left}else{if(!(ze>0))break;if(null===Ie.right)break;var Qe;if(we(pt,Ie.right.key)>0&&(Ie.right=(Qe=Ie.right).left,Qe.left=Ie,null===(Ie=Qe).right))break;Xe.right=Ie,Xe=Ie,Ie=Ie.right}}return Xe.right=Ie.left,me.left=Ie.right,Ie.left=_e.right,Ie.right=_e.left,Ie}function ge(pt,Ie,we,_e){var Xe=new te(pt,Ie);if(null===we)return Xe.left=Xe.right=null,Xe;var me=_e(pt,(we=Q(pt,we,_e)).key);return me<0?(Xe.left=we.left,Xe.right=we,we.left=null):me>=0&&(Xe.right=we.right,Xe.left=we,we.right=null),Xe}function ce(pt,Ie,we){var _e=null,Xe=null;if(Ie){var me=we((Ie=Q(pt,Ie,we)).key,pt);0===me?(_e=Ie.left,Xe=Ie.right):me<0?(Xe=Ie.right,Ie.right=null,_e=Ie):(_e=Ie.left,Ie.left=null,Xe=Ie)}return{left:_e,right:Xe}}function Oe(pt,Ie,we,_e,Xe){if(pt){_e(Ie+(we?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+Xe(pt)+"\n");var me=Ie+(we?"    ":"\u2502   ");pt.left&&Oe(pt.left,me,!1,_e,Xe),pt.right&&Oe(pt.right,me,!0,_e,Xe)}}var Pe=function(){function pt(Ie){void 0===Ie&&(Ie=ee),this._root=null,this._size=0,this._comparator=Ie}return pt.prototype.insert=function(Ie,we){return this._size++,this._root=ge(Ie,we,this._root,this._comparator)},pt.prototype.add=function(Ie,we){var _e=new te(Ie,we);null===this._root&&(_e.left=_e.right=null,this._size++,this._root=_e);var Xe=this._comparator,me=Q(Ie,this._root,Xe),ze=Xe(Ie,me.key);return 0===ze?this._root=me:(ze<0?(_e.left=me.left,_e.right=me,me.left=null):ze>0&&(_e.right=me.right,_e.left=me,me.right=null),this._size++,this._root=_e),this._root},pt.prototype.remove=function(Ie){this._root=this._remove(Ie,this._root,this._comparator)},pt.prototype._remove=function(Ie,we,_e){var Xe;return null===we?null:0===_e(Ie,(we=Q(Ie,we,_e)).key)?(null===we.left?Xe=we.right:(Xe=Q(Ie,we.left,_e)).right=we.right,this._size--,Xe):we},pt.prototype.pop=function(){var Ie=this._root;if(Ie){for(;Ie.left;)Ie=Ie.left;return this._root=Q(Ie.key,this._root,this._comparator),this._root=this._remove(Ie.key,this._root,this._comparator),{key:Ie.key,data:Ie.data}}return null},pt.prototype.findStatic=function(Ie){for(var we=this._root,_e=this._comparator;we;){var Xe=_e(Ie,we.key);if(0===Xe)return we;we=Xe<0?we.left:we.right}return null},pt.prototype.find=function(Ie){return this._root&&(this._root=Q(Ie,this._root,this._comparator),0!==this._comparator(Ie,this._root.key))?null:this._root},pt.prototype.contains=function(Ie){for(var we=this._root,_e=this._comparator;we;){var Xe=_e(Ie,we.key);if(0===Xe)return!0;we=Xe<0?we.left:we.right}return!1},pt.prototype.forEach=function(Ie,we){for(var _e=this._root,Xe=[],me=!1;!me;)null!==_e?(Xe.push(_e),_e=_e.left):0!==Xe.length?(_e=Xe.pop(),Ie.call(we,_e),_e=_e.right):me=!0;return this},pt.prototype.range=function(Ie,we,_e,Xe){for(var me=[],ze=this._comparator,Qe=this._root;0!==me.length||Qe;)if(Qe)me.push(Qe),Qe=Qe.left;else{if(ze((Qe=me.pop()).key,we)>0)break;if(ze(Qe.key,Ie)>=0&&_e.call(Xe,Qe))return this;Qe=Qe.right}return this},pt.prototype.keys=function(){var Ie=[];return this.forEach(function(we){return Ie.push(we.key)}),Ie},pt.prototype.values=function(){var Ie=[];return this.forEach(function(we){return Ie.push(we.data)}),Ie},pt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},pt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},pt.prototype.minNode=function(Ie){if(void 0===Ie&&(Ie=this._root),Ie)for(;Ie.left;)Ie=Ie.left;return Ie},pt.prototype.maxNode=function(Ie){if(void 0===Ie&&(Ie=this._root),Ie)for(;Ie.right;)Ie=Ie.right;return Ie},pt.prototype.at=function(Ie){for(var we=this._root,_e=!1,Xe=0,me=[];!_e;)if(we)me.push(we),we=we.left;else if(me.length>0){if(we=me.pop(),Xe===Ie)return we;Xe++,we=we.right}else _e=!0;return null},pt.prototype.next=function(Ie){var we=this._root,_e=null;if(Ie.right){for(_e=Ie.right;_e.left;)_e=_e.left;return _e}for(var Xe=this._comparator;we;){var me=Xe(Ie.key,we.key);if(0===me)break;me<0?(_e=we,we=we.left):we=we.right}return _e},pt.prototype.prev=function(Ie){var we=this._root,_e=null;if(null!==Ie.left){for(_e=Ie.left;_e.right;)_e=_e.right;return _e}for(var Xe=this._comparator;we;){var me=Xe(Ie.key,we.key);if(0===me)break;me<0?we=we.left:(_e=we,we=we.right)}return _e},pt.prototype.clear=function(){return this._root=null,this._size=0,this},pt.prototype.toList=function(){return function Z(pt){for(var Ie=pt,we=[],_e=!1,Xe=new te(null,null),me=Xe;!_e;)Ie?(we.push(Ie),Ie=Ie.left):we.length>0?Ie=(Ie=me=me.next=we.pop()).right:_e=!0;return me.next=null,Xe.next}(this._root)},pt.prototype.load=function(Ie,we,_e){void 0===we&&(we=[]),void 0===_e&&(_e=!1);var Xe=Ie.length,me=this._comparator;if(_e&&k(Ie,we,0,Xe-1,me),null===this._root)this._root=se(Ie,we,0,Xe),this._size=Xe;else{var ze=function oe(pt,Ie,we){for(var _e=new te(null,null),Xe=_e,me=pt,ze=Ie;null!==me&&null!==ze;)we(me.key,ze.key)<0?(Xe.next=me,me=me.next):(Xe.next=ze,ze=ze.next),Xe=Xe.next;return null!==me?Xe.next=me:null!==ze&&(Xe.next=ze),_e.next}(this.toList(),function V(pt,Ie){for(var we=new te(null,null),_e=we,Xe=0;Xe<pt.length;Xe++)_e=_e.next=new te(pt[Xe],Ie[Xe]);return _e.next=null,we.next}(Ie,we),me);this._root=ne({head:ze},0,Xe=this._size+Xe)}return this},pt.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(pt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(pt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),pt.prototype.toString=function(Ie){void 0===Ie&&(Ie=function(Xe){return String(Xe.key)});var we=[];return Oe(this._root,"",!0,function(_e){return we.push(_e)},Ie),we.join("")},pt.prototype.update=function(Ie,we,_e){var Xe=this._comparator,me=ce(Ie,this._root,Xe),ze=me.left,Qe=me.right;Xe(Ie,we)<0?Qe=ge(we,_e,Qe,Xe):ze=ge(we,_e,ze,Xe),this._root=function X(pt,Ie,we){return null===Ie?pt:(null===pt||((Ie=Q(pt.key,Ie,we)).left=pt),Ie)}(ze,Qe,Xe)},pt.prototype.split=function(Ie){return ce(Ie,this._root,this._comparator)},pt}();function se(pt,Ie,we,_e){var Xe=_e-we;if(Xe>0){var me=we+Math.floor(Xe/2),Je=new te(pt[me],Ie[me]);return Je.left=se(pt,Ie,we,me),Je.right=se(pt,Ie,me+1,_e),Je}return null}function ne(pt,Ie,we){var _e=we-Ie;if(_e>0){var Xe=Ie+Math.floor(_e/2),me=ne(pt,Ie,Xe),ze=pt.head;return ze.left=me,pt.head=pt.head.next,ze.right=ne(pt,Xe+1,we),ze}return null}function k(pt,Ie,we,_e,Xe){if(!(we>=_e)){for(var me=pt[we+_e>>1],ze=we-1,Qe=_e+1;;){do{ze++}while(Xe(pt[ze],me)<0);do{Qe--}while(Xe(pt[Qe],me)>0);if(ze>=Qe)break;var Je=pt[ze];pt[ze]=pt[Qe],pt[Qe]=Je,Je=Ie[ze],Ie[ze]=Ie[Qe],Ie[Qe]=Je}k(pt,Ie,we,Qe,Xe),k(pt,Ie,Qe+1,_e,Xe)}}var re=function(Ie,we){return Ie.ll.x<=we.x&&we.x<=Ie.ur.x&&Ie.ll.y<=we.y&&we.y<=Ie.ur.y},$=function(Ie,we){return we.ur.x<Ie.ll.x||Ie.ur.x<we.ll.x||we.ur.y<Ie.ll.y||Ie.ur.y<we.ll.y?null:{ll:{x:Ie.ll.x<we.ll.x?we.ll.x:Ie.ll.x,y:Ie.ll.y<we.ll.y?we.ll.y:Ie.ll.y},ur:{x:Ie.ur.x<we.ur.x?Ie.ur.x:we.ur.x,y:Ie.ur.y<we.ur.y?Ie.ur.y:we.ur.y}}},ie=Number.EPSILON;void 0===ie&&(ie=Math.pow(2,-52));var ue=ie*ie,Ae=function(Ie,we){if(-ie<Ie&&Ie<ie&&-ie<we&&we<ie)return 0;var _e=Ie-we;return _e*_e<ue*Ie*we?0:Ie<we?-1:1},fe=function(){function pt(){Ne(this,pt),this.reset()}return W(pt,[{key:"reset",value:function(){this.xRounder=new he,this.yRounder=new he}},{key:"round",value:function(we,_e){return{x:this.xRounder.round(we),y:this.yRounder.round(_e)}}}]),pt}(),he=function(){function pt(){Ne(this,pt),this.tree=new Pe,this.round(0)}return W(pt,[{key:"round",value:function(we){var _e=this.tree.add(we),Xe=this.tree.prev(_e);if(null!==Xe&&0===Ae(_e.key,Xe.key))return this.tree.remove(we),Xe.key;var me=this.tree.next(_e);return null!==me&&0===Ae(_e.key,me.key)?(this.tree.remove(we),me.key):we}}]),pt}(),be=new fe,J=function(Ie,we){return Ie.x*we.y-Ie.y*we.x},Ge=function(Ie,we){return Ie.x*we.x+Ie.y*we.y},qe=function(Ie,we,_e){var ze=J({x:we.x-Ie.x,y:we.y-Ie.y},{x:_e.x-Ie.x,y:_e.y-Ie.y});return Ae(ze,0)},ke=function(Ie){return Math.sqrt(Ge(Ie,Ie))},de=function(Ie,we,_e){var Xe={x:we.x-Ie.x,y:we.y-Ie.y},me={x:_e.x-Ie.x,y:_e.y-Ie.y};return J(me,Xe)/ke(me)/ke(Xe)},wt=function(Ie,we,_e){var Xe={x:we.x-Ie.x,y:we.y-Ie.y},me={x:_e.x-Ie.x,y:_e.y-Ie.y};return Ge(me,Xe)/ke(me)/ke(Xe)},gt=function(Ie,we,_e){return 0===we.y?null:{x:Ie.x+we.x/we.y*(_e-Ie.y),y:_e}},De=function(Ie,we,_e){return 0===we.x?null:{x:_e,y:Ie.y+we.y/we.x*(_e-Ie.x)}},Be=function(){function pt(Ie,we){Ne(this,pt),void 0===Ie.events?Ie.events=[this]:Ie.events.push(this),this.point=Ie,this.isLeft=we}return W(pt,null,[{key:"compare",value:function(we,_e){var Xe=pt.comparePoints(we.point,_e.point);return 0!==Xe?Xe:(we.point!==_e.point&&we.link(_e),we.isLeft!==_e.isLeft?we.isLeft?1:-1:st.compare(we.segment,_e.segment))}},{key:"comparePoints",value:function(we,_e){return we.x<_e.x?-1:we.x>_e.x?1:we.y<_e.y?-1:we.y>_e.y?1:0}}]),W(pt,[{key:"link",value:function(we){if(we.point===this.point)throw new Error("Tried to link already linked events");for(var _e=we.point.events,Xe=0,me=_e.length;Xe<me;Xe++){var ze=_e[Xe];this.point.events.push(ze),ze.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var we=this.point.events.length,_e=0;_e<we;_e++){var Xe=this.point.events[_e];if(void 0===Xe.segment.consumedBy)for(var me=_e+1;me<we;me++){var ze=this.point.events[me];void 0===ze.consumedBy&&Xe.otherSE.point.events===ze.otherSE.point.events&&Xe.segment.consume(ze.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var we=[],_e=0,Xe=this.point.events.length;_e<Xe;_e++){var me=this.point.events[_e];me!==this&&!me.segment.ringOut&&me.segment.isInResult()&&we.push(me)}return we}},{key:"getLeftmostComparator",value:function(we){var _e=this,Xe=new Map,me=function(Qe){var Je=Qe.otherSE;Xe.set(Qe,{sine:de(_e.point,we.point,Je.point),cosine:wt(_e.point,we.point,Je.point)})};return function(ze,Qe){Xe.has(ze)||me(ze),Xe.has(Qe)||me(Qe);var Je=Xe.get(ze),je=Je.sine,Gt=Je.cosine,Vt=Xe.get(Qe),Mt=Vt.sine,Dt=Vt.cosine;return je>=0&&Mt>=0?Gt<Dt?1:Gt>Dt?-1:0:je<0&&Mt<0?Gt<Dt?-1:Gt>Dt?1:0:Mt<je?-1:Mt>je?1:0}}}]),pt}(),rt=0,st=function(){function pt(Ie,we,_e,Xe){Ne(this,pt),this.id=++rt,this.leftSE=Ie,Ie.segment=this,Ie.otherSE=we,this.rightSE=we,we.segment=this,we.otherSE=Ie,this.rings=_e,this.windings=Xe}return W(pt,null,[{key:"compare",value:function(we,_e){var Xe=we.leftSE.point.x,me=_e.leftSE.point.x,ze=we.rightSE.point.x,Qe=_e.rightSE.point.x;if(Qe<Xe)return 1;if(ze<me)return-1;var Je=we.leftSE.point.y,je=_e.leftSE.point.y,Gt=we.rightSE.point.y,Vt=_e.rightSE.point.y;if(Xe<me){if(je<Je&&je<Gt)return 1;if(je>Je&&je>Gt)return-1;var Mt=we.comparePoint(_e.leftSE.point);if(Mt<0)return 1;if(Mt>0)return-1;var Dt=_e.comparePoint(we.rightSE.point);return 0!==Dt?Dt:-1}if(Xe>me){if(Je<je&&Je<Vt)return-1;if(Je>je&&Je>Vt)return 1;var lr=_e.comparePoint(we.leftSE.point);if(0!==lr)return lr;var Lr=we.comparePoint(_e.rightSE.point);return Lr<0?1:Lr>0?-1:1}if(Je<je)return-1;if(Je>je)return 1;if(ze<Qe){var Ur=_e.comparePoint(we.rightSE.point);if(0!==Ur)return Ur}if(ze>Qe){var un=we.comparePoint(_e.rightSE.point);if(un<0)return 1;if(un>0)return-1}if(ze!==Qe){var ai=Gt-Je,Oi=ze-Xe,ri=Vt-je,Pi=Qe-me;if(ai>Oi&&ri<Pi)return 1;if(ai<Oi&&ri>Pi)return-1}return ze>Qe?1:ze<Qe||Gt<Vt?-1:Gt>Vt?1:we.id<_e.id?-1:we.id>_e.id?1:0}}]),W(pt,[{key:"replaceRightSE",value:function(we){this.rightSE=we,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var we=this.leftSE.point.y,_e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:we<_e?we:_e},ur:{x:this.rightSE.point.x,y:we>_e?we:_e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(we){return we.x===this.leftSE.point.x&&we.y===this.leftSE.point.y||we.x===this.rightSE.point.x&&we.y===this.rightSE.point.y}},{key:"comparePoint",value:function(we){if(this.isAnEndpoint(we))return 0;var _e=this.leftSE.point,Xe=this.rightSE.point,me=this.vector();if(_e.x===Xe.x)return we.x===_e.x?0:we.x<_e.x?1:-1;if(we.x===_e.x+(we.y-_e.y)/me.y*me.x)return 0;var je=_e.y+(we.x-_e.x)/me.x*me.y;return we.y===je?0:we.y<je?-1:1}},{key:"getIntersection",value:function(we){var _e=this.bbox(),Xe=we.bbox(),me=$(_e,Xe);if(null===me)return null;var ze=this.leftSE.point,Qe=this.rightSE.point,Je=we.leftSE.point,je=we.rightSE.point,Gt=re(_e,Je)&&0===this.comparePoint(Je),Vt=re(Xe,ze)&&0===we.comparePoint(ze),Mt=re(_e,je)&&0===this.comparePoint(je),Dt=re(Xe,Qe)&&0===we.comparePoint(Qe);if(Vt&&Gt)return Dt&&!Mt?Qe:!Dt&&Mt?je:null;if(Vt)return Mt&&ze.x===je.x&&ze.y===je.y?null:ze;if(Gt)return Dt&&Qe.x===Je.x&&Qe.y===Je.y?null:Je;if(Dt&&Mt)return null;if(Dt)return Qe;if(Mt)return je;var lr=function(Ie,we,_e,Xe){if(0===we.x)return De(_e,Xe,Ie.x);if(0===Xe.x)return De(Ie,we,_e.x);if(0===we.y)return gt(_e,Xe,Ie.y);if(0===Xe.y)return gt(Ie,we,_e.y);var me=J(we,Xe);if(0==me)return null;var ze={x:_e.x-Ie.x,y:_e.y-Ie.y},Qe=J(ze,we)/me,Je=J(ze,Xe)/me;return{x:(Ie.x+Je*we.x+(_e.x+Qe*Xe.x))/2,y:(Ie.y+Je*we.y+(_e.y+Qe*Xe.y))/2}}(ze,this.vector(),Je,we.vector());return null!==lr&&re(me,lr)?be.round(lr.x,lr.y):null}},{key:"split",value:function(we){var _e=[],Xe=void 0!==we.events,me=new Be(we,!0),ze=new Be(we,!1),Qe=this.rightSE;this.replaceRightSE(ze),_e.push(ze),_e.push(me);var Je=new pt(me,Qe,this.rings.slice(),this.windings.slice());return Be.comparePoints(Je.leftSE.point,Je.rightSE.point)>0&&Je.swapEvents(),Be.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Xe&&(me.checkForConsuming(),ze.checkForConsuming()),_e}},{key:"swapEvents",value:function(){var we=this.rightSE;this.rightSE=this.leftSE,this.leftSE=we,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var _e=0,Xe=this.windings.length;_e<Xe;_e++)this.windings[_e]*=-1}},{key:"consume",value:function(we){for(var _e=this,Xe=we;_e.consumedBy;)_e=_e.consumedBy;for(;Xe.consumedBy;)Xe=Xe.consumedBy;var me=pt.compare(_e,Xe);if(0!==me){if(me>0){var ze=_e;_e=Xe,Xe=ze}if(_e.prev===Xe){var Qe=_e;_e=Xe,Xe=Qe}for(var Je=0,je=Xe.rings.length;Je<je;Je++){var Gt=Xe.rings[Je],Vt=Xe.windings[Je],Mt=_e.rings.indexOf(Gt);-1===Mt?(_e.rings.push(Gt),_e.windings.push(Vt)):_e.windings[Mt]+=Vt}Xe.rings=null,Xe.windings=null,Xe.consumedBy=_e,Xe.leftSE.consumedBy=_e.leftSE,Xe.rightSE.consumedBy=_e.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var we=this.beforeState();this._afterState={rings:we.rings.slice(0),windings:we.windings.slice(0),multiPolys:[]};for(var _e=this._afterState.rings,Xe=this._afterState.windings,me=this._afterState.multiPolys,ze=0,Qe=this.rings.length;ze<Qe;ze++){var Je=this.rings[ze],je=this.windings[ze],Gt=_e.indexOf(Je);-1===Gt?(_e.push(Je),Xe.push(je)):Xe[Gt]+=je}for(var Vt=[],Mt=[],Dt=0,lr=_e.length;Dt<lr;Dt++)if(0!==Xe[Dt]){var Lr=_e[Dt],Ur=Lr.poly;if(-1===Mt.indexOf(Ur))if(Lr.isExterior)Vt.push(Ur);else{-1===Mt.indexOf(Ur)&&Mt.push(Ur);var un=Vt.indexOf(Lr.poly);-1!==un&&Vt.splice(un,1)}}for(var ai=0,Oi=Vt.length;ai<Oi;ai++){var ri=Vt[ai].multiPoly;-1===me.indexOf(ri)&&me.push(ri)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var we=this.beforeState().multiPolys,_e=this.afterState().multiPolys;switch(Yt.type){case"union":this._isInResult=0===we.length!=(0===_e.length);break;case"intersection":var ze,Qe;we.length<_e.length?(ze=we.length,Qe=_e.length):(ze=_e.length,Qe=we.length),this._isInResult=Qe===Yt.numMultiPolys&&ze<Qe;break;case"xor":var Je=Math.abs(we.length-_e.length);this._isInResult=Je%2==1;break;case"difference":var je=function(Vt){return 1===Vt.length&&Vt[0].isSubject};this._isInResult=je(we)!==je(_e);break;default:throw new Error("Unrecognized operation type found ".concat(Yt.type))}return this._isInResult}}],[{key:"fromRing",value:function(we,_e,Xe){var me,ze,Qe,Je=Be.comparePoints(we,_e);if(Je<0)me=we,ze=_e,Qe=1;else{if(!(Je>0))throw new Error("Tried to create degenerate segment at [".concat(we.x,", ").concat(we.y,"]"));me=_e,ze=we,Qe=-1}return new pt(new Be(me,!0),new Be(ze,!1),[Xe],[Qe])}}]),pt}(),Fe=function(){function pt(Ie,we,_e){if(Ne(this,pt),!Array.isArray(Ie)||0===Ie.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=we,this.isExterior=_e,this.segments=[],"number"!=typeof Ie[0][0]||"number"!=typeof Ie[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Xe=be.round(Ie[0][0],Ie[0][1]);this.bbox={ll:{x:Xe.x,y:Xe.y},ur:{x:Xe.x,y:Xe.y}};for(var me=Xe,ze=1,Qe=Ie.length;ze<Qe;ze++){if("number"!=typeof Ie[ze][0]||"number"!=typeof Ie[ze][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Je=be.round(Ie[ze][0],Ie[ze][1]);Je.x===me.x&&Je.y===me.y||(this.segments.push(st.fromRing(me,Je,this)),Je.x<this.bbox.ll.x&&(this.bbox.ll.x=Je.x),Je.y<this.bbox.ll.y&&(this.bbox.ll.y=Je.y),Je.x>this.bbox.ur.x&&(this.bbox.ur.x=Je.x),Je.y>this.bbox.ur.y&&(this.bbox.ur.y=Je.y),me=Je)}(Xe.x!==me.x||Xe.y!==me.y)&&this.segments.push(st.fromRing(me,Xe,this))}return W(pt,[{key:"getSweepEvents",value:function(){for(var we=[],_e=0,Xe=this.segments.length;_e<Xe;_e++){var me=this.segments[_e];we.push(me.leftSE),we.push(me.rightSE)}return we}}]),pt}(),St=function(){function pt(Ie,we){if(Ne(this,pt),!Array.isArray(Ie))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Fe(Ie[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var _e=1,Xe=Ie.length;_e<Xe;_e++){var me=new Fe(Ie[_e],this,!1);me.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=me.bbox.ll.x),me.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=me.bbox.ll.y),me.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=me.bbox.ur.x),me.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=me.bbox.ur.y),this.interiorRings.push(me)}this.multiPoly=we}return W(pt,[{key:"getSweepEvents",value:function(){for(var we=this.exteriorRing.getSweepEvents(),_e=0,Xe=this.interiorRings.length;_e<Xe;_e++)for(var me=this.interiorRings[_e].getSweepEvents(),ze=0,Qe=me.length;ze<Qe;ze++)we.push(me[ze]);return we}}]),pt}(),At=function(){function pt(Ie,we){if(Ne(this,pt),!Array.isArray(Ie))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof Ie[0][0][0]&&(Ie=[Ie])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var _e=0,Xe=Ie.length;_e<Xe;_e++){var me=new St(Ie[_e],this);me.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=me.bbox.ll.x),me.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=me.bbox.ll.y),me.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=me.bbox.ur.x),me.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=me.bbox.ur.y),this.polys.push(me)}this.isSubject=we}return W(pt,[{key:"getSweepEvents",value:function(){for(var we=[],_e=0,Xe=this.polys.length;_e<Xe;_e++)for(var me=this.polys[_e].getSweepEvents(),ze=0,Qe=me.length;ze<Qe;ze++)we.push(me[ze]);return we}}]),pt}(),Bt=function(){function pt(Ie){Ne(this,pt),this.events=Ie;for(var we=0,_e=Ie.length;we<_e;we++)Ie[we].segment.ringOut=this;this.poly=null}return W(pt,null,[{key:"factory",value:function(we){for(var _e=[],Xe=0,me=we.length;Xe<me;Xe++){var ze=we[Xe];if(ze.isInResult()&&!ze.ringOut){for(var Qe=null,Je=ze.leftSE,je=ze.rightSE,Gt=[Je],Vt=Je.point,Mt=[];Qe=Je,Gt.push(Je=je),Je.point!==Vt;)for(;;){var Dt=Je.getAvailableLinkedEvents();if(0===Dt.length){var lr=Gt[0].point,Lr=Gt[Gt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(lr.x,",")+" ".concat(lr.y,"]. Last matching segment found ends at")+" [".concat(Lr.x,", ").concat(Lr.y,"]."))}if(1===Dt.length){je=Dt[0].otherSE;break}for(var Ur=null,un=0,ai=Mt.length;un<ai;un++)if(Mt[un].point===Je.point){Ur=un;break}if(null===Ur){Mt.push({index:Gt.length,point:Je.point});var Pi=Je.getLeftmostComparator(Qe);je=Dt.sort(Pi)[0].otherSE;break}var Oi=Mt.splice(Ur)[0],ri=Gt.splice(Oi.index);ri.unshift(ri[0].otherSE),_e.push(new pt(ri.reverse()))}_e.push(new pt(Gt))}}return _e}}]),W(pt,[{key:"getGeom",value:function(){for(var we=this.events[0].point,_e=[we],Xe=1,me=this.events.length-1;Xe<me;Xe++){var ze=this.events[Xe].point;0!==qe(ze,we,this.events[Xe+1].point)&&(_e.push(ze),we=ze)}if(1===_e.length)return null;0===qe(_e[0],we,_e[1])&&_e.shift(),_e.push(_e[0]);for(var Gt=this.isExteriorRing()?1:-1,Vt=this.isExteriorRing()?0:_e.length-1,Mt=this.isExteriorRing()?_e.length:-1,Dt=[],lr=Vt;lr!=Mt;lr+=Gt)Dt.push([_e[lr].x,_e[lr].y]);return Dt}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var we=this.enclosingRing();this._isExteriorRing=!we||!we.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var we=this.events[0],_e=1,Xe=this.events.length;_e<Xe;_e++){var me=this.events[_e];Be.compare(we,me)>0&&(we=me)}for(var ze=we.segment.prevInResult(),Qe=ze?ze.prevInResult():null;;){if(!ze)return null;if(!Qe)return ze.ringOut;if(Qe.ringOut!==ze.ringOut)return Qe.ringOut.enclosingRing()!==ze.ringOut?ze.ringOut:ze.ringOut.enclosingRing();ze=Qe.prevInResult(),Qe=ze?ze.prevInResult():null}}}]),pt}(),_t=function(){function pt(Ie){Ne(this,pt),this.exteriorRing=Ie,Ie.poly=this,this.interiorRings=[]}return W(pt,[{key:"addInterior",value:function(we){this.interiorRings.push(we),we.poly=this}},{key:"getGeom",value:function(){var we=[this.exteriorRing.getGeom()];if(null===we[0])return null;for(var _e=0,Xe=this.interiorRings.length;_e<Xe;_e++){var me=this.interiorRings[_e].getGeom();null!==me&&we.push(me)}return we}}]),pt}(),cr=function(){function pt(Ie){Ne(this,pt),this.rings=Ie,this.polys=this._composePolys(Ie)}return W(pt,[{key:"getGeom",value:function(){for(var we=[],_e=0,Xe=this.polys.length;_e<Xe;_e++){var me=this.polys[_e].getGeom();null!==me&&we.push(me)}return we}},{key:"_composePolys",value:function(we){for(var _e=[],Xe=0,me=we.length;Xe<me;Xe++){var ze=we[Xe];if(!ze.poly)if(ze.isExteriorRing())_e.push(new _t(ze));else{var Qe=ze.enclosingRing();Qe.poly||_e.push(new _t(Qe)),Qe.poly.addInterior(ze)}}return _e}}]),pt}(),sr=function(){function pt(Ie){var we=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st.compare;Ne(this,pt),this.queue=Ie,this.tree=new Pe(we),this.segments=[]}return W(pt,[{key:"process",value:function(we){var _e=we.segment,Xe=[];if(we.consumedBy)return we.isLeft?this.queue.remove(we.otherSE):this.tree.remove(_e),Xe;var me=we.isLeft?this.tree.insert(_e):this.tree.find(_e);if(!me)throw new Error("Unable to find segment #".concat(_e.id," ")+"[".concat(_e.leftSE.point.x,", ").concat(_e.leftSE.point.y,"] -> ")+"[".concat(_e.rightSE.point.x,", ").concat(_e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var ze=me,Qe=me,Je=void 0,je=void 0;void 0===Je;)null===(ze=this.tree.prev(ze))?Je=null:void 0===ze.key.consumedBy&&(Je=ze.key);for(;void 0===je;)null===(Qe=this.tree.next(Qe))?je=null:void 0===Qe.key.consumedBy&&(je=Qe.key);if(we.isLeft){var Gt=null;if(Je){var Vt=Je.getIntersection(_e);if(null!==Vt&&(_e.isAnEndpoint(Vt)||(Gt=Vt),!Je.isAnEndpoint(Vt)))for(var Mt=this._splitSafely(Je,Vt),Dt=0,lr=Mt.length;Dt<lr;Dt++)Xe.push(Mt[Dt])}var Lr=null;if(je){var Ur=je.getIntersection(_e);if(null!==Ur&&(_e.isAnEndpoint(Ur)||(Lr=Ur),!je.isAnEndpoint(Ur)))for(var un=this._splitSafely(je,Ur),ai=0,Oi=un.length;ai<Oi;ai++)Xe.push(un[ai])}if(null!==Gt||null!==Lr){var ri;ri=null===Gt?Lr:null===Lr||Be.comparePoints(Gt,Lr)<=0?Gt:Lr,this.queue.remove(_e.rightSE),Xe.push(_e.rightSE);for(var Un=_e.split(ri),fa=0,di=Un.length;fa<di;fa++)Xe.push(Un[fa])}Xe.length>0?(this.tree.remove(_e),Xe.push(we)):(this.segments.push(_e),_e.prev=Je)}else{if(Je&&je){var zt=Je.getIntersection(je);if(null!==zt){if(!Je.isAnEndpoint(zt))for(var Do=this._splitSafely(Je,zt),la=0,Fr=Do.length;la<Fr;la++)Xe.push(Do[la]);if(!je.isAnEndpoint(zt))for(var Vn=this._splitSafely(je,zt),ki=0,Ro=Vn.length;ki<Ro;ki++)Xe.push(Vn[ki])}}this.tree.remove(_e)}return Xe}},{key:"_splitSafely",value:function(we,_e){this.tree.remove(we);var Xe=we.rightSE;this.queue.remove(Xe);var me=we.split(_e);return me.push(Xe),void 0===we.consumedBy&&this.tree.insert(we),me}}]),pt}(),rr=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,vr=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Yt=new(function(){function pt(){Ne(this,pt)}return W(pt,[{key:"run",value:function(we,_e,Xe){Yt.type=we,be.reset();for(var me=[new At(_e,!0)],ze=0,Qe=Xe.length;ze<Qe;ze++)me.push(new At(Xe[ze],!1));if(Yt.numMultiPolys=me.length,"difference"===Yt.type)for(var Je=me[0],je=1;je<me.length;)null!==$(me[je].bbox,Je.bbox)?je++:me.splice(je,1);if("intersection"===Yt.type)for(var Gt=0,Vt=me.length;Gt<Vt;Gt++)for(var Mt=me[Gt],Dt=Gt+1,lr=me.length;Dt<lr;Dt++)if(null===$(Mt.bbox,me[Dt].bbox))return[];for(var Lr=new Pe(Be.compare),Ur=0,un=me.length;Ur<un;Ur++)for(var ai=me[Ur].getSweepEvents(),Oi=0,ri=ai.length;Oi<ri;Oi++)if(Lr.insert(ai[Oi]),Lr.size>rr)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Pi=new sr(Lr),Un=Lr.size,fa=Lr.pop();fa;){var di=fa.key;if(Lr.size===Un){var zt=di.segment;throw new Error("Unable to pop() ".concat(di.isLeft?"left":"right"," SweepEvent ")+"[".concat(di.point.x,", ").concat(di.point.y,"] from segment #").concat(zt.id," ")+"[".concat(zt.leftSE.point.x,", ").concat(zt.leftSE.point.y,"] -> ")+"[".concat(zt.rightSE.point.x,", ").concat(zt.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Lr.size>rr)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Pi.segments.length>vr)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Do=Pi.process(di),la=0,Fr=Do.length;la<Fr;la++){var Vn=Do[la];void 0===Vn.consumedBy&&Lr.insert(Vn)}Un=Lr.size,fa=Lr.pop()}be.reset();var ki=Bt.factory(Pi.segments);return new cr(ki).getGeom()}}]),pt}());return{union:function(Ie){for(var we=arguments.length,_e=new Array(we>1?we-1:0),Xe=1;Xe<we;Xe++)_e[Xe-1]=arguments[Xe];return Yt.run("union",Ie,_e)},intersection:function(Ie){for(var we=arguments.length,_e=new Array(we>1?we-1:0),Xe=1;Xe<we;Xe++)_e[Xe-1]=arguments[Xe];return Yt.run("intersection",Ie,_e)},xor:function(Ie){for(var we=arguments.length,_e=new Array(we>1?we-1:0),Xe=1;Xe<we;Xe++)_e[Xe-1]=arguments[Xe];return Yt.run("xor",Ie,_e)},difference:function(Ie){for(var we=arguments.length,_e=new Array(we>1?we-1:0),Xe=1;Xe<we;Xe++)_e[Xe-1]=arguments[Xe];return Yt.run("difference",Ie,_e)}}}()},4678:function(Me){Me.exports=function(){"use strict";function q(ee,Q,ge,ce,X){for(;ce>ge;){if(ce-ge>600){var Oe=ce-ge+1,Pe=Q-ge+1,se=Math.log(Oe),V=.5*Math.exp(2*se/3),Z=.5*Math.sqrt(se*V*(Oe-V)/Oe)*(Pe-Oe/2<0?-1:1);q(ee,Q,Math.max(ge,Math.floor(Q-Pe*V/Oe+Z)),Math.min(ce,Math.floor(Q+(Oe-Pe)*V/Oe+Z)),X)}var k=ee[Q],re=ge,$=ce;for(W(ee,ge,Q),X(ee[ce],k)>0&&W(ee,ge,ce);re<$;){for(W(ee,re,$),re++,$--;X(ee[re],k)<0;)re++;for(;X(ee[$],k)>0;)$--}0===X(ee[ge],k)?W(ee,ge,$):W(ee,++$,ce),$<=Q&&(ge=$+1),Q<=$&&(ce=$-1)}}function W(ee,Q,ge){var ce=ee[Q];ee[Q]=ee[ge],ee[ge]=ce}function te(ee,Q){return ee<Q?-1:ee>Q?1:0}return function Ne(ee,Q,ge,ce,X){q(ee,Q,ge||0,ce||ee.length-1,X||te)}}()},3544:(Me,Ne,q)=>{"use strict";Me.exports=te,Me.exports.default=te;var W=q(4678);function te($,ie){if(!(this instanceof te))return new te($,ie);this._maxEntries=Math.max(4,$||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),ie&&this._initFormat(ie),this.clear()}function ee($,ie,ue){if(!ue)return ie.indexOf($);for(var Ae=0;Ae<ie.length;Ae++)if(ue($,ie[Ae]))return Ae;return-1}function Q($,ie){ge($,0,$.children.length,ie,$)}function ge($,ie,ue,Ae,fe){fe||(fe=k(null)),fe.minX=1/0,fe.minY=1/0,fe.maxX=-1/0,fe.maxY=-1/0;for(var be,he=ie;he<ue;he++)be=$.children[he],ce(fe,$.leaf?Ae(be):be);return fe}function ce($,ie){return $.minX=Math.min($.minX,ie.minX),$.minY=Math.min($.minY,ie.minY),$.maxX=Math.max($.maxX,ie.maxX),$.maxY=Math.max($.maxY,ie.maxY),$}function X($,ie){return $.minX-ie.minX}function Oe($,ie){return $.minY-ie.minY}function Pe($){return($.maxX-$.minX)*($.maxY-$.minY)}function se($){return $.maxX-$.minX+($.maxY-$.minY)}function V($,ie){return(Math.max(ie.maxX,$.maxX)-Math.min(ie.minX,$.minX))*(Math.max(ie.maxY,$.maxY)-Math.min(ie.minY,$.minY))}function Z($,ie){var ue=Math.max($.minX,ie.minX),Ae=Math.max($.minY,ie.minY),fe=Math.min($.maxX,ie.maxX),he=Math.min($.maxY,ie.maxY);return Math.max(0,fe-ue)*Math.max(0,he-Ae)}function ne($,ie){return $.minX<=ie.minX&&$.minY<=ie.minY&&ie.maxX<=$.maxX&&ie.maxY<=$.maxY}function oe($,ie){return ie.minX<=$.maxX&&ie.minY<=$.maxY&&ie.maxX>=$.minX&&ie.maxY>=$.minY}function k($){return{children:$,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function re($,ie,ue,Ae,fe){for(var be,he=[ie,ue];he.length;)!((ue=he.pop())-(ie=he.pop())<=Ae)&&(be=ie+Math.ceil((ue-ie)/Ae/2)*Ae,W($,be,ie,ue,fe),he.push(ie,be,be,ue))}te.prototype={all:function(){return this._all(this.data,[])},search:function($){var ie=this.data,ue=[],Ae=this.toBBox;if(!oe($,ie))return ue;for(var he,be,J,Ge,fe=[];ie;){for(he=0,be=ie.children.length;he<be;he++)J=ie.children[he],oe($,Ge=ie.leaf?Ae(J):J)&&(ie.leaf?ue.push(J):ne($,Ge)?this._all(J,ue):fe.push(J));ie=fe.pop()}return ue},collides:function($){var ie=this.data,ue=this.toBBox;if(!oe($,ie))return!1;for(var fe,he,be,J,Ae=[];ie;){for(fe=0,he=ie.children.length;fe<he;fe++)if(be=ie.children[fe],oe($,J=ie.leaf?ue(be):be)){if(ie.leaf||ne($,J))return!0;Ae.push(be)}ie=Ae.pop()}return!1},load:function($){if(!$||!$.length)return this;if($.length<this._minEntries){for(var ie=0,ue=$.length;ie<ue;ie++)this.insert($[ie]);return this}var Ae=this._build($.slice(),0,$.length-1,0);if(this.data.children.length)if(this.data.height===Ae.height)this._splitRoot(this.data,Ae);else{if(this.data.height<Ae.height){var fe=this.data;this.data=Ae,Ae=fe}this._insert(Ae,this.data.height-Ae.height-1,!0)}else this.data=Ae;return this},insert:function($){return $&&this._insert($,this.data.height-1),this},clear:function(){return this.data=k([]),this},remove:function($,ie){if(!$)return this;for(var be,J,Ge,qe,ue=this.data,Ae=this.toBBox($),fe=[],he=[];ue||fe.length;){if(ue||(ue=fe.pop(),J=fe[fe.length-1],be=he.pop(),qe=!0),ue.leaf&&-1!==(Ge=ee($,ue.children,ie)))return ue.children.splice(Ge,1),fe.push(ue),this._condense(fe),this;qe||ue.leaf||!ne(ue,Ae)?J?(be++,ue=J.children[be],qe=!1):ue=null:(fe.push(ue),he.push(be),be=0,J=ue,ue=ue.children[0])}return this},toBBox:function($){return $},compareMinX:X,compareMinY:Oe,toJSON:function(){return this.data},fromJSON:function($){return this.data=$,this},_all:function($,ie){for(var ue=[];$;)$.leaf?ie.push.apply(ie,$.children):ue.push.apply(ue,$.children),$=ue.pop();return ie},_build:function($,ie,ue,Ae){var be,fe=ue-ie+1,he=this._maxEntries;if(fe<=he)return Q(be=k($.slice(ie,ue+1)),this.toBBox),be;Ae||(Ae=Math.ceil(Math.log(fe)/Math.log(he)),he=Math.ceil(fe/Math.pow(he,Ae-1))),(be=k([])).leaf=!1,be.height=Ae;var qe,ke,de,wt,J=Math.ceil(fe/he),Ge=J*Math.ceil(Math.sqrt(he));for(re($,ie,ue,Ge,this.compareMinX),qe=ie;qe<=ue;qe+=Ge)for(re($,qe,de=Math.min(qe+Ge-1,ue),J,this.compareMinY),ke=qe;ke<=de;ke+=J)wt=Math.min(ke+J-1,de),be.children.push(this._build($,ke,wt,Ae-1));return Q(be,this.toBBox),be},_chooseSubtree:function($,ie,ue,Ae){for(var fe,he,be,J,Ge,qe,ke,de;Ae.push(ie),!ie.leaf&&Ae.length-1!==ue;){for(ke=de=1/0,fe=0,he=ie.children.length;fe<he;fe++)Ge=Pe(be=ie.children[fe]),(qe=V($,be)-Ge)<de?(de=qe,ke=Ge<ke?Ge:ke,J=be):qe===de&&Ge<ke&&(ke=Ge,J=be);ie=J||ie.children[0]}return ie},_insert:function($,ie,ue){var fe=ue?$:(0,this.toBBox)($),he=[],be=this._chooseSubtree(fe,this.data,ie,he);for(be.children.push($),ce(be,fe);ie>=0&&he[ie].children.length>this._maxEntries;)this._split(he,ie),ie--;this._adjustParentBBoxes(fe,he,ie)},_split:function($,ie){var ue=$[ie],Ae=ue.children.length,fe=this._minEntries;this._chooseSplitAxis(ue,fe,Ae);var he=this._chooseSplitIndex(ue,fe,Ae),be=k(ue.children.splice(he,ue.children.length-he));be.height=ue.height,be.leaf=ue.leaf,Q(ue,this.toBBox),Q(be,this.toBBox),ie?$[ie-1].children.push(be):this._splitRoot(ue,be)},_splitRoot:function($,ie){this.data=k([$,ie]),this.data.height=$.height+1,this.data.leaf=!1,Q(this.data,this.toBBox)},_chooseSplitIndex:function($,ie,ue){var Ae,fe,he,be,J,Ge,qe,ke;for(Ge=qe=1/0,Ae=ie;Ae<=ue-ie;Ae++)be=Z(fe=ge($,0,Ae,this.toBBox),he=ge($,Ae,ue,this.toBBox)),J=Pe(fe)+Pe(he),be<Ge?(Ge=be,ke=Ae,qe=J<qe?J:qe):be===Ge&&J<qe&&(qe=J,ke=Ae);return ke},_chooseSplitAxis:function($,ie,ue){var Ae=$.leaf?this.compareMinX:X,fe=$.leaf?this.compareMinY:Oe;this._allDistMargin($,ie,ue,Ae)<this._allDistMargin($,ie,ue,fe)&&$.children.sort(Ae)},_allDistMargin:function($,ie,ue,Ae){$.children.sort(Ae);var Ge,qe,fe=this.toBBox,he=ge($,0,ie,fe),be=ge($,ue-ie,ue,fe),J=se(he)+se(be);for(Ge=ie;Ge<ue-ie;Ge++)qe=$.children[Ge],ce(he,$.leaf?fe(qe):qe),J+=se(he);for(Ge=ue-ie-1;Ge>=ie;Ge--)qe=$.children[Ge],ce(be,$.leaf?fe(qe):qe),J+=se(be);return J},_adjustParentBBoxes:function($,ie,ue){for(var Ae=ue;Ae>=0;Ae--)ce(ie[Ae],$)},_condense:function($){for(var ue,ie=$.length-1;ie>=0;ie--)0===$[ie].children.length?ie>0?(ue=$[ie-1].children).splice(ue.indexOf($[ie]),1):this.clear():Q($[ie],this.toBBox)},_initFormat:function($){var ie=["return a"," - b",";"];this.compareMinX=new Function("a","b",ie.join($[0])),this.compareMinY=new Function("a","b",ie.join($[1])),this.toBBox=new Function("a","return {minX: a"+$[0]+", minY: a"+$[1]+", maxX: a"+$[2]+", maxY: a"+$[3]+"};")}}},4468:(Me,Ne,q)=>{"use strict";var W=q(9582).functionsHaveConfigurableNames(),te=Object,ee=TypeError;Me.exports=function(){if(null!=this&&this!==te(this))throw new ee("RegExp.prototype.flags getter called on non-object");var ge="";return this.hasIndices&&(ge+="d"),this.global&&(ge+="g"),this.ignoreCase&&(ge+="i"),this.multiline&&(ge+="m"),this.dotAll&&(ge+="s"),this.unicode&&(ge+="u"),this.unicodeSets&&(ge+="v"),this.sticky&&(ge+="y"),ge},W&&Object.defineProperty&&Object.defineProperty(Me.exports,"name",{value:"get flags"})},9235:(Me,Ne,q)=>{"use strict";var W=q(2358),te=q(5685),ee=q(4468),Q=q(6343),ge=q(1956),ce=te(Q());W(ce,{getPolyfill:Q,implementation:ee,shim:ge}),Me.exports=ce},6343:(Me,Ne,q)=>{"use strict";var W=q(4468),te=q(2358).supportsDescriptors,ee=Object.getOwnPropertyDescriptor;Me.exports=function(){if(te&&"gim"===/a/gim.flags){var ge=ee(RegExp.prototype,"flags");if(ge&&"function"==typeof ge.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var ce="",X={};if(Object.defineProperty(X,"hasIndices",{get:function(){ce+="d"}}),Object.defineProperty(X,"sticky",{get:function(){ce+="y"}}),"dy"===ce)return ge.get}}return W}},1956:(Me,Ne,q)=>{"use strict";var W=q(2358).supportsDescriptors,te=q(6343),ee=Object.getOwnPropertyDescriptor,Q=Object.defineProperty,ge=TypeError,ce=Object.getPrototypeOf,X=/a/;Me.exports=function(){if(!W||!ce)throw new ge("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var Pe=te(),se=ce(X),V=ee(se,"flags");return(!V||V.get!==Pe)&&Q(se,"flags",{configurable:!0,enumerable:!1,get:Pe}),Pe}},7563:function(Me,Ne){!function(q){"use strict";function ee(ne,oe,k,re,$){let ie,ue,Ae,fe,he=oe[0],be=re[0],J=0,Ge=0;be>he==be>-he?(ie=he,he=oe[++J]):(ie=be,be=re[++Ge]);let qe=0;if(J<ne&&Ge<k)for(be>he==be>-he?(Ae=ie-((ue=he+ie)-he),he=oe[++J]):(Ae=ie-((ue=be+ie)-be),be=re[++Ge]),ie=ue,0!==Ae&&($[qe++]=Ae);J<ne&&Ge<k;)be>he==be>-he?(Ae=ie-((ue=ie+he)-(fe=ue-ie))+(he-fe),he=oe[++J]):(Ae=ie-((ue=ie+be)-(fe=ue-ie))+(be-fe),be=re[++Ge]),ie=ue,0!==Ae&&($[qe++]=Ae);for(;J<ne;)Ae=ie-((ue=ie+he)-(fe=ue-ie))+(he-fe),he=oe[++J],ie=ue,0!==Ae&&($[qe++]=Ae);for(;Ge<k;)Ae=ie-((ue=ie+be)-(fe=ue-ie))+(be-fe),be=re[++Ge],ie=ue,0!==Ae&&($[qe++]=Ae);return 0===ie&&0!==qe||($[qe++]=ie),qe}function Q(ne){return new Float64Array(ne)}const Oe=Q(4),Pe=Q(8),se=Q(12),V=Q(16),Z=Q(4);q.orient2d=function(ne,oe,k,re,$,ie){const ue=(oe-ie)*(k-$),Ae=(ne-$)*(re-ie),fe=ue-Ae;if(0===ue||0===Ae||ue>0!=Ae>0)return fe;const he=Math.abs(ue+Ae);return Math.abs(fe)>=33306690738754716e-32*he?fe:-function(be,J,Ge,qe,ke,de,wt){let gt,De,nt,Be,rt,st,Fe,St,At,Bt,_t,cr,sr,rr,vr,fr,Yt,Dn;const sn=be-ke,Zr=Ge-ke,pr=J-de,Ar=qe-de;rt=(vr=(St=sn-(Fe=(st=134217729*sn)-(st-sn)))*(Bt=Ar-(At=(st=134217729*Ar)-(st-Ar)))-((rr=sn*Ar)-Fe*At-St*At-Fe*Bt))-(_t=vr-(Yt=(St=pr-(Fe=(st=134217729*pr)-(st-pr)))*(Bt=Zr-(At=(st=134217729*Zr)-(st-Zr)))-((fr=pr*Zr)-Fe*At-St*At-Fe*Bt))),Oe[0]=vr-(_t+rt)+(rt-Yt),rt=(sr=rr-((cr=rr+_t)-(rt=cr-rr))+(_t-rt))-(_t=sr-fr),Oe[1]=sr-(_t+rt)+(rt-fr),rt=(Dn=cr+_t)-cr,Oe[2]=cr-(Dn-rt)+(_t-rt),Oe[3]=Dn;let pt=function(me,ze){let Qe=ze[0];for(let Je=1;Je<4;Je++)Qe+=ze[Je];return Qe}(0,Oe),Ie=22204460492503146e-32*wt;if(pt>=Ie||-pt>=Ie||(gt=be-(sn+(rt=be-sn))+(rt-ke),nt=Ge-(Zr+(rt=Ge-Zr))+(rt-ke),De=J-(pr+(rt=J-pr))+(rt-de),Be=qe-(Ar+(rt=qe-Ar))+(rt-de),0===gt&&0===De&&0===nt&&0===Be)||(Ie=11093356479670487e-47*wt+33306690738754706e-32*Math.abs(pt),(pt+=sn*Be+Ar*gt-(pr*nt+Zr*De))>=Ie||-pt>=Ie))return pt;rt=(vr=(St=gt-(Fe=(st=134217729*gt)-(st-gt)))*(Bt=Ar-(At=(st=134217729*Ar)-(st-Ar)))-((rr=gt*Ar)-Fe*At-St*At-Fe*Bt))-(_t=vr-(Yt=(St=De-(Fe=(st=134217729*De)-(st-De)))*(Bt=Zr-(At=(st=134217729*Zr)-(st-Zr)))-((fr=De*Zr)-Fe*At-St*At-Fe*Bt))),Z[0]=vr-(_t+rt)+(rt-Yt),rt=(sr=rr-((cr=rr+_t)-(rt=cr-rr))+(_t-rt))-(_t=sr-fr),Z[1]=sr-(_t+rt)+(rt-fr),rt=(Dn=cr+_t)-cr,Z[2]=cr-(Dn-rt)+(_t-rt),Z[3]=Dn;const we=ee(4,Oe,4,Z,Pe);rt=(vr=(St=sn-(Fe=(st=134217729*sn)-(st-sn)))*(Bt=Be-(At=(st=134217729*Be)-(st-Be)))-((rr=sn*Be)-Fe*At-St*At-Fe*Bt))-(_t=vr-(Yt=(St=pr-(Fe=(st=134217729*pr)-(st-pr)))*(Bt=nt-(At=(st=134217729*nt)-(st-nt)))-((fr=pr*nt)-Fe*At-St*At-Fe*Bt))),Z[0]=vr-(_t+rt)+(rt-Yt),rt=(sr=rr-((cr=rr+_t)-(rt=cr-rr))+(_t-rt))-(_t=sr-fr),Z[1]=sr-(_t+rt)+(rt-fr),rt=(Dn=cr+_t)-cr,Z[2]=cr-(Dn-rt)+(_t-rt),Z[3]=Dn;const _e=ee(we,Pe,4,Z,se);rt=(vr=(St=gt-(Fe=(st=134217729*gt)-(st-gt)))*(Bt=Be-(At=(st=134217729*Be)-(st-Be)))-((rr=gt*Be)-Fe*At-St*At-Fe*Bt))-(_t=vr-(Yt=(St=De-(Fe=(st=134217729*De)-(st-De)))*(Bt=nt-(At=(st=134217729*nt)-(st-nt)))-((fr=De*nt)-Fe*At-St*At-Fe*Bt))),Z[0]=vr-(_t+rt)+(rt-Yt),rt=(sr=rr-((cr=rr+_t)-(rt=cr-rr))+(_t-rt))-(_t=sr-fr),Z[1]=sr-(_t+rt)+(rt-fr),rt=(Dn=cr+_t)-cr,Z[2]=cr-(Dn-rt)+(_t-rt),Z[3]=Dn;const Xe=ee(_e,se,4,Z,V);return V[Xe-1]}(ne,oe,k,re,$,ie,he)},q.orient2dfast=function(ne,oe,k,re,$,ie){return(oe-ie)*(k-$)-(ne-$)*(re-ie)},Object.defineProperty(q,"__esModule",{value:!0})}(Ne)},7303:(Me,Ne,q)=>{"use strict";q.r(Ne),q.d(Ne,{ClassificationCriterion:()=>Jg,ColumnTransformer:()=>LA,DecisionTree:()=>qx,DecisionTreeBase:()=>P0,DecisionTreeClassifier:()=>f2,DecisionTreeRegressor:()=>l2,DummyClassifier:()=>xA,DummyRegressor:()=>PS,ElasticNet:()=>Fo,GaussianNB:()=>n2,KFold:()=>Ux,KMeans:()=>BA,KNeighborsClassifier:()=>jA,KNeighborsRegressor:()=>$A,LabelEncoder:()=>E0,LassoRegression:()=>ks,LinearRegression:()=>to,LinearSVC:()=>e2,LinearSVR:()=>t2,LogisticRegression:()=>Wa,MaxAbsScaler:()=>AA,MinMaxScaler:()=>EA,Normalizer:()=>PA,OneHotEncoder:()=>an,OrdinalEncoder:()=>OA,Pipeline:()=>Mx,RegressionCriterion:()=>Kg,RidgeRegression:()=>Xo,RobustScaler:()=>RA,Serialize:()=>Vn,SimpleImputer:()=>IA,Splitter:()=>Fx,StandardScaler:()=>SA,VotingClassifier:()=>Cx,VotingRegressor:()=>Ax,crossValScore:()=>g2,dataUrls:()=>FA,fromJSON:()=>Do,fromObject:()=>di,getBackend:()=>se,makeLowRankMatrix:()=>zx,makePipeline:()=>TA,makeRegression:()=>c2,makeVotingClassifier:()=>zA,makeVotingRegressor:()=>qA,metrics:()=>W,setBackend:()=>Pe,trainTestSplit:()=>p2});var W={};function te(t,r,i,a,u,c,v){try{var y=t[c](v),_=y.value}catch(x){return void i(x)}y.done?r(_):Promise.resolve(_).then(a,u)}function ee(t){return function(){var r=this,i=arguments;return new Promise(function(a,u){var c=t.apply(r,i);function v(_){te(c,a,u,v,y,"next",_)}function y(_){te(c,a,u,v,y,"throw",_)}v(void 0)})}}function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function X(t,r,i){return(r=function ce(t){var r=function ge(t,r){if("object"!==Q(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,r||"default");if("object"!==Q(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===Q(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}q.r(W),q.d(W,{accuracyScore:()=>pr,confusionMatrix:()=>je,hingeLoss:()=>me,huberLoss:()=>ze,logLoss:()=>Qe,meanAbsoluteError:()=>we,meanSquaredError:()=>_e,meanSquaredLogError:()=>Xe,precisionScore:()=>Ar,r2Score:()=>Ie,recallScore:()=>pt,rocAucScore:()=>Gt,zeroOneLoss:()=>Je});let Oe=null;function Pe(t){Oe=t}function se(){if(null===Oe)throw Error("\n============================\nHowdy \u{1f44b}\u{1f44b}. Looks like you are running scikit but you haven't set a Tensorflow backend. \nTo do so, simply import (or require) your tensorflow library, and call setBackend like so,\n\nimport * as tf from '@tensorflow/tfjs'\nimport * as sk from 'scikitjs'\nsk.setBackend(tf)\n\nThat will let scikit know you wish to use a tensorflow library to perform your calculations.\n============================\n    ");return Oe}function oe(t,r){if(!t)throw new Error(r)}function k(t,r){let i=t;if(ie(t))return"string"===r?[]:[t.length];if(!Array.isArray(t))return[];const a=[];for(;Array.isArray(i)||ie(i)&&"string"!==r;)a.push(i.length),i=i[0];return Array.isArray(t)&&re(t,a,[]),a}function re(t,r,i){if(i=i||[],!Array.isArray(t)&&!ie(t))return void oe(0===r.length,`Element arr[${i.join("][")}] is a primitive, but should be an array/TypedArray of ${r[0]} elements`);oe(r.length>0,`Element arr[${i.join("][")}] should be a primitive, but is an array of ${t.length} elements`),oe(t.length===r[0],`Element arr[${i.join("][")}] should have ${r[0]} elements, but has ${t.length} elements`);const a=r.slice(1);for(let u=0;u<t.length;++u)re(t[u],a,i.concat(u))}function $(t){return Array.isArray(t)?$(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":function ne(t){return"number"==typeof t}(t)?"float32":function V(t){return"string"==typeof t||t instanceof String}(t)?"string":function Z(t){return"boolean"==typeof t}(t)?"bool":null}function ie(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function fe(t){return t instanceof se().Tensor}function he(t){return"object"==typeof t&&!(!t||!t.iloc||t.applyMap)}function be(t){return"object"==typeof t&&!!(t&&t.iloc&&t.applyMap)}function J(t){return!!he(t)||(fe(t)?1===t.rank:function ue(t){const r=k(t),i=$(t);return 1===r.length&&null!==i}(t))}function Ge(t){return!!be(t)||(fe(t)?2===t.rank:function Ae(t){const r=k(t),i=$(t);return 2===r.length&&null!==i}(t))}function wt(t,r){let i=se();if(he(t))return r?t.tensor.asType(r):t.tensor;if(fe(t)){if(1===t.shape.length)return r&&t.dtype!=r?t.asType(r):t;throw new Error("ParamError: if data is a Tensor it must be a Tensor1D. If you really meant to reshape this tensor than use tf.reshape")}return r?i.tensor1d(t,r):i.tensor1d(t)}function gt(t,r){const i=wt(t,r);if("string"===i.dtype)throw new Error("ParamError: data has string dtype, can't convert to numeric Tensor");return i}function De(t,r){let i=se();if(be(t))return r?t.tensor.asType(r):t.tensor;if(fe(t)){if(2===t.shape.length)return r&&t.dtype!=r?t.asType(r):t;throw new Error("ParamError: if data is a Tensor it must be a Tensor2D. If you really meant to reshape this tensor than use tf.reshape")}if(Array.isArray(t)&&ie(t[0])){const a=k(t),u=t.map(c=>Array.from(c));return r?i.tensor2d(u,a,r):i.tensor2d(u,a)}return r?i.tensor2d(t,void 0,r):i.tensor2d(t,void 0)}function Be(t,r){const i=De(t,r);if("string"===i.dtype)throw new Error("ParamError: data has string dtype, can't convert to numeric Tensor");return i}function rt(t,r){const i=function nt(t,r){try{return wt(t,r)}catch{try{return De(t,r)}catch{throw new Error('ParamError: Can"t convert data into 1D or 2D tensor')}}}(t,r);if("string"===i.dtype)throw new Error("ParamError: data has string dtype, can't convert to numeric Tensor");return i}function Bt(t){return be(t)?t.values:fe(t)?t.arraySync():t}function _t(t){return he(t)?t.values:fe(t)?t.arraySync():t}function sr(t){return oe(function qe(t){return J(t)||Ge(t)}(t),"X isn't a Scikit2D or Scikit1D object"),fe(t)?t.shape[0]:be(t)||he(t)?t.size:t.length}function rr(t,r,i){let a=se(),u=new Map,c=[],v=a.randomUniform([r],0,t,"float32",i).dataSync();for(let y=0;y<v.length;y++){v[y]=v[y]*(t-y)/t;let _=Math.floor(v[y]),x=t-y-1;void 0===u.get(_)&&u.set(_,_),void 0===u.get(x)&&u.set(x,x);let m=u.get(x);u.set(x,u.get(_)),u.set(_,m),c.push(u.get(x))}return c}var Dn=q(836),sn=q.n(Dn);function Zr(t,r){oe(J(t),"Labels can't be converted to a 1D Tensor"),oe(J(r),"Predictions can't be converted to a 1D Tensor");let i=gt(t),a=gt(r);return oe(i.size>0,"Must have 1 label or more"),oe(a.size>0,"Must have 1 prediction or more"),oe(i.size===a.size,"Not the same size arrays"),{labelsT:i,predictionsT:a}}function pr(t,r){const{labelsT:i,predictionsT:a}=Zr(t,r);return i.equal(a).sum().div(i.size).dataSync()[0]}function Ar(t,r){let i=se();const{labelsT:a,predictionsT:u}=Zr(t,r);return i.metrics.precision(a,u).dataSync()[0]}function pt(t,r){let i=se();const{labelsT:a,predictionsT:u}=Zr(t,r);return i.metrics.recall(a,u).dataSync()[0]}function Ie(t,r){let i=se();const{labelsT:a,predictionsT:u}=Zr(t,r),c=i.metrics.meanSquaredError(a,u),v=i.metrics.meanSquaredError(a,a.mean());return i.sub(1,c.div(v)).dataSync()[0]}function we(t,r){let i=se();const{labelsT:a,predictionsT:u}=Zr(t,r);return i.metrics.meanAbsoluteError(a,u).dataSync()[0]}function _e(t,r){let i=se();const{labelsT:a,predictionsT:u}=Zr(t,r);return i.metrics.meanSquaredError(a,u).dataSync()[0]}function Xe(t,r){let i=se();const{labelsT:a,predictionsT:u}=Zr(t,r);return i.square(a.log1p().sub(u.log1p())).sum().div(a.size).dataSync()[0]}function me(t,r){let i=se();const{labelsT:a,predictionsT:u}=Zr(t,r);return i.losses.hingeLoss(a,u).dataSync()[0]}function ze(t,r){let i=se();const{labelsT:a,predictionsT:u}=Zr(t,r);return i.losses.huberLoss(a,u).dataSync()[0]}function Qe(t,r){let i=se();const{labelsT:a,predictionsT:u}=Zr(t,r);return i.losses.logLoss(a,u).dataSync()[0]}function Je(t,r){let i=se();const{labelsT:a,predictionsT:u}=Zr(t,r);return i.sub(1,pr(a,u)).dataSync()[0]}function je(t,r){let i=se();const{labelsT:a,predictionsT:u}=Zr(t,r),c=sn()(a.dataSync());return i.math.confusionMatrix(a,u,c.length).arraySync()}function Gt(t,r){const{labelsT:i,predictionsT:a}=Zr(t,r);let u=i.arraySync(),c=a.arraySync();u.push(1),c.push(1);let v=0;for(let y=0;y<u.length-1;y++)v+=u[y]*c[y+1]-u[y+1]*c[y];return v-=1,Math.abs(v)/2}for(var Vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mt=typeof Uint8Array>"u"?[]:new Uint8Array(256),Dt=0;Dt<Vt.length;Dt++)Mt[Vt.charCodeAt(Dt)]=Dt;const Ur=["KNeighborsRegressor","LinearRegression","LassoRegression","RidgeRegression","ElasticNet","LogisticRegression","DummyRegressor","DummyClassifier","MinMaxScaler","StandardScaler","MaxAbsScaler","SimpleImputer","OneHotEncoder","LabelEncoder","OrdinalEncoder","Normalizer","Pipeline","ColumnTransformer","RobustScaler","KMeans","VotingRegressor","VotingClassifier","LinearSVC","LinearSVR","GaussianNB","DecisionTreeClassifier","DecisionTreeRegressor","ClassificationCriterion","RegressionCriterion","Splitter","DecisionTreeBase","DecisionTree"];let un="abcdefghijklmnopqrstuvwxy";function ai(t){let r="";for(let i=0;i<t;i++){let a=Math.floor(Math.random()*un.length);r+=un[a]}return r}class Oi{constructor(r){X(this,"savedArtifacts",void 0),this.savedArtifacts=r||null}save(r){var i=this;return ee(function*(){r.weightData=function(t){var i,r=new Uint8Array(t),a=r.length,u="";for(i=0;i<a;i+=3)u+=Vt[r[i]>>2],u+=Vt[(3&r[i])<<4|r[i+1]>>4],u+=Vt[(15&r[i+1])<<2|r[i+2]>>6],u+=Vt[63&r[i+2]];return a%3==2?u=u.substring(0,u.length-1)+"=":a%3==1&&(u=u.substring(0,u.length-2)+"=="),u}(r.weightData);let a={};for(let u=0;u<r.modelTopology.config.layers.length;u++){let c=r.modelTopology.config.layers[u],v=ai(6);a[c.config.name]=v,c.config.name=v}for(let u=0;u<r.weightSpecs.length;u++){let c=r.weightSpecs[u];Object.keys(a).forEach(y=>{c.name.includes(y)&&(c.name=c.name.replace(y,a[y]))})}return i.savedArtifacts=r,{modelArtifactsInfo:{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:JSON.stringify(r.modelTopology).length,weightSpecsBytes:JSON.stringify(r.weightSpecs).length,weightDataBytes:r.weightData.byteLength}}})()}load(){var r=this;return ee(function*(){return r.savedArtifacts.weightData=function(t){var a,c,v,y,_,r=.75*t.length,i=t.length,u=0;"="===t[t.length-1]&&(r--,"="===t[t.length-2]&&r--);var x=new ArrayBuffer(r),m=new Uint8Array(x);for(a=0;a<i;a+=4)c=Mt[t.charCodeAt(a)],v=Mt[t.charCodeAt(a+1)],y=Mt[t.charCodeAt(a+2)],_=Mt[t.charCodeAt(a+3)],m[u++]=c<<2|v>>4,m[u++]=(15&v)<<4|y>>2,m[u++]=(3&y)<<6|63&_;return x}(r.savedArtifacts.weightData),r.savedArtifacts})()}}function ri(t){return Pi.apply(this,arguments)}function Pi(){return Pi=ee(function*(t,r=[]){let i=se();if(["number","string","undefined","boolean"].includes(typeof t))return t;if("function"==typeof t&&(console.warn(`warning: Serializing function ${t}. Not going to be able to deserialize this later.`),t.name))return t.name;if("object"==typeof t){if(null===t)return null;if(Array.isArray(t))return yield Promise.all(t.map(function(){var u=ee(function*(c){return yield ri(c,r)});return function(c){return u.apply(this,arguments)}}()));if(t instanceof i.Tensor)return{name:"Tensor",value:t.arraySync()};if(t instanceof Int32Array)return{name:"Int32Array",value:Array.from(t)};if(t instanceof Float32Array)return{name:"Float32Array",value:Array.from(t)};if(t instanceof i.Sequential){let u=new Oi;return yield t.save(u),{name:"Sequential",artifacts:u.savedArtifacts}}if(t.ENV&&t.AdadeltaOptimizer&&t.version)return{name:"TF",version:t.version.tfjs};let a={};for(let u of Object.keys(t))r.includes(u)||(a[u]=yield ri(t[u],r));return a}}),Pi.apply(this,arguments)}function Un(t){return fa.apply(this,arguments)}function fa(){return fa=ee(function*(t){let r=se();if("object"!=typeof t)return t;if(null===t)return null;if("Tensor"===t.name)return r.tensor(t.value);if("Sequential"===t.name){let i=new Oi(t.artifacts);return yield r.loadLayersModel(i)}if("Int32Array"===t.name)return new Int32Array(t.value);if("Float32Array"===t.name)return new Float32Array(t.value);if("TF"===t.name)return r;if(Array.isArray(t))return yield Promise.all(t.map(function(){var i=ee(function*(a){return yield Un(a)});return function(a){return i.apply(this,arguments)}}()));for(let i of Object.keys(t))t[i]=yield Un(t[i]);if(Ur.includes(t.name)){let u=new(0,(yield Promise.resolve().then(q.bind(q,7303)))[t.name])(t);for(let c of Object.keys(t))u[c]=t[c];return u}return t}),fa.apply(this,arguments)}function di(t){return zt.apply(this,arguments)}function zt(){return(zt=ee(function*(t){try{return yield Un(t)}catch(r){console.error(r)}})).apply(this,arguments)}function Do(t){return la.apply(this,arguments)}function la(){return(la=ee(function*(t){return yield di(JSON.parse(t))})).apply(this,arguments)}let Fr=["modelCompileArgs","modelFitArgs","denseLayerArgs"];class Vn{toObject(){var r=this;return ee(function*(){return yield ri(r,Fr)})()}toJSON(){var r=this;return ee(function*(){return JSON.stringify(yield r.toObject())})()}}class ki extends Vn{fitTransform(r){return this.fit(r).transform(r)}}class Bo extends Vn{constructor(...r){super(...r),X(this,"EstimatorType","regressor")}score(r,i){return Ie(i,this.predict(r))}}class Gs extends Vn{constructor(...r){super(...r),X(this,"EstimatorType","classifier")}score(r,i){const a=this.predict(r),u=rt(i);return oe(a.shape.length===u.shape.length,"The shape of the model output doesn't match the shape of the actual y values"),Ge(i)?pr(u.argMax(1),a.argMax(1)):pr(i,a)}}class xs extends Bo{constructor({modelFitArgs:r,modelCompileArgs:i,denseLayerArgs:a,optimizerType:u,lossType:c}){super(),X(this,"model",void 0),X(this,"modelFitArgs",void 0),X(this,"modelCompileArgs",void 0),X(this,"denseLayerArgs",void 0),X(this,"isMultiOutput",void 0),X(this,"optimizerType",void 0),X(this,"lossType",void 0),this.tf=se(),this.model=this.tf.sequential(),this.modelFitArgs=r,this.modelCompileArgs=i,this.denseLayerArgs=a,this.isMultiOutput=!1,this.optimizerType=u,this.lossType=c}initializeModel(r,i,a=[]){this.denseLayerArgs.units=1===i.shape.length?1:i.shape[1];const u=this.tf.sequential();u.add(this.tf.layers.dense({inputShape:[r.shape[1]],...this.denseLayerArgs})),u.compile(this.modelCompileArgs),a?.length&&u.setWeights(a),this.model=u}fit(r,i){var a=this;return ee(function*(){let u=Be(r),c=rt(i);return c.shape.length>1&&(a.isMultiOutput=!0),0===a.model.layers.length&&a.initializeModel(u,c),yield a.model.fit(u,c,{...a.modelFitArgs}),a})()}importModel(r){let i=this.tf.tensor2d(r.coef,[r.coef.length,1],"float32"),a=this.tf.tensor1d([r.intercept],"float32");return this.initializeModel(i,a,[i,a]),this}getParams(){return{modelFitArgs:this.modelFitArgs,modelCompileArgs:this.modelCompileArgs,denseLayerArgs:this.denseLayerArgs,optimizerType:this.optimizerType,lossType:this.lossType}}setParams(r){return this.modelCompileArgs=r.modelCompileArgs,this.modelFitArgs=r.modelFitArgs,this.denseLayerArgs=r.denseLayerArgs,this}predict(r){let i=Be(r);if(0===this.model.layers.length)throw new RangeError('Need to call "fit" before "predict"');const a=this.model.predict(i);return this.isMultiOutput?a:a.reshape([-1])}get coef(){const r=this.model.getWeights();if(0===r.length)return this.tf.tensor2d([]);let i=r[0];return 1===i.shape[1]?i.reshape([i.shape[0]]):i}get intercept(){const r=this.model.getWeights();if(r.length<2)return 0;let i=r[1];return 1===i.size?i.arraySync()[0]:i}}class to extends xs{constructor({fitIntercept:r=!0,modelFitOptions:i}={}){let a=se();super({modelCompileArgs:{optimizer:a.train.adam(.1),loss:a.losses.meanSquaredError,metrics:["mse"]},modelFitArgs:{batchSize:32,epochs:1e3,verbose:0,callbacks:[a.callbacks.earlyStopping({monitor:"mse",patience:30})],...i},denseLayerArgs:{units:1,useBias:Boolean(r)},optimizerType:"adam",lossType:"meanSquaredError"}),this.name="LinearRegression"}}class ks extends xs{constructor({fitIntercept:r=!0,alpha:i=1}={}){let a=se();super({modelCompileArgs:{optimizer:a.train.adam(.1),loss:a.losses.meanSquaredError,metrics:["mse"]},modelFitArgs:{batchSize:32,epochs:1e3,verbose:0,callbacks:[a.callbacks.earlyStopping({monitor:"mse",patience:50})]},denseLayerArgs:{units:1,kernelRegularizer:a.regularizers.l1({l1:i}),useBias:Boolean(r)},optimizerType:"adam",lossType:"meanSquaredError"}),this.name="LassoRegression"}}class Xo extends xs{constructor({fitIntercept:r=!0,alpha:i=.01}={}){let a=se();super({modelCompileArgs:{optimizer:a.train.adam(.1),loss:a.losses.meanSquaredError,metrics:["mse"]},modelFitArgs:{batchSize:32,epochs:1e3,verbose:0,callbacks:[a.callbacks.earlyStopping({monitor:"mse",patience:50})]},denseLayerArgs:{units:1,kernelRegularizer:a.regularizers.l2({l2:i}),useBias:Boolean(r)},optimizerType:"adam",lossType:"meanSquaredError"}),this.name="RidgeRegression"}}class Fo extends xs{constructor({alpha:r=1,l1Ratio:i=.5,fitIntercept:a=!0}={}){let u=se();super({modelCompileArgs:{optimizer:u.train.adam(.1),loss:u.losses.meanSquaredError,metrics:["mse"]},modelFitArgs:{batchSize:32,epochs:1e3,verbose:0,callbacks:[u.callbacks.earlyStopping({monitor:"mse",patience:50})]},denseLayerArgs:{units:1,kernelRegularizer:u.regularizers.l1l2({l1:r*i,l2:.5*r*(1-i)}),useBias:Boolean(a)},optimizerType:"adam",lossType:"meanSquaredError"}),this.name="ElasticNet"}}class an extends ki{constructor({categories:r="auto",handleUnknown:i="error",drop:a}={}){super(),X(this,"categories",void 0),X(this,"handleUnknown",void 0),X(this,"categoriesParam",void 0),X(this,"drop",void 0),X(this,"nFeaturesIn",void 0),X(this,"featureNamesIn",void 0),X(this,"name","OneHotEncoder"),this.tf=se(),this.categoriesParam=r,this.categories=[],this.handleUnknown=i,this.nFeaturesIn=0,this.featureNamesIn=[],this.drop=a}classesToMapping(r){const i=new Map;return r.forEach((a,u)=>{i.set(a,u)}),i}loopOver2DArrayToSetLabels(r){for(let i=0;i<r[0].length;i++){let a=new Set;for(let c=0;c<r.length;c++)a.add(r[c][i]);let u=Array.from(a);this.categories.push(u)}}fit(r,i){const a=Bt(r);return"auto"===this.categoriesParam?(this.loopOver2DArrayToSetLabels(a),this):(this.categories=this.categoriesParam,this.nFeaturesIn=0===a.length?0:a[0].length||0,be(r)&&(this.featureNamesIn=[...r.columns]),this)}loopOver2DArrayToUseLabels(r){let i=this.categories.map(u=>this.classesToMapping(u)),a=[];for(let u=0;u<r.length;u++){let c=[];for(let v=0;v<r[0].length;v++){let y=r[u][v],_=i[v].get(y);if(void 0===_){if("error"===this.handleUnknown)throw new Error(`Unknown value ${y} encountered while transforming. Not encountered in training data`);_=-1}"first"===this.drop&&(_-=1),c.push(_)}a.push(c)}return a}convertToOneHot(r,i){return i>=2?this.tf.oneHot(r,i):1===i?(r=this.tf.where(r.equal(0),this.tf.ones(r.shape,"int32"),this.tf.zeros(r.shape,"int32"))).reshape([-1,1]):this.tf.tensor2d([])}transform(r,i){const a=Bt(r),u=this.loopOver2DArrayToUseLabels(a),c=this.tf.tensor2d(u,void 0,"int32");return this.tf.concat(c.unstack(1).map((v,y)=>{let _=this.categories[y].length;return this.convertToOneHot(v,"first"===this.drop?_-1:_)}),1)}inverseTransform(r){let i=this.classesToMapping(this.categories[0]);const a=r.argMax(1),u=new Map(Array.from(i,v=>v.reverse()));return a.arraySync().map(v=>void 0===u.get(v)?null:u.get(v))}}class Ca extends Gs{constructor({modelFitArgs:r,modelCompileArgs:i,denseLayerArgs:a,optimizerType:u,lossType:c}){super(),X(this,"model",void 0),X(this,"modelFitArgs",void 0),X(this,"modelCompileArgs",void 0),X(this,"denseLayerArgs",void 0),X(this,"optimizerType",void 0),X(this,"lossType",void 0),X(this,"oneHot",void 0),X(this,"tf",void 0),X(this,"isMultiOutput",void 0),this.tf=se(),this.model=this.tf.sequential(),this.modelFitArgs=r,this.modelCompileArgs=i,this.denseLayerArgs=a,this.optimizerType=u,this.lossType=c,this.isMultiOutput=!1,this.oneHot=new an}initializeModelForClassification(r){let i=r.toInt();if(2===i.shape.length)return this.modelCompileArgs.loss=this.tf.losses.softmaxCrossEntropy,i;{const a=r.reshape([-1,1]),u=this.oneHot.fitTransform(a);return this.modelCompileArgs.loss=this.oneHot.categories[0].length>2?this.tf.losses.softmaxCrossEntropy:this.tf.losses.sigmoidCrossEntropy,u}}initializeModel(r,i,a=[]){this.denseLayerArgs.units=1===i.shape.length?1:i.shape[1];const u=this.tf.sequential();u.add(this.tf.layers.dense({inputShape:[r.shape[1]],...this.denseLayerArgs})),u.compile(this.modelCompileArgs),a?.length&&u.setWeights(a),this.model=u}fit(r,i){var a=this;return ee(function*(){let u=Be(r),c=rt(i);const v=a.initializeModelForClassification(c);return c.shape.length>1&&(a.isMultiOutput=!0),0===a.model.layers.length&&a.initializeModel(u,v),yield a.model.fit(u,v,{...a.modelFitArgs}),a})()}importModel(r){let i=this.tf.tensor2d(r.coef,[r.coef.length,1],"float32"),a=this.tf.tensor1d([r.intercept],"float32");return this.initializeModel(i,a,[i,a]),this}getParams(){return{modelFitArgs:this.modelFitArgs,modelCompileArgs:this.modelCompileArgs,denseLayerArgs:this.denseLayerArgs,optimizerType:this.optimizerType,lossType:this.lossType}}setParams(r){return this.modelCompileArgs=r.modelCompileArgs,this.modelFitArgs=r.modelFitArgs,this.denseLayerArgs=r.denseLayerArgs,this}predictProba(r){oe(this.model.layers.length>0,'Need to call "fit" before "predict"');let i=Be(r);return this.model.predict(i)}predict(r){oe(this.model.layers.length>0,'Need to call "fit" before "predict"');const i=this.predictProba(r);return this.isMultiOutput?this.tf.oneHot(i.argMax(1),i.shape[1]):this.tf.tensor1d(this.oneHot.inverseTransform(i))}get coef(){const r=this.model.getWeights();if(0===r.length)return this.tf.tensor2d([]);let i=r[0];return 1===i.shape[1]?i.reshape([i.shape[0]]):i}get intercept(){const r=this.model.getWeights();if(r.length<2)return 0;let i=r[1];return 1===i.size?i.arraySync()[0]:i}}class Wa extends Ca{constructor({penalty:r="l2",C:i=1,fitIntercept:a=!0,modelFitOptions:u}={}){let c=se();super({modelCompileArgs:{optimizer:c.train.adam(.1),loss:c.losses.softmaxCrossEntropy,metrics:["accuracy"]},modelFitArgs:{batchSize:32,epochs:1e3,verbose:0,callbacks:[c.callbacks.earlyStopping({monitor:"loss",patience:50})],...u},denseLayerArgs:{units:1,useBias:Boolean(a),activation:"softmax",kernelInitializer:c.initializers.zeros(),biasInitializer:c.initializers.zeros(),kernelRegularizer:"l2"===r?c.regularizers.l2({l2:i}):"l1"===r?c.regularizers.l1({l1:i}):void 0},isClassification:!0,optimizerType:"adam",lossType:"softmaxCrossEntropy"}),this.name="LogisticRegression"}}function bi(){return bi=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},bi.apply(this,arguments)}var Ni={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},Ot=function(r){if(r)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(Ni)};bi(Ot,Ni,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var vo,na,Hn=9e15,po=1e9,ha="0123456789abcdef",go="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",oi="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",rs={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Hn,maxE:Hn,crypto:!1},Er=!0,Ys="[DecimalError] ",mo=Ys+"Invalid argument: ",Xs=Ys+"Precision limit exceeded",au=Ys+"crypto unavailable",fi="[object Decimal]",xa=Math.floor,jn=Math.pow,jf=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,$l=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,In=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Vs=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,yi=1e7,Pr=7,el=go.length-1,gf=oi.length-1,Ut={toStringTag:fi};function Wn(t){var r,i,a,u=t.length-1,c="",v=t[0];if(u>0){for(c+=v,r=1;r<u;r++)(i=Pr-(a=t[r]+"").length)&&(c+=Yn(i)),c+=a;(i=Pr-(a=(v=t[r])+"").length)&&(c+=Yn(i))}else if(0===v)return"0";for(;v%10==0;)v/=10;return c+v}function _i(t,r,i){if(t!==~~t||t<r||t>i)throw Error(mo+t)}function Vo(t,r,i,a){var u,c,v,y;for(c=t[0];c>=10;c/=10)--r;return--r<0?(r+=Pr,u=0):(u=Math.ceil((r+1)/Pr),r%=Pr),c=jn(10,Pr-r),y=t[u]%c|0,null==a?r<3?(0==r?y=y/100|0:1==r&&(y=y/10|0),v=i<4&&99999==y||i>3&&49999==y||5e4==y||0==y):v=(i<4&&y+1==c||i>3&&y+1==c/2)&&(t[u+1]/c/100|0)==jn(10,r-2)-1||(y==c/2||0==y)&&0==(t[u+1]/c/100|0):r<4?(0==r?y=y/1e3|0:1==r?y=y/100|0:2==r&&(y=y/10|0),v=(a||i<4)&&9999==y||!a&&i>3&&4999==y):v=((a||i<4)&&y+1==c||!a&&i>3&&y+1==c/2)&&(t[u+1]/c/1e3|0)==jn(10,r-3)-1,v}function Pu(t,r,i){for(var a,c,u=[0],v=0,y=t.length;v<y;){for(c=u.length;c--;)u[c]*=r;for(u[0]+=ha.indexOf(t.charAt(v++)),a=0;a<u.length;a++)u[a]>i-1&&(void 0===u[a+1]&&(u[a+1]=0),u[a+1]+=u[a]/i|0,u[a]%=i)}return u.reverse()}Ut.absoluteValue=Ut.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),hr(t)},Ut.ceil=function(){return hr(new this.constructor(this),this.e+1,2)},Ut.clampedTo=Ut.clamp=function(t,r){var a=this,u=a.constructor;if(t=new u(t),r=new u(r),!t.s||!r.s)return new u(NaN);if(t.gt(r))throw Error(mo+r);return a.cmp(t)<0?t:a.cmp(r)>0?r:new u(a)},Ut.comparedTo=Ut.cmp=function(t){var r,i,a,u,c=this,v=c.d,y=(t=new c.constructor(t)).d,_=c.s,x=t.s;if(!v||!y)return _&&x?_!==x?_:v===y?0:!v^_<0?1:-1:NaN;if(!v[0]||!y[0])return v[0]?_:y[0]?-x:0;if(_!==x)return _;if(c.e!==t.e)return c.e>t.e^_<0?1:-1;for(r=0,i=(a=v.length)<(u=y.length)?a:u;r<i;++r)if(v[r]!==y[r])return v[r]>y[r]^_<0?1:-1;return a===u?0:a>u^_<0?1:-1},Ut.cosine=Ut.cos=function(){var t,r,i=this,a=i.constructor;return i.d?i.d[0]?(r=a.rounding,a.precision=(t=a.precision)+Math.max(i.e,i.sd())+Pr,a.rounding=1,i=function Ht(t,r){var i,a,u;if(r.isZero())return r;(a=r.d.length)<32?u=(1/Jn(4,i=Math.ceil(a/3))).toString():(i=16,u="2.3283064365386962890625e-10"),t.precision+=i,r=yo(t,1,r.times(u),new t(1));for(var c=i;c--;){var v=r.times(r);r=v.times(v).minus(v).times(8).plus(1)}return t.precision-=i,r}(a,wa(a,i)),a.precision=t,a.rounding=r,hr(2==na||3==na?i.neg():i,t,r,!0)):new a(1):new a(NaN)},Ut.cubeRoot=Ut.cbrt=function(){var t,r,i,a,u,c,v,y,_,x,m=this,g=m.constructor;if(!m.isFinite()||m.isZero())return new g(m);for(Er=!1,(c=m.s*jn(m.s*m,.3333333333333333))&&Math.abs(c)!=1/0?a=new g(c.toString()):(i=Wn(m.d),(c=((t=m.e)-i.length+1)%3)&&(i+=1==c||-2==c?"0":"00"),c=jn(i,.3333333333333333),t=xa((t+1)/3)-(t%3==(t<0?-1:2)),(a=new g(i=c==1/0?"5e"+t:(i=c.toExponential()).slice(0,i.indexOf("e")+1)+t)).s=m.s),v=(t=g.precision)+3;;)if(x=(_=(y=a).times(y).times(y)).plus(m),a=kn(x.plus(m).times(y),x.plus(_),v+2,1),Wn(y.d).slice(0,v)===(i=Wn(a.d)).slice(0,v)){if("9999"!=(i=i.slice(v-3,v+1))&&(u||"4999"!=i)){(!+i||!+i.slice(1)&&"5"==i.charAt(0))&&(hr(a,t+1,1),r=!a.times(a).times(a).eq(m));break}if(!u&&(hr(y,t+1,0),y.times(y).times(y).eq(m))){a=y;break}v+=4,u=1}return Er=!0,hr(a,t,g.rounding,r)},Ut.decimalPlaces=Ut.dp=function(){var t,r=this.d,i=NaN;if(r){if(i=((t=r.length-1)-xa(this.e/Pr))*Pr,t=r[t])for(;t%10==0;t/=10)i--;i<0&&(i=0)}return i},Ut.dividedBy=Ut.div=function(t){return kn(this,new this.constructor(t))},Ut.dividedToIntegerBy=Ut.divToInt=function(t){var i=this.constructor;return hr(kn(this,new i(t),0,1,1),i.precision,i.rounding)},Ut.equals=Ut.eq=function(t){return 0===this.cmp(t)},Ut.floor=function(){return hr(new this.constructor(this),this.e+1,3)},Ut.greaterThan=Ut.gt=function(t){return this.cmp(t)>0},Ut.greaterThanOrEqualTo=Ut.gte=function(t){var r=this.cmp(t);return 1==r||0===r},Ut.hyperbolicCosine=Ut.cosh=function(){var t,r,i,a,u,c=this,v=c.constructor,y=new v(1);if(!c.isFinite())return new v(c.s?1/0:NaN);if(c.isZero())return y;a=v.rounding,v.precision=(i=v.precision)+Math.max(c.e,c.sd())+4,v.rounding=1,(u=c.d.length)<32?r=(1/Jn(4,t=Math.ceil(u/3))).toString():(t=16,r="2.3283064365386962890625e-10"),c=yo(v,1,c.times(r),new v(1),!0);for(var _,x=t,m=new v(8);x--;)_=c.times(c),c=y.minus(_.times(m.minus(_.times(m))));return hr(c,v.precision=i,v.rounding=a,!0)},Ut.hyperbolicSine=Ut.sinh=function(){var t,r,i,a,u=this,c=u.constructor;if(!u.isFinite()||u.isZero())return new c(u);if(i=c.rounding,c.precision=(r=c.precision)+Math.max(u.e,u.sd())+4,c.rounding=1,(a=u.d.length)<3)u=yo(c,2,u,u,!0);else{t=1.4*Math.sqrt(a),u=yo(c,2,u=u.times(1/Jn(5,t=t>16?16:0|t)),u,!0);for(var v,y=new c(5),_=new c(16),x=new c(20);t--;)v=u.times(u),u=u.times(y.plus(v.times(_.times(v).plus(x))))}return c.precision=r,c.rounding=i,hr(u,r,i,!0)},Ut.hyperbolicTangent=Ut.tanh=function(){var t,r,i=this,a=i.constructor;return i.isFinite()?i.isZero()?new a(i):(r=a.rounding,a.precision=(t=a.precision)+7,a.rounding=1,kn(i.sinh(),i.cosh(),a.precision=t,a.rounding=r)):new a(i.s)},Ut.inverseCosine=Ut.acos=function(){var t,r=this,i=r.constructor,a=r.abs().cmp(1),u=i.precision,c=i.rounding;return-1!==a?0===a?r.isNeg()?tn(i,u,c):new i(0):new i(NaN):r.isZero()?tn(i,u+4,c).times(.5):(i.precision=u+6,i.rounding=1,r=r.asin(),t=tn(i,u+4,c).times(.5),i.precision=u,i.rounding=c,t.minus(r))},Ut.inverseHyperbolicCosine=Ut.acosh=function(){var t,r,i=this,a=i.constructor;return i.lte(1)?new a(i.eq(1)?0:NaN):i.isFinite()?(r=a.rounding,a.precision=(t=a.precision)+Math.max(Math.abs(i.e),i.sd())+4,a.rounding=1,Er=!1,i=i.times(i).minus(1).sqrt().plus(i),Er=!0,a.precision=t,a.rounding=r,i.ln()):new a(i)},Ut.inverseHyperbolicSine=Ut.asinh=function(){var t,r,i=this,a=i.constructor;return!i.isFinite()||i.isZero()?new a(i):(r=a.rounding,a.precision=(t=a.precision)+2*Math.max(Math.abs(i.e),i.sd())+6,a.rounding=1,Er=!1,i=i.times(i).plus(1).sqrt().plus(i),Er=!0,a.precision=t,a.rounding=r,i.ln())},Ut.inverseHyperbolicTangent=Ut.atanh=function(){var t,r,i,a,u=this,c=u.constructor;return u.isFinite()?u.e>=0?new c(u.abs().eq(1)?u.s/0:u.isZero()?u:NaN):(t=c.precision,r=c.rounding,a=u.sd(),Math.max(a,t)<2*-u.e-1?hr(new c(u),t,r,!0):(c.precision=i=a-u.e,u=kn(u.plus(1),new c(1).minus(u),i+t,1),c.precision=t+4,c.rounding=1,u=u.ln(),c.precision=t,c.rounding=r,u.times(.5))):new c(NaN)},Ut.inverseSine=Ut.asin=function(){var t,r,i,a,u=this,c=u.constructor;return u.isZero()?new c(u):(r=u.abs().cmp(1),i=c.precision,a=c.rounding,-1!==r?0===r?((t=tn(c,i+4,a).times(.5)).s=u.s,t):new c(NaN):(c.precision=i+6,c.rounding=1,u=u.div(new c(1).minus(u.times(u)).sqrt().plus(1)).atan(),c.precision=i,c.rounding=a,u.times(2)))},Ut.inverseTangent=Ut.atan=function(){var t,r,i,a,u,c,v,y,_,x=this,m=x.constructor,g=m.precision,w=m.rounding;if(x.isFinite()){if(x.isZero())return new m(x);if(x.abs().eq(1)&&g+4<=gf)return(v=tn(m,g+4,w).times(.25)).s=x.s,v}else{if(!x.s)return new m(NaN);if(g+4<=gf)return(v=tn(m,g+4,w).times(.5)).s=x.s,v}for(m.precision=y=g+10,m.rounding=1,t=i=Math.min(28,y/Pr+2|0);t;--t)x=x.div(x.times(x).plus(1).sqrt().plus(1));for(Er=!1,r=Math.ceil(y/Pr),a=1,_=x.times(x),v=new m(x),u=x;-1!==t;)if(u=u.times(_),c=v.minus(u.div(a+=2)),u=u.times(_),void 0!==(v=c.plus(u.div(a+=2))).d[r])for(t=r;v.d[t]===c.d[t]&&t--;);return i&&(v=v.times(2<<i-1)),Er=!0,hr(v,m.precision=g,m.rounding=w,!0)},Ut.isFinite=function(){return!!this.d},Ut.isInteger=Ut.isInt=function(){return!!this.d&&xa(this.e/Pr)>this.d.length-2},Ut.isNaN=function(){return!this.s},Ut.isNegative=Ut.isNeg=function(){return this.s<0},Ut.isPositive=Ut.isPos=function(){return this.s>0},Ut.isZero=function(){return!!this.d&&0===this.d[0]},Ut.lessThan=Ut.lt=function(t){return this.cmp(t)<0},Ut.lessThanOrEqualTo=Ut.lte=function(t){return this.cmp(t)<1},Ut.logarithm=Ut.log=function(t){var r,i,a,u,c,v,y,_,x=this,m=x.constructor,g=m.precision,w=m.rounding;if(null==t)t=new m(10),r=!0;else{if(i=(t=new m(t)).d,t.s<0||!i||!i[0]||t.eq(1))return new m(NaN);r=t.eq(10)}if(i=x.d,x.s<0||!i||!i[0]||x.eq(1))return new m(i&&!i[0]?-1/0:1!=x.s?NaN:i?0:1/0);if(r)if(i.length>1)c=!0;else{for(u=i[0];u%10==0;)u/=10;c=1!==u}if(Er=!1,v=ia(x,y=g+5),a=r?zi(m,y+10):ia(t,y),Vo((_=kn(v,a,y,1)).d,u=g,w))do{if(v=ia(x,y+=10),a=r?zi(m,y+10):ia(t,y),_=kn(v,a,y,1),!c){+Wn(_.d).slice(u+1,u+15)+1==1e14&&(_=hr(_,g+1,0));break}}while(Vo(_.d,u+=10,w));return Er=!0,hr(_,g,w)},Ut.minus=Ut.sub=function(t){var r,i,a,u,c,v,y,_,x,m,g,w,E=this,S=E.constructor;if(t=new S(t),!E.d||!t.d)return E.s&&t.s?E.d?t.s=-t.s:t=new S(t.d||E.s!==t.s?E:NaN):t=new S(NaN),t;if(E.s!=t.s)return t.s=-t.s,E.plus(t);if(w=t.d,y=S.precision,_=S.rounding,!(x=E.d)[0]||!w[0]){if(w[0])t.s=-t.s;else{if(!x[0])return new S(3===_?-0:0);t=new S(E)}return Er?hr(t,y,_):t}if(i=xa(t.e/Pr),m=xa(E.e/Pr),x=x.slice(),c=m-i){for((g=c<0)?(r=x,c=-c,v=w.length):(r=w,i=m,v=x.length),c>(a=Math.max(Math.ceil(y/Pr),v)+2)&&(c=a,r.length=1),r.reverse(),a=c;a--;)r.push(0);r.reverse()}else{for((g=(a=x.length)<(v=w.length))&&(v=a),a=0;a<v;a++)if(x[a]!=w[a]){g=x[a]<w[a];break}c=0}for(g&&(r=x,x=w,w=r,t.s=-t.s),a=w.length-(v=x.length);a>0;--a)x[v++]=0;for(a=w.length;a>c;){if(x[--a]<w[a]){for(u=a;u&&0===x[--u];)x[u]=yi-1;--x[u],x[a]+=yi}x[a]-=w[a]}for(;0===x[--v];)x.pop();for(;0===x[0];x.shift())--i;return x[0]?(t.d=x,t.e=Hs(x,i),Er?hr(t,y,_):t):new S(3===_?-0:0)},Ut.modulo=Ut.mod=function(t){var r,i=this,a=i.constructor;return t=new a(t),!i.d||!t.s||t.d&&!t.d[0]?new a(NaN):!t.d||i.d&&!i.d[0]?hr(new a(i),a.precision,a.rounding):(Er=!1,9==a.modulo?(r=kn(i,t.abs(),0,3,1)).s*=t.s:r=kn(i,t,0,a.modulo,1),r=r.times(t),Er=!0,i.minus(r))},Ut.naturalExponential=Ut.exp=function(){return ou(this)},Ut.naturalLogarithm=Ut.ln=function(){return ia(this)},Ut.negated=Ut.neg=function(){var t=new this.constructor(this);return t.s=-t.s,hr(t)},Ut.plus=Ut.add=function(t){var r,i,a,u,c,v,y,_,x,m,g=this,w=g.constructor;if(t=new w(t),!g.d||!t.d)return g.s&&t.s?g.d||(t=new w(t.d||g.s===t.s?g:NaN)):t=new w(NaN),t;if(g.s!=t.s)return t.s=-t.s,g.minus(t);if(m=t.d,y=w.precision,_=w.rounding,!(x=g.d)[0]||!m[0])return m[0]||(t=new w(g)),Er?hr(t,y,_):t;if(c=xa(g.e/Pr),a=xa(t.e/Pr),x=x.slice(),u=c-a){for(u<0?(i=x,u=-u,v=m.length):(i=m,a=c,v=x.length),u>(v=(c=Math.ceil(y/Pr))>v?c+1:v+1)&&(u=v,i.length=1),i.reverse();u--;)i.push(0);i.reverse()}for((v=x.length)-(u=m.length)<0&&(u=v,i=m,m=x,x=i),r=0;u;)r=(x[--u]=x[u]+m[u]+r)/yi|0,x[u]%=yi;for(r&&(x.unshift(r),++a),v=x.length;0==x[--v];)x.pop();return t.d=x,t.e=Hs(x,a),Er?hr(t,y,_):t},Ut.precision=Ut.sd=function(t){var r,i=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(mo+t);return i.d?(r=On(i.d),t&&i.e+1>r&&(r=i.e+1)):r=NaN,r},Ut.round=function(){var t=this,r=t.constructor;return hr(new r(t),t.e+1,r.rounding)},Ut.sine=Ut.sin=function(){var t,r,i=this,a=i.constructor;return i.isFinite()?i.isZero()?new a(i):(r=a.rounding,a.precision=(t=a.precision)+Math.max(i.e,i.sd())+Pr,a.rounding=1,i=function vf(t,r){var i,a=r.d.length;if(a<3)return r.isZero()?r:yo(t,2,r,r);i=1.4*Math.sqrt(a),r=yo(t,2,r=r.times(1/Jn(5,i=i>16?16:0|i)),r);for(var u,c=new t(5),v=new t(16),y=new t(20);i--;)u=r.times(r),r=r.times(c.plus(u.times(v.times(u).minus(y))));return r}(a,wa(a,i)),a.precision=t,a.rounding=r,hr(na>2?i.neg():i,t,r,!0)):new a(NaN)},Ut.squareRoot=Ut.sqrt=function(){var t,r,i,a,u,c,v=this,y=v.d,_=v.e,x=v.s,m=v.constructor;if(1!==x||!y||!y[0])return new m(!x||x<0&&(!y||y[0])?NaN:y?v:1/0);for(Er=!1,0==(x=Math.sqrt(+v))||x==1/0?(((r=Wn(y)).length+_)%2==0&&(r+="0"),x=Math.sqrt(r),_=xa((_+1)/2)-(_<0||_%2),a=new m(r=x==1/0?"5e"+_:(r=x.toExponential()).slice(0,r.indexOf("e")+1)+_)):a=new m(x.toString()),i=(_=m.precision)+3;;)if(a=(c=a).plus(kn(v,c,i+2,1)).times(.5),Wn(c.d).slice(0,i)===(r=Wn(a.d)).slice(0,i)){if("9999"!=(r=r.slice(i-3,i+1))&&(u||"4999"!=r)){(!+r||!+r.slice(1)&&"5"==r.charAt(0))&&(hr(a,_+1,1),t=!a.times(a).eq(v));break}if(!u&&(hr(c,_+1,0),c.times(c).eq(v))){a=c;break}i+=4,u=1}return Er=!0,hr(a,_,m.rounding,t)},Ut.tangent=Ut.tan=function(){var t,r,i=this,a=i.constructor;return i.isFinite()?i.isZero()?new a(i):(r=a.rounding,a.precision=(t=a.precision)+10,a.rounding=1,(i=i.sin()).s=1,i=kn(i,new a(1).minus(i.times(i)).sqrt(),t+10,0),a.precision=t,a.rounding=r,hr(2==na||4==na?i.neg():i,t,r,!0)):new a(NaN)},Ut.times=Ut.mul=function(t){var r,i,a,u,c,v,y,_,x,m=this,g=m.constructor,w=m.d,E=(t=new g(t)).d;if(t.s*=m.s,!(w&&w[0]&&E&&E[0]))return new g(!t.s||w&&!w[0]&&!E||E&&!E[0]&&!w?NaN:w&&E?0*t.s:t.s/0);for(i=xa(m.e/Pr)+xa(t.e/Pr),(_=w.length)<(x=E.length)&&(c=w,w=E,E=c,v=_,_=x,x=v),c=[],a=v=_+x;a--;)c.push(0);for(a=x;--a>=0;){for(r=0,u=_+a;u>a;)y=c[u]+E[a]*w[u-a-1]+r,c[u--]=y%yi|0,r=y/yi|0;c[u]=(c[u]+r)%yi|0}for(;!c[--v];)c.pop();return r?++i:c.shift(),t.d=c,t.e=Hs(c,i),Er?hr(t,g.precision,g.rounding):t},Ut.toBinary=function(t,r){return ws(this,2,t,r)},Ut.toDecimalPlaces=Ut.toDP=function(t,r){var i=this,a=i.constructor;return i=new a(i),void 0===t?i:(_i(t,0,po),void 0===r?r=a.rounding:_i(r,0,8),hr(i,t+i.e+1,r))},Ut.toExponential=function(t,r){var i,a=this,u=a.constructor;return void 0===t?i=Xi(a,!0):(_i(t,0,po),void 0===r?r=u.rounding:_i(r,0,8),i=Xi(a=hr(new u(a),t+1,r),!0,t+1)),a.isNeg()&&!a.isZero()?"-"+i:i},Ut.toFixed=function(t,r){var i,a,u=this,c=u.constructor;return void 0===t?i=Xi(u):(_i(t,0,po),void 0===r?r=c.rounding:_i(r,0,8),i=Xi(a=hr(new c(u),t+u.e+1,r),!1,t+a.e+1)),u.isNeg()&&!u.isZero()?"-"+i:i},Ut.toFraction=function(t){var r,i,a,u,c,v,y,_,x,m,g,w,E=this,S=E.d,A=E.constructor;if(!S)return new A(E);if(x=i=new A(1),a=_=new A(0),c=(r=new A(a)).e=On(S)-E.e-1,r.d[0]=jn(10,(v=c%Pr)<0?Pr+v:v),null==t)t=c>0?r:x;else{if(!(y=new A(t)).isInt()||y.lt(x))throw Error(mo+y);t=y.gt(r)?c>0?r:x:y}for(Er=!1,y=new A(Wn(S)),m=A.precision,A.precision=c=S.length*Pr*2;g=kn(y,r,0,1,1),1!=(u=i.plus(g.times(a))).cmp(t);)i=a,a=u,x=_.plus(g.times(u=x)),_=u,r=y.minus(g.times(u=r)),y=u;return u=kn(t.minus(i),a,0,1,1),_=_.plus(u.times(x)),i=i.plus(u.times(a)),_.s=x.s=E.s,w=kn(x,a,c,1).minus(E).abs().cmp(kn(_,i,c,1).minus(E).abs())<1?[x,a]:[_,i],A.precision=m,Er=!0,w},Ut.toHexadecimal=Ut.toHex=function(t,r){return ws(this,16,t,r)},Ut.toNearest=function(t,r){var i=this,a=i.constructor;if(i=new a(i),null==t){if(!i.d)return i;t=new a(1),r=a.rounding}else{if(t=new a(t),void 0===r?r=a.rounding:_i(r,0,8),!i.d)return t.s?i:t;if(!t.d)return t.s&&(t.s=i.s),t}return t.d[0]?(Er=!1,i=kn(i,t,0,r,1).times(t),Er=!0,hr(i)):(t.s=i.s,i=t),i},Ut.toNumber=function(){return+this},Ut.toOctal=function(t,r){return ws(this,8,t,r)},Ut.toPower=Ut.pow=function(t){var r,i,a,u,c,v,y=this,_=y.constructor,x=+(t=new _(t));if(!(y.d&&t.d&&y.d[0]&&t.d[0]))return new _(jn(+y,x));if((y=new _(y)).eq(1))return y;if(a=_.precision,c=_.rounding,t.eq(1))return hr(y,a,c);if((r=xa(t.e/Pr))>=t.d.length-1&&(i=x<0?-x:x)<=9007199254740991)return u=Ql(_,y,i,a),t.s<0?new _(1).div(u):hr(u,a,c);if((v=y.s)<0){if(r<t.d.length-1)return new _(NaN);if(1&t.d[r]||(v=1),0==y.e&&1==y.d[0]&&1==y.d.length)return y.s=v,y}return(r=0!=(i=jn(+y,x))&&isFinite(i)?new _(i+"").e:xa(x*(Math.log("0."+Wn(y.d))/Math.LN10+y.e+1)))>_.maxE+1||r<_.minE-1?new _(r>0?v/0:0):(Er=!1,_.rounding=y.s=1,i=Math.min(12,(r+"").length),(u=ou(t.times(ia(y,a+i)),a)).d&&Vo((u=hr(u,a+5,1)).d,a,c)&&+Wn((u=hr(ou(t.times(ia(y,(r=a+10)+i)),r),r+5,1)).d).slice(a+1,a+15)+1==1e14&&(u=hr(u,a+1,0)),u.s=v,Er=!0,_.rounding=c,hr(u,a,c))},Ut.toPrecision=function(t,r){var i,a=this,u=a.constructor;return void 0===t?i=Xi(a,a.e<=u.toExpNeg||a.e>=u.toExpPos):(_i(t,1,po),void 0===r?r=u.rounding:_i(r,0,8),i=Xi(a=hr(new u(a),t,r),t<=a.e||a.e<=u.toExpNeg,t)),a.isNeg()&&!a.isZero()?"-"+i:i},Ut.toSignificantDigits=Ut.toSD=function(t,r){var a=this.constructor;return void 0===t?(t=a.precision,r=a.rounding):(_i(t,1,po),void 0===r?r=a.rounding:_i(r,0,8)),hr(new a(this),t,r)},Ut.toString=function(){var t=this,r=t.constructor,i=Xi(t,t.e<=r.toExpNeg||t.e>=r.toExpPos);return t.isNeg()&&!t.isZero()?"-"+i:i},Ut.truncated=Ut.trunc=function(){return hr(new this.constructor(this),this.e+1,1)},Ut.valueOf=Ut.toJSON=function(){var t=this,r=t.constructor,i=Xi(t,t.e<=r.toExpNeg||t.e>=r.toExpPos);return t.isNeg()?"-"+i:i};var kn=function(){function t(a,u,c){var v,y=0,_=a.length;for(a=a.slice();_--;)a[_]=(v=a[_]*u+y)%c|0,y=v/c|0;return y&&a.unshift(y),a}function r(a,u,c,v){var y,_;if(c!=v)_=c>v?1:-1;else for(y=_=0;y<c;y++)if(a[y]!=u[y]){_=a[y]>u[y]?1:-1;break}return _}function i(a,u,c,v){for(var y=0;c--;)a[c]-=y,a[c]=(y=a[c]<u[c]?1:0)*v+a[c]-u[c];for(;!a[0]&&a.length>1;)a.shift()}return function(a,u,c,v,y,_){var x,m,g,w,E,S,A,G,U,K,R,Y,H,F,le,pe,ve,j,Ee,Ce,Ze=a.constructor,et=a.s==u.s?1:-1,at=a.d,$e=u.d;if(!(at&&at[0]&&$e&&$e[0]))return new Ze(a.s&&u.s&&(at?!$e||at[0]!=$e[0]:$e)?at&&0==at[0]||!$e?0*et:et/0:NaN);for(_?(E=1,m=a.e-u.e):(_=yi,m=xa(a.e/(E=Pr))-xa(u.e/E)),Ee=$e.length,ve=at.length,K=(U=new Ze(et)).d=[],g=0;$e[g]==(at[g]||0);g++);if($e[g]>(at[g]||0)&&m--,null==c?(F=c=Ze.precision,v=Ze.rounding):F=y?c+(a.e-u.e)+1:c,F<0)K.push(1),S=!0;else{if(F=F/E+2|0,g=0,1==Ee){for(w=0,$e=$e[0],F++;(g<ve||w)&&F--;g++)K[g]=(le=w*_+(at[g]||0))/$e|0,w=le%$e|0;S=w||g<ve}else{for((w=_/($e[0]+1)|0)>1&&($e=t($e,w,_),at=t(at,w,_),Ee=$e.length,ve=at.length),pe=Ee,Y=(R=at.slice(0,Ee)).length;Y<Ee;)R[Y++]=0;(Ce=$e.slice()).unshift(0),j=$e[0],$e[1]>=_/2&&++j;do{w=0,(x=r($e,R,Ee,Y))<0?(H=R[0],Ee!=Y&&(H=H*_+(R[1]||0)),(w=H/j|0)>1?(w>=_&&(w=_-1),1==(x=r(A=t($e,w,_),R,G=A.length,Y=R.length))&&(w--,i(A,Ee<G?Ce:$e,G,_))):(0==w&&(x=w=1),A=$e.slice()),(G=A.length)<Y&&A.unshift(0),i(R,A,Y,_),-1==x&&(x=r($e,R,Ee,Y=R.length))<1&&(w++,i(R,Ee<Y?Ce:$e,Y,_)),Y=R.length):0===x&&(w++,R=[0]),K[g++]=w,x&&R[0]?R[Y++]=at[pe]||0:(R=[at[pe]],Y=1)}while((pe++<ve||void 0!==R[0])&&F--);S=void 0!==R[0]}K[0]||K.shift()}if(1==E)U.e=m,vo=S;else{for(g=1,w=K[0];w>=10;w/=10)g++;U.e=g+m*E-1,hr(U,y?c+U.e+1:c,v,S)}return U}}();function hr(t,r,i,a){var u,c,v,y,_,x,m,g,w,E=t.constructor;e:if(null!=r){if(!(g=t.d))return t;for(u=1,y=g[0];y>=10;y/=10)u++;if((c=r-u)<0)c+=Pr,_=(m=g[w=0])/jn(10,u-(v=r)-1)%10|0;else if((w=Math.ceil((c+1)/Pr))>=(y=g.length)){if(!a)break e;for(;y++<=w;)g.push(0);m=_=0,u=1,v=(c%=Pr)-Pr+1}else{for(m=y=g[w],u=1;y>=10;y/=10)u++;_=(v=(c%=Pr)-Pr+u)<0?0:m/jn(10,u-v-1)%10|0}if(a=a||r<0||void 0!==g[w+1]||(v<0?m:m%jn(10,u-v-1)),x=i<4?(_||a)&&(0==i||i==(t.s<0?3:2)):_>5||5==_&&(4==i||a||6==i&&(c>0?v>0?m/jn(10,u-v):0:g[w-1])%10&1||i==(t.s<0?8:7)),r<1||!g[0])return g.length=0,x?(g[0]=jn(10,(Pr-(r-=t.e+1)%Pr)%Pr),t.e=-r||0):g[0]=t.e=0,t;if(0==c?(g.length=w,y=1,w--):(g.length=w+1,y=jn(10,Pr-c),g[w]=v>0?(m/jn(10,u-v)%jn(10,v)|0)*y:0),x)for(;;){if(0==w){for(c=1,v=g[0];v>=10;v/=10)c++;for(v=g[0]+=y,y=1;v>=10;v/=10)y++;c!=y&&(t.e++,g[0]==yi&&(g[0]=1));break}if(g[w]+=y,g[w]!=yi)break;g[w--]=0,y=1}for(c=g.length;0===g[--c];)g.pop()}return Er&&(t.e>E.maxE?(t.d=null,t.e=NaN):t.e<E.minE&&(t.e=0,t.d=[0])),t}function Xi(t,r,i){if(!t.isFinite())return Rn(t);var a,u=t.e,c=Wn(t.d),v=c.length;return r?(i&&(a=i-v)>0?c=c.charAt(0)+"."+c.slice(1)+Yn(a):v>1&&(c=c.charAt(0)+"."+c.slice(1)),c=c+(t.e<0?"e":"e+")+t.e):u<0?(c="0."+Yn(-u-1)+c,i&&(a=i-v)>0&&(c+=Yn(a))):u>=v?(c+=Yn(u+1-v),i&&(a=i-u-1)>0&&(c=c+"."+Yn(a))):((a=u+1)<v&&(c=c.slice(0,a)+"."+c.slice(a)),i&&(a=i-v)>0&&(u+1===v&&(c+="."),c+=Yn(a))),c}function Hs(t,r){var i=t[0];for(r*=Pr;i>=10;i/=10)r++;return r}function zi(t,r,i){if(r>el)throw Er=!0,i&&(t.precision=i),Error(Xs);return hr(new t(go),r,1,!0)}function tn(t,r,i){if(r>gf)throw Error(Xs);return hr(new t(oi),r,i,!0)}function On(t){var r=t.length-1,i=r*Pr+1;if(r=t[r]){for(;r%10==0;r/=10)i--;for(r=t[0];r>=10;r/=10)i++}return i}function Yn(t){for(var r="";t--;)r+="0";return r}function Ql(t,r,i,a){var u,c=new t(1),v=Math.ceil(a/Pr+4);for(Er=!1;;){if(i%2&&Za((c=c.times(r)).d,v)&&(u=!0),0===(i=xa(i/2))){i=c.d.length-1,u&&0===c.d[i]&&++c.d[i];break}Za((r=r.times(r)).d,v)}return Er=!0,c}function jl(t){return 1&t.d[t.d.length-1]}function Ia(t,r,i){for(var a,u=new t(r[0]),c=0;++c<r.length;){if(!(a=new t(r[c])).s){u=a;break}u[i](a)&&(u=a)}return u}function ou(t,r){var i,a,u,c,v,y,_,x=0,m=0,g=0,w=t.constructor,E=w.rounding,S=w.precision;if(!t.d||!t.d[0]||t.e>17)return new w(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==r?(Er=!1,_=S):_=r,y=new w(.03125);t.e>-2;)t=t.times(y),g+=5;for(_+=a=Math.log(jn(2,g))/Math.LN10*2+5|0,i=c=v=new w(1),w.precision=_;;){if(c=hr(c.times(t),_,1),i=i.times(++m),Wn((y=v.plus(kn(c,i,_,1))).d).slice(0,_)===Wn(v.d).slice(0,_)){for(u=g;u--;)v=hr(v.times(v),_,1);if(null!=r)return w.precision=S,v;if(!(x<3&&Vo(v.d,_-a,E,x)))return hr(v,w.precision=S,E,Er=!0);w.precision=_+=10,i=c=y=new w(1),m=0,x++}v=y}}function ia(t,r){var i,a,u,c,v,y,_,x,m,g,w,E=1,A=t,G=A.d,U=A.constructor,K=U.rounding,R=U.precision;if(A.s<0||!G||!G[0]||!A.e&&1==G[0]&&1==G.length)return new U(G&&!G[0]?-1/0:1!=A.s?NaN:G?0:A);if(null==r?(Er=!1,m=R):m=r,U.precision=m+=10,a=(i=Wn(G)).charAt(0),!(Math.abs(c=A.e)<15e14))return x=zi(U,m+2,R).times(c+""),A=ia(new U(a+"."+i.slice(1)),m-10).plus(x),U.precision=R,null==r?hr(A,R,K,Er=!0):A;for(;a<7&&1!=a||1==a&&i.charAt(1)>3;)a=(i=Wn((A=A.times(t)).d)).charAt(0),E++;for(c=A.e,a>1?(A=new U("0."+i),c++):A=new U(a+"."+i.slice(1)),g=A,_=v=A=kn(A.minus(1),A.plus(1),m,1),w=hr(A.times(A),m,1),u=3;;){if(v=hr(v.times(w),m,1),Wn((x=_.plus(kn(v,new U(u),m,1))).d).slice(0,m)===Wn(_.d).slice(0,m)){if(_=_.times(2),0!==c&&(_=_.plus(zi(U,m+2,R).times(c+""))),_=kn(_,new U(E),m,1),null!=r)return U.precision=R,_;if(!Vo(_.d,m-10,K,y))return hr(_,U.precision=R,K,Er=!0);U.precision=m+=10,x=v=A=kn(g.minus(1),g.plus(1),m,1),w=hr(A.times(A),m,1),u=y=1}_=x,u+=2}}function Rn(t){return String(t.s*t.s/0)}function Ws(t,r){var i,a,u;for((i=r.indexOf("."))>-1&&(r=r.replace(".","")),(a=r.search(/e/i))>0?(i<0&&(i=a),i+=+r.slice(a+1),r=r.substring(0,a)):i<0&&(i=r.length),a=0;48===r.charCodeAt(a);a++);for(u=r.length;48===r.charCodeAt(u-1);--u);if(r=r.slice(a,u)){if(u-=a,t.e=i=i-a-1,t.d=[],a=(i+1)%Pr,i<0&&(a+=Pr),a<u){for(a&&t.d.push(+r.slice(0,a)),u-=Pr;a<u;)t.d.push(+r.slice(a,a+=Pr));r=r.slice(a),a=Pr-r.length}else a-=u;for(;a--;)r+="0";t.d.push(+r),Er&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function yo(t,r,i,a,u){var c,v,y,_,m=t.precision,g=Math.ceil(m/Pr);for(Er=!1,_=i.times(i),y=new t(a);;){if(v=kn(y.times(_),new t(r++*r++),m,1),y=u?a.plus(v):a.minus(v),a=kn(v.times(_),new t(r++*r++),m,1),void 0!==(v=y.plus(a)).d[g]){for(c=g;v.d[c]===y.d[c]&&c--;);if(-1==c)break}c=y,y=a,a=v,v=c}return Er=!0,v.d.length=g+1,v}function Jn(t,r){for(var i=t;--r;)i*=t;return i}function wa(t,r){var i,a=r.s<0,u=tn(t,t.precision,1),c=u.times(.5);if((r=r.abs()).lte(c))return na=a?4:1,r;if((i=r.divToInt(u)).isZero())na=a?3:2;else{if((r=r.minus(i.times(u))).lte(c))return na=jl(i)?a?2:3:a?4:1,r;na=jl(i)?a?1:4:a?3:2}return r.minus(u).abs()}function ws(t,r,i,a){var u,c,v,y,_,x,m,g,w,E=t.constructor,S=void 0!==i;if(S?(_i(i,1,po),void 0===a?a=E.rounding:_i(a,0,8)):(i=E.precision,a=E.rounding),t.isFinite()){for(S?(u=2,16==r?i=4*i-3:8==r&&(i=3*i-2)):u=r,(v=(m=Xi(t)).indexOf("."))>=0&&(m=m.replace(".",""),(w=new E(1)).e=m.length-v,w.d=Pu(Xi(w),10,u),w.e=w.d.length),c=_=(g=Pu(m,10,u)).length;0==g[--_];)g.pop();if(g[0]){if(v<0?c--:((t=new E(t)).d=g,t.e=c,g=(t=kn(t,w,i,a,0,u)).d,c=t.e,x=vo),v=g[i],y=u/2,x=x||void 0!==g[i+1],x=a<4?(void 0!==v||x)&&(0===a||a===(t.s<0?3:2)):v>y||v===y&&(4===a||x||6===a&&1&g[i-1]||a===(t.s<0?8:7)),g.length=i,x)for(;++g[--i]>u-1;)g[i]=0,i||(++c,g.unshift(1));for(_=g.length;!g[_-1];--_);for(v=0,m="";v<_;v++)m+=ha.charAt(g[v]);if(S){if(_>1)if(16==r||8==r){for(v=16==r?4:3,--_;_%v;_++)m+="0";for(_=(g=Pu(m,u,r)).length;!g[_-1];--_);for(v=1,m="1.";v<_;v++)m+=ha.charAt(g[v])}else m=m.charAt(0)+"."+m.slice(1);m=m+(c<0?"p":"p+")+c}else if(c<0){for(;++c;)m="0"+m;m="0."+m}else if(++c>_)for(c-=_;c--;)m+="0";else c<_&&(m=m.slice(0,c)+"."+m.slice(c))}else m=S?"0p+0":"0";m=(16==r?"0x":2==r?"0b":8==r?"0o":"")+m}else m=Rn(t);return t.s<0?"-"+m:m}function Za(t,r){if(t.length>r)return t.length=r,!0}function Ho(t){return new this(t).abs()}function Wo(t){return new this(t).acos()}function bs(t){return new this(t).acosh()}function Mi(t,r){return new this(t).plus(r)}function ec(t){return new this(t).asin()}function ro(t){return new this(t).asinh()}function xi(t){return new this(t).atan()}function Ui(t){return new this(t).atanh()}function mf(t,r){t=new this(t),r=new this(r);var i,a=this.precision,u=this.rounding,c=a+4;return t.s&&r.s?t.d||r.d?!r.d||t.isZero()?(i=r.s<0?tn(this,a,u):new this(0)).s=t.s:!t.d||r.isZero()?(i=tn(this,c,1).times(.5)).s=t.s:r.s<0?(this.precision=c,this.rounding=1,i=this.atan(kn(t,r,c,1)),r=tn(this,c,1),this.precision=a,this.rounding=u,i=t.s<0?i.minus(r):i.plus(r)):i=this.atan(kn(t,r,c,1)):(i=tn(this,c,1).times(r.s>0?.25:.75)).s=t.s:i=new this(NaN),i}function tc(t){return new this(t).cbrt()}function su(t){return hr(t=new this(t),t.e+1,2)}function rc(t,r,i){return new this(t).clamp(r,i)}function nc(t){if(!t||"object"!=typeof t)throw Error(Ys+"Object expected");var r,i,a,u=!0===t.defaults,c=["precision",1,po,"rounding",0,8,"toExpNeg",-Hn,0,"toExpPos",0,Hn,"maxE",0,Hn,"minE",-Hn,0,"modulo",0,9];for(r=0;r<c.length;r+=3)if(i=c[r],u&&(this[i]=rs[i]),void 0!==(a=t[i])){if(!(xa(a)===a&&a>=c[r+1]&&a<=c[r+2]))throw Error(mo+i+": "+a);this[i]=a}if(i="crypto",u&&(this[i]=rs[i]),void 0!==(a=t[i])){if(!0!==a&&!1!==a&&0!==a&&1!==a)throw Error(mo+i+": "+a);if(a){if(!(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)))throw Error(au);this[i]=!0}else this[i]=!1}return this}function ba(t){return new this(t).cos()}function ns(t){return new this(t).cosh()}function Zs(t,r){return new this(t).div(r)}function no(t){return new this(t).exp()}function uu(t){return hr(t=new this(t),t.e+1,3)}function gi(){var t,r,i=new this(0);for(Er=!1,t=0;t<arguments.length;)if((r=new this(arguments[t++])).d)i.d&&(i=i.plus(r.times(r)));else{if(r.s)return Er=!0,new this(1/0);i=r}return Er=!0,i.sqrt()}function mr(t){return t instanceof fu||t&&t.toStringTag===fi||!1}function ic(t){return new this(t).ln()}function Tu(t,r){return new this(t).log(r)}function Na(t){return new this(t).log(2)}function io(t){return new this(t).log(10)}function is(){return Ia(this,arguments,"lt")}function Lu(){return Ia(this,arguments,"gt")}function tl(t,r){return new this(t).mod(r)}function ac(t,r){return new this(t).mul(r)}function fn(t,r){return new this(t).pow(r)}function Zo(t){var r,i,a,u,c=0,v=new this(1),y=[];if(void 0===t?t=this.precision:_i(t,1,po),a=Math.ceil(t/Pr),this.crypto)if(crypto.getRandomValues)for(r=crypto.getRandomValues(new Uint32Array(a));c<a;)(u=r[c])>=429e7?r[c]=crypto.getRandomValues(new Uint32Array(1))[0]:y[c++]=u%1e7;else{if(!crypto.randomBytes)throw Error(au);for(r=crypto.randomBytes(a*=4);c<a;)(u=r[c]+(r[c+1]<<8)+(r[c+2]<<16)+((127&r[c+3])<<24))>=214e7?crypto.randomBytes(4).copy(r,c):(y.push(u%1e7),c+=4);c=a/4}else for(;c<a;)y[c++]=1e7*Math.random()|0;for(a=y[--c],t%=Pr,a&&t&&(u=jn(10,Pr-t),y[c]=(a/u|0)*u);0===y[c];c--)y.pop();if(c<0)i=0,y=[0];else{for(i=-1;0===y[0];i-=Pr)y.shift();for(a=1,u=y[0];u>=10;u/=10)a++;a<Pr&&(i-=Pr-a)}return v.e=i,v.d=y,v}function li(t){return hr(t=new this(t),t.e+1,this.rounding)}function Du(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function Fa(t){return new this(t).sin()}function rl(t){return new this(t).sinh()}function rn(t){return new this(t).sqrt()}function Js(t,r){return new this(t).sub(r)}function Kn(){var t=0,r=arguments,i=new this(r[t]);for(Er=!1;i.s&&++t<r.length;)i=i.plus(r[t]);return Er=!0,hr(i,this.precision,this.rounding)}function Ks(t){return new this(t).tan()}function Hi(t){return new this(t).tanh()}function $s(t){return hr(t=new this(t),t.e+1,1)}Ut[Symbol.for("nodejs.util.inspect.custom")]=Ut.toString,Ut[Symbol.toStringTag]="Decimal";var fu=Ut.constructor=function aa(t){var r,i,a;function u(c){var v,y,_,x=this;if(!(x instanceof u))return new u(c);if(x.constructor=u,mr(c))return x.s=c.s,void(Er?!c.d||c.e>u.maxE?(x.e=NaN,x.d=null):c.e<u.minE?(x.e=0,x.d=[0]):(x.e=c.e,x.d=c.d.slice()):(x.e=c.e,x.d=c.d?c.d.slice():c.d));if("number"==(_=typeof c)){if(0===c)return x.s=1/c<0?-1:1,x.e=0,void(x.d=[0]);if(c<0?(c=-c,x.s=-1):x.s=1,c===~~c&&c<1e7){for(v=0,y=c;y>=10;y/=10)v++;return void(Er?v>u.maxE?(x.e=NaN,x.d=null):v<u.minE?(x.e=0,x.d=[0]):(x.e=v,x.d=[c]):(x.e=v,x.d=[c]))}return 0*c!=0?(c||(x.s=NaN),x.e=NaN,void(x.d=null)):Ws(x,c.toString())}if("string"!==_)throw Error(mo+c);return 45===(y=c.charCodeAt(0))?(c=c.slice(1),x.s=-1):(43===y&&(c=c.slice(1)),x.s=1),Vs.test(c)?Ws(x,c):function Vi(t,r){var i,a,u,c,v,y,_,x,m;if(r.indexOf("_")>-1){if(r=r.replace(/(\d)_(?=\d)/g,"$1"),Vs.test(r))return Ws(t,r)}else if("Infinity"===r||"NaN"===r)return+r||(t.s=NaN),t.e=NaN,t.d=null,t;if($l.test(r))i=16,r=r.toLowerCase();else if(jf.test(r))i=2;else{if(!In.test(r))throw Error(mo+r);i=8}for((c=r.search(/p/i))>0?(_=+r.slice(c+1),r=r.substring(2,c)):r=r.slice(2),c=r.indexOf("."),a=t.constructor,(v=c>=0)&&(c=(y=(r=r.replace(".","")).length)-c,u=Ql(a,new a(i),c,2*c)),c=m=(x=Pu(r,i,yi)).length-1;0===x[c];--c)x.pop();return c<0?new a(0*t.s):(t.e=Hs(x,m),t.d=x,Er=!1,v&&(t=kn(t,u,4*y)),_&&(t=t.times(Math.abs(_)<54?jn(2,_):fu.pow(2,_))),Er=!0,t)}(x,c)}if(u.prototype=Ut,u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.EUCLID=9,u.config=u.set=nc,u.clone=aa,u.isDecimal=mr,u.abs=Ho,u.acos=Wo,u.acosh=bs,u.add=Mi,u.asin=ec,u.asinh=ro,u.atan=xi,u.atanh=Ui,u.atan2=mf,u.cbrt=tc,u.ceil=su,u.clamp=rc,u.cos=ba,u.cosh=ns,u.div=Zs,u.exp=no,u.floor=uu,u.hypot=gi,u.ln=ic,u.log=Tu,u.log10=io,u.log2=Na,u.max=is,u.min=Lu,u.mod=tl,u.mul=ac,u.pow=fn,u.random=Zo,u.round=li,u.sign=Du,u.sin=Fa,u.sinh=rl,u.sqrt=rn,u.sub=Js,u.sum=Kn,u.tan=Ks,u.tanh=Hi,u.trunc=$s,void 0===t&&(t={}),t&&!0!==t.defaults)for(a=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<a.length;)t.hasOwnProperty(i=a[r++])||(t[i]=this[i]);return u.config(t),u}(rs);go=new fu(go),oi=new fu(oi);const _o=fu;function dr(t){return"number"==typeof t}function Vr(t){return!(!t||"object"!=typeof t||"function"!=typeof t.constructor)&&(!0===t.isBigNumber&&"object"==typeof t.constructor.prototype&&!0===t.constructor.prototype.isBigNumber||"function"==typeof t.constructor.isDecimal&&!0===t.constructor.isDecimal(t))}function ao(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isComplex||!1}function qa(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isFraction||!1}function oa(t){return t&&!0===t.constructor.prototype.isUnit||!1}function Zn(t){return"string"==typeof t}var ei=Array.isArray;function Gr(t){return t&&!0===t.constructor.prototype.isMatrix||!1}function xo(t){return Array.isArray(t)||Gr(t)}function pa(t){return t&&t.isDenseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function Ja(t){return t&&t.isSparseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function ga(t){return t&&!0===t.constructor.prototype.isRange||!1}function va(t){return t&&!0===t.constructor.prototype.isIndex||!1}function oo(t){return"boolean"==typeof t}function wo(t){return t&&!0===t.constructor.prototype.isResultSet||!1}function qo(t){return t&&!0===t.constructor.prototype.isHelp||!1}function Wi(t){return"function"==typeof t}function oc(t){return t instanceof Date}function df(t){return t instanceof RegExp}function ma(t){return!(!t||"object"!=typeof t||t.constructor!==Object||ao(t)||qa(t))}function as(t){return null===t}function bo(t){return void 0===t}function nl(t){return t&&!0===t.isAccessorNode&&!0===t.constructor.prototype.isNode||!1}function Ma(t){return t&&!0===t.isArrayNode&&!0===t.constructor.prototype.isNode||!1}function sc(t){return t&&!0===t.isAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function lu(t){return t&&!0===t.isBlockNode&&!0===t.constructor.prototype.isNode||!1}function Qs(t){return t&&!0===t.isConditionalNode&&!0===t.constructor.prototype.isNode||!1}function il(t){return t&&!0===t.isConstantNode&&!0===t.constructor.prototype.isNode||!1}function al(t){return t&&!0===t.isFunctionAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function Ns(t){return t&&!0===t.isFunctionNode&&!0===t.constructor.prototype.isNode||!1}function No(t){return t&&!0===t.isIndexNode&&!0===t.constructor.prototype.isNode||!1}function Ti(t){return t&&!0===t.isNode&&!0===t.constructor.prototype.isNode||!1}function Ms(t){return t&&!0===t.isObjectNode&&!0===t.constructor.prototype.isNode||!1}function Zi(t){return t&&!0===t.isOperatorNode&&!0===t.constructor.prototype.isNode||!1}function Mo(t){return t&&!0===t.isParenthesisNode&&!0===t.constructor.prototype.isNode||!1}function Es(t){return t&&!0===t.isRangeNode&&!0===t.constructor.prototype.isNode||!1}function ol(t){return t&&!0===t.isSymbolNode&&!0===t.constructor.prototype.isNode||!1}function Ss(t){return t&&!0===t.constructor.prototype.isChain||!1}function $n(t){var r=typeof t;return"object"===r?null===t?"null":Array.isArray(t)?"Array":t instanceof Date?"Date":t instanceof RegExp?"RegExp":Vr(t)?"BigNumber":ao(t)?"Complex":qa(t)?"Fraction":Gr(t)?"Matrix":oa(t)?"Unit":va(t)?"Index":ga(t)?"Range":wo(t)?"ResultSet":Ti(t)?t.type:Ss(t)?"Chain":qo(t)?"Help":"Object":"function"===r?"Function":r}function br(t){var r=typeof t;if("number"===r||"string"===r||"boolean"===r||null==t)return t;if("function"==typeof t.clone)return t.clone();if(Array.isArray(t))return t.map(function(i){return br(i)});if(t instanceof Date)return new Date(t.valueOf());if(Vr(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return function Ji(t,r){var i={};for(var a in t)Qr(t,a)&&(i[a]=r(t[a]));return i}(t,br)}function za(t,r){for(var i in r)Qr(r,i)&&(t[i]=r[i]);return t}function Ru(t,r){var i,a,u;if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(a=0,u=t.length;a<u;a++)if(!Ru(t[a],r[a]))return!1;return!0}if("function"==typeof t)return t===r;if(t instanceof Object){if(Array.isArray(r)||!(r instanceof Object))return!1;for(i in t)if(!(i in r)||!Ru(t[i],r[i]))return!1;for(i in r)if(!(i in t))return!1;return!0}return t===r}function Qr(t,r){return t&&Object.hasOwnProperty.call(t,r)}function We(t,r,i,a){function u(c){var v=function Cs(t,r){for(var i={},a=0;a<r.length;a++){var u=r[a],c=t[u];void 0!==c&&(i[u]=c)}return i}(c,r.map(Ko));return function So(t,r,i){var a=r.filter(c=>!function Qa(t){return t&&"?"===t[0]}(c)).every(c=>void 0!==i[c]);if(!a){var u=r.filter(c=>void 0===i[c]);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(u.map(c=>'"'.concat(c,'"')).join(", "),"."))}}(t,r,c),i(v)}return u.isFactory=!0,u.fn=t,u.dependencies=r.slice().sort(),a&&(u.meta=a),u}function Ko(t){return t&&"?"===t[0]?t.slice(1):t}var mi=We("BigNumber",["?on","config"],t=>{var{on:r,config:i}=t,a=_o.clone({precision:i.precision,modulo:_o.EUCLID});return a.prototype=Object.create(a.prototype),a.prototype.type="BigNumber",a.prototype.isBigNumber=!0,a.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},a.fromJSON=function(u){return new a(u.value)},r&&r("config",function(u,c){u.precision!==c.precision&&a.config({precision:u.precision})}),a},{isClass:!0}),Ua=q(1006);function xr(t){return"boolean"==typeof t||!!isFinite(t)&&t===Math.round(t)}Math,Math,Math,Math,Math,Math;function Qi(t,r,i){var u={2:"0b",8:"0o",16:"0x"}[r],c="";if(i){if(i<1)throw new Error("size must be in greater than 0");if(!xr(i))throw new Error("size must be an integer");if(t>2**(i-1)-1||t<-(2**(i-1)))throw new Error("Value must be in range [-2^".concat(i-1,", 2^").concat(i-1,"-1]"));if(!xr(t))throw new Error("Value must be an integer");t<0&&(t+=2**i),c="i".concat(i)}var v="";return t<0&&(t=-t,v="-"),"".concat(v).concat(u).concat(t.toString(r)).concat(c)}function Ao(t,r){if("function"==typeof r)return r(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var a,u,i="auto";if(r&&(r.notation&&(i=r.notation),dr(r)?a=r:dr(r.precision)&&(a=r.precision),r.wordSize&&"number"!=typeof(u=r.wordSize)))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return function qu(t,r){if(isNaN(t)||!isFinite(t))return String(t);var i=ji(t),a="number"==typeof r?Ga(i,i.exponent+1+r):i,u=a.coefficients,c=a.exponent+1,v=c+(r||0);return u.length<v&&(u=u.concat(js(v-u.length))),c<0&&(u=js(1-c).concat(u),c=1),c<u.length&&u.splice(c,0,0===c?"0.":"."),a.sign+u.join("")}(t,a);case"exponential":return Si(t,a);case"engineering":return function Fu(t,r){if(isNaN(t)||!isFinite(t))return String(t);var a=Ga(ji(t),r),u=a.exponent,c=a.coefficients,v=u%3==0?u:u<0?u-3-u%3:u-u%3;if(dr(r))for(;r>c.length||u-v+1>c.length;)c.push(0);else for(var y=Math.abs(u-v)-(c.length-1),_=0;_<y;_++)c.push(0);for(var x=Math.abs(u-v),m=1;x>0;)m++,x--;var g=c.slice(m).join(""),w=dr(r)&&g.length||g.match(/[1-9]/)?"."+g:"",E=c.slice(0,m).join("")+w+"e"+(u>=0?"+":"")+v.toString();return a.sign+E}(t,a);case"bin":return Qi(t,2,u);case"oct":return Qi(t,8,u);case"hex":return Qi(t,16,u);case"auto":return function sl(t,r,i){if(isNaN(t)||!isFinite(t))return String(t);var a=i&&void 0!==i.lowerExp?i.lowerExp:-3,u=i&&void 0!==i.upperExp?i.upperExp:5,c=ji(t),v=r?Ga(c,r):c;if(v.exponent<a||v.exponent>=u)return Si(t,r);var y=v.coefficients,_=v.exponent;y.length<r&&(y=y.concat(js(r-y.length))),y=y.concat(js(_-y.length+1+(y.length<r?r-y.length:0)));var x=_>0?_:0;return x<(y=js(-_).concat(y)).length-1&&y.splice(x+1,0,"."),v.sign+y.join("")}(t,a,r&&r).replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],v=arguments[4];return"."!==c?c+v:v});default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ji(t){var r=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!r)throw new SyntaxError("Invalid number "+t);var i=r[1],a=r[2],u=parseFloat(r[4]||"0"),c=a.indexOf(".");u+=-1!==c?c-1:a.length-1;var v=a.replace(".","").replace(/^0*/,function(y){return u-=y.length,""}).replace(/0*$/,"").split("").map(function(y){return parseInt(y)});return 0===v.length&&(v.push(0),u++),{sign:i,coefficients:v,exponent:u}}function Si(t,r){if(isNaN(t)||!isFinite(t))return String(t);var i=ji(t),a=r?Ga(i,r):i,u=a.coefficients,c=a.exponent;u.length<r&&(u=u.concat(js(r-u.length)));var v=u.shift();return a.sign+v+(u.length>0?"."+u.join(""):"")+"e"+(c>=0?"+":"")+c}function Ga(t,r){for(var i={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},a=i.coefficients;r<=0;)a.unshift(0),i.exponent++,r++;if(a.length>r&&a.splice(r,a.length-r)[0]>=5){var c=r-1;for(a[c]++;10===a[c];)a.pop(),0===c&&(a.unshift(0),i.exponent++,c++),a[--c]++}return i}function js(t){for(var r=[],i=0;i<t;i++)r.push(0);return r}var ul=Number.EPSILON||2220446049250313e-31;function so(t,r,i){if(null==i)return t===r;if(t===r)return!0;if(isNaN(t)||isNaN(r))return!1;if(isFinite(t)&&isFinite(r)){var a=Math.abs(t-r);return a<ul||a<=Math.max(Math.abs(t),Math.abs(r))*i}return!1}Math,Math,Math,Math,Math;Math;var Br=We("Complex",[],()=>(Ua.prototype.type="Complex",Ua.prototype.isComplex=!0,Ua.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ua.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ua.prototype.format=function(t){var i=this.im,a=this.re,u=Ao(this.re,t),c=Ao(this.im,t),v=dr(t)?t:t?t.precision:null;if(null!==v){var y=Math.pow(10,-v);Math.abs(a/i)<y&&(a=0),Math.abs(i/a)<y&&(i=0)}return 0===i?u:0===a?1===i?"i":-1===i?"-i":c+"i":i<0?-1===i?u+" - i":u+" - "+c.substring(1)+"i":1===i?u+" + i":u+" + "+c+"i"},Ua.fromPolar=function(t){switch(arguments.length){case 1:var r=arguments[0];if("object"==typeof r)return Ua(r);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var i=arguments[0],a=arguments[1];if(dr(i)){if(oa(a)&&a.hasBase("ANGLE")&&(a=a.toNumber("rad")),dr(a))return new Ua({r:i,phi:a});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ua.prototype.valueOf=Ua.prototype.toString,Ua.fromJSON=function(t){return new Ua(t)},Ua.compare=function(t,r){return t.re>r.re?1:t.re<r.re?-1:t.im>r.im?1:t.im<r.im?-1:0},Ua),{isClass:!0});function pu(t){var r=0,i=1,a=Object.create(null),u=Object.create(null),c=0,v=function(_){var x=u[_];if(x&&(delete a[x],delete u[_],--r,i===x)){if(!r)return c=0,void(i=1);for(;!hasOwnProperty.call(a,++i););}};return t=Math.abs(t),{hit:function(_){var x=u[_],m=++c;if(a[m]=_,u[_]=m,!x)return++r<=t?void 0:(v(_=a[i]),_);if(delete a[x],i===x)for(;!hasOwnProperty.call(a,++i););},delete:v,clear:function(){r=c=0,i=1,a=Object.create(null),u=Object.create(null)}}}function Co(t){var{hasher:r,limit:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i=i??Number.POSITIVE_INFINITY,r=r??JSON.stringify,function a(){"object"!=typeof a.cache&&(a.cache={values:new Map,lru:pu(i||Number.POSITIVE_INFINITY)});for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var v=r(u);if(a.cache.values.has(v))return a.cache.lru.hit(v),a.cache.values.get(v);var y=t.apply(t,u);return a.cache.values.set(v,y),a.cache.values.delete(a.cache.lru.hit(v)),y}}Co(function(t){return new t(1).exp()},{hasher:e}),Co(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:e});var xf=Co(function(t){return t.acos(-1)},{hasher:e});function e(t){return t[0].precision}function fl(t,r){return We(t,["config","BigNumber"],a=>{var{config:u,BigNumber:c}=a;return"BigNumber"===u.number?new c(r):r})}Co(function(t){return xf(t).times(2)},{hasher:e}),Math,Math,Math,fl("fineStructure",.0072973525693),fl("weakMixingAngle",.2229),fl("efimovFactor",22.7),fl("sackurTetrode",-1.16487052358);var tr=q(4613),Nr=We("Fraction",[],()=>(tr.prototype.type="Fraction",tr.prototype.isFraction=!0,tr.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},tr.fromJSON=function(t){return new tr(t)},tr),{isClass:!0}),En=We("Matrix",[],()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(r,i){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(r,i,a){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(r){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(r,i,a){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(r,i){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(r,i){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(r,i){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(r){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(r){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function mc(t,r,i){var u=new(0,t.constructor)(2),c="";if(i){if(i<1)throw new Error("size must be in greater than 0");if(!xr(i))throw new Error("size must be an integer");if(t.greaterThan(u.pow(i-1).sub(1))||t.lessThan(u.pow(i-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(i-1,", 2^").concat(i-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(u.pow(i))),c="i".concat(i)}switch(r){case 2:return"".concat(t.toBinary()).concat(c);case 8:return"".concat(t.toOctal()).concat(c);case 16:return"".concat(t.toHexadecimal()).concat(c);default:throw new Error("Base ".concat(r," not supported "))}}function Bh(t,r){return void 0!==r?t.toExponential(r-1):t.toExponential()}function Ln(t,r){var i=function Lv(t,r){return"number"==typeof t?Ao(t,r):Vr(t)?function Ov(t,r){if("function"==typeof r)return r(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var a,u,i="auto";if(void 0!==r&&(r.notation&&(i=r.notation),"number"==typeof r?a=r:r.precision&&(a=r.precision),r.wordSize&&"number"!=typeof(u=r.wordSize)))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return function Tv(t,r){return t.toFixed(r)}(t,a);case"exponential":return Bh(t,a);case"engineering":return function Pv(t,r){var i=t.e,a=i%3==0?i:i<0?i-3-i%3:i-i%3,u=t.mul(Math.pow(10,-a)),c=u.toPrecision(r);return-1!==c.indexOf("e")&&(c=u.toString()),c+"e"+(i>=0?"+":"")+a.toString()}(t,a);case"bin":return mc(t,2,u);case"oct":return mc(t,8,u);case"hex":return mc(t,16,u);case"auto":var c=r&&void 0!==r.lowerExp?r.lowerExp:-3,v=r&&void 0!==r.upperExp?r.upperExp:5;if(t.isZero())return"0";var _=t.toSignificantDigits(a),x=_.e;return(x>=c&&x<v?_.toFixed():Bh(t,a)).replace(/((\.\d*?)(0+))($|e)/,function(){var m=arguments[2],g=arguments[4];return"."!==m?m+g:g});default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(t,r):function Dv(t){return t&&"object"==typeof t&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}(t)?r&&"decimal"===r.fraction?t.toString():t.s*t.n+"/"+t.d:Array.isArray(t)?Fh(t,r):Zn(t)?'"'+t+'"':"function"==typeof t?t.syntax?String(t.syntax):"function":t&&"object"==typeof t?"function"==typeof t.format?t.format(r):t&&t.toString(r)!=={}.toString()?t.toString(r):"{"+Object.keys(t).map(a=>'"'+a+'": '+Ln(t[a],r)).join(", ")+"}":String(t)}(t,r);return r&&"object"==typeof r&&"truncate"in r&&i.length>r.truncate?i.substring(0,r.truncate-3)+"...":i}function Fh(t,r){if(Array.isArray(t)){for(var i="[",a=t.length,u=0;u<a;u++)0!==u&&(i+=", "),i+=Fh(t[u],r);return i+"]"}return Ln(t,r)}function on(t,r,i){if(!(this instanceof on))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=r,this.relation=i,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(r)?"["+r.join(", ")+"]":r)+")",this.stack=(new Error).stack}function Ls(t,r,i){if(!(this instanceof Ls))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=r):(this.min=r,this.max=i),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}function Sn(t){for(var r=[];Array.isArray(t);)r.push(t.length),t=t[0];return r}function dc(t,r,i){var a,u=t.length;if(u!==r[i])throw new on(u,r[i]);if(i<r.length-1){var c=i+1;for(a=0;a<u;a++){if(!Array.isArray(t[a]))throw new on(r.length-1,r.length,"<");dc(t[a],r,c)}}else for(a=0;a<u;a++)if(Array.isArray(t[a]))throw new on(r.length+1,r.length,">")}function qh(t,r){if(0===r.length){if(Array.isArray(t))throw new on(t.length,0)}else dc(t,r,0)}function si(t,r){if(!dr(t)||!xr(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof r&&t>=r)throw new Ls(t,r)}function bf(t,r,i){if(!Array.isArray(t)||!Array.isArray(r))throw new TypeError("Array expected");if(0===r.length)throw new Error("Resizing to scalar is not supported");return r.forEach(function(u){if(!dr(u)||!xr(u)||u<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ln(r)+")")}),zh(t,r,0,void 0!==i?i:0),t}function zh(t,r,i,a){var u,c,y=r[i],_=Math.min(t.length,y);if(t.length=y,i<r.length-1){var x=i+1;for(u=0;u<_;u++)c=t[u],Array.isArray(c)||(t[u]=c=[c]),zh(c,r,x,a);for(u=_;u<y;u++)t[u]=c=[],zh(c,r,x,a)}else{for(u=0;u<_;u++)for(;Array.isArray(t[u]);)t[u]=t[u][0];for(u=_;u<y;u++)t[u]=a}}function Mf(t,r){var i=Uh(t),a=t.slice(),c=t.indexOf(-1);if(t.indexOf(-1,c+1)>=0)throw new Error("More than one wildcard in sizes");if(c>=0){if(r%i!=0)throw new Error("Could not replace wildcard, since "+r+" is no multiple of "+-i);a[c]=-r/i}return a}function Uh(t){return t.reduce((r,i)=>r*i,1)}function kh(t,r,i,a){var u=a||Sn(t);if(i)for(var c=0;c<i;c++)t=[t],u.unshift(1);for(t=Yh(t,r,0);u.length<r;)u.push(1);return t}function Yh(t,r,i){var a,u;if(Array.isArray(t)){var c=i+1;for(a=0,u=t.length;a<u;a++)t[a]=Yh(t[a],r,c)}else for(var v=i;v<r;v++)t=[t];return t}function Fn(t){if(!Array.isArray(t))return t;var r=[];return t.forEach(function i(a){Array.isArray(a)?a.forEach(i):r.push(a)}),r}function Sf(t,r){for(var i,a=0,u=0;u<t.length;u++){var c=t[u],v=Array.isArray(c);if(0===u&&v&&(a=c.length),v&&c.length!==a)return;var y=v?Sf(c,r):r(c);if(void 0===i)i=y;else if(i!==y)return"mixed"}return i}(on.prototype=new RangeError).constructor=RangeError,on.prototype.name="DimensionError",on.prototype.isDimensionError=!0,(Ls.prototype=new RangeError).constructor=RangeError,Ls.prototype.name="IndexError",Ls.prototype.isIndexError=!0;var Gv=We("DenseMatrix",["Matrix"],t=>{var{Matrix:r}=t;function i(m,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!Zn(g))throw new Error("Invalid datatype: "+g);if(Gr(m))"DenseMatrix"===m.type?(this._data=br(m._data),this._size=br(m._size),this._datatype=g||m._datatype):(this._data=m.toArray(),this._size=m.size(),this._datatype=g||m._datatype);else if(m&&ei(m.data)&&ei(m.size))this._data=m.data,this._size=m.size,qh(this._data,this._size),this._datatype=g||m.datatype;else if(ei(m))this._data=x(m),this._size=Sn(this._data),qh(this._data,this._size),this._datatype=g;else{if(m)throw new TypeError("Unsupported type of data ("+$n(m)+")");this._data=[],this._size=[0],this._datatype=g}}function u(m,g,w,E){var S=E===w-1,A=g.dimension(E);return S?A.map(function(G){return si(G,m.length),m[G]}).valueOf():A.map(function(G){return si(G,m.length),u(m[G],g,w,E+1)}).valueOf()}function v(m,g,w,E,S){var A=S===E-1;g.dimension(S).forEach(A?function(U,K){si(U),m[U]=w[K[0]]}:function(U,K){si(U),v(m[U],g,w[K[0]],E,S+1)})}function y(m,g,w){if(0===g.length){for(var E=m._data;ei(E);)E=E[0];return E}return m._size=g.slice(0),m._data=bf(m._data,m._size,w),m}function _(m,g,w){for(var E=m._size.slice(0),S=!1;E.length<g.length;)E.push(0),S=!0;for(var A=0,G=g.length;A<G;A++)g[A]>E[A]&&(E[A]=g[A],S=!0);S&&y(m,E,w)}function x(m){for(var g=0,w=m.length;g<w;g++){var E=m[g];ei(E)?m[g]=x(E):E&&!0===E.isMatrix&&(m[g]=x(E.valueOf()))}return m}return(i.prototype=new r).createDenseMatrix=function(m,g){return new i(m,g)},i.prototype.type="DenseMatrix",i.prototype.isDenseMatrix=!0,i.prototype.getDataType=function(){return Sf(this._data,$n)},i.prototype.storage=function(){return"dense"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,g){return new i(m,g)},i.prototype.subset=function(m,g,w){switch(arguments.length){case 1:return function a(m,g){if(!va(g))throw new TypeError("Invalid index");if(g.isScalar())return m.get(g.min());var E=g.size();if(E.length!==m._size.length)throw new on(E.length,m._size.length);for(var S=g.min(),A=g.max(),G=0,U=m._size.length;G<U;G++)si(S[G],m._size[G]),si(A[G],m._size[G]);return new i(u(m._data,g,E.length,0),m._datatype)}(this,m);case 2:case 3:return function c(m,g,w,E){if(!g||!0!==g.isIndex)throw new TypeError("Invalid index");var G,S=g.size(),A=g.isScalar();if(Gr(w)?(G=w.size(),w=w.valueOf()):G=Sn(w),A){if(0!==G.length)throw new TypeError("Scalar expected");m.set(g.min(),w,E)}else{if(S.length<m._size.length)throw new on(S.length,m._size.length,"<");if(G.length<S.length){for(var U=0,K=0;1===S[U]&&1===G[U];)U++;for(;1===S[U];)K++,U++;w=kh(w,S.length,K,G)}if(!Ru(S,G))throw new on(S,G,">");_(m,g.max().map(function(F){return F+1}),E),v(m._data,g,w,S.length,0)}return m}(this,m,g,w);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(m){if(!ei(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new on(m.length,this._size.length);for(var g=0;g<m.length;g++)si(m[g],this._size[g]);for(var w=this._data,E=0,S=m.length;E<S;E++){var A=m[E];si(A,w.length),w=w[A]}return w},i.prototype.set=function(m,g,w){if(!ei(m))throw new TypeError("Array expected");if(m.length<this._size.length)throw new on(m.length,this._size.length,"<");var E,S,A;_(this,m.map(function(K){return K+1}),w);var U=this._data;for(E=0,S=m.length-1;E<S;E++)si(A=m[E],U.length),U=U[A];return si(A=m[m.length-1],U.length),U[A]=g,this},i.prototype.resize=function(m,g,w){if(!xo(m))throw new TypeError("Array or Matrix expected");var E=m.valueOf().map(A=>Array.isArray(A)&&1===A.length?A[0]:A);return y(w?this.clone():this,E,g)},i.prototype.reshape=function(m,g){var w=g?this.clone():this;w._data=function Nf(t,r){var i=Fn(t),a=i.length;if(!Array.isArray(t)||!Array.isArray(r))throw new TypeError("Array expected");if(0===r.length)throw new on(0,a,"!=");var u=Uh(r=Mf(r,a));if(a!==u)throw new on(u,a,"!=");try{return function Rv(t,r){for(var a,i=t,u=r.length-1;u>0;u--){var c=r[u];a=[];for(var v=i.length/c,y=0;y<v;y++)a.push(i.slice(y*c,(y+1)*c));i=a}return i}(i,r)}catch(c){throw c instanceof on?new on(u,a,"!="):c}}(w._data,m);var E=w._size.reduce((S,A)=>S*A);return w._size=Mf(m,E),w},i.prototype.clone=function(){return new i({data:br(this._data),size:br(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m){var g=this,E=function A(G,U){return ei(G)?G.map(function(K,R){return A(K,U.concat(R))}):m(G,U,g)}(this._data,[]);return new i(E,void 0!==this._datatype?Sf(E,$n):void 0)},i.prototype.forEach=function(m){var g=this;!function E(S,A){ei(S)?S.forEach(function(G,U){E(G,A.concat(U))}):m(S,A,g)}(this._data,[])},i.prototype[Symbol.iterator]=function*(){yield*function*g(w,E){if(ei(w))for(var S=0;S<w.length;S++)yield*g(w[S],E.concat(S));else yield{value:w,index:E}}(this._data,[])},i.prototype.rows=function(){var m=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var w=this._data;for(var E of w)m.push(new i([E],this._datatype));return m},i.prototype.columns=function(){var m=this,g=[],w=this.size();if(2!==w.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var E=this._data,S=function(U){var K=E.map(R=>[R[U]]);g.push(new i(K,m._datatype))},A=0;A<w[1];A++)S(A);return g},i.prototype.toArray=function(){return br(this._data)},i.prototype.valueOf=function(){return this._data},i.prototype.format=function(m){return Ln(this._data,m)},i.prototype.toString=function(){return Ln(this._data)},i.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(Vr(m)&&(m=m.toNumber()),!dr(m)||!xr(m))throw new TypeError("The parameter k must be an integer number")}else m=0;for(var g=m>0?m:0,w=m<0?-m:0,A=Math.min(this._size[0]-w,this._size[1]-g),G=[],U=0;U<A;U++)G[U]=this._data[U+w][U+g];return new i({data:G,size:[A],datatype:this._datatype})},i.diagonal=function(m,g,w,E){if(!ei(m))throw new TypeError("Array expected, size parameter");if(2!==m.length)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(le){if(Vr(le)&&(le=le.toNumber()),!dr(le)||!xr(le)||le<1)throw new Error("Size values must be positive integers");return le}),w){if(Vr(w)&&(w=w.toNumber()),!dr(w)||!xr(w))throw new TypeError("The parameter k must be an integer number")}else w=0;var R,S=w>0?w:0,A=w<0?-w:0,G=m[0],U=m[1],K=Math.min(G-A,U-S);if(ei(g)){if(g.length!==K)throw new Error("Invalid value array length");R=function(pe){return g[pe]}}else if(Gr(g)){var Y=g.size();if(1!==Y.length||Y[0]!==K)throw new Error("Invalid matrix length");R=function(pe){return g.get([pe])}}else R=function(){return g};E||(E=Vr(R(0))?R(0).mul(0):0);var H=[];if(m.length>0){H=bf(H,m,E);for(var F=0;F<K;F++)H[F+A][F+S]=R(F)}return new i({data:H,size:[G,U]})},i.fromJSON=function(m){return new i(m)},i.prototype.swapRows=function(m,g){if(!(dr(m)&&xr(m)&&dr(g)&&xr(g)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return si(m,this._size[0]),si(g,this._size[0]),i._swapRows(m,g,this._data),this},i._swapRows=function(m,g,w){var E=w[m];w[m]=w[g],w[g]=E},i},{isClass:!0}),Yv=q(1977);function Xv(t,r){if(Zh(t)&&yc(t,r))return t[r];throw"function"==typeof t[r]&&function Wh(t,r){return!(null==t||"function"!=typeof t[r]||Qr(t,r)&&Object.getPrototypeOf&&r in Object.getPrototypeOf(t)||!Qr(Z0,r)&&(r in Object.prototype||r in Function.prototype))}(t,r)?new Error('Cannot access method "'+r+'" as a property'):new Error('No access to property "'+r+'"')}function yc(t,r){return!(!t||"object"!=typeof t||!Qr(W0,r)&&(r in Object.prototype||r in Function.prototype))}function Zh(t){return"object"==typeof t&&t&&t.constructor===Object}var W0={length:!0,name:!0},Z0={toString:!0,valueOf:!0,toLocaleString:!0};class _c{constructor(r){this.wrappedObject=r}keys(){return Object.keys(this.wrappedObject)}get(r){return Xv(this.wrappedObject,r)}set(r,i){return function Hh(t,r,i){if(Zh(t)&&yc(t,r))return t[r]=i,i;throw new Error('No access to property "'+r+'"')}(this.wrappedObject,r,i),this}has(r){return function Hv(t,r){return r in t}(this.wrappedObject,r)}}function xc(t){return!!t&&(t instanceof Map||t instanceof _c||"function"==typeof t.set&&"function"==typeof t.get&&"function"==typeof t.keys&&"function"==typeof t.has)}var Jh=function(){return Jh=Yv.create,Yv},wc=We("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],function(r){var{BigNumber:i,Complex:a,DenseMatrix:u,Fraction:c}=r,v=Jh();return v.types=[{name:"number",test:dr},{name:"Complex",test:ao},{name:"BigNumber",test:Vr},{name:"Fraction",test:qa},{name:"Unit",test:oa},{name:"string",test:Zn},{name:"Chain",test:Ss},{name:"Array",test:ei},{name:"Matrix",test:Gr},{name:"DenseMatrix",test:pa},{name:"SparseMatrix",test:Ja},{name:"Range",test:ga},{name:"Index",test:va},{name:"boolean",test:oo},{name:"ResultSet",test:wo},{name:"Help",test:qo},{name:"function",test:Wi},{name:"Date",test:oc},{name:"RegExp",test:df},{name:"null",test:as},{name:"undefined",test:bo},{name:"AccessorNode",test:nl},{name:"ArrayNode",test:Ma},{name:"AssignmentNode",test:sc},{name:"BlockNode",test:lu},{name:"ConditionalNode",test:Qs},{name:"ConstantNode",test:il},{name:"FunctionNode",test:Ns},{name:"FunctionAssignmentNode",test:al},{name:"IndexNode",test:No},{name:"Node",test:Ti},{name:"ObjectNode",test:Ms},{name:"OperatorNode",test:Zi},{name:"ParenthesisNode",test:Mo},{name:"RangeNode",test:Es},{name:"SymbolNode",test:ol},{name:"Map",test:xc},{name:"Object",test:ma}],v.conversions=[{from:"number",to:"BigNumber",convert:function(_){if(i||bc(_),function zu(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}(_)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+_+"). Use function bignumber(x) to convert to BigNumber.");return new i(_)}},{from:"number",to:"Complex",convert:function(_){return a||Nc(_),new a(_,0)}},{from:"number",to:"string",convert:function(_){return _+""}},{from:"BigNumber",to:"Complex",convert:function(_){return a||Nc(_),new a(_.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(_){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(_){return a||Nc(_),new a(_.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(_){c||Mc(_);var x=new c(_);if(x.valueOf()!==_)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+_+"). Use function fraction(x) to convert to Fraction.");return x}},{from:"string",to:"number",convert:function(_){var x=Number(_);if(isNaN(x))throw new Error('Cannot convert "'+_+'" to a number');return x}},{from:"string",to:"BigNumber",convert:function(_){i||bc(_);try{return new i(_)}catch{throw new Error('Cannot convert "'+_+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(_){c||Mc(_);try{return new c(_)}catch{throw new Error('Cannot convert "'+_+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(_){a||Nc(_);try{return new a(_)}catch{throw new Error('Cannot convert "'+_+'" to Complex')}}},{from:"boolean",to:"number",convert:function(_){return+_}},{from:"boolean",to:"BigNumber",convert:function(_){return i||bc(_),new i(+_)}},{from:"boolean",to:"Fraction",convert:function(_){return c||Mc(_),new c(+_)}},{from:"boolean",to:"string",convert:function(_){return String(_)}},{from:"Array",to:"Matrix",convert:function(_){return u||function $h(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new u(_)}},{from:"Matrix",to:"Array",convert:function(_){return _.valueOf()}}],v});function bc(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Nc(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Mc(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}function gr(t,r,i){return t&&"function"==typeof t.map?t.map(function(a){return gr(a,r,i)}):r(t)}var Io="number",eu="number, number";function Jv(t){return Math.abs(t)}function Kv(t,r){return t+r}function $v(t,r){return t*r}function Qv(t){return-t}Jv.signature=Io,Kv.signature=eu,$v.signature=eu,Qv.signature=Io;var im=We("abs",["typed"],t=>{var{typed:r}=t;return r("abs",{number:Jv,Complex:function(a){return a.abs()},BigNumber:function(a){return a.abs()},Fraction:function(a){return a.abs()},"Array | Matrix":function(a){return gr(a,this,!0)},Unit:function(a){return a.abs()}})});var pm="addScalar",ay=We(pm,["typed"],t=>{var{typed:r}=t;return r(pm,{"number, number":Kv,"Complex, Complex":function(a,u){return a.add(u)},"BigNumber, BigNumber":function(a,u){return a.plus(u)},"Fraction, Fraction":function(a,u){return a.add(u)},"Unit, Unit":function(a,u){if(null==a.value)throw new Error("Parameter x contains a unit with undefined value");if(null==u.value)throw new Error("Parameter y contains a unit with undefined value");if(!a.equalBase(u))throw new Error("Units do not match");var c=a.clone();return c.value=this(c.value,u.value),c.fixPrefix=!1,c}})}),mp=We("bignumber",["typed","BigNumber"],t=>{var{typed:r,BigNumber:i}=t;return r("bignumber",{"":function(){return new i(0)},number:function(u){return new i(u+"")},string:function(u){var c=u.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(c){var v=c[2],y=i(c[1]),_=new i(2).pow(Number(v));if(y.gt(_.sub(1)))throw new SyntaxError('String "'.concat(u,'" is out of range'));var x=new i(2).pow(Number(v)-1);return y.gte(x)?y.sub(_):y}return new i(u)},BigNumber:function(u){return u},Fraction:function(u){return new i(u.n).div(u.d).times(u.s)},null:function(u){return new i(0)},"Array | Matrix":function(u){return gr(u,this)}})});var $u=We("conj",["typed"],t=>{var{typed:r}=t;return r("conj",{number:function(a){return a},BigNumber:function(a){return a},Complex:function(a){return a.conjugate()},"Array | Matrix":function(a){return gr(a,this)}})});function Bs(t,r,i){if(null==i)return t.eq(r);if(t.eq(r))return!0;if(t.isNaN()||r.isNaN())return!1;if(t.isFinite()&&r.isFinite()){var a=t.minus(r).abs();if(a.isZero())return!0;var u=t.constructor.max(t.abs(),r.abs());return a.lte(u.times(i))}return!1}var yu="equalScalar",Sp=We(yu,["typed","config"],t=>{var{typed:r,config:i}=t;return r(yu,{"boolean, boolean":function(u,c){return u===c},"number, number":function(u,c){return so(u,c,i.epsilon)},"BigNumber, BigNumber":function(u,c){return u.eq(c)||Bs(u,c,i.epsilon)},"Fraction, Fraction":function(u,c){return u.equals(c)},"Complex, Complex":function(u,c){return function Di(t,r,i){return so(t.re,r.re,i)&&so(t.im,r.im,i)}(u,c,i.epsilon)},"Unit, Unit":function(u,c){if(!u.equalBase(c))throw new Error("Cannot compare units with different base");return this(u.value,c.value)}})});We(yu,["typed","config"],t=>{var{typed:r,config:i}=t;return r(yu,{"number, number":function(u,c){return so(u,c,i.epsilon)}})}),Math.pow(2,53),We("hex",["typed","format"],t=>{var{typed:r,format:i}=t;return r("hex",{"number | BigNumber":function(u){return i(u,{notation:"hex"})},"number | BigNumber, number":function(u,c){return i(u,{notation:"hex",wordSize:c})}})});var ef="number";function lo(t){return 0===t}function qp(t){return Number.isNaN(t)}lo.signature=ef,qp.signature=ef;var Nl=We("isZero",["typed"],t=>{var{typed:r}=t;return r("isZero",{number:lo,BigNumber:function(a){return a.isZero()},Complex:function(a){return 0===a.re&&0===a.im},Fraction:function(a){return 1===a.d&&0===a.n},Unit:function(a){return this(a.value)},"Array | Matrix":function(a){return gr(a,this)}})});var Hp=We("multiplyScalar",["typed"],t=>{var{typed:r}=t;return r("multiplyScalar",{"number, number":$v,"Complex, Complex":function(a,u){return a.mul(u)},"BigNumber, BigNumber":function(a,u){return a.times(u)},"Fraction, Fraction":function(a,u){return a.mul(u)},"number | Fraction | BigNumber | Complex, Unit":function(a,u){var c=u.clone();return c.value=null===c.value?c._normalize(a):this(c.value,a),c},"Unit, number | Fraction | BigNumber | Complex":function(a,u){var c=a.clone();return c.value=null===c.value?c._normalize(u):this(c.value,u),c},"Unit, Unit":function(a,u){return a.multiply(u)}})});var Qp=We("number",["typed"],t=>{var{typed:r}=t,i=r("number",{"":function(){return 0},number:function(u){return u},string:function(u){if("NaN"===u)return NaN;var c=function Um(t){var r=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);return r?{input:t,radix:{"0b":2,"0o":8,"0x":16}[r[1]],integerPart:r[2],fractionalPart:r[3]}:null}(u);if(c)return function Gm(t){for(var r=parseInt(t.integerPart,t.radix),i=0,a=0;a<t.fractionalPart.length;a++)i+=parseInt(t.fractionalPart[a],t.radix)/Math.pow(t.radix,a+1);var c=r+i;if(isNaN(c))throw new SyntaxError('String "'+t.input+'" is no valid number');return c}(c);var v=0,y=u.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);y&&(v=Number(y[2]),u=y[1]);var _=Number(u);if(isNaN(_))throw new SyntaxError('String "'+u+'" is no valid number');if(y){if(_>2**v-1)throw new SyntaxError('String "'.concat(u,'" is out of range'));_>=2**(v-1)&&(_-=2**v)}return _},BigNumber:function(u){return u.toNumber()},Fraction:function(u){return u.valueOf()},Unit:function(u){throw new Error("Second argument with valueless unit expected")},null:function(u){return 0},"Unit, string | Unit":function(u,c){return u.toNumber(c)},"Array | Matrix":function(u){return gr(u,this)}});return i.fromJSON=function(a){return parseFloat(a.value)},i});We("oct",["typed","format"],t=>{var{typed:r,format:i}=t;return r("oct",{"number | BigNumber":function(u){return i(u,{notation:"oct"})},"number | BigNumber, number":function(u,c){return i(u,{notation:"oct",wordSize:c})}})}),q(340);Date.now();var $m=We("SparseMatrix",["typed","equalScalar","Matrix"],t=>{var{typed:r,equalScalar:i,Matrix:a}=t;function u(A,G){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator");if(G&&!Zn(G))throw new Error("Invalid datatype: "+G);if(Gr(A))!function c(A,G,U){"SparseMatrix"===G.type?(A._values=G._values?br(G._values):void 0,A._index=br(G._index),A._ptr=br(G._ptr),A._size=br(G._size),A._datatype=U||G._datatype):v(A,G.valueOf(),U||G._datatype)}(this,A,G);else if(A&&ei(A.index)&&ei(A.ptr)&&ei(A.size))this._values=A.values,this._index=A.index,this._ptr=A.ptr,this._size=A.size,this._datatype=G||A.datatype;else if(ei(A))v(this,A,G);else{if(A)throw new TypeError("Unsupported type of data ("+$n(A)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=G}}function v(A,G,U){A._values=[],A._index=[],A._ptr=[],A._datatype=U;var K=G.length,R=0,Y=i,H=0;if(Zn(U)&&(Y=r.find(i,[U,U])||i,H=r.convert(0,U)),K>0){var F=0;do{A._ptr.push(A._index.length);for(var le=0;le<K;le++){var pe=G[le];if(ei(pe)){if(0===F&&R<pe.length&&(R=pe.length),F<pe.length){var ve=pe[F];Y(ve,H)||(A._values.push(ve),A._index.push(le))}}else 0===F&&R<1&&(R=1),Y(pe,H)||(A._values.push(pe),A._index.push(le))}F++}while(F<R)}A._ptr.push(A._index.length),A._size=[K,R]}function x(A,G,U,K){if(U-G==0)return U;for(var R=G;R<U;R++)if(K[R]===A)return R;return G}function g(A,G,U,K,R,Y,H){R.splice(A,0,K),Y.splice(A,0,G);for(var F=U+1;F<H.length;F++)H[F]++}function w(A,G,U,K){var R=K||0,Y=i,H=0;Zn(A._datatype)&&(Y=r.find(i,[A._datatype,A._datatype])||i,H=r.convert(0,A._datatype),R=r.convert(R,A._datatype));var ve,j,Ee,F=!Y(R,H),le=A._size[0],pe=A._size[1];if(U>pe){for(j=pe;j<U;j++)if(A._ptr[j]=A._values.length,F)for(ve=0;ve<le;ve++)A._values.push(R),A._index.push(ve);A._ptr[U]=A._values.length}else U<pe&&(A._ptr.splice(U+1,pe-U),A._values.splice(A._ptr[U],A._values.length),A._index.splice(A._ptr[U],A._index.length));if(pe=U,G>le){if(F){var Ce=0;for(j=0;j<pe;j++){A._ptr[j]=A._ptr[j]+Ce,Ee=A._ptr[j+1]+Ce;var Ze=0;for(ve=le;ve<G;ve++,Ze++)A._values.splice(Ee+Ze,0,R),A._index.splice(Ee+Ze,0,ve),Ce++}A._ptr[pe]=A._values.length}}else if(G<le){var et=0;for(j=0;j<pe;j++){A._ptr[j]=A._ptr[j]-et;var $e=A._ptr[j+1]-et;for(Ee=A._ptr[j];Ee<$e;Ee++)(ve=A._index[Ee])>G-1&&(A._values.splice(Ee,1),A._index.splice(Ee,1),et++)}A._ptr[j]=A._values.length}return A._size[0]=G,A._size[1]=U,A}function S(A,G,U,K,R){var le,pe,Y=K[0],H=K[1],F=[];for(le=0;le<Y;le++)for(F[le]=[],pe=0;pe<H;pe++)F[le][pe]=0;for(pe=0;pe<H;pe++)for(var j=U[pe+1],Ee=U[pe];Ee<j;Ee++)F[le=G[Ee]][pe]=A?R?br(A[Ee]):A[Ee]:1;return F}return(u.prototype=new a).createSparseMatrix=function(A,G){return new u(A,G)},u.prototype.type="SparseMatrix",u.prototype.isSparseMatrix=!0,u.prototype.getDataType=function(){return Sf(this._values,$n)},u.prototype.storage=function(){return"sparse"},u.prototype.datatype=function(){return this._datatype},u.prototype.create=function(A,G){return new u(A,G)},u.prototype.density=function(){var A=this._size[0],G=this._size[1];return 0!==A&&0!==G?this._index.length/(A*G):0},u.prototype.subset=function(A,G,U){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function y(A,G){if(!va(G))throw new TypeError("Invalid index");if(G.isScalar())return A.get(G.min());var K=G.size();if(K.length!==A._size.length)throw new on(K.length,A._size.length);var R,Y,H,F,le=G.min(),pe=G.max();for(R=0,Y=A._size.length;R<Y;R++)si(le[R],A._size[R]),si(pe[R],A._size[R]);var ve=A._values,j=A._index,Ee=A._ptr,Ce=G.dimension(0),Ze=G.dimension(1),et=[],at=[];Ce.forEach(function(ye,ut){at[ye]=ut[0],et[ye]=!0});var $e=ve?[]:void 0,Se=[],dt=[];return Ze.forEach(function(ye){for(dt.push(Se.length),H=Ee[ye],F=Ee[ye+1];H<F;H++)!0===et[R=j[H]]&&(Se.push(at[R]),$e&&$e.push(ve[H]))}),dt.push(Se.length),new u({values:$e,index:Se,ptr:dt,size:K,datatype:A._datatype})}(this,A);case 2:case 3:return function _(A,G,U,K){if(!G||!0!==G.isIndex)throw new TypeError("Invalid index");var H,R=G.size(),Y=G.isScalar();if(Gr(U)?(H=U.size(),U=U.toArray()):H=Sn(U),Y){if(0!==H.length)throw new TypeError("Scalar expected");A.set(G.min(),U,K)}else{if(1!==R.length&&2!==R.length)throw new on(R.length,A._size.length,"<");if(H.length<R.length){for(var F=0,le=0;1===R[F]&&1===H[F];)F++;for(;1===R[F];)le++,F++;U=kh(U,R.length,le,H)}if(!Ru(R,H))throw new on(R,H,">");if(1===R.length)G.dimension(0).forEach(function(Ee,Ce){si(Ee),A.set([Ee,0],U[Ce[0]],K)});else{var ve=G.dimension(0),j=G.dimension(1);ve.forEach(function(Ee,Ce){si(Ee),j.forEach(function(Ze,et){si(Ze),A.set([Ee,Ze],U[Ce[0]][et[0]],K)})})}}return A}(this,A,G,U);default:throw new SyntaxError("Wrong number of arguments")}},u.prototype.get=function(A){if(!ei(A))throw new TypeError("Array expected");if(A.length!==this._size.length)throw new on(A.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var G=A[0],U=A[1];si(G,this._size[0]),si(U,this._size[1]);var K=x(G,this._ptr[U],this._ptr[U+1],this._index);return K<this._ptr[U+1]&&this._index[K]===G?this._values[K]:0},u.prototype.set=function(A,G,U){if(!ei(A))throw new TypeError("Array expected");if(A.length!==this._size.length)throw new on(A.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var K=A[0],R=A[1],Y=this._size[0],H=this._size[1],F=i,le=0;Zn(this._datatype)&&(F=r.find(i,[this._datatype,this._datatype])||i,le=r.convert(0,this._datatype)),(K>Y-1||R>H-1)&&(w(this,Math.max(K+1,Y),Math.max(R+1,H),U),Y=this._size[0],H=this._size[1]),si(K,Y),si(R,H);var pe=x(K,this._ptr[R],this._ptr[R+1],this._index);return pe<this._ptr[R+1]&&this._index[pe]===K?F(G,le)?function m(A,G,U,K,R){U.splice(A,1),K.splice(A,1);for(var Y=G+1;Y<R.length;Y++)R[Y]--}(pe,R,this._values,this._index,this._ptr):this._values[pe]=G:g(pe,K,R,G,this._values,this._index,this._ptr),this},u.prototype.resize=function(A,G,U){if(!xo(A))throw new TypeError("Array or Matrix expected");var K=A.valueOf().map(Y=>Array.isArray(Y)&&1===Y.length?Y[0]:Y);if(2!==K.length)throw new Error("Only two dimensions matrix are supported");return K.forEach(function(Y){if(!dr(Y)||!xr(Y)||Y<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ln(K)+")")}),w(U?this.clone():this,K[0],K[1],G)},u.prototype.reshape=function(A,G){if(!ei(A))throw new TypeError("Array expected");if(2!==A.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");A.forEach(function(ye){if(!dr(ye)||!xr(ye)||ye<=-2||0===ye)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Ln(A)+")")});var U=this._size[0]*this._size[1];if(U!==(A=Mf(A,U))[0]*A[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var R=G?this.clone():this;if(this._size[0]===A[0]&&this._size[1]===A[1])return R;for(var Y=[],H=0;H<R._ptr.length;H++)for(var F=0;F<R._ptr[H+1]-R._ptr[H];F++)Y.push(H);for(var le=R._values.slice(),pe=R._index.slice(),ve=0;ve<R._index.length;ve++){var Ce=pe[ve]*R._size[1]+Y[ve];Y[ve]=Ce%A[1],pe[ve]=Math.floor(Ce/A[1])}R._values.length=0,R._index.length=0,R._ptr.length=A[1]+1,R._size=A.slice();for(var Ze=0;Ze<R._ptr.length;Ze++)R._ptr[Ze]=0;for(var et=0;et<le.length;et++){var at=pe[et],$e=Y[et],Se=le[et];g(x(at,R._ptr[$e],R._ptr[$e+1],R._index),at,$e,Se,R._values,R._index,R._ptr)}return R},u.prototype.clone=function(){return new u({values:this._values?br(this._values):void 0,index:br(this._index),ptr:br(this._ptr),size:br(this._size),datatype:this._datatype})},u.prototype.size=function(){return this._size.slice(0)},u.prototype.map=function(A,G){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var U=this;return function E(A,G,U,K,R,Y,H){var F=[],le=[],pe=[],ve=i,j=0;Zn(A._datatype)&&(ve=r.find(i,[A._datatype,A._datatype])||i,j=r.convert(0,A._datatype));for(var Ee=function(ht,bt,Lt){ht=Y(ht,bt,Lt),ve(ht,j)||(F.push(ht),le.push(bt))},Ce=K;Ce<=R;Ce++){pe.push(F.length);var Ze=A._ptr[Ce],et=A._ptr[Ce+1];if(H)for(var at=Ze;at<et;at++){var $e=A._index[at];$e>=G&&$e<=U&&Ee(A._values[at],$e-G,Ce-K)}else{for(var Se={},dt=Ze;dt<et;dt++)Se[A._index[dt]]=A._values[dt];for(var ut=G;ut<=U;ut++)Ee(ut in Se?Se[ut]:0,ut-G,Ce-K)}}return pe.push(F.length),new u({values:F,index:le,ptr:pe,size:[U-G+1,R-K+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,function(F,le,pe){return A(F,[le,pe],U)},G)},u.prototype.forEach=function(A,G){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var K=this._size[0],R=this._size[1],Y=0;Y<R;Y++){var H=this._ptr[Y],F=this._ptr[Y+1];if(G)for(var le=H;le<F;le++)A(this._values[le],[this._index[le],Y],this);else{for(var ve={},j=H;j<F;j++)ve[this._index[j]]=this._values[j];for(var Ce=0;Ce<K;Ce++)A(Ce in ve?ve[Ce]:0,[Ce,Y],this)}}},u.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var A=this._size[1],G=0;G<A;G++)for(var K=this._ptr[G+1],R=this._ptr[G];R<K;R++){var Y=this._index[R];yield{value:this._values[R],index:[Y,G]}}},u.prototype.toArray=function(){return S(this._values,this._index,this._ptr,this._size,!0)},u.prototype.valueOf=function(){return S(this._values,this._index,this._ptr,this._size,!1)},u.prototype.format=function(A){for(var G=this._size[0],U=this._size[1],K=this.density(),R="Sparse Matrix ["+Ln(G,A)+" x "+Ln(U,A)+"] density: "+Ln(K,A)+"\n",Y=0;Y<U;Y++)for(var F=this._ptr[Y+1],le=this._ptr[Y];le<F;le++)R+="\n    ("+Ln(this._index[le],A)+", "+Ln(Y,A)+") ==> "+(this._values?Ln(this._values[le],A):"X");return R},u.prototype.toString=function(){return Ln(this.toArray())},u.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},u.prototype.diagonal=function(A){if(A){if(Vr(A)&&(A=A.toNumber()),!dr(A)||!xr(A))throw new TypeError("The parameter k must be an integer number")}else A=0;var G=A>0?A:0,U=A<0?-A:0,R=this._size[1],Y=Math.min(this._size[0]-U,R-G),H=[],F=[],le=[];le[0]=0;for(var pe=G;pe<R&&H.length<Y;pe++)for(var j=this._ptr[pe+1],Ee=this._ptr[pe];Ee<j;Ee++){var Ce=this._index[Ee];if(Ce===pe-G+U){H.push(this._values[Ee]),F[H.length-1]=Ce-U;break}}return le.push(H.length),new u({values:H,index:F,ptr:le,size:[Y,1]})},u.fromJSON=function(A){return new u(A)},u.diagonal=function(A,G,U,K,R){if(!ei(A))throw new TypeError("Array expected, size parameter");if(2!==A.length)throw new Error("Only two dimensions matrix are supported");if(A=A.map(function(ye){if(Vr(ye)&&(ye=ye.toNumber()),!dr(ye)||!xr(ye)||ye<1)throw new Error("Size values must be positive integers");return ye}),U){if(Vr(U)&&(U=U.toNumber()),!dr(U)||!xr(U))throw new TypeError("The parameter k must be an integer number")}else U=0;var Y=i,H=0;Zn(R)&&(Y=r.find(i,[R,R])||i,H=r.convert(0,R));var Ee,F=U>0?U:0,le=U<0?-U:0,pe=A[0],ve=A[1],j=Math.min(pe-le,ve-F);if(ei(G)){if(G.length!==j)throw new Error("Invalid value array length");Ee=function(ut){return G[ut]}}else if(Gr(G)){var Ce=G.size();if(1!==Ce.length||Ce[0]!==j)throw new Error("Invalid matrix length");Ee=function(ut){return G.get([ut])}}else Ee=function(){return G};for(var Ze=[],et=[],at=[],$e=0;$e<ve;$e++){at.push(Ze.length);var Se=$e-F;if(Se>=0&&Se<j){var dt=Ee(Se);Y(dt,H)||(et.push(Se+le),Ze.push(dt))}}return at.push(Ze.length),new u({values:Ze,index:et,ptr:at,size:[pe,ve]})},u.prototype.swapRows=function(A,G){if(!(dr(A)&&xr(A)&&dr(G)&&xr(G)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return si(A,this._size[0]),si(G,this._size[0]),u._swapRows(A,G,this._size[1],this._values,this._index,this._ptr),this},u._forEachRow=function(A,G,U,K,R){for(var H=K[A+1],F=K[A];F<H;F++)R(U[F],G[F])},u._swapRows=function(A,G,U,K,R,Y){for(var H=0;H<U;H++){var F=Y[H],le=Y[H+1],pe=x(A,F,le,R),ve=x(G,F,le,R);if(pe<le&&ve<le&&R[pe]===A&&R[ve]===G){if(K){var j=K[pe];K[pe]=K[ve],K[ve]=j}}else if(pe<le&&R[pe]===A&&(ve>=le||R[ve]!==G)){var Ee=K?K[pe]:void 0;R.splice(ve,0,G),K&&K.splice(ve,0,Ee),R.splice(ve<=pe?pe+1:pe,1),K&&K.splice(ve<=pe?pe+1:pe,1)}else if(ve<le&&R[ve]===G&&(pe>=le||R[pe]!==A)){var Ce=K?K[ve]:void 0;R.splice(pe,0,A),K&&K.splice(pe,0,Ce),R.splice(pe<=ve?ve+1:ve,1),K&&K.splice(pe<=ve?ve+1:ve,1)}}},u},{isClass:!0});We("bin",["typed","format"],t=>{var{typed:r,format:i}=t;return r("bin",{"number | BigNumber":function(u){return i(u,{notation:"bin"})},"number | BigNumber, number":function(u,c){return i(u,{notation:"bin",wordSize:c})}})});var gg=We("isNaN",["typed"],t=>{var{typed:r}=t;return r("isNaN",{number:qp,BigNumber:function(a){return a.isNaN()},Fraction:function(a){return!1},Complex:function(a){return a.isNaN()},Unit:function(a){return Number.isNaN(a.value)},"Array | Matrix":function(a){return gr(a,Number.isNaN)}})}),bg="unaryMinus",Fy=We(bg,["typed"],t=>{var{typed:r}=t;return r(bg,{number:Qv,Complex:function(a){return a.neg()},BigNumber:function(a){return a.neg()},Fraction:function(a){return a.neg()},Unit:function(a){var u=a.clone();return u.value=this(a.value),u},"Array | Matrix":function(a){return gr(a,this,!0)}})}),hd=We("fraction",["typed","Fraction"],t=>{var{typed:r,Fraction:i}=t;return r("fraction",{number:function(u){if(!isFinite(u)||isNaN(u))throw new Error(u+" cannot be represented as a fraction");return new i(u)},string:function(u){return new i(u)},"number, number":function(u,c){return new i(u,c)},null:function(u){return new i(0)},BigNumber:function(u){return new i(u.toString())},Fraction:function(u){return u},Object:function(u){return new i(u)},"Array | Matrix":function(u){return gr(u,this)}})}),Ag="isNumeric",Uy=We(Ag,["typed"],t=>{var{typed:r}=t;return r(Ag,{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string | null | undefined | Node":function(){return!1},"Array | Matrix":function(a){return gr(a,this)}})}),ph=We("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],t=>{var{typed:r,DenseMatrix:a,SparseMatrix:u}=t;return r("matrix",{"":function(){return c([])},string:function(y){return c([],y)},"string, string":function(y,_){return c([],y,_)},Array:function(y){return c(y)},Matrix:function(y){return c(y,y.storage())},"Array | Matrix, string":c,"Array | Matrix, string, string":c});function c(v,y,_){if("dense"===y||"default"===y||void 0===y)return new a(v,_);if("sparse"===y)return new u(v,_);throw new TypeError("Unknown matrix type "+JSON.stringify(y)+".")}}),co=We("algorithm03",["typed"],t=>{var{typed:r}=t;return function(a,u,c,v){var y=a._data,_=a._size,x=a._datatype,m=u._values,g=u._index,w=u._ptr,E=u._size,S=u._datatype;if(_.length!==E.length)throw new on(_.length,E.length);if(_[0]!==E[0]||_[1]!==E[1])throw new RangeError("Dimension mismatch. Matrix A ("+_+") must match Matrix B ("+E+")");if(!m)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var U,A=_[0],G=_[1],K=0,R=c;"string"==typeof x&&x===S&&(K=r.convert(0,U=x),R=r.find(c,[U,U]));for(var Y=[],H=0;H<A;H++)Y[H]=[];for(var F=[],le=[],pe=0;pe<G;pe++){for(var ve=pe+1,Ee=w[pe+1],Ce=w[pe];Ce<Ee;Ce++){var Ze=g[Ce];F[Ze]=v?R(m[Ce],y[Ze][pe]):R(y[Ze][pe],m[Ce]),le[Ze]=ve}for(var et=0;et<A;et++)Y[et][pe]=le[et]===ve?F[et]:v?R(K,y[et][pe]):R(y[et][pe],K)}return a.createDenseMatrix({data:Y,size:[A,G],datatype:U})}}),gh=We("algorithm05",["typed","equalScalar"],t=>{var{typed:r,equalScalar:i}=t;return function(u,c,v){var y=u._values,_=u._index,x=u._ptr,m=u._size,g=u._datatype,w=c._values,E=c._index,S=c._ptr,A=c._size,G=c._datatype;if(m.length!==A.length)throw new on(m.length,A.length);if(m[0]!==A[0]||m[1]!==A[1])throw new RangeError("Dimension mismatch. Matrix A ("+m+") must match Matrix B ("+A+")");var R,U=m[0],K=m[1],Y=i,H=0,F=v;"string"==typeof g&&g===G&&(Y=r.find(i,[R=g,R]),H=r.convert(0,R),F=r.find(v,[R,R]));var et,at,$e,Se,le=y&&w?[]:void 0,pe=[],ve=[],j=le?[]:void 0,Ee=le?[]:void 0,Ce=[],Ze=[];for(at=0;at<K;at++){ve[at]=pe.length;var dt=at+1;for($e=x[at],Se=x[at+1];$e<Se;$e++)pe.push(et=_[$e]),Ce[et]=dt,j&&(j[et]=y[$e]);for($e=S[at],Se=S[at+1];$e<Se;$e++)Ce[et=E[$e]]!==dt&&pe.push(et),Ze[et]=dt,Ee&&(Ee[et]=w[$e]);if(le)for($e=ve[at];$e<pe.length;){var ye=Ce[et=pe[$e]],ut=Ze[et];if(ye===dt||ut===dt){var ht=F(ye===dt?j[et]:H,ut===dt?Ee[et]:H);Y(ht,H)?pe.splice($e,1):(le.push(ht),$e++)}}}return ve[K]=pe.length,u.createSparseMatrix({values:le,index:pe,ptr:ve,size:[U,K],datatype:R})}}),Xa=We("algorithm11",["typed","equalScalar"],t=>{var{typed:r,equalScalar:i}=t;return function(u,c,v,y){var _=u._values,x=u._index,m=u._ptr,g=u._size,w=u._datatype;if(!_)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var A,E=g[0],S=g[1],G=i,U=0,K=v;"string"==typeof w&&(G=r.find(i,[A=w,A]),U=r.convert(0,A),c=r.convert(c,A),K=r.find(v,[A,A]));for(var R=[],Y=[],H=[],F=0;F<S;F++){H[F]=Y.length;for(var pe=m[F+1],ve=m[F];ve<pe;ve++){var j=x[ve],Ee=y?K(c,_[ve]):K(_[ve],c);G(Ee,U)||(Y.push(j),R.push(Ee))}}return H[S]=Y.length,u.createSparseMatrix({values:R,index:Y,ptr:H,size:[E,S],datatype:A})}}),ya=We("algorithm12",["typed","DenseMatrix"],t=>{var{typed:r,DenseMatrix:i}=t;return function(u,c,v,y){var _=u._values,x=u._index,m=u._ptr,g=u._size,w=u._datatype;if(!_)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var A,E=g[0],S=g[1],G=v;"string"==typeof w&&(c=r.convert(c,A=w),G=r.find(v,[A,A]));for(var U=[],K=[],R=[],Y=0;Y<S;Y++){for(var H=Y+1,le=m[Y+1],pe=m[Y];pe<le;pe++){var ve=x[pe];K[ve]=_[pe],R[ve]=H}for(var j=0;j<E;j++)0===Y&&(U[j]=[]),U[j][Y]=R[j]===H?y?G(c,K[j]):G(K[j],c):y?G(c,0):G(0,c)}return new i({data:U,size:[E,S],datatype:A})}}),ci=We("algorithm13",["typed"],t=>{var{typed:r}=t;return function(u,c,v){var y=u._data,_=u._size,x=u._datatype,m=c._data,g=c._size,w=c._datatype,E=[];if(_.length!==g.length)throw new on(_.length,g.length);for(var S=0;S<_.length;S++){if(_[S]!==g[S])throw new RangeError("Dimension mismatch. Matrix A ("+_+") must match Matrix B ("+g+")");E[S]=_[S]}var A,G=v;"string"==typeof x&&x===w&&(G=r.find(v,[A=x,A]));var U=E.length>0?i(G,0,E,E[0],y,m):[];return u.createDenseMatrix({data:U,size:E,datatype:A})};function i(a,u,c,v,y,_){var x=[];if(u===c.length-1)for(var m=0;m<v;m++)x[m]=a(y[m],_[m]);else for(var g=0;g<v;g++)x[g]=i(a,u+1,c,c[u+1],y[g],_[g]);return x}}),Bn=We("algorithm14",["typed"],t=>{var{typed:r}=t;return function(u,c,v,y){var g,_=u._data,x=u._size,m=u._datatype,w=v;"string"==typeof m&&(c=r.convert(c,g=m),w=r.find(v,[g,g]));var E=x.length>0?i(w,0,x,x[0],_,c,y):[];return u.createDenseMatrix({data:E,size:br(x),datatype:g})};function i(a,u,c,v,y,_,x){var m=[];if(u===c.length-1)for(var g=0;g<v;g++)m[g]=x?a(_,y[g]):a(y[g],_);else for(var w=0;w<v;w++)m[w]=i(a,u+1,c,c[u+1],y[w],_,x);return m}}),ms=We("algorithm01",["typed"],t=>{var{typed:r}=t;return function(a,u,c,v){var y=a._data,_=a._size,x=a._datatype,m=u._values,g=u._index,w=u._ptr,E=u._size,S=u._datatype;if(_.length!==E.length)throw new on(_.length,E.length);if(_[0]!==E[0]||_[1]!==E[1])throw new RangeError("Dimension mismatch. Matrix A ("+_+") must match Matrix B ("+E+")");if(!m)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var R,Y,A=_[0],G=_[1],U="string"==typeof x&&x===S?x:void 0,K=U?r.find(c,[U,U]):c,H=[];for(R=0;R<A;R++)H[R]=[];var F=[],le=[];for(Y=0;Y<G;Y++){for(var pe=Y+1,j=w[Y+1],Ee=w[Y];Ee<j;Ee++)F[R=g[Ee]]=v?K(m[Ee],y[R][Y]):K(y[R][Y],m[Ee]),le[R]=pe;for(R=0;R<A;R++)H[R][Y]=le[R]===pe?F[R]:y[R][Y]}return a.createDenseMatrix({data:H,size:[A,G],datatype:U})}});function dh(){throw new Error('No "bignumber" implementation available')}function Ky(){throw new Error('No "fraction" implementation available')}var Qy=We("numeric",["number","?bignumber","?fraction"],t=>{var{number:r,bignumber:i,fraction:a}=t,u={string:!0,number:!0,BigNumber:!0,Fraction:!0},c={number:v=>r(v),BigNumber:i?v=>i(v):dh,Fraction:a?v=>a(v):Ky};return function(y,_){var x=$n(y);if(!(x in u))throw new TypeError("Cannot convert "+y+' of type "'+x+'"; valid input types are '+Object.keys(u).join(", "));if(!(_ in c))throw new TypeError("Cannot convert "+y+' to type "'+_+'"; valid output types are '+Object.keys(c).join(", "));return _===x?y:c[_](y)}});var n1=We("size",["typed","config","?matrix"],t=>{var{typed:r,config:i,matrix:a}=t;return r("size",{Matrix:function(c){return c.create(c.size())},Array:Sn,string:function(c){return"Array"===i.matrix?[c.length]:a([c.length])},"number | Complex | BigNumber | Unit | boolean | null":function(c){return"Array"===i.matrix?[]:a?a([]):function yh(){throw new Error('No "matrix" implementation available')}()}})}),wu=We("algorithm10",["typed","DenseMatrix"],t=>{var{typed:r,DenseMatrix:i}=t;return function(u,c,v,y){var _=u._values,x=u._index,m=u._ptr,g=u._size,w=u._datatype;if(!_)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var A,E=g[0],S=g[1],G=v;"string"==typeof w&&(c=r.convert(c,A=w),G=r.find(v,[A,A]));for(var U=[],K=[],R=[],Y=0;Y<S;Y++){for(var H=Y+1,le=m[Y+1],pe=m[Y];pe<le;pe++){var ve=x[pe];K[ve]=_[pe],R[ve]=H}for(var j=0;j<E;j++)0===Y&&(U[j]=[]),U[j][Y]=R[j]===H?y?G(c,K[j]):G(K[j],c):c}return new i({data:U,size:[E,S],datatype:A})}}),Ud="subtract",Gd=We(Ud,["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],t=>{var{typed:r,matrix:i,equalScalar:a,addScalar:u,unaryMinus:c,DenseMatrix:v}=t,y=ms({typed:r}),_=co({typed:r}),x=gh({typed:r,equalScalar:a}),m=wu({typed:r,DenseMatrix:v}),g=ci({typed:r}),w=Bn({typed:r});return r(Ud,{"number, number":function(S,A){return S-A},"Complex, Complex":function(S,A){return S.sub(A)},"BigNumber, BigNumber":function(S,A){return S.minus(A)},"Fraction, Fraction":function(S,A){return S.sub(A)},"Unit, Unit":function(S,A){if(null===S.value)throw new Error("Parameter x contains a unit with undefined value");if(null===A.value)throw new Error("Parameter y contains a unit with undefined value");if(!S.equalBase(A))throw new Error("Units do not match");var G=S.clone();return G.value=this(G.value,A.value),G.fixPrefix=!1,G},"SparseMatrix, SparseMatrix":function(S,A){return o(S,A),x(S,A,this)},"SparseMatrix, DenseMatrix":function(S,A){return o(S,A),_(A,S,this,!0)},"DenseMatrix, SparseMatrix":function(S,A){return o(S,A),y(S,A,this,!1)},"DenseMatrix, DenseMatrix":function(S,A){return o(S,A),g(S,A,this)},"Array, Array":function(S,A){return this(i(S),i(A)).valueOf()},"Array, Matrix":function(S,A){return this(i(S),A)},"Matrix, Array":function(S,A){return this(S,i(A))},"SparseMatrix, any":function(S,A){return m(S,c(A),u)},"DenseMatrix, any":function(S,A){return w(S,A,this)},"any, SparseMatrix":function(S,A){return m(A,S,this,!0)},"any, DenseMatrix":function(S,A){return w(A,S,this,!0)},"Array, any":function(S,A){return w(i(S),A,this,!1).valueOf()},"any, Array":function(S,A){return w(i(A),S,this,!0).valueOf()}})});function o(t,r){var i=t.size(),a=r.size();if(i.length!==a.length)throw new on(i.length,a.length)}var Ke="compare",ir=We(Ke,["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix"],t=>{var{typed:r,config:i,equalScalar:a,matrix:u,BigNumber:c,Fraction:v,DenseMatrix:y}=t,_=co({typed:r}),x=gh({typed:r,equalScalar:a}),m=ya({typed:r,DenseMatrix:y}),g=ci({typed:r}),w=Bn({typed:r});return r(Ke,{"boolean, boolean":function(S,A){return S===A?0:S>A?1:-1},"number, number":function(S,A){return so(S,A,i.epsilon)?0:S>A?1:-1},"BigNumber, BigNumber":function(S,A){return Bs(S,A,i.epsilon)?new c(0):new c(S.cmp(A))},"Fraction, Fraction":function(S,A){return new v(S.compare(A))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(S,A){if(!S.equalBase(A))throw new Error("Cannot compare units with different base");return this(S.value,A.value)},"SparseMatrix, SparseMatrix":function(S,A){return x(S,A,this)},"SparseMatrix, DenseMatrix":function(S,A){return _(A,S,this,!0)},"DenseMatrix, SparseMatrix":function(S,A){return _(S,A,this,!1)},"DenseMatrix, DenseMatrix":function(S,A){return g(S,A,this)},"Array, Array":function(S,A){return this(u(S),u(A)).valueOf()},"Array, Matrix":function(S,A){return this(u(S),A)},"Matrix, Array":function(S,A){return this(S,u(A))},"SparseMatrix, any":function(S,A){return m(S,A,this,!1)},"DenseMatrix, any":function(S,A){return w(S,A,this,!1)},"any, SparseMatrix":function(S,A){return m(A,S,this,!0)},"any, DenseMatrix":function(S,A){return w(A,S,this,!0)},"Array, any":function(S,A){return w(u(S),A,this,!1).valueOf()},"any, Array":function(S,A){return w(u(A),S,this,!0).valueOf()}})}),$f="divideScalar",kd=We($f,["typed","numeric"],t=>{var{typed:r,numeric:i}=t;return r($f,{"number, number":function(u,c){return u/c},"Complex, Complex":function(u,c){return u.div(c)},"BigNumber, BigNumber":function(u,c){return u.div(c)},"Fraction, Fraction":function(u,c){return u.div(c)},"Unit, number | Fraction | BigNumber":function(u,c){var v=u.clone(),y=i(1,$n(c));return v.value=this(null===v.value?v._normalize(y):v.value,c),v},"number | Fraction | BigNumber, Unit":function(u,c){var v=c.clone();v=v.pow(-1);var y=i(1,$n(u));return v.value=this(u,null===c.value?c._normalize(y):c.value),v},"Unit, Unit":function(u,c){return u.divide(c)}})}),Vd=(We("equal",["typed","equalScalar"],t=>{var{typed:r,equalScalar:i}=t;return r("equal",{"any, any":function(u,c){return null===u?null===c:null===c?null===u:void 0===u?void 0===c:void 0===c?void 0===u:i(u,c)}})}),We("algorithm04",["typed","equalScalar"],t=>{var{typed:r,equalScalar:i}=t;return function(u,c,v){var y=u._values,_=u._index,x=u._ptr,m=u._size,g=u._datatype,w=c._values,E=c._index,S=c._ptr,A=c._size,G=c._datatype;if(m.length!==A.length)throw new on(m.length,A.length);if(m[0]!==A[0]||m[1]!==A[1])throw new RangeError("Dimension mismatch. Matrix A ("+m+") must match Matrix B ("+A+")");var R,U=m[0],K=m[1],Y=i,H=0,F=v;"string"==typeof g&&g===G&&(Y=r.find(i,[R=g,R]),H=r.convert(0,R),F=r.find(v,[R,R]));var et,at,$e,dt,le=y&&w?[]:void 0,pe=[],ve=[],j=y&&w?[]:void 0,Ee=y&&w?[]:void 0,Ce=[],Ze=[];for(at=0;at<K;at++){ve[at]=pe.length;var ye=at+1;for(dt=x[at+1],$e=x[at];$e<dt;$e++)pe.push(et=_[$e]),Ce[et]=ye,j&&(j[et]=y[$e]);for(dt=S[at+1],$e=S[at];$e<dt;$e++)if(Ce[et=E[$e]]===ye){if(j){var ut=F(j[et],w[$e]);Y(ut,H)?Ce[et]=null:j[et]=ut}}else pe.push(et),Ze[et]=ye,Ee&&(Ee[et]=w[$e]);if(j&&Ee)for($e=ve[at];$e<pe.length;)Ce[et=pe[$e]]===ye?(le[$e]=j[et],$e++):Ze[et]===ye?(le[$e]=Ee[et],$e++):pe.splice($e,1)}return ve[K]=pe.length,u.createSparseMatrix({values:le,index:pe,ptr:ve,size:[U,K],datatype:R})}})),E1="partitionSelect",Ow=We(E1,["typed","isNumeric","isNaN","compare"],t=>{var{typed:r,isNumeric:i,isNaN:a,compare:u}=t,c=u,v=(x,m)=>-u(x,m);return r(E1,{"Array | Matrix, number":function(m,g){return y(m,g,c)},"Array | Matrix, number, string":function(m,g,w){if("asc"===w)return y(m,g,c);if("desc"===w)return y(m,g,v);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":y});function y(x,m,g){if(!xr(m)||m<0)throw new Error("k must be a non-negative integer");if(Gr(x)){if(x.size().length>1)throw new Error("Only one dimensional matrices supported");return _(x.valueOf(),m,g)}if(Array.isArray(x))return _(x,m,g)}function _(x,m,g){if(m>=x.length)throw new Error("k out of bounds");for(var w=0;w<x.length;w++)if(i(x[w])&&a(x[w]))return x[w];for(var E=0,S=x.length-1;E<S;){for(var A=E,G=S,U=x[Math.floor(Math.random()*(S-E+1))+E];A<G;)if(g(x[A],U)>=0){var K=x[G];x[G]=x[A],x[A]=K,--G}else++A;g(x[A],U)>0&&--A,m<=A?S=A:E=A+1}return x[m]}});function kl(t,r,i,a){if(!(this instanceof kl))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=r,this.min=i,this.max=a,this.message="Wrong number of arguments in function "+t+" ("+r+" provided, "+i+(null!=a?"-"+a:"")+" expected)",this.stack=(new Error).stack}(kl.prototype=new Error).constructor=Error,kl.prototype.name="ArgumentsError",kl.prototype.isArgumentsError=!0;var Wd="unequal",Ww=(We(Wd,["typed","equalScalar"],t=>{var{typed:r,equalScalar:i}=t;return r(Wd,{"any, any":function(u,c){return null===u?null!==c:null===c?null!==u:void 0===u?void 0!==c:void 0===c?void 0!==u:!i(u,c)}})}),We("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],t=>{var{typed:r,matrix:i,addScalar:a,equalScalar:u,DenseMatrix:c}=t,y=ms({typed:r}),_=Vd({typed:r,equalScalar:u}),x=wu({typed:r,DenseMatrix:c}),m=ci({typed:r}),g=Bn({typed:r});return r("add",za({"DenseMatrix, DenseMatrix":function(E,S){return m(E,S,a)},"DenseMatrix, SparseMatrix":function(E,S){return y(E,S,a,!1)},"SparseMatrix, DenseMatrix":function(E,S){return y(S,E,a,!0)},"SparseMatrix, SparseMatrix":function(E,S){return _(E,S,a)},"Array, Array":function(E,S){return this(i(E),i(S)).valueOf()},"Array, Matrix":function(E,S){return this(i(E),S)},"Matrix, Array":function(E,S){return this(E,i(S))},"DenseMatrix, any":function(E,S){return g(E,S,a,!1)},"SparseMatrix, any":function(E,S){return x(E,S,a,!1)},"any, DenseMatrix":function(E,S){return g(S,E,a,!0)},"any, SparseMatrix":function(E,S){return x(S,E,a,!0)},"Array, any":function(E,S){return g(i(E),S,a,!1).valueOf()},"any, Array":function(E,S){return g(i(S),E,a,!0).valueOf()},"any, any":a,"any, any, ...any":function(E,S,A){for(var G=this(E,S),U=0;U<A.length;U++)G=this(G,A[U]);return G}},a.signatures))}));q(9286);var hb=We("dot",["typed","addScalar","multiplyScalar","conj","size"],t=>{var{typed:r,addScalar:i,multiplyScalar:a,conj:u,size:c}=t;return r("dot",{"Array | DenseMatrix, Array | DenseMatrix":function y(m,g){var w=v(m,g),E=Gr(m)?m._data:m,S=Gr(m)?m._datatype:void 0,A=Gr(g)?g._data:g,G=Gr(g)?g._datatype:void 0,U=2===x(m).length,K=2===x(g).length,R=i,Y=a;if(S&&G&&S===G&&"string"==typeof S){var H=S;R=r.find(i,[H,H]),Y=r.find(a,[H,H])}if(!U&&!K){for(var F=Y(u(E[0]),A[0]),le=1;le<w;le++)F=R(F,Y(u(E[le]),A[le]));return F}if(!U&&K){for(var pe=Y(u(E[0]),A[0][0]),ve=1;ve<w;ve++)pe=R(pe,Y(u(E[ve]),A[ve][0]));return pe}if(U&&!K){for(var j=Y(u(E[0][0]),A[0]),Ee=1;Ee<w;Ee++)j=R(j,Y(u(E[Ee][0]),A[Ee]));return j}if(U&&K){for(var Ce=Y(u(E[0][0]),A[0][0]),Ze=1;Ze<w;Ze++)Ce=R(Ce,Y(u(E[Ze][0]),A[Ze][0]));return Ce}},"SparseMatrix, SparseMatrix":function _(m,g){v(m,g);for(var w=m._index,E=m._values,S=g._index,A=g._values,G=0,U=i,K=a,R=0,Y=0;R<w.length&&Y<S.length;){var H=w[R],F=S[Y];H<F?R++:H>F?Y++:H===F&&(G=U(G,K(E[R],A[Y])),R++,Y++)}return G}});function v(m,g){var S,A,w=x(m),E=x(g);if(1===w.length)S=w[0];else{if(2!==w.length||1!==w[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+w.join(", ")+")");S=w[0]}if(1===E.length)A=E[0];else{if(2!==E.length||1!==E[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+E.join(", ")+")");A=E[0]}if(S!==A)throw new RangeError("Vectors must have equal length ("+S+" != "+A+")");if(0===S)throw new RangeError("Cannot calculate the dot product of empty vectors");return S}function x(m){return Gr(m)?m.size():c(m)}}),G1="identity",_b=We(G1,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],t=>{var{typed:r,config:i,matrix:a,BigNumber:u,DenseMatrix:c,SparseMatrix:v}=t;return r(G1,{"":function(){return"Matrix"===i.matrix?a([]):[]},string:function(m){return a(m)},"number | BigNumber":function(m){return _(m,m,"Matrix"===i.matrix?"dense":void 0)},"number | BigNumber, string":function(m,g){return _(m,m,g)},"number | BigNumber, number | BigNumber":function(m,g){return _(m,g,"Matrix"===i.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(m,g,w){return _(m,g,w)},Array:function(m){return y(m)},"Array, string":function(m,g){return y(m,g)},Matrix:function(m){return y(m.valueOf(),m.storage())},"Matrix, string":function(m,g){return y(m.valueOf(),g)}});function y(x,m){switch(x.length){case 0:return m?a(m):[];case 1:return _(x[0],x[0],m);case 2:return _(x[0],x[1],m);default:throw new Error("Vector containing two values expected")}}function _(x,m,g){var w=Vr(x)||Vr(m)?u:null;if(Vr(x)&&(x=x.toNumber()),Vr(m)&&(m=m.toNumber()),!xr(x)||x<1)throw new Error("Parameters in function identity must be positive integers");if(!xr(m)||m<1)throw new Error("Parameters in function identity must be positive integers");var E=w?new u(1):1,S=w?new w(0):0,A=[x,m];if(g){if("sparse"===g)return v.diagonal(A,E,0,S);if("dense"===g)return c.diagonal(A,E,0,S);throw new TypeError('Unknown matrix type "'.concat(g,'"'))}for(var G=bf([],A,S),U=x<m?x:m,K=0;K<U;K++)G[K][K]=E;return G}}),W1="multiply",Pb=We(W1,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],t=>{var{typed:r,matrix:i,addScalar:a,multiplyScalar:u,equalScalar:c,dot:v}=t,y=Xa({typed:r,equalScalar:c}),_=Bn({typed:r});function x(H,F){switch(H.length){case 1:switch(F.length){case 1:if(H[0]!==F[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(H[0]!==F[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+H[0]+") must match Matrix rows ("+F[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+F.length+" dimensions)")}break;case 2:switch(F.length){case 1:if(H[1]!==F[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+H[1]+") must match Vector length ("+F[0]+")");break;case 2:if(H[1]!==F[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+H[1]+") must match Matrix B rows ("+F[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+F.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+H.length+" dimensions)")}}var E=r("_multiplyMatrixVector",{"DenseMatrix, any":function A(H,F){var et,le=H._data,pe=H._size,ve=H._datatype,j=F._data,Ee=F._datatype,Ce=pe[0],Ze=pe[1],at=a,$e=u;ve&&Ee&&ve===Ee&&"string"==typeof ve&&(at=r.find(a,[et=ve,et]),$e=r.find(u,[et,et]));for(var Se=[],dt=0;dt<Ce;dt++){for(var ye=le[dt],ut=$e(ye[0],j[0]),xt=1;xt<Ze;xt++)ut=at(ut,$e(ye[xt],j[xt]));Se[dt]=ut}return H.createDenseMatrix({data:Se,size:[Ce],datatype:et})},"SparseMatrix, any":function K(H,F){var le=H._values,pe=H._index,ve=H._ptr,j=H._datatype;if(!le)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var dt,Ee=F._data,Ce=F._datatype,Ze=H._size[0],et=F._size[0],at=[],$e=[],Se=[],ye=a,ut=u,xt=c,Rt=0;j&&Ce&&j===Ce&&"string"==typeof j&&(ye=r.find(a,[dt=j,dt]),ut=r.find(u,[dt,dt]),xt=r.find(c,[dt,dt]),Rt=r.convert(0,dt));var ht=[],bt=[];Se[0]=0;for(var Lt=0;Lt<et;Lt++){var It=Ee[Lt];if(!xt(It,Rt))for(var Kt=ve[Lt+1],er=ve[Lt];er<Kt;er++){var Tt=pe[er];bt[Tt]?ht[Tt]=ye(ht[Tt],ut(It,le[er])):(bt[Tt]=!0,$e.push(Tt),ht[Tt]=ut(It,le[er]))}}for(var kr=$e.length,Tr=0;Tr<kr;Tr++)at[Tr]=ht[$e[Tr]];return Se[1]=$e.length,H.createSparseMatrix({values:at,index:$e,ptr:Se,size:[Ze,1],datatype:dt})}}),S=r("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function G(H,F){var $e,le=H._data,pe=H._size,ve=H._datatype,j=F._data,Ce=F._datatype,Ze=pe[0],et=pe[1],at=F._size[1],Se=a,dt=u;ve&&Ce&&ve===Ce&&"string"==typeof ve&&(Se=r.find(a,[$e=ve,$e]),dt=r.find(u,[$e,$e]));for(var ye=[],ut=0;ut<Ze;ut++){var xt=le[ut];ye[ut]=[];for(var Rt=0;Rt<at;Rt++){for(var ht=dt(xt[0],j[0][Rt]),bt=1;bt<et;bt++)ht=Se(ht,dt(xt[bt],j[bt][Rt]));ye[ut][Rt]=ht}}return H.createDenseMatrix({data:ye,size:[Ze,at],datatype:$e})},"DenseMatrix, SparseMatrix":function U(H,F){var le=H._data,pe=H._size,ve=H._datatype,j=F._values,Ee=F._index,Ce=F._ptr,Ze=F._size,et=F._datatype;if(!j)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var Se,at=pe[0],$e=Ze[1],dt=a,ye=u,ut=c,xt=0;ve&&et&&ve===et&&"string"==typeof ve&&(dt=r.find(a,[Se=ve,Se]),ye=r.find(u,[Se,Se]),ut=r.find(c,[Se,Se]),xt=r.convert(0,Se));for(var Rt=[],ht=[],bt=[],Lt=F.createSparseMatrix({values:Rt,index:ht,ptr:bt,size:[at,$e],datatype:Se}),It=0;It<$e;It++){bt[It]=ht.length;var Xt=Ce[It],Kt=Ce[It+1];if(Kt>Xt)for(var er=0,Tt=0;Tt<at;Tt++){for(var kr=Tt+1,Tr=void 0,ur=Xt;ur<Kt;ur++){var Mr=Ee[ur];er!==kr?(Tr=ye(le[Tt][Mr],j[ur]),er=kr):Tr=dt(Tr,ye(le[Tt][Mr],j[ur]))}er===kr&&!ut(Tr,xt)&&(ht.push(Tt),Rt.push(Tr))}}return bt[$e]=ht.length,Lt},"SparseMatrix, DenseMatrix":function R(H,F){var le=H._values,pe=H._index,ve=H._ptr,j=H._datatype;if(!le)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $e,Ee=F._data,Ce=F._datatype,Ze=H._size[0],et=F._size[0],at=F._size[1],Se=a,dt=u,ye=c,ut=0;j&&Ce&&j===Ce&&"string"==typeof j&&(Se=r.find(a,[$e=j,$e]),dt=r.find(u,[$e,$e]),ye=r.find(c,[$e,$e]),ut=r.convert(0,$e));for(var xt=[],Rt=[],ht=[],bt=H.createSparseMatrix({values:xt,index:Rt,ptr:ht,size:[Ze,at],datatype:$e}),Lt=[],It=[],Xt=0;Xt<at;Xt++){ht[Xt]=Rt.length;for(var Kt=Xt+1,er=0;er<et;er++){var Tt=Ee[er][Xt];if(!ye(Tt,ut))for(var Tr=ve[er+1],ur=ve[er];ur<Tr;ur++){var Mr=pe[ur];It[Mr]!==Kt?(It[Mr]=Kt,Rt.push(Mr),Lt[Mr]=dt(Tt,le[ur])):Lt[Mr]=Se(Lt[Mr],dt(Tt,le[ur]))}}for(var ot=Rt.length,Pt=ht[Xt];Pt<ot;Pt++)xt[Pt]=Lt[Rt[Pt]]}return ht[at]=Rt.length,bt},"SparseMatrix, SparseMatrix":function Y(H,F){var dt,le=H._values,pe=H._index,ve=H._ptr,j=H._datatype,Ee=F._values,Ce=F._index,Ze=F._ptr,et=F._datatype,at=H._size[0],$e=F._size[1],Se=le&&Ee,ye=a,ut=u;j&&et&&j===et&&"string"==typeof j&&(ye=r.find(a,[dt=j,dt]),ut=r.find(u,[dt,dt]));for(var Xt,er,Tt,Tr,ur,Mr,xt=Se?[]:void 0,Rt=[],ht=[],bt=H.createSparseMatrix({values:xt,index:Rt,ptr:ht,size:[at,$e],datatype:dt}),Lt=Se?[]:void 0,It=[],He=0;He<$e;He++){ht[He]=Rt.length;var ot=He+1;for(Tr=Ze[He+1],Tt=Ze[He];Tt<Tr;Tt++)if(Mr=Ce[Tt],Se)for(er=ve[Mr+1],Xt=ve[Mr];Xt<er;Xt++)It[ur=pe[Xt]]!==ot?(It[ur]=ot,Rt.push(ur),Lt[ur]=ut(Ee[Tt],le[Xt])):Lt[ur]=ye(Lt[ur],ut(Ee[Tt],le[Xt]));else for(er=ve[Mr+1],Xt=ve[Mr];Xt<er;Xt++)It[ur=pe[Xt]]!==ot&&(It[ur]=ot,Rt.push(ur));if(Se)for(var Ct=Rt.length,Wt=ht[He];Wt<Ct;Wt++)xt[Wt]=Lt[Rt[Wt]]}return ht[$e]=Rt.length,bt}});return r(W1,za({"Array, Array":function(F,le){x(Sn(F),Sn(le));var pe=this(i(F),i(le));return Gr(pe)?pe.valueOf():pe},"Matrix, Matrix":function(F,le){var pe=F.size(),ve=le.size();return x(pe,ve),1===pe.length?1===ve.length?function m(H,F,le){if(0===le)throw new Error("Cannot multiply two empty vectors");return v(H,F)}(F,le,pe[0]):function g(H,F){if("dense"!==F.storage())throw new Error("Support for SparseMatrix not implemented");return function w(H,F){var at,le=H._data,ve=H._datatype,j=F._data,Ce=F._datatype,Ze=H._size[0],et=F._size[1],$e=a,Se=u;ve&&Ce&&ve===Ce&&"string"==typeof ve&&($e=r.find(a,[at=ve,at]),Se=r.find(u,[at,at]));for(var dt=[],ye=0;ye<et;ye++){for(var ut=Se(le[0],j[0][ye]),xt=1;xt<Ze;xt++)ut=$e(ut,Se(le[xt],j[xt][ye]));dt[ye]=ut}return H.createDenseMatrix({data:dt,size:[et],datatype:at})}(H,F)}(F,le):1===ve.length?E(F,le):S(F,le)},"Matrix, Array":function(F,le){return this(F,i(le))},"Array, Matrix":function(F,le){return this(i(F,le.storage()),le)},"SparseMatrix, any":function(F,le){return y(F,le,u,!1)},"DenseMatrix, any":function(F,le){return _(F,le,u,!1)},"any, SparseMatrix":function(F,le){return y(le,F,u,!0)},"any, DenseMatrix":function(F,le){return _(le,F,u,!0)},"Array, any":function(F,le){return _(i(F),le,u,!1).valueOf()},"any, Array":function(F,le){return _(i(le),F,u,!0).valueOf()},"any, any":u,"any, any, ...any":function(F,le,pe){for(var ve=this(F,le),j=0;j<pe.length;j++)ve=this(ve,pe[j]);return ve}},u.signatures))}),AN=We("det",["typed","matrix","subtract","multiply","divideScalar","isZero","unaryMinus"],t=>{var{typed:r,matrix:i,subtract:a,multiply:u,divideScalar:c,isZero:v,unaryMinus:y}=t;return r("det",{any:function(m){return br(m)},"Array | Matrix":function(m){var g;switch((g=Gr(m)?m.size():Array.isArray(m)?(m=i(m)).size():[]).length){case 0:return br(m);case 1:if(1===g[0])return br(m.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+Ln(g)+")");case 2:var w=g[0];if(w===g[1])return function _(x,m,g){if(1===m)return br(x[0][0]);if(2===m)return a(u(x[0][0],x[1][1]),u(x[1][0],x[0][1]));for(var w=!1,E=new Array(m).fill(0).map((le,pe)=>pe),S=0;S<m;S++){var A=E[S];if(v(x[A][S])){var G=void 0;for(G=S+1;G<m;G++)if(!v(x[E[G]][S])){A=E[G],E[G]=E[S],E[S]=A,w=!w;break}if(G===m)return x[A][S]}for(var U=x[A][S],K=0===S?1:x[E[S-1]][S-1],R=S+1;R<m;R++)for(var Y=E[R],H=S+1;H<m;H++)x[Y][H]=c(a(u(x[Y][H],U),u(x[Y][S],x[A][H])),K)}var F=x[E[m-1]][m-1];return w?y(F):F}(m.clone().valueOf(),w);throw new RangeError("Matrix must be square (size: "+Ln(g)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Ln(g)+")")}}})}),tM=We("quantileSeq",["typed","add","multiply","partitionSelect","compare"],t=>{var{typed:r,add:i,multiply:a,partitionSelect:u,compare:c}=t;function y(x,m,g){var w=Fn(x),E=w.length;if(0===E)throw new Error("Cannot calculate quantile of an empty sequence");if(dr(m)){var S=m*(E-1),A=S%1;if(0===A){var G=g?w[S]:u(w,S);return _(G),G}var K,R,U=Math.floor(S);if(g)K=w[U],R=w[U+1];else{R=u(w,U+1),K=w[U];for(var Y=0;Y<U;++Y)c(w[Y],K)>0&&(K=w[Y])}return _(K),_(R),i(a(K,1-A),a(R,A))}var H=m.times(E-1);if(H.isInteger()){H=H.toNumber();var F=g?w[H]:u(w,H);return _(F),F}var j,Ee,le=H.floor(),pe=H.minus(le),ve=le.toNumber();if(g)j=w[ve],Ee=w[ve+1];else{Ee=u(w,ve+1),j=w[ve];for(var Ce=0;Ce<ve;++Ce)c(w[Ce],j)>0&&(j=w[Ce])}_(j),_(Ee);var Ze=new pe.constructor(1);return i(a(j,Ze.minus(pe)),a(Ee,pe))}var _=r({"number | BigNumber | Unit":function(m){return m}});return function v(x,m,g){var w,E,S;if(arguments.length<2||arguments.length>3)throw new SyntaxError("Function quantileSeq requires two or three parameters");if(xo(x)){if("boolean"==typeof(g=g||!1)){if(E=x.valueOf(),dr(m)){if(m<0)throw new Error("N/prob must be non-negative");if(m<=1)return y(E,m,g);if(m>1){if(!xr(m))throw new Error("N must be a positive integer");var A=m+1;w=new Array(m);for(var G=0;G<m;)w[G]=y(E,++G/A,g);return w}}if(Vr(m)){var U=m.constructor;if(m.isNegative())throw new Error("N/prob must be non-negative");if(S=new U(1),m.lte(S))return new U(y(E,m,g));if(m.gt(S)){if(!m.isInteger())throw new Error("N must be a positive integer");var K=m.toNumber();if(K>4294967295)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var R=new U(K+1);w=new Array(K);for(var Y=0;Y<K;)w[Y]=new U(y(E,new U(++Y).div(R),g));return w}}if(Array.isArray(m)){w=new Array(m.length);for(var H=0;H<w.length;++H){var F=m[H];if(dr(F)){if(F<0||F>1)throw new Error("Probability must be between 0 and 1, inclusive")}else{if(!Vr(F))throw new TypeError("Unexpected type of argument in function quantileSeq");if(S=new F.constructor(1),F.isNegative()||F.gt(S))throw new Error("Probability must be between 0 and 1, inclusive")}w[H]=y(E,F,g)}return w}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}}),_M=We("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],t=>{var{typed:r,matrix:i,divideScalar:a,addScalar:u,multiply:c,unaryMinus:v,det:y,identity:_,abs:x}=t;return r("inv",{"Array | Matrix":function(w){var E=Gr(w)?w.size():Sn(w);switch(E.length){case 1:if(1===E[0])return Gr(w)?i([a(1,w.valueOf()[0])]):[a(1,w[0])];throw new RangeError("Matrix must be square (size: "+Ln(E)+")");case 2:var S=E[0],A=E[1];if(S===A)return Gr(w)?i(m(w.valueOf(),S,A),w.storage()):m(w,S,A);throw new RangeError("Matrix must be square (size: "+Ln(E)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Ln(E)+")")}},any:function(w){return a(1,w)}});function m(g,w,E){var S,A,G,U,K;if(1===w){if(0===(U=g[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[a(1,U)]]}if(2===w){var R=y(g);if(0===R)throw Error("Cannot calculate inverse, determinant is zero");return[[a(g[1][1],R),a(v(g[0][1]),R)],[a(v(g[1][0]),R),a(g[0][0],R)]]}var Y=g.concat();for(S=0;S<w;S++)Y[S]=Y[S].concat();for(var H=_(w).valueOf(),F=0;F<E;F++){var le=x(Y[F][F]),pe=F;for(S=F+1;S<w;)x(Y[S][F])>le&&(le=x(Y[S][F]),pe=S),S++;if(0===le)throw Error("Cannot calculate inverse, determinant is zero");(S=pe)!==F&&(K=Y[F],Y[F]=Y[S],Y[S]=K,K=H[F],H[F]=H[S],H[S]=K);var ve=Y[F],j=H[F];for(S=0;S<w;S++){var Ee=Y[S],Ce=H[S];if(S!==F){if(0!==Ee[F]){for(G=a(v(Ee[F]),ve[F]),A=F;A<E;A++)Ee[A]=u(Ee[A],c(G,ve[A]));for(A=0;A<E;A++)Ce[A]=u(Ce[A],c(G,j[A]))}}else{for(G=ve[F],A=F;A<E;A++)Ee[A]=a(Ee[A],G);for(A=0;A<E;A++)Ce[A]=a(Ce[A],G)}}}return H}}),$M=We("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],t=>{var{typed:r,matrix:i,multiply:a,equalScalar:u,divideScalar:c,inv:v}=t,y=Xa({typed:r,equalScalar:u}),_=Bn({typed:r});return r("divide",za({"Array | Matrix, Array | Matrix":function(m,g){return a(m,v(g))},"DenseMatrix, any":function(m,g){return _(m,g,c,!1)},"SparseMatrix, any":function(m,g){return y(m,g,c,!1)},"Array, any":function(m,g){return _(i(m),g,c,!1).valueOf()},"any, Array | Matrix":function(m,g){return a(m,v(g))}},c.signatures))}),ME=We("median",["typed","add","divide","compare","partitionSelect"],t=>{var{typed:r,add:i,divide:a,compare:u,partitionSelect:c}=t;function v(x){try{var m=(x=Fn(x.valueOf())).length;if(0===m)throw new Error("Cannot calculate median of an empty array");if(m%2==0){for(var g=m/2-1,w=c(x,g+1),E=x[g],S=0;S<g;++S)u(x[S],E)>0&&(E=x[S]);return _(E,w)}var A=c(x,(m-1)/2);return y(A)}catch(G){throw function Va(t,r,i){var a;return-1!==String(t).indexOf("Unexpected type")?(a=arguments.length>2?" (type: "+$n(i)+", value: "+JSON.stringify(i)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+r+", unexpected type of argument"+a)):-1!==String(t).indexOf("complex numbers")?(a=arguments.length>2?" (type: "+$n(i)+", value: "+JSON.stringify(i)+")":"",new TypeError("Cannot calculate "+r+", no ordering relation is defined for complex numbers"+a)):t}(G,"median")}}var y=r({"number | BigNumber | Complex | Unit":function(m){return m}}),_=r({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(m,g){return a(i(m,g),2)}});return r("median",{"Array | Matrix":v,"Array | Matrix, number | BigNumber":function(m,g){throw new Error("median(A, dim) is not yet supported")},"...":function(m){if(function gu(t){for(var r=0;r<t.length;r++)if(xo(t[r]))return!0;return!1}(m))throw new TypeError("Scalar values expected in function median");return v(m)}})}),$t=mi({config:Ot}),Bi=Br({}),Vl=Nr({}),e0=En({}),Cn=Gv({Matrix:e0}),lt=wc({BigNumber:$t,Complex:Bi,DenseMatrix:Cn,Fraction:Vl}),ys=im({typed:lt}),Ra=ay({typed:lt}),Ug=mp({BigNumber:$t,typed:lt}),Nh=$u({typed:lt}),Xn=Sp({config:Ot,typed:lt}),Eh=Nl({typed:lt}),_a=Hp({typed:lt}),Hl=Qp({typed:lt}),lf=$m({Matrix:e0,equalScalar:Xn,typed:lt}),i0=gg({typed:lt}),cf=Fy({typed:lt}),rx=hd({Fraction:Vl,typed:lt}),Wl=Uy({typed:lt}),or=ph({DenseMatrix:Cn,Matrix:e0,SparseMatrix:lf,typed:lt}),Sh=Qy({bignumber:Ug,fraction:rx,number:Hl}),ko=n1({matrix:or,config:Ot,typed:lt}),Ha=Gd({DenseMatrix:Cn,addScalar:Ra,equalScalar:Xn,matrix:or,typed:lt,unaryMinus:cf}),Ah=ir({BigNumber:$t,DenseMatrix:Cn,Fraction:Vl,config:Ot,equalScalar:Xn,matrix:or,typed:lt}),ra=kd({numeric:Sh,typed:lt}),sx=Ow({compare:Ah,isNaN:i0,isNumeric:Wl,typed:lt}),ho=Ww({DenseMatrix:Cn,SparseMatrix:lf,addScalar:Ra,equalScalar:Xn,matrix:or,typed:lt}),s0=hb({addScalar:Ra,conj:Nh,multiplyScalar:_a,size:ko,typed:lt}),Ch=_b({BigNumber:$t,DenseMatrix:Cn,SparseMatrix:lf,config:Ot,matrix:or,typed:lt}),eo=Pb({addScalar:Ra,dot:s0,equalScalar:Xn,matrix:or,multiplyScalar:_a,typed:lt}),gS=AN({divideScalar:ra,isZero:Eh,matrix:or,multiply:eo,subtract:Ha,typed:lt,unaryMinus:cf}),u0=tM({add:ho,compare:Ah,multiply:eo,partitionSelect:sx,typed:lt}),l0=ME({add:ho,compare:Ah,divide:$M({divideScalar:ra,equalScalar:Xn,inv:_M({abs:ys,addScalar:Ra,det:gS,divideScalar:ra,identity:Ch,matrix:or,multiply:eo,typed:lt,unaryMinus:cf}),matrix:or,multiply:eo,typed:lt}),partitionSelect:sx,typed:lt});class PS extends Bo{constructor({strategy:r="mean",constant:i,quantile:a}={}){super(),X(this,"strategy",void 0),X(this,"constant",void 0),X(this,"quantile",void 0),X(this,"name","DummyRegressor"),X(this,"tf",void 0),this.tf=se(),this.strategy=r,this.constant=i,this.quantile=a}fit(r,i){oe(J(i),"y variable can not be converted to a 1D Tensor."),oe(["mean","median","constant","quantile"].includes(this.strategy),`Strategy ${this.strategy} not supported. We support 'mean', 'median', 'constant', and 'quantile'`);const a=gt(i);return"mean"===this.strategy?(this.constant=a.mean().dataSync()[0],this):"median"===this.strategy?(this.constant=l0(a.arraySync()),this):"quantile"===this.strategy?(oe("number"==typeof this.quantile&&!isNaN(this.quantile)&&isFinite(this.quantile),"quantile is not set to a number. Please set it to a value between 0 and 1 in the constructor"),oe(this.quantile<0||this.quantile>1,"quantile must be set to a value between 0 and 1"),this.constant=u0(a.arraySync(),this.quantile),this):this}predict(r){oe(Ge(r),"Data can not be converted to a 2D matrix.");let a=Be(r).shape[0];return this.tf.tensor1d(Array(a).fill(this.constant))}}function hx(t){for(var i,r=new Map,a=0,u=0;u<t.length;u++){var c=r.get(t[u]);void 0===c?c=1:c++,c>a&&(i=t[u],a=c),r.set(t[u],c)}if(0===a)throw new Error("mode requires at last one data point");return i}var dx=function(){this.totalCount=0,this.data={}};dx.prototype.train=function(r,i){for(var a in this.data[i]||(this.data[i]={}),r){var u=r[a];void 0===this.data[i][a]&&(this.data[i][a]={}),void 0===this.data[i][a][u]&&(this.data[i][a][u]=0),this.data[i][a][u]++}this.totalCount++},dx.prototype.score=function(r){var a,i={};for(var u in r){var c=r[u];for(a in this.data)i[a]={},i[a][u+"_"+c]=this.data[a][u]?(this.data[a][u][c]||0)/this.totalCount:0}var v={};for(a in i)for(var y in v[a]=0,i[a])v[a]+=i[a][y];return v};var yx=function(){this.weights=[],this.bias=0};yx.prototype.predict=function(r){if(r.length!==this.weights.length)return null;for(var i=0,a=0;a<this.weights.length;a++)i+=this.weights[a]*r[a];return(i+=this.bias)>0?1:0},yx.prototype.train=function(r,i){if(0!==i&&1!==i)return null;r.length!==this.weights.length&&(this.weights=r,this.bias=1);var a=this.predict(r);if("number"==typeof a&&a!==i){for(var u=i-a,c=0;c<this.weights.length;c++)this.weights[c]+=u*r[c];this.bias+=u}return this},Math.log(Math.sqrt(2*Math.PI)),Math.sqrt(2*Math.PI);var sA=Math.sqrt(2*Math.PI);function uA(t){for(var r=t,i=t,a=1;a<15;a++)r+=i*=t*t/(2*a+1);return Math.round(1e4*(.5+r/sA*Math.exp(-t*t/2)))/1e4}for(var Hg=[],x0=0;x0<=3.09;x0+=.01)Hg.push(uA(x0));var yA=q(8799),_A=q.n(yA);class xA extends Gs{constructor({strategy:r="mostFrequent",constant:i=0}={}){super(),X(this,"constant",void 0),X(this,"strategy",void 0),X(this,"classes",void 0),X(this,"name","DummyClassifier"),X(this,"tf",void 0),this.tf=se(),this.constant=i,this.strategy=r,this.classes=[]}fit(r,i){oe(J(i),"Data can not be converted to a 1D or 2D matrix."),oe(["mostFrequent","uniform","constant"].includes(this.strategy),`Strategy ${this.strategy} not supported. We support 'mostFrequent', 'uniform', and 'constant'`);const a=gt(i);return this.classes=sn()(a.arraySync()),"mostFrequent"===this.strategy?(this.constant=hx(a.arraySync()),this):this}predictProba(r){return oe(Ge(r),"Data can not be converted to a 1D or 2D matrix."),oe(["mostFrequent","uniform","constant"].includes(this.strategy),`Strategy ${this.strategy} not supported. We support 'mostFrequent', 'uniform', and 'constant'`),this.tf.oneHot(this.predict(r).toInt(),this.classes.length)}predict(r){oe(Ge(r),"Data can not be converted to a 1D or 2D matrix."),oe(["mostFrequent","uniform","constant"].includes(this.strategy),`Strategy ${this.strategy} not supported. We support 'mostFrequent', 'uniform', and 'constant'`);let a=Be(r).shape[0];if("mostFrequent"===this.strategy||"constant"===this.strategy)return this.tf.tensor1d(Array(a).fill(this.constant));let u=[];for(let c=0;c<a;c++)u.push(_A()(this.classes));return this.tf.tensor1d(u)}}function bx(t,r,i){let a=se();return i?a.tidy(()=>a.where(t.isNaN(),-1/0,t).max(r)):t.min(r)}function b0(t,r,i){let a=se();return i?a.tidy(()=>a.where(t.isNaN(),0,t).sum(r)):t.sum(r)}function N0(t,r,i){let a=se();return i?a.tidy(()=>a.logicalNot(t.isNaN()).sum(r)):a.onesLike(t).sum(r)}function M0(t,r,i,a){let u=se();return i?u.tidy(a?()=>b0(t,r,i).div(Kl(N0(t,r,i))):()=>b0(t,r,i).div(N0(t,r,i))):t.mean(r)}function Kl(t){let r=se();return r.tidy(()=>{const i=r.zerosLike(t),a=t.equal(i);return t.add(a)})}class EA extends ki{constructor({featureRange:r=[0,1]}={}){super(),X(this,"featureRange",void 0),X(this,"scale",void 0),X(this,"min",void 0),X(this,"dataMin",void 0),X(this,"dataMax",void 0),X(this,"dataRange",void 0),X(this,"nFeaturesIn",void 0),X(this,"nSamplesSeen",void 0),X(this,"featureNamesIn",void 0),X(this,"name","MinMaxScaler"),this.tf=se(),this.featureRange=r,this.scale=this.tf.tensor1d([]),this.min=this.tf.tensor1d([]),this.dataMin=this.tf.tensor1d([]),this.dataMax=this.tf.tensor1d([]),this.dataRange=this.tf.tensor1d([]),this.nFeaturesIn=0,this.nSamplesSeen=0,this.featureNamesIn=[]}isNumber(r){return"number"==typeof r&&isFinite(r)}fit(r){oe(Ge(r),"Data can not be converted to a 2D matrix."),oe(this.isNumber(this.featureRange[0])&&this.isNumber(this.featureRange[1])&&this.featureRange[0]<this.featureRange[1],"featureRange needs to contain exactly two numbers where the first is less than the second");const i=Be(r),a=bx(i,0,!0),u=function wA(t,r,i){let a=se();return i?a.tidy(()=>a.where(t.isNaN(),1/0,t).min(r)):t.min(r)}(i,0,!0),c=a.sub(u);return this.scale=this.tf.div(this.featureRange[1]-this.featureRange[0],Kl(c)),this.min=this.tf.sub(this.featureRange[0],u.mul(this.scale)),this.dataMin=u,this.dataMax=a,this.dataRange=c,this.nSamplesSeen=i.shape[0],this.nFeaturesIn=i.shape[1],be(r)&&(this.featureNamesIn=[...r.columns]),this}transform(r){return oe(Ge(r),"Data can not be converted to a 2D matrix."),Be(r).mul(this.scale).add(this.min)}inverseTransform(r){return oe(Ge(r),"Data can not be converted to a 2D matrix."),Be(r).sub(this.min).div(this.scale)}}class SA extends ki{constructor({withMean:r=!0,withStd:i=!0}={}){super(),X(this,"scale",void 0),X(this,"mean",void 0),X(this,"withMean",void 0),X(this,"withStd",void 0),X(this,"nFeaturesIn",void 0),X(this,"nSamplesSeen",void 0),X(this,"featureNamesIn",void 0),X(this,"name","StandardScaler"),this.tf=se(),this.withMean=r,this.withStd=i,this.scale=this.tf.tensor1d([]),this.mean=this.tf.tensor1d([]),this.nFeaturesIn=0,this.nSamplesSeen=0,this.featureNamesIn=[]}fit(r){oe(Ge(r),"Data can not be converted to a 2D matrix.");const i=Be(r);if(this.withMean&&(this.mean=M0(i,0,!0)),this.withStd){const a=function MA(t,r,i){return oe(Boolean(i),"We only need to call this function when ignoreNaN is true"),se().tidy(()=>{const u=M0(t,r,i),c=N0(t,r,i),v=b0(t.sub(u).square(),r,i),y=Kl(c);return v.div(y).sqrt()})}(i,0,!0);this.scale=Kl(a)}return this.nSamplesSeen=i.shape[0],this.nFeaturesIn=i.shape[1],be(r)&&(this.featureNamesIn=[...r.columns]),this}transform(r){oe(Ge(r),"Data can not be converted to a 2D matrix.");let i=Be(r);return this.withMean&&(i=i.sub(this.mean)),this.withStd&&(i=i.div(this.scale)),i}inverseTransform(r){oe(Ge(r),"Data can not be converted to a 2D matrix.");let i=Be(r);return this.withStd&&(i=i.mul(this.scale)),this.withMean&&(i=i.add(this.mean)),i}}class AA extends ki{constructor(){super(),X(this,"scale",void 0),X(this,"nFeaturesIn",void 0),X(this,"nSamplesSeen",void 0),X(this,"featureNamesIn",void 0),X(this,"name","MaxAbsScaler"),this.tf=se(),this.scale=this.tf.tensor1d([]),this.nFeaturesIn=0,this.nSamplesSeen=0,this.featureNamesIn=[]}fit(r){oe(Ge(r),"Data can not be converted to a 2D matrix.");const i=Be(r),a=bx(i.abs(),0,!0);return this.scale=Kl(a),this.nSamplesSeen=i.shape[0],this.nFeaturesIn=i.shape[1],be(r)&&(this.featureNamesIn=[...r.columns]),this}transform(r){return oe(Ge(r),"Data can not be converted to a 2D matrix."),Be(r).div(this.scale)}inverseTransform(r){return oe(Ge(r),"Data can not be converted to a 2D matrix."),Be(r).mul(this.scale)}}function Nx(t){return t.filter(i=>!function CA(t){return null==t||isNaN(t)&&"string"!=typeof t}(i))}class IA extends ki{constructor({strategy:r="mean",fillValue:i,missingValues:a=NaN}={}){super(),X(this,"missingValues",void 0),X(this,"fillValue",void 0),X(this,"strategy",void 0),X(this,"statistics",void 0),X(this,"name","SimpleImputer"),X(this,"tf",void 0),this.tf=se(),this.missingValues=a,this.strategy=r,this.fillValue=i,this.statistics=this.tf.tensor1d([])}fit(r){if("constant"===this.strategy)return this;if("mean"===this.strategy){const a=M0(Be(r),0,!0);return this.statistics=a,this}if("mostFrequent"===this.strategy){const a=Be(r).transpose().arraySync().map(u=>hx(Nx(u)));return this.statistics=this.tf.tensor1d(a),this}if("median"===this.strategy){const a=Be(r).transpose().arraySync().map(u=>l0(Nx(u)));return this.statistics=this.tf.tensor1d(a),this}throw new Error(`Strategy ${this.strategy} is unsupported. Supported strategies are 'mean', 'median', 'mostFrequent', and 'constant'`)}transform(r){if("constant"===this.strategy){const a=De(r);return this.tf.where(a.isNaN(),void 0===this.fillValue?"string"!==a.dtype?0:"missing_value":this.fillValue,a)}const i=Be(r);return this.tf.where(i.isNaN(),this.statistics.reshape([1,-1]),i)}}class E0 extends Vn{constructor(){super(),X(this,"classes",void 0),X(this,"name","LabelEncoder"),X(this,"tf",void 0),this.tf=se(),this.classes=[]}convertTo1DArray(r){return he(r)?r.values:fe(r)?r.arraySync():r}classesToMapping(r){const i=new Map;return r.forEach((a,u)=>{i.set(a,u)}),i}fit(r){const i=this.convertTo1DArray(r),a=Array.from(new Set(i));return this.classes=a,this}transform(r){const i=this.convertTo1DArray(r),a=this.classesToMapping(this.classes),u=i.map(c=>{let v=a.get(c);return void 0===v?-1:v});return this.tf.tensor1d(u)}fitTransform(r){return this.fit(r).transform(r)}inverseTransform(r){const i=this.convertTo1DArray(r),a=this.classesToMapping(this.classes),u=new Map(Array.from(a,v=>v.reverse()));return i.map(v=>void 0===u.get(v)?null:u.get(v))}}class OA extends ki{constructor({categories:r="auto",handleUnknown:i="error",unknownValue:a=NaN}={}){super(),X(this,"categories",void 0),X(this,"handleUnknown",void 0),X(this,"unknownValue",void 0),X(this,"categoriesParam",void 0),X(this,"nFeaturesIn",void 0),X(this,"featureNamesIn",void 0),X(this,"name","OrdinalEncoder"),this.tf=se(),this.categoriesParam=r,this.categories=[],this.handleUnknown=i,this.unknownValue=a,this.nFeaturesIn=0,this.featureNamesIn=[]}classesToMapping(r){const i=new Map;return r.forEach((a,u)=>{i.set(a,u)}),i}loopOver2DArrayToSetLabels(r){for(let i=0;i<r[0].length;i++){let a=new Set;for(let c=0;c<r.length;c++)a.add(r[c][i]);let u=Array.from(a);this.categories.push(u)}}fit(r,i){const a=Bt(r);return"auto"===this.categoriesParam?(this.loopOver2DArrayToSetLabels(a),this):(this.categories=this.categoriesParam,this.nFeaturesIn=0===a.length?0:a[0].length||0,be(r)&&(this.featureNamesIn=[...r.columns]),this)}loopOver2DArrayToUseLabels(r){let i=this.categories.map(u=>this.classesToMapping(u)),a=[];for(let u=0;u<r.length;u++){let c=[];for(let v=0;v<r[0].length;v++){let y=r[u][v],_=i[v].get(y);if(void 0===_){if("error"===this.handleUnknown)throw new Error(`Unknown value ${y} encountered while transforming. Not encountered in training data`);_=this.unknownValue}c.push(_)}a.push(c)}return a}transform(r,i){const a=Bt(r),u=this.loopOver2DArrayToUseLabels(a);return this.tf.tensor2d(u,void 0,"int32")}}class PA extends ki{constructor({norm:r="l2"}={}){super(),X(this,"norm",void 0),X(this,"nFeaturesIn",void 0),X(this,"featureNamesIn",void 0),X(this,"name","Normalizer"),this.tf=se(),this.norm=r,this.nFeaturesIn=0,this.featureNamesIn=[]}fit(r){oe(Ge(r),"Data can not be converted to a 2D matrix.");const i=Be(r);return this.nFeaturesIn=i.shape[1],be(r)&&(this.featureNamesIn=[...r.columns]),this}transform(r){oe(Ge(r),"Data can not be converted to a 2D matrix.");const i=Be(r);if("l1"===this.norm){const u=this.tf.abs(i).sum(1).reshape([-1,1]);return i.divNoNan(u)}if("l2"===this.norm){const u=i.square().sum(1).sqrt().reshape([-1,1]);return i.divNoNan(u)}const a=this.tf.abs(i).max(1).reshape([-1,1]);return i.divNoNan(a)}}class Mx extends Vn{constructor({steps:r=[]}={}){super(),X(this,"steps",void 0),X(this,"name","Pipeline"),this.steps=r,this.validateSteps(this.steps)}isTransformer(r){return"passthrough"===r||"function"==typeof r.fit&&"function"==typeof r.transform&&"function"==typeof r.fitTransform}isEstimator(r){return"passthrough"===r||"function"==typeof r.fit}validateSteps(r){if(oe(Array.isArray(r),`steps is not an array. It is ${r}`),0===r.length)return;for(let a=0;a<r.length-1;a++){const u=r[a];oe(Array.isArray(u),`A single step in your pipeline must be an array containing a string as the first argument, and the transformer in the second. Something akin to ['minmaxscaler', new MinMaxScaler()]. Instead it is ${u}`),oe(this.isTransformer(u[1]),`The ${a}th step in your pipeline isn't an array containing a name and a Transformer. Instead it is ${r[a]}.`)}let i=r[r.length-1];oe(Array.isArray(i),`The last element in your pipeline must be a 2-element array that contains a string as the first argument, and an estimator as the second. Instead it is ${i}`),oe(this.isEstimator(i[1]),`The last element in your pipeline should be an Estimator. Instead it is ${i}`)}transformExceptLast(r){let i=r;for(let a=0;a<this.steps.length-1;a++){const[,u]=this.steps[a];"passthrough"!==u&&(i=u.transform(i))}return i}fitTransformExceptLast(r){let i=r;for(let a=0;a<this.steps.length-1;a++){const[,u]=this.steps[a];"passthrough"!==u&&(i=u.fitTransform(i))}return i}getLastEstimator(){return 0===this.steps.length?null:this.steps[this.steps.length-1][1]}assertEstimatorHasFunction(r,i){oe(null!==r,`Your final Estimator is null and therefore you can't call ${i}`),oe("function"==typeof r[i],`Estimator ${r} doesn't implement the function ${i}`)}fit(r,i){var a=this;return ee(function*(){a.validateSteps(a.steps);const u=a.getLastEstimator();a.assertEstimatorHasFunction(u,"fit");let c=a.fitTransformExceptLast(r);return yield u.fit(c,i),a})()}transform(r){this.validateSteps(this.steps);const i=this.getLastEstimator();this.assertEstimatorHasFunction(i,"transform");let a=this.transformExceptLast(r);return i.transform(a)}fitTransform(r,i){this.validateSteps(this.steps);const a=this.getLastEstimator();this.assertEstimatorHasFunction(a,"fitTransform");let u=this.fitTransformExceptLast(r);return a.fitTransform(u)}predict(r){this.validateSteps(this.steps);const i=this.getLastEstimator();this.assertEstimatorHasFunction(i,"predict");let a=this.transformExceptLast(r);return i.predict(a)}fitPredict(r,i){var a=this;return ee(function*(){a.validateSteps(a.steps);const u=a.getLastEstimator();a.assertEstimatorHasFunction(u,"fitPredict");let c=a.fitTransformExceptLast(r);return yield u.fitPredict(c,i)})()}}function TA(...t){let r=[];for(let i=0;i<t.length;i++){let a=t[i];r.push([a.name,a])}return new Mx({steps:r})}function Ex(t){return Array.isArray(t)&&"string"==typeof t[0]}class LA extends Vn{constructor({transformers:r=[],remainder:i="drop"}={}){super(),X(this,"transformers",void 0),X(this,"remainder",void 0),X(this,"name","ColumnTransformer"),X(this,"tf",void 0),this.tf=se(),this.transformers=r,this.remainder=i}fit(r,i){for(let a=0;a<this.transformers.length;a++){let[,u,c]=this.transformers[a],v=this.getColumns(r,c);u.fit(v,i)}return this}transform(r,i){let a=[];for(let u=0;u<this.transformers.length;u++){let[,c,v]=this.transformers[u],y=this.getColumns(r,v);a.push(c.transform(y,i))}return this.tf.concat(a,1)}fitTransform(r,i){let a=[];for(let u=0;u<this.transformers.length;u++){let[,c,v]=this.transformers[u],y=this.getColumns(r,v);a.push(c.fitTransform(y,i))}return this.tf.concat(a,1)}getColumns(r,i){if(be(r))return Ex(i)?r.loc({columns:i}).tensor:Array.isArray(i)?r.iloc({columns:i}).tensor:"string"==typeof i?r[i].tensor:r.iloc({columns:[i]}).tensor;if(Ex(i)||"string"==typeof i)throw new Error("Can't pass string selected columns when not a DataFrame");if("number"==typeof i){let a=this.tf.tensor1d([i]);return r.gather(a,1)}{let a=this.tf.tensor1d(i);return r.gather(a,1)}}}function Sx(t){return t.filter(i=>!function DA(t){return null==t||isNaN(t)&&"string"!=typeof t}(i))}class RA extends ki{constructor({quantileRange:r=[25,75],withCentering:i=!0,withScaling:a=!0}={}){super(),X(this,"scale",void 0),X(this,"center",void 0),X(this,"nFeaturesIn",void 0),X(this,"featureNamesIn",void 0),X(this,"quantileRange",void 0),X(this,"withScaling",void 0),X(this,"withCentering",void 0),X(this,"name","RobustScaler"),this.tf=se(),this.scale=this.tf.tensor1d([]),this.center=this.tf.tensor1d([]),this.quantileRange=r,this.withScaling=a,this.withCentering=i,this.nFeaturesIn=0,this.featureNamesIn=[]}isNumber(r){return"number"==typeof r&&isFinite(r)}fit(r){oe(Ge(r),"Data can not be converted to a 2D matrix."),oe(this.isNumber(this.quantileRange[0])&&this.isNumber(this.quantileRange[1]),"quantileRange values must be numbers");let i=this.quantileRange[0],a=this.quantileRange[1];oe(i<a&&0<=i&&i<=100&&0<=a&&a<=100,"quantileRange numbers must be between 0 and 100");const u=Be(r),c=u.transpose().arraySync();if(this.withCentering){const v=c.map(y=>u0(Sx(y),.5));this.center=this.tf.tensor1d(v)}if(this.withScaling){const v=c.map(_=>u0(Sx(_),[i/100,a/100])),y=this.tf.tensor1d(v.map(_=>_[1]-_[0]));this.scale=Kl(y)}return this.nFeaturesIn=u.shape[1],be(r)&&(this.featureNamesIn=[...r.columns]),this}transform(r){oe(Ge(r),"Data can not be converted to a 2D matrix.");let i=Be(r);return this.withCentering&&(i=i.sub(this.center)),this.withScaling&&(i=i.div(this.scale)),i}inverseTransform(r){oe(Ge(r),"Data can not be converted to a 2D matrix.");let i=Be(r);return this.withScaling&&(i=i.mul(this.scale)),this.withCentering&&(i=i.add(this.center)),i}}class BA extends Vn{constructor({nClusters:r=8,init:i="random",maxIter:a=300,tol:u=1e-4,nInit:c=10,randomState:v}={}){super(),X(this,"nClusters",void 0),X(this,"init",void 0),X(this,"nInit",void 0),X(this,"maxIter",void 0),X(this,"tol",void 0),X(this,"randomState",void 0),X(this,"clusterCenters",void 0),X(this,"name","KMeans"),X(this,"tf",void 0),this.tf=se(),this.nClusters=r,this.init=i,this.maxIter=a,this.tol=u,this.randomState=v,this.nInit=c,this.clusterCenters=this.tf.tensor2d([[]])}initCentroids(r){if("random"!==this.init)throw new Error(`init ${this.init} is not currently implemented`);{let i=rr(r.shape[0],this.nClusters,this.randomState);this.clusterCenters=this.tf.gather(r,i)}}closestCentroid(r){return this.tf.tidy(()=>{const i=this.tf.expandDims(r,1),a=this.tf.expandDims(this.clusterCenters,0);return this.tf.squaredDifference(i,a).sum(2).argMin(1)})}updateCentroids(r,i){return this.tf.tidy(()=>{const a=[];for(let u=0;u<this.nClusters;u++){const c=this.tf.equal(i,this.tf.scalar(u).toInt()),v=this.tf.div(this.tf.sum(this.tf.mul(this.tf.expandDims(c.toFloat(),1),r),0),this.tf.sum(c.toFloat()));a.push(v)}return this.tf.stack(a)})}fit(r){let i=Be(r);this.initCentroids(i);for(let a=0;a<this.maxIter;a++){const u=this.closestCentroid(i);this.clusterCenters=this.updateCentroids(i,u)}return this}predict(r){let i=Be(r);return this.closestCentroid(i)}transform(r){return this.tf.tidy(()=>{const i=Be(r),a=this.tf.expandDims(i,1),u=this.tf.expandDims(this.clusterCenters,0);return this.tf.squaredDifference(a,u).sum(2).sqrt()})}fitPredict(r){return this.fit(r).predict(r)}fitTransform(r){return this.fit(r).transform(r)}score(r){return this.tf.tidy(()=>{const i=Be(r),a=this.tf.expandDims(i,1),u=this.tf.expandDims(this.clusterCenters,0);return this.tf.squaredDifference(a,u).sum(2).min(1).sqrt().sum()})}}const FA={loadBoston:"http://scikitjs.org/data/boston.csv",loadIris:"http://scikitjs.org/data/iris.csv",loadWine:"http://scikitjs.org/data/wine.csv",loadDiabetes:"http://scikitjs.org/data/diabetes.csv",loadBreastCancer:"http://scikitjs.org/data/breast_cancer.csv",loadDigits:"http://scikitjs.org/data/digits.csv",fetchCaliforniaHousing:"http://scikitjs.org/data/california_housing.csv"};class Ax extends Bo{constructor({estimators:r=[],weights:i}={}){super(),X(this,"estimators",void 0),X(this,"weights",void 0),X(this,"name","VotingRegressor"),this.tf=se(),this.estimators=r,this.weights=i}fit(r,i){var a=this;return ee(function*(){for(let u=0;u<a.estimators?.length;u++){let[c,v]=a.estimators[u];yield v.fit(r,i)}return a})()}predict(r){let i=[],a=this.estimators.length;const u=this.weights||Array(a).fill(1/a);for(let c=0;c<a;c++){let[v,y]=this.estimators[c],_=u[c];i.push(y.predict(r).mul(_))}return this.tf.addN(i)}transform(r){let i=[],a=this.estimators.length;for(let u=0;u<a;u++){let[c,v]=this.estimators[u];i.push(v.predict(r))}return i}fitTransform(r,i){var a=this;return ee(function*(){return(yield a.fit(r,i)).transform(r)})()}}function qA(...t){let r=[];for(let i=0;i<t.length;i++){let a=t[i];r.push([a.name,a])}return new Ax({estimators:r})}class Cx extends Gs{constructor({estimators:r=[],weights:i,voting:a="hard"}={}){super(),X(this,"estimators",void 0),X(this,"weights",void 0),X(this,"le",void 0),X(this,"name","VotingClassifier"),X(this,"tf",void 0),this.tf=se(),this.estimators=r,this.weights=i,this.voting=a,this.le=new E0}fit(r,i){var a=this;return ee(function*(){let u=a.le.fitTransform(i);for(let c=0;c<a.estimators?.length;c++){let[v,y]=a.estimators[c];yield y.fit(r,u)}return a})()}predictProba(r){let i=[],a=this.estimators.length;const u=this.weights||Array(a).fill(1/a);for(let c=0;c<a;c++){let[v,y]=this.estimators[c],_=u[c];i.push(y.predictProba(r).mul(_))}return this.tf.addN(i)}predict(r){let i=[],a=this.estimators.length;const u=this.weights||Array(a).fill(1/a);if("hard"===this.voting){for(let c=0;c<a;c++){let[v,y]=this.estimators[c],_=u[c],x=y.predict(r).toInt(),m=this.tf.oneHot(x,this.le.classes.length);i.push(m.mul(_))}return this.tf.tensor1d(this.le.inverseTransform(this.tf.addN(i).argMax(1)))}for(let c=0;c<a;c++){let[v,y]=this.estimators[c],_=u[c],x=y.predictProba(r);i.push(x.mul(_))}return this.tf.tensor1d(this.le.inverseTransform(this.tf.addN(i).argMax(1)))}transform(r){let i=[],a=this.estimators.length;if("hard"===this.voting){for(let u=0;u<a;u++){let[c,v]=this.estimators[u];i.push(v.predict(r))}return i}for(let u=0;u<a;u++){let[c,v]=this.estimators[u];i.push(v.predictProba(r))}return i}fitTransform(r,i){var a=this;return ee(function*(){return(yield a.fit(r,i)).transform(r)})()}}function zA(...t){let r=[];for(let i=0;i<t.length;i++){let a=t[i];r.push([a.name,a])}return new Cx({estimators:r})}class UA{constructor({metric:r,entries:i}){X(this,"_metric",void 0),X(this,"_entries",void 0),X(this,"tf",void 0),this._metric=r,this._entries=i,this.tf=se()}kNearest(r,i){const{_metric:a,_entries:u}=this;return oe(u.shape[1]==i.shape[1],"X_train.shape[1] must equal X_predict.shape[1]"),this.tf.tidy(()=>{const c=this.tf.unstack(i).map(v=>this.tf.tidy(()=>{const y=a.tensorDistance(v,u).neg(),{values:_,indices:x}=this.tf.topk(y,r);return[_,x]}));return{distances:this.tf.stack(c.map(v=>v[0])).neg(),indices:this.tf.stack(c.map(v=>v[1]))}})}}const Wg=t=>(r,i)=>{let a=se();return oe((r.shape[r.rank-1]??NaN)===(i.shape[i.rank-1]??NaN),`minkowskiDistance(${t}).tensorDistance(u,v): u.shape[-1] must equal v.shape[-1].`),a.tidy(()=>a.norm(a.sub(r,i),t,-1))},Zg=t=>{switch(t){case 1:return GA;case 2:return kA;case 1/0:return YA}oe(1<=t,"minkowskiMetric(p): Invalid p.");const r={tensorDistance:Wg(t),distance(i,a){const u=i.length;if(u!==a.length)throw new Error(`minkowskiMetric(${t}).treeMetric(u,v): u and v must have same length.`);let c=0;for(let v=0;v<u;v++)c+=Math.abs(i[v]-a[v])**t;return c**(1/t)},distToBBox(i,a){if(2*i.length!=a.length)throw new Error(`minkowskiMetric(${t}).treeMetric.minDistToBBox(pt,bBox): pt.length*2 must equal bBox.length.`);let u=0;for(let c=0,v=0;v<i.length;v++)u+=Math.max(0,a[c++]-i[v],i[v]-a[c++])**t;return u**(1/t)},name:`minkowskiMetric(${t})`,toString(){return this.name}};return Object.freeze(r)},GA=Object.freeze({tensorDistance:Wg(1),distance(t,r){const i=t.length;if(i!==r.length)throw new Error("minkowskiMetric(1).distance(u,v): u and v must have same length.");let a=0;for(let u=0;u<i;u++)a+=Math.abs(t[u]-r[u]);return a},minDistToBBox(t,r){const i=r.length;if(i!==t.length<<1)throw new Error("minkowskiMetric(1).minDistToBBox(pt,bBox): pt.length*2 must equal bBox.length.");let a=0;for(let u=0;u<i;){const c=t[u>>>1],v=r[u++]-c,y=c-r[u++];a+=.5*(Math.abs(v)+v+(Math.abs(y)+y))}return a},name:"manhattanMetric",toString(){return this.name}}),kA=Object.freeze({tensorDistance:Wg(2),distance(t,r){const i=t.length;if(i!==r.length)throw new Error("minkowskiMetric(2).distance(u,v): u and v must have same length.");let a=0;for(let u=0;u<i;u++){const c=t[u]-r[u];a+=c*c}return Math.sqrt(a)},minDistToBBox(t,r){const i=r.length;if(i!==2*t.length)throw new Error("minkowskiMetric(2).minDistToBBox(pt,bBox): pt.length*2 must equal bBox.length.");let a=0;for(let u=0;u<i;){const c=t[u>>>1],v=r[u++]-c,y=c-r[u++],_=.5*(Math.abs(v)+v+(Math.abs(y)+y));a+=_*_}return Math.sqrt(a)},name:"euclideanMetric",toString(){return this.name}}),YA=Object.freeze({tensorDistance:Wg(1/0),distance(t,r){const i=t.length;if(i!==r.length)throw new Error("minkowskiMetric(Infinity).distance(u,v): u and v must have same length.");let a=0;for(let u=0;u<i;u++){const c=Math.abs(t[u]-r[u]);a=Math.max(a,c)}return a},minDistToBBox(t,r){const i=r.length;if(i!==2*t.length)throw new Error("minkowskiMetric(Infinity).minDistToBBox(pt,bBox): pt.length*2 must equal bBox.length.");let a=-1/0;for(let u=0;u<i;){const c=t[u>>>1],v=r[u++]-c,y=c-r[u++],_=.5*(Math.abs(v)+v+(Math.abs(y)+y));a=Math.max(a,_)}return a},name:"chebyshevMetric",toString(){return this.name}});function Ix(t,r){let i=new VA(t),a=()=>i.next();return function XA(t,r,i){let a=i&&i.state;a&&("object"==typeof a&&r.copy(a,r),t.state=()=>r.copy(r,{}))}(a,i,r),a}class VA{constructor(r){X(this,"c",void 0),X(this,"s0",void 0),X(this,"s1",void 0),X(this,"s2",void 0),null==r&&(r=+new Date);let i=4022871197;function a(u){u=String(u);for(let c=0;c<u.length;c++){i+=u.charCodeAt(c);let v=.02519603282416938*i;i=v>>>0,v-=i,v*=i,i=v>>>0,v-=i,i+=4294967296*v}return 2.3283064365386963e-10*(i>>>0)}this.c=1,this.s0=a(" "),this.s1=a(" "),this.s2=a(" "),this.s0-=a(r),this.s0<0&&(this.s0+=1),this.s1-=a(r),this.s1<0&&(this.s1+=1),this.s2-=a(r),this.s2<0&&(this.s2+=1)}next(){let{c:r,s0:i,s1:a,s2:u}=this,c=2091639*i+2.3283064365386963e-10*r;return this.s0=a,this.s1=u,this.s2=c-(this.c=0|c)}copy(r,i){return i.c=r.c,i.s0=r.s0,i.s1=r.s1,i.s2=r.s2,i}}const S0=t=>(r,i)=>{if(r>=i)throw new Error("randInt(rng)(from,until): from must be less than until.");const a=Math.floor(r+(i-r)*t());return a===i?a-1:a};class ZA{constructor(r,i){X(this,"_keys",void 0),X(this,"_vals",void 0),X(this,"_pos",void 0);const a=r.length;oe(a>0,"new CappedMaxHeap(keys,vals): keys.length must be positive."),oe(a===i.length,"new CappedMaxHeap(keys,vals): keys.length must equal vals.length."),r[0]=NaN,this._keys=r,this._vals=i,this._pos=a}get maxKey(){return this._keys[0]}add(r,i){let{_keys:a,_vals:u,_pos:c}=this;if(0<c)this._pos=--c;else if(a[0]<=r)return;const v=a.length-1;for(;;){let y=1+(c<<1);if(y>v||(y+=+(y<v&&a[y]<a[y+1]),a[y]<=r))break;a[c]=a[y],u[c]=u[y],c=y}a[c]=r,u[c]=i}sort(){const{_keys:r,_vals:i,_pos:a}=this;oe(0===a,"CappedMaxHeap().sort(): Heap is not full yet.");const u=(_,x)=>{let m=r[_];r[_]=r[x],r[x]=m;let g=i[_];i[_]=i[x],i[x]=g},c=_=>{r[_]>r[_+1]&&u(_,_+1)},v=_=>{c(_),r[_+1]>r[_+2]&&(u(_+1,_+2),c(_))},y=(_,x)=>{switch(x-_){case 0:case 1:return;case 2:return c(_);case 3:return v(_)}const m=_+x>>>1;v(m-1);const g=r[m];u(_,m);let w=_,E=_+1;for(let S=E;S<x;S++){let A=r[S];A<=g&&(u(S,E),A<g&&u(w++,E),E++)}y(_,w),y(E,x)};y(0,r.length)}}const Ox=t=>1+(t<<1);class A0{constructor(r,i,a,u,c,v,y){X(this,"_nSamples",void 0),X(this,"_nFeatures",void 0),X(this,"_metric",void 0),X(this,"_points",void 0),X(this,"_indices",void 0),X(this,"_bBoxes",void 0),X(this,"_offsets",void 0),X(this,"tf",void 0),this.tf=se(),this._nSamples=r,this._nFeatures=i,this._metric=a,this._points=u,this._bBoxes=c,this._offsets=v,this._indices=y,Object.freeze(this)}static build({metric:r,entries:i,leafSize:a=16}){return ee(function*(){oe(1<a,"new KdTree({leafSize=16}): leafSize must be a positive number."),oe("function"==typeof r.minDistToBBox,"new KdTree({metric}): metric must implement `minDistToBBox` function.");const[u,c]=i.shape,v=new Int32Array(u);for(let K=0;K<u;K++)v[K]=K;const y=(yield i.data()).slice(),_=Array.from(v,(K,R)=>y.subarray(c*R,c*++R)),x=(oe(0<=(t=u/a)&&t<=1073741824,"ceilPow2(x): x must be in range [0, 1<<30]."),t=Math.ceil(t),t=Math.max(t,1),2147483648>>>-1+Math.clz32(t-1)),m=2*x-1,g=m-x,w=new Int32Array(x+1),E=function(){const K=2*c,R=new Float32Array(m*K),Y=[];for(let H=0;H<m;)Y.push(R.subarray(K*H,K*++H));return Y}(),S=S0(Ix(`KdTree[${u},${c}]`)),A=(K,R)=>{const Y=v[K];v[K]=v[R],v[R]=Y},G=(K,R,Y)=>{const H=E[K];for(let ve=0;ve<H.length;ve++)H[ve]=ve%2?-1/0:1/0;for(let ve=R;ve<Y;ve++){const j=c*v[ve];for(let Ee=0;Ee<H.length;){const Ce=y[j+(Ee>>>1)];H[Ee]=Math.min(H[Ee++],Ce),H[Ee]=Math.max(H[Ee++],Ce)}}if(g<=K){const ve=K-g;return w[ve]=R,void(w[ve+1]=Y)}const F=function(){let ve=0,j=-1/0;for(let Ee=H.length;Ee>0;){const Ce=H[--Ee]-H[--Ee];Ce>j&&(j=Ce,ve=Ee>>>1)}return ve}(),le=R+Y>>>1;for(let ve=R,j=Y;;){const Ee=y[c*v[S(ve,j)]+F];let Ce=ve,Ze=ve;for(let et=ve;et<j;et++){let at=y[c*v[et]+F];at<=Ee&&(A(et,Ze),at<Ee&&A(Ce++,Ze),Ze++)}if(Ce>le)j=Ce;else{if(!(Ze<le))break;ve=Ze}}const pe=Ox(K);G(pe,R,le),G(pe+1,le,Y)};var t;G(0,0,u);const U=(K,R)=>{R*=c;for(const Y=(K*=c)+c;K<Y;K++,R++){const H=y[K];y[K]=y[R],y[R]=H}};for(let K=v.slice(),R=0;R<u;R++)for(let Y=R;;){let H=K[Y];if(K[Y]=Y,H===R)break;U(Y,Y=H)}return new A0(u,c,r,_,E,w,v)})()}kNearest(r,i){const{_nSamples:a,_nFeatures:u,_metric:c,_points:v,_bBoxes:y,_offsets:_,_indices:x}=this;r=Math.min(r,a);const[m,g]=i.shape;oe(u===g,"KNeighbors: X_train.shape[1] must equal X_predict.shape[1].");const w=new Float32Array(m*r),E=new Int32Array(m*r),S=1+(y.length-1-1>>1);if(0<r&&0<m){const A=i.dataSync();let G,U;const K=(R,Y)=>{if(!(Y>=G.maxKey))if(R<S){const H=Ox(R),F=c.minDistToBBox(U,y[H]),le=c.minDistToBBox(U,y[H+1]);F<=le?(K(H,F),K(H+1,le)):(K(H+1,le),K(H,F))}else{const F=_[1+(R-=S)];for(let le=_[R];le<F;le++){const pe=c.distance(U,v[le]);G.add(pe,x[le])}}};for(let R=0;R<m;R++){U=A.subarray(g*R,g*(R+1));const Y=r*R,H=r+Y;G=new ZA(w.subarray(Y,H),E.subarray(Y,H)),K(0,c.minDistToBBox(U,y[0]))}}return{distances:this.tf.tensor2d(w,[m,r],"float32"),indices:this.tf.tensor2d(E,[m,r],"int32")}}}const Px={uniform(t){let r=se();const{shape:i}=t;return r.fill(i,1/i[1])},distance(t){let r=se();return r.tidy(()=>{const i=t.min(1,!0),a=r.divNoNan(i.toFloat(),t),u=t.lessEqual(0).toFloat(),c=r.where(i.lessEqual(0),u,a),v=c.sum(1,!0);return c.div(v)})}},Tx={minkowski:t=>Zg(t),manhattan:()=>Zg(1),euclidean:()=>Zg(2),chebyshev:()=>Zg(1/0)},Lh={kdTree:A0.build,brute:(t=ee(function*(r){return new UA(r)}),function(i){return t.apply(this,arguments)}),auto:t=>"function"==typeof t.metric.minDistToBBox?Lh.kdTree(t):Lh.brute(t)};var t;class C0 extends Vn{constructor(r={}){super(),X(this,"_neighborhood",void 0),X(this,"_y",void 0),X(this,"weights",void 0),X(this,"algorithm",void 0),X(this,"leafSize",void 0),X(this,"p",void 0),X(this,"metric",void 0),X(this,"nNeighbors",void 0),Object.assign(this,r)}_getFitParams(){const{_neighborhood:r,_y:i,nNeighbors:a=5,weights:u="uniform"}=this;return oe(0<=a&&a%1==0,"KNeighbors({nNeighbors})::predict(X): nNeighbors must be a positive int."),oe(Object.keys(Px).includes(u),"KNeighbors({weights})::predict(X): invalid weights."),oe(null!=r&&null!=i,"KNeighbors::predict(X): model not trained yet. Call `await fit(x, y)` first."),{nNeighbors:a,weightsFn:Px[u],neighborhood:r,y:i}}fit(r,i){var a=this;return ee(function*(){const{algorithm:u="auto",metric:c="minkowski",p:v=2,leafSize:y}=a;oe(Object.keys(Tx).includes(c),"KNeighbors({metric}).fit(X,y): invalid metric."),oe(Object.keys(Lh).includes(u),"KNeighbors({algorithm}).fit(X,y): invalid algorithm.");const _=Tx[c](v),x=Be(r);return a._neighborhood=yield Lh[u]({entries:x,metric:_,leafSize:y}),a._y=gt(i),a})()}}X(C0,"SUPPORTED_ALGORITHMS",Object.freeze(Object.keys(Lh)));class $A extends C0{constructor(...r){super(...r),X(this,"name","KNeighborsRegressor")}predict(r){let i=se();const{neighborhood:a,y:u,nNeighbors:c,weightsFn:v}=this._getFitParams();return i.tidy(()=>{const y=Be(r),{distances:_,indices:x}=a.kNearest(c,y),m=u.gather(x),g=v(_);return i.matMul(m.reshape([-1,1,c]),g.reshape([-1,c,1])).as1D()})}}function Lx(t){t.engine().backendNames().includes("tensorflow")&&!t.getKernel("Unique","tensorflow")&&(console.info("[scikit.js] Installing tfjs-node polyfill for tf.unique()."),t.registerKernel({kernelName:"Unique",backendName:"tensorflow",kernelFunc:r=>{const i=r.inputs.x,a=r.backend,{axis:u}=r.attrs,c=t.tensor1d([u],"int32"),v={float32:a.binding.TF_FLOAT,float64:a.binding.TF_DOUBLE,int32:a.binding.TF_INT32,int64:a.binding.TF_INT64,complex64:a.binding.TF_COMPLEX64,bool:a.binding.TF_BOOL,string:a.binding.TF_STRING};oe(Object.keys(v).includes(i.dtype),"Unexpected dtype.");try{return a.executeMultipleOutputs("UniqueV2",[{value:v[i.dtype],name:"T",type:a.binding.TF_ATTR_TYPE},{value:v.int32,name:"Taxis",type:a.binding.TF_ATTR_TYPE},{value:v.int32,name:"out_idx",type:a.binding.TF_ATTR_TYPE}],[i,c],2)}finally{c.dispose()}}}))}function QA(t,r){let i=se();return i.tidy(()=>{r=wt(r);const a=this.predict(t);return i.equal(r,a).sum().div(r.shape[0])})}class jA extends C0{constructor(...r){super(...r),X(this,"classes_",void 0),X(this,"score",QA),X(this,"name","KNeighborsClassifier")}predictProba(r){const{neighborhood:i,y:a,nNeighbors:u,weightsFn:c}=this._getFitParams(),[v]=this.classes_?.shape;let y=se();return y.tidy(()=>{const _=Be(r),x=_.shape[0],{distances:m,indices:g}=i.kNearest(u,_),w=a.gather(g),E=c(m),S=y.oneHot(w,v);return y.mul(S.reshape([x,u,v]),E.reshape([x,u,1])).sum(1)})}predict(r){const i=this.classes_;return se().tidy(()=>{const c=this.predictProba(r).argMax(1);return i.gather(c)})}fit(r,i){var a=()=>super.fit,u=this;return ee(function*(){let c=se();const{values:v,indices:y}=c.tidy(()=>{const _=wt(i);return Lx(c),c.unique(_)});return yield a().call(u,r,y),u.classes_=v,u})()}}class e2 extends Ca{constructor({penalty:r="l2",C:i=1,fitIntercept:a=!0}={}){let u=se();super({modelCompileArgs:{optimizer:u.train.adam(.1),loss:u.losses.hingeLoss,metrics:["accuracy"]},modelFitArgs:{batchSize:32,epochs:1e3,verbose:0,callbacks:[u.callbacks.earlyStopping({monitor:"loss",patience:50})]},denseLayerArgs:{units:1,useBias:Boolean(a),activation:"softmax",kernelInitializer:u.initializers.zeros(),biasInitializer:u.initializers.zeros(),kernelRegularizer:"l2"===r?u.regularizers.l2({l2:i}):"l1"===r?u.regularizers.l1({l1:i}):void 0},isClassification:!0,optimizerType:"adam",lossType:"hingeLoss"}),this.name="LinearSVC"}}class t2 extends xs{constructor({epsilon:r=0,C:i=1,fitIntercept:a=!0}={}){let u=se();super({modelCompileArgs:{optimizer:u.train.adam(.1),loss:function(c,v){return u.abs(u.sub(c,v)).sub(r).maximum(0)},metrics:["accuracy"]},modelFitArgs:{batchSize:32,epochs:1e3,verbose:0,callbacks:[u.callbacks.earlyStopping({monitor:"loss",patience:50})]},denseLayerArgs:{units:1,useBias:Boolean(a),kernelRegularizer:u.regularizers.l2({l2:i})},optimizerType:"adam",lossType:"custom"}),this.name="LinearSVR"}}class r2 extends Vn{constructor(r={}){super(),X(this,"priors",void 0),X(this,"varSmoothing",void 0),X(this,"classes",void 0),X(this,"means",void 0),X(this,"variances",void 0),X(this,"tf",void 0),this.tf=se(),this.classes=this.tf.tensor1d([]),this.means=[],this.variances=[],r.priors&&(this.priors=wt(r.priors)),this.varSmoothing=r.varSmoothing?r.varSmoothing:1e-9}fit(r,i){var a=this;return ee(function*(){const u=Be(r),c=wt(i),{values:v,meansByLabel:y,variancesByLabel:_}=a.tf.tidy(()=>{Lx(a.tf);const x=[],m=[],{values:g}=a.tf.unique(c),{variance:w}=a.tf.moments(u,0),E=w.max().mul(a.varSmoothing);return a.tf.unstack(g).forEach(S=>{const A=a.tf.equal(c,S).toFloat(),G=a.tf.sum(A),U=a.tf.mul(u,A.expandDims(1)).sum(0).div(G),K=a.tf.sub(u,U).mul(A.expandDims(1)).pow(2).sum(0).div(G).add(E);x.push(U),m.push(K)}),{values:g,meansByLabel:x,variancesByLabel:m}});return a.classes=v,a.means=y,a.variances=_,a})()}predictProba(r){const i=Be(r);return this.tf.tidy(()=>{let u=[];this.classes.unstack().forEach((v,y)=>{const m=this.kernel(i,this.means[y],this.variances[y]);u.push(m)});const c=this.tf.stack(u,1);return this.priors?c.mul(this.priors):c})}predict(r){return this.predictProba(r).argMax(1)}}class n2 extends r2{constructor(...r){super(...r),X(this,"name","GaussianNB")}kernel(r,i,a){let u=se();return u.tidy(()=>u.sub(r,i.expandDims(0)).pow(2).div(a.expandDims(0).mul(-2)).exp().div(a.mul(2*Math.PI).expandDims(0).sqrt()).prod(1))}}function Dx(t,r){let i=0;for(let a=0;a<t.length;a++)i+=t[a]*t[a];return 1-i/(r*r)}function Rx(t,r){let i=0;for(let a=0;a<t.length;a++){let u=t[a];u>0&&(u/=r,i-=u*Math.log2(u))}return i}function Bx(t,r,i){let a=r/i;return t/i-a*a}class Jg extends Vn{constructor({impurityMeasure:r,y:i}){super(),X(this,"y",void 0),X(this,"impurityMeasure",void 0),X(this,"start",0),X(this,"end",0),X(this,"pos",0),X(this,"nLabels",void 0),X(this,"labelFreqsTotal",[]),X(this,"labelFreqsLeft",[]),X(this,"labelFreqsRight",[]),X(this,"nSamples",0),X(this,"nSamplesLeft",0),X(this,"nSamplesRight",0),X(this,"name","ClassificationCriterion"),this.impurityMeasure=r,this.nLabels=function i2(t){let r=Number.NEGATIVE_INFINITY;for(let i=0;i<t.length;i++)t[i]>r&&(r=t[i]);return r}(i)+1,this.y=i,this.labelFreqsTotal=new Array(this.nLabels).fill(0),this.labelFreqsLeft=new Array(this.nLabels).fill(0),this.labelFreqsRight=new Array(this.nLabels).fill(0)}init(r,i,a){this.start=r,this.end=i,this.nSamples=i-r,this.labelFreqsTotal=this.labelFreqsTotal.fill(0),this.labelFreqsLeft=this.labelFreqsLeft.fill(0),this.labelFreqsRight=this.labelFreqsRight.fill(0);for(let u=r;u<i;u++)this.labelFreqsTotal[this.y[a[u]]]+=1}reset(){this.pos=this.start,this.labelFreqsLeft=this.labelFreqsLeft.fill(0),this.labelFreqsRight=this.labelFreqsRight.fill(0)}update(r,i){for(let a=this.pos;a<r;a++)this.labelFreqsLeft[this.y[i[a]]]+=1;for(let a=0;a<this.labelFreqsTotal.length;a++)this.labelFreqsRight[a]=this.labelFreqsTotal[a]-this.labelFreqsLeft[a];this.pos=r,this.nSamplesLeft=this.pos-this.start,this.nSamplesRight=this.end-this.pos}childrenImpurities(){let r="gini"===this.impurityMeasure?Dx:Rx;return{impurityLeft:r(this.labelFreqsLeft,this.nSamplesLeft),impurityRight:r(this.labelFreqsRight,this.nSamplesRight)}}impurityImprovement(){let{impurityLeft:r,impurityRight:i}=this.childrenImpurities();return-this.nSamplesLeft*r-this.nSamplesRight*i}nodeImpurity(){return("gini"===this.impurityMeasure?Dx:Rx)(this.labelFreqsTotal,this.nSamples)}nodeValue(){return this.labelFreqsTotal}static fromJson(r){const i=JSON.parse(r),a=new Jg({impurityMeasure:i.impurityMeasure,y:i.y});return Object.assign(a,i)}}class Kg extends Vn{constructor({impurityMeasure:r,y:i}){super(),X(this,"y",void 0),X(this,"impurityMeasure",void 0),X(this,"start",0),X(this,"end",0),X(this,"pos",0),X(this,"squaredSum",0),X(this,"squaredSumLeft",0),X(this,"squaredSumRight",0),X(this,"sumTotal",0),X(this,"sumTotalLeft",0),X(this,"sumTotalRight",0),X(this,"nSamples",0),X(this,"nSamplesLeft",0),X(this,"nSamplesRight",0),X(this,"name","RegressionCriterion"),this.impurityMeasure=r,this.y=i}init(r,i,a){this.sumTotal=0,this.squaredSum=0,this.start=r,this.end=i,this.nSamples=i-r;for(let u=r;u<i;u++){let v=this.y[a[u]];this.sumTotal+=v,this.squaredSum+=v*v}}reset(){this.pos=this.start,this.squaredSumLeft=0,this.sumTotalLeft=0,this.squaredSumRight=0,this.sumTotalRight=0}update(r,i){for(let a=this.pos;a<r;a++){let c=this.y[i[a]];this.sumTotalLeft+=c,this.squaredSumLeft+=c*c}this.sumTotalRight=this.sumTotal-this.sumTotalLeft,this.squaredSumRight=this.squaredSum-this.squaredSumLeft,this.pos=r,this.nSamplesLeft=this.pos-this.start,this.nSamplesRight=this.end-this.pos}childrenImpurities(){let r=Bx;return{impurityLeft:r(this.squaredSumLeft,this.sumTotalLeft,this.nSamplesLeft),impurityRight:r(this.squaredSumRight,this.sumTotalRight,this.nSamplesRight)}}impurityImprovement(){let{impurityLeft:r,impurityRight:i}=this.childrenImpurities();return-this.nSamplesLeft*r-this.nSamplesRight*i}nodeImpurity(){return Bx(this.squaredSum,this.sumTotal,this.nSamples)}nodeValue(){return[this.sumTotal/this.nSamples]}static fromJson(r){const i=JSON.parse(r),a=new Kg({impurityMeasure:i.impurityMeasure,y:i.y});return Object.assign(a,i)}}var a2=q(9336),o2=q.n(a2);function I0(){return{feature:0,threshold:0,pos:-1,impurityLeft:Number.POSITIVE_INFINITY,impurityRight:Number.POSITIVE_INFINITY,foundSplit:!1}}class Fx extends Vn{constructor({X:r,y:i,minSamplesLeaf:a,impurityMeasure:u,maxFeatures:c,samplesSubset:v=[]}){if(super(),X(this,"kMinSplitDiff",void 0),X(this,"X",void 0),X(this,"y",void 0),X(this,"criterion",void 0),X(this,"start",void 0),X(this,"end",void 0),X(this,"minSamplesLeaf",void 0),X(this,"maxFeatures",void 0),X(this,"featureOrder",void 0),X(this,"shuffleFeatures",void 0),X(this,"sampleMap",void 0),X(this,"nSamplesTotal",void 0),X(this,"nFeatures",void 0),X(this,"name","Splitter"),this.X=r,this.y=i,this.nFeatures=r[0].length,this.minSamplesLeaf=a,this.maxFeatures=Math.min(c,this.nFeatures),this.shuffleFeatures=c<this.nFeatures,this.sampleMap=new Int32Array(r.length),this.start=0,this.end=0,this.kMinSplitDiff=1e-8,0===v.length){this.nSamplesTotal=r.length;for(let y=0;y<this.nSamplesTotal;y++)this.sampleMap[y]=y}else{this.nSamplesTotal=v.length;for(let y=0;y<this.nSamplesTotal;y++)this.sampleMap[y]=v[y]}this.criterion="squared_error"===u?new Kg({impurityMeasure:u,y:i}):new Jg({impurityMeasure:u,y:i}),this.featureOrder=[];for(let y=0;y<this.nFeatures;y++)this.featureOrder.push(y);this.resetSampleRange(0,this.nSamplesTotal)}resetSampleRange(r,i){this.start=r,this.end=i,this.criterion.init(r,i,this.sampleMap)}splitNode(){let r=I0(),i=I0(),a=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=0,v=0;for(r.foundSplit=!1,this.shuffleFeatures&&(this.featureOrder=o2()(this.featureOrder));c<this.maxFeatures;){v=this.featureOrder[c];let y=new Float32Array(this.end-this.start);for(let x=this.start;x<this.end;x++)y[x-this.start]=this.X[this.sampleMap[x]][v];if(y.sort(),this.criterion.reset(),this.sampleMap.subarray(this.start,this.end).sort((x,m)=>this.X[x][v]-this.X[m][v]),y[0]===y[y.length-1]){c+=1;continue}let _=this.start+1;for(;_<this.end;){for(;_<this.end&&y[_-this.start]<=y[_-this.start-1]+this.kMinSplitDiff;)_++;_!==this.end?(_-this.start<this.minSamplesLeaf||this.end-_<this.minSamplesLeaf||(r.pos=_,this.criterion.update(r.pos,this.sampleMap),a=this.criterion.impurityImprovement(),a>u&&(u=a,r.foundSplit=!0,r.feature=v,r.threshold=(y[_-this.start-1]+y[_-this.start])/2,i=Object.assign({},r))),_+=1):_++}c+=1}if(r.foundSplit){if(i.pos<this.end&&v!==i.feature){let x=this.start,m=this.end,g=0;for(;x<m;)this.X[this.sampleMap[x]][i.feature]<=i.threshold?x+=1:(m-=1,g=this.sampleMap[x],this.sampleMap[x]=this.sampleMap[m],this.sampleMap[m]=g)}this.criterion.reset(),this.criterion.update(i.pos,this.sampleMap);let{impurityLeft:y,impurityRight:_}=this.criterion.childrenImpurities();return i.impurityLeft=y,i.impurityRight=_,i}return r}}function O0(t){if(0===t.length)throw new Error(`X can not be empty, but it has a length of 0. It is ${t}.`);for(let r=0;r<t.length;r++){let i=t[r];if(0===i.length)throw new Error(`Rows in X can not be empty, but row ${r} in X is ${i}.`);for(let a=0;a<i.length;a++)if("number"!=typeof i[a]||!Number.isFinite(i[a]))throw new Error(`X must contain finite non-NaN numbers, but the element at X[${r}][${a}] is ${i[a]}`)}}function u2(t){return t.map((r,i)=>[r,i]).reduce((r,i)=>i[0]>r[0]?i:r)[1]}class qx{constructor(){X(this,"nodes",[]),X(this,"isBuilt",!1),X(this,"name","DecisionTree")}getLeafNodes(r){let i=[];for(let a=0;a<r.length;a++){let u=0;for(;!this.nodes[u].isLeaf;)u=r[a][this.nodes[u].splitFeature]<=this.nodes[u].threshold?this.nodes[u].leftChildId:this.nodes[u].rightChildId;i.push(u)}return i}populateChildIds(){for(let r=1;r<this.nodes.length;r++)this.nodes[r].isLeft?this.nodes[this.nodes[r].parentId].leftChildId=r:this.nodes[this.nodes[r].parentId].rightChildId=r}predictProba(r){if(!this.isBuilt)throw new Error("Decision tree must be built with BuildTree method before predictions can be made.");let i=this.getLeafNodes(r),a=[];for(let u=0;u<i.length;u++){let c=[],v=i[u];for(let y=0;y<this.nodes[0].value.length;y++)c.push(this.nodes[v].value[y]/this.nodes[v].nSamples);a.push(c)}return a}predictClassification(r){if(!this.isBuilt)throw new Error("Decision tree must be built with BuildTree method before predictions can be made.");let i=this.getLeafNodes(r),a=[];for(let u=0;u<i.length;u++)a.push(u2(this.nodes[i[u]].value));return a}predictRegression(r){if(!this.isBuilt)throw new Error("Decision tree must be built with BuildTree method before predictions can be made.");let i=this.getLeafNodes(r),a=[];for(let u=0;u<i.length;u++)a.push(this.nodes[i[u]].value[0]);return a}}class P0 extends Vn{constructor({criterion:r="gini",maxDepth:i=Number.POSITIVE_INFINITY,minSamplesSplit:a=2,minSamplesLeaf:u=1,maxFeatures:c,minImpurityDecrease:v=0}={}){super(),X(this,"splitter",void 0),X(this,"stack",[]),X(this,"minSamplesLeaf",void 0),X(this,"maxDepth",void 0),X(this,"minSamplesSplit",void 0),X(this,"minImpurityDecrease",void 0),X(this,"tree",void 0),X(this,"criterion",void 0),X(this,"maxFeatures",void 0),X(this,"maxFeaturesNumb",void 0),X(this,"X",[]),X(this,"y",[]),X(this,"labelEncoder",void 0),X(this,"name",void 0),this.criterion=r,this.maxDepth=void 0===i?Number.POSITIVE_INFINITY:Number(i),this.minSamplesSplit=a,this.minSamplesLeaf=u,this.maxFeatures=c,this.minImpurityDecrease=v,this.maxFeaturesNumb=0,this.tree=new qx,this.name="DecisionTreeBase"}calcMaxFeatures(r,i){return"log2"===i?Math.floor(Math.log2(r)):"sqrt"===i||"auto"===i?Math.floor(Math.sqrt(r)):"number"==typeof i?(oe(i>=1,"maxFeatures must be greater than 1"),Math.min(Math.floor(i),r)):r}fit(r,i,a){this.X=r,this.y=i;let u=a||[];this.maxFeaturesNumb=this.calcMaxFeatures(r[0].length,this.maxFeatures),this.splitter=new Fx({X:r,y:i,minSamplesLeaf:this.minSamplesLeaf,impurityMeasure:this.criterion,maxFeatures:this.maxFeaturesNumb,samplesSubset:u}),this.stack.push({start:0,end:this.splitter.sampleMap.length,depth:0,impurity:0,nSamples:this.splitter.sampleMap.length,parentId:-1,isLeft:!1});let v=!0;for(;0!==this.stack.length;){let y=this.stack.pop();this.splitter.resetSampleRange(y.start,y.end);let _=I0(),x=!(y.depth<this.maxDepth)||y.nSamples<this.minSamplesSplit||y.nSamples<2*this.minSamplesLeaf;v&&(y.impurity=this.splitter.criterion.nodeImpurity(),v=!1),x||(_=this.splitter.splitNode(),x=x||!_.foundSplit||y.impurity<=this.minImpurityDecrease);let m={parentId:y.parentId,impurity:y.impurity,isLeaf:x,isLeft:y.isLeft,nSamples:y.nSamples,splitFeature:_.feature,threshold:_.threshold,value:this.splitter.criterion.nodeValue().slice(),leftChildId:-1,rightChildId:-1};this.tree.nodes.push(m);let g=this.tree.nodes.length-1;x||(this.stack.push({start:_.pos,end:y.end,nSamples:y.end-_.pos,depth:y.depth+1,parentId:g,isLeft:!1,impurity:_.impurityRight}),this.stack.push({start:y.start,end:_.pos,nSamples:_.pos-y.start,depth:y.depth+1,parentId:g,isLeft:!0,impurity:_.impurityLeft}))}this.tree.populateChildIds(),this.tree.isBuilt=!0}}class f2 extends P0{constructor({criterion:r="gini",maxDepth:i,minSamplesSplit:a=2,minSamplesLeaf:u=1,maxFeatures:c,minImpurityDecrease:v=0}={}){oe(["gini","entropy"].includes(r),'For classification must pass either the "gini" or "entropy" criterion'),super({criterion:r,maxDepth:i,minSamplesSplit:a,minSamplesLeaf:u,maxFeatures:c,minImpurityDecrease:v}),X(this,"labelEncoder",void 0),X(this,"name",void 0),this.labelEncoder=new E0,this.name="DecisionTreeClassifier"}fit(r,i){oe(J(i),"y value is not a 1D container"),oe(Ge(r),"X value is not a 2D container");let a=Bt(r),u=_t(i);oe(a.length===u.length,"X and y must be the same size"),O0(a),function s2(t){if(0===t.length)throw new Error(`y can not be empty, but it has a length of 0. It is ${t}.`);for(let r=0;r<t.length;r++){let i=t[r];if(!Number.isSafeInteger(i))throw new Error(`Some y values are not an integer. Found ${i} but must be an integer only`)}}(u);let c=this.labelEncoder.fitTransform(u);return super.fit(a,_t(c)),this}getNLeaves(){return this.tree.nodes.filter(r=>r.isLeaf).length}predict(r){oe(Ge(r),"X value is not a 2D container");let i=Bt(r);O0(i);let a=this.tree.predictClassification(i);return this.labelEncoder.inverseTransform(a)}predictProba(r){return this.tree.predictProba(r)}score(r,i){return pr(i,this.predict(r))}}class l2 extends P0{constructor({criterion:r="squared_error",maxDepth:i,minSamplesSplit:a=2,minSamplesLeaf:u=1,maxFeatures:c,minImpurityDecrease:v=0}={}){oe(["squared_error"].includes(r),'Must pass the regression criterion of "squared_error"'),super({criterion:r,maxDepth:i,minSamplesSplit:a,minSamplesLeaf:u,maxFeatures:c,minImpurityDecrease:v}),X(this,"name",void 0),this.name="DecisionTreeRegressor"}fit(r,i){oe(J(i),"y value is not a 1D container"),oe(Ge(r),"X value is not a 2D container");let a=Bt(r),u=_t(i);return oe(a.length===u.length,"X and y must be the same size"),O0(a),super.fit(a,u),this}getNLeaves(){return this.tree.nodes.filter(r=>r.isLeaf).length}predict(r){return this.tree.predictRegression(r)}score(r,i){return Ie(i,this.predict(r))}}const c2=({nSamples:t=100,nFeatures:r=100,nInformative:i=10,nTargets:a=1,noise:u=1,bias:c=0,effectiveRank:v=null,tailStrength:y=.5,shuffle:_=!1,coef:x=!1}={})=>{let m=se();return m.tidy(()=>{const g=Math.min(r,i);let w;w=null===v?m.randomNormal([t,r]):zx({nSamples:t,nFeatures:r,effectiveRank:v,tailStrength:y});const E=m.randomNormal([g,a]).mul(100),S=m.zeros([r-g,a]),A=m.concat([E,S]);let G=w.dot(A).add(c);if(u>0&&(G=G.add(m.randomNormal(G.shape,void 0,u))),_){const U=m.util.createShuffledIndices(t);w=w.gather(U)}return G=m.squeeze(G),x?[w,G,m.squeeze(A)]:[w,G]})},zx=({nSamples:t=100,nFeatures:r=100,effectiveRank:i=10,tailStrength:a=.5}={})=>{let u=se();return u.tidy(()=>{let c=Math.min(t,r),[v]=u.linalg.qr(u.randomNormal([t,c])),[y]=u.linalg.qr(u.randomNormal([r,c]));const x=u.range(0,c).div(i),m=u.exp(x.square().neg()).mul(1-a);let g=u.exp(x.mul(-.1)).mul(a),w=m.add(g);return v.mul(w).dot(y.transpose())})};class Ux{constructor({nSplits:r=5,shuffle:i=!1,randomState:a}={}){X(this,"nSplits",void 0),X(this,"shuffle",void 0),X(this,"randomState",void 0),X(this,"name",void 0),X(this,"tf",void 0),r=Number(r),oe(Number.isInteger(r)&&r>1,"new KFold({nSplits}): nSplits must be an int greater than 1."),this.tf=se(),this.nSplits=r,this.shuffle=Boolean(i),this.randomState=a,this.name="KFold"}getNumSplits(){return this.nSplits}*split(r,i,a){const{nSplits:u,shuffle:c,randomState:v}=this,y=sr(r);oe(u<=y,"KFold({nSplits})::split(X): nSplits must not be greater than X.shape[0]."),null!=i&&oe(y===sr(i),"KFold::split(X,y): X.shape[0] must equal y.shape[0]."),null!=a&&oe(y===sr(a),"KFold::split(X,y,groups): X.shape[0] must equal groups.shape[0].");const _=new Int32Array(y);for(let w=0;w<_.length;w++)_[w]=w;if(c){const w=(t=>Ix(t?.toString()))(v);(t=>r=>{const i=S0(t);for(let a=r.length;a>1;a--){const u=i(0,a),c=r[a-1];r[a-1]=r[u],r[u]=c}})(w)(_)}const x=Math.floor(y/u);let m=y%u,g=0;for(;g<y;){const w=m-- >0?x+1:x,E=new Int32Array(y-w);E.set(_.subarray(0,g),0),E.set(_.subarray(g+w),g);const S=_.slice(g,g+w);yield{trainIndex:this.tf.tensor1d(E,"int32"),testIndex:this.tf.tensor1d(S,"int32")},g+=w}}}function $g(t,r){let i=se();return fe(t)?i.gather(t,r):be(t)?t.iloc({rows:r}):he(t)?t.iloc(r):r.map(a=>t[a])}function p2(t,r,i=.1,a,u){const c=sr(t);oe(c===sr(r),"X and y don't have the same number of elements. They are of different size");let[y,_]=function h2(t,r,i,a=.1){if(oe(void 0===i||"number"==typeof i,`Invalid value for trainSize: ${i}. Must be number or undefined`),oe(void 0===r||"number"==typeof r,`Invalid value for testSize: ${r}. Must be number or undefined`),void 0===r&&void 0===i&&(r=a),"number"==typeof r&&(Number.isInteger(r)&&(r>=t||r<=0)||!Number.isInteger(r)&&(r<=0||r>=1)))throw Error(`testSize=${r} should be either positive and smaller than the number of samples ${t} or a float in the (0, 1) range`);if("number"==typeof i&&(Number.isInteger(i)&&(i>=t||i<=0)||!Number.isInteger(i)&&(i<=0||i>=1)))throw Error(`trainSize=${i} should be either positive and smaller than the number of samples ${t} or a float in the (0, 1) range`);if(!Number.isInteger(i)&&!Number.isInteger(r)&&i&&r&&i+r>1)throw Error(`The sum of testSize and trainSize = ${i+r}, should be in the (0, 1) range. Reduce testSize and/or trainSize.`);let u,c;if(Number.isInteger(r)?u=r:"number"==typeof r&&(u=Math.ceil(r*t)),Number.isInteger(i)?c=i:"number"==typeof i&&(c=Math.ceil(i*t)),void 0===i&&(c=t-u),void 0===r&&(u=t-c),"number"!=typeof c||"number"!=typeof u)throw Error("nTrain and nTest must be a number");if(c+u>t)throw Error(`The sum of trainSize and testSize = ${c+u}, should be smaller than the number of samples ${t}. Reduce testSize and/or trainSize.`);if(c=Math.floor(c),u=Math.floor(u),0===c)throw Error(`With nSamples=${t}, testSize=${r} and trainSize=${i}, the resulting train set will be empty. Adjust any of the aforementioned parameters.`);return[c,u]}(c,i,a),x=rr(c,c,u),m=x.slice(0,y),g=x.slice(y);return[$g(t,m),$g(t,g),$g(r,m),$g(r,g)]}function g2(t,r,i,a){return T0.apply(this,arguments)}function T0(){return T0=ee(function*(t,r,i,a){let u=se(),c=null==i||null==a&&!J(i);c&&(a=a??i);let{cv:v=new Ux,groups:y,scoring:_}=a??{};null==_&&(oe("function"==typeof t.score,"crossValScore(estimator,[X,y],params): Either params.scoring or estimator.score(X,y) must be defined."),_=t.score);const x=[];let m;_=_.bind(t),u.engine().startScope();try{r=De(r),c||(i=wt(i));for(const{trainIndex:g,testIndex:w}of v.split(r,i,y)){let E;const S=r.gather(g),A=r.gather(w);if(c)yield t.fit(S),E=_(A);else{const G=i.gather(g),U=i.gather(w);yield t.fit(S,G),E=_(A,U),G.dispose(),U.dispose()}x.push(E),g.dispose(),w.dispose(),S.dispose(),A.dispose()}return m=u.stack(x)}finally{u.engine().endScope(m)}}),T0.apply(this,arguments)}},340:(Me,Ne,q)=>{var W=q(9471),te=q(2992),ee=q(7657),Q=q(5583),ge=q(1929),ce=q(8083),X=q(3818);X.alea=W,X.xor128=te,X.xorwow=ee,X.xorshift7=Q,X.xor4096=ge,X.tychei=ce,Me.exports=X},9471:function(Me,Ne,q){var W;!function(te,ee,Q){function ge(Pe){var se=this,V=function Oe(){var Pe=4022871197;return function(V){V=String(V);for(var Z=0;Z<V.length;Z++){var ne=.02519603282416938*(Pe+=V.charCodeAt(Z));ne-=Pe=ne>>>0,Pe=(ne*=Pe)>>>0,Pe+=4294967296*(ne-=Pe)}return 2.3283064365386963e-10*(Pe>>>0)}}();se.next=function(){var Z=2091639*se.s0+2.3283064365386963e-10*se.c;return se.s0=se.s1,se.s1=se.s2,se.s2=Z-(se.c=0|Z)},se.c=1,se.s0=V(" "),se.s1=V(" "),se.s2=V(" "),se.s0-=V(Pe),se.s0<0&&(se.s0+=1),se.s1-=V(Pe),se.s1<0&&(se.s1+=1),se.s2-=V(Pe),se.s2<0&&(se.s2+=1),V=null}function ce(Pe,se){return se.c=Pe.c,se.s0=Pe.s0,se.s1=Pe.s1,se.s2=Pe.s2,se}function X(Pe,se){var V=new ge(Pe),Z=se&&se.state,ne=V.next;return ne.int32=function(){return 4294967296*V.next()|0},ne.double=function(){return ne()+11102230246251565e-32*(2097152*ne()|0)},ne.quick=ne,Z&&("object"==typeof Z&&ce(Z,V),ne.state=function(){return ce(V,{})}),ne}ee&&ee.exports?ee.exports=X:q.amdD&&q.amdO?void 0!==(W=function(){return X}.call(Ne,q,Ne,ee))&&(ee.exports=W):this.alea=X}(0,Me=q.nmd(Me))},8083:function(Me,Ne,q){var W;!function(te,ee,Q){function ge(Oe){var Pe=this,se="";Pe.next=function(){var Z=Pe.b,ne=Pe.c,oe=Pe.d,k=Pe.a;return Z=Z<<25^Z>>>7^ne,ne=ne-oe|0,oe=oe<<24^oe>>>8^k,k=k-Z|0,Pe.b=Z=Z<<20^Z>>>12^ne,Pe.c=ne=ne-oe|0,Pe.d=oe<<16^ne>>>16^k,Pe.a=k-Z|0},Pe.a=0,Pe.b=0,Pe.c=-1640531527,Pe.d=1367130551,Oe===Math.floor(Oe)?(Pe.a=Oe/4294967296|0,Pe.b=0|Oe):se+=Oe;for(var V=0;V<se.length+20;V++)Pe.b^=0|se.charCodeAt(V),Pe.next()}function ce(Oe,Pe){return Pe.a=Oe.a,Pe.b=Oe.b,Pe.c=Oe.c,Pe.d=Oe.d,Pe}function X(Oe,Pe){var se=new ge(Oe),V=Pe&&Pe.state,Z=function(){return(se.next()>>>0)/4294967296};return Z.double=function(){do{var k=((se.next()>>>11)+(se.next()>>>0)/4294967296)/(1<<21)}while(0===k);return k},Z.int32=se.next,Z.quick=Z,V&&("object"==typeof V&&ce(V,se),Z.state=function(){return ce(se,{})}),Z}ee&&ee.exports?ee.exports=X:q.amdD&&q.amdO?void 0!==(W=function(){return X}.call(Ne,q,Ne,ee))&&(ee.exports=W):this.tychei=X}(0,Me=q.nmd(Me))},2992:function(Me,Ne,q){var W;!function(te,ee,Q){function ge(Oe){var Pe=this,se="";Pe.x=0,Pe.y=0,Pe.z=0,Pe.w=0,Pe.next=function(){var Z=Pe.x^Pe.x<<11;return Pe.x=Pe.y,Pe.y=Pe.z,Pe.z=Pe.w,Pe.w^=Pe.w>>>19^Z^Z>>>8},Oe===(0|Oe)?Pe.x=Oe:se+=Oe;for(var V=0;V<se.length+64;V++)Pe.x^=0|se.charCodeAt(V),Pe.next()}function ce(Oe,Pe){return Pe.x=Oe.x,Pe.y=Oe.y,Pe.z=Oe.z,Pe.w=Oe.w,Pe}function X(Oe,Pe){var se=new ge(Oe),V=Pe&&Pe.state,Z=function(){return(se.next()>>>0)/4294967296};return Z.double=function(){do{var k=((se.next()>>>11)+(se.next()>>>0)/4294967296)/(1<<21)}while(0===k);return k},Z.int32=se.next,Z.quick=Z,V&&("object"==typeof V&&ce(V,se),Z.state=function(){return ce(se,{})}),Z}ee&&ee.exports?ee.exports=X:q.amdD&&q.amdO?void 0!==(W=function(){return X}.call(Ne,q,Ne,ee))&&(ee.exports=W):this.xor128=X}(0,Me=q.nmd(Me))},1929:function(Me,Ne,q){var W;!function(te,ee,Q){function ge(Oe){var Pe=this;Pe.next=function(){var oe,k,V=Pe.w,Z=Pe.X,ne=Pe.i;return Pe.w=V=V+1640531527|0,k=Z[ne+34&127],oe=Z[ne=ne+1&127],k^=k<<13,oe^=oe<<17,k=Z[ne]=(k^=k>>>15)^(oe^=oe>>>12),Pe.i=ne,k+(V^V>>>16)|0},function se(V,Z){var ne,oe,k,re,$,ie=[],ue=128;for(Z===(0|Z)?(oe=Z,Z=null):(Z+="\0",oe=0,ue=Math.max(ue,Z.length)),k=0,re=-32;re<ue;++re)Z&&(oe^=Z.charCodeAt((re+32)%Z.length)),0===re&&($=oe),oe^=oe<<10,oe^=oe>>>15,oe^=oe<<4,oe^=oe>>>13,re>=0&&(k=0==(ne=ie[127&re]^=oe+($=$+1640531527|0))?k+1:0);for(k>=128&&(ie[127&(Z&&Z.length||0)]=-1),k=127,re=512;re>0;--re)oe=ie[k+34&127],ne=ie[k=k+1&127],oe^=oe<<13,ne^=ne<<17,ie[k]=(oe^=oe>>>15)^(ne^=ne>>>12);V.w=$,V.X=ie,V.i=k}(Pe,Oe)}function ce(Oe,Pe){return Pe.i=Oe.i,Pe.w=Oe.w,Pe.X=Oe.X.slice(),Pe}function X(Oe,Pe){null==Oe&&(Oe=+new Date);var se=new ge(Oe),V=Pe&&Pe.state,Z=function(){return(se.next()>>>0)/4294967296};return Z.double=function(){do{var k=((se.next()>>>11)+(se.next()>>>0)/4294967296)/(1<<21)}while(0===k);return k},Z.int32=se.next,Z.quick=Z,V&&(V.X&&ce(V,se),Z.state=function(){return ce(se,{})}),Z}ee&&ee.exports?ee.exports=X:q.amdD&&q.amdO?void 0!==(W=function(){return X}.call(Ne,q,Ne,ee))&&(ee.exports=W):this.xor4096=X}(0,Me=q.nmd(Me))},5583:function(Me,Ne,q){var W;!function(te,ee,Q){function ge(Oe){var Pe=this;Pe.next=function(){var ne,oe,V=Pe.x,Z=Pe.i;return ne=V[Z],oe=(ne^=ne>>>7)^ne<<24,oe^=(ne=V[Z+1&7])^ne>>>10,oe^=(ne=V[Z+3&7])^ne>>>3,oe^=(ne=V[Z+4&7])^ne<<7,ne=V[Z+7&7],V[Z]=oe^=(ne^=ne<<13)^ne<<9,Pe.i=Z+1&7,oe},function se(V,Z){var ne,k=[];if(Z===(0|Z))k[0]=Z;else for(Z=""+Z,ne=0;ne<Z.length;++ne)k[7&ne]=k[7&ne]<<15^Z.charCodeAt(ne)+k[ne+1&7]<<13;for(;k.length<8;)k.push(0);for(ne=0;ne<8&&0===k[ne];++ne);for(8==ne&&(k[7]=-1),V.x=k,V.i=0,ne=256;ne>0;--ne)V.next()}(Pe,Oe)}function ce(Oe,Pe){return Pe.x=Oe.x.slice(),Pe.i=Oe.i,Pe}function X(Oe,Pe){null==Oe&&(Oe=+new Date);var se=new ge(Oe),V=Pe&&Pe.state,Z=function(){return(se.next()>>>0)/4294967296};return Z.double=function(){do{var k=((se.next()>>>11)+(se.next()>>>0)/4294967296)/(1<<21)}while(0===k);return k},Z.int32=se.next,Z.quick=Z,V&&(V.x&&ce(V,se),Z.state=function(){return ce(se,{})}),Z}ee&&ee.exports?ee.exports=X:q.amdD&&q.amdO?void 0!==(W=function(){return X}.call(Ne,q,Ne,ee))&&(ee.exports=W):this.xorshift7=X}(0,Me=q.nmd(Me))},7657:function(Me,Ne,q){var W;!function(te,ee,Q){function ge(Oe){var Pe=this,se="";Pe.next=function(){var Z=Pe.x^Pe.x>>>2;return Pe.x=Pe.y,Pe.y=Pe.z,Pe.z=Pe.w,Pe.w=Pe.v,(Pe.d=Pe.d+362437|0)+(Pe.v=Pe.v^Pe.v<<4^Z^Z<<1)|0},Pe.x=0,Pe.y=0,Pe.z=0,Pe.w=0,Pe.v=0,Oe===(0|Oe)?Pe.x=Oe:se+=Oe;for(var V=0;V<se.length+64;V++)Pe.x^=0|se.charCodeAt(V),V==se.length&&(Pe.d=Pe.x<<10^Pe.x>>>4),Pe.next()}function ce(Oe,Pe){return Pe.x=Oe.x,Pe.y=Oe.y,Pe.z=Oe.z,Pe.w=Oe.w,Pe.v=Oe.v,Pe.d=Oe.d,Pe}function X(Oe,Pe){var se=new ge(Oe),V=Pe&&Pe.state,Z=function(){return(se.next()>>>0)/4294967296};return Z.double=function(){do{var k=((se.next()>>>11)+(se.next()>>>0)/4294967296)/(1<<21)}while(0===k);return k},Z.int32=se.next,Z.quick=Z,V&&("object"==typeof V&&ce(V,se),Z.state=function(){return ce(se,{})}),Z}ee&&ee.exports?ee.exports=X:q.amdD&&q.amdO?void 0!==(W=function(){return X}.call(Ne,q,Ne,ee))&&(ee.exports=W):this.xorwow=X}(0,Me=q.nmd(Me))},3818:function(Me,Ne,q){var W;!function(te,ee,Q){var ne,ge=256,ce=6,Oe="random",Pe=Q.pow(ge,ce),se=Q.pow(2,52),V=2*se,Z=ge-1;function oe(fe,he,be){var J=[],Ge=ie($((he=1==he?{entropy:!0}:he||{}).entropy?[fe,Ae(ee)]:fe??function ue(){try{var fe;return ne&&(fe=ne.randomBytes)?fe=fe(ge):(fe=new Uint8Array(ge),(te.crypto||te.msCrypto).getRandomValues(fe)),Ae(fe)}catch{var he=te.navigator,be=he&&he.plugins;return[+new Date,te,be,te.screen,Ae(ee)]}}(),3),J),qe=new k(J),ke=function(){for(var de=qe.g(ce),wt=Pe,gt=0;de<se;)de=(de+gt)*ge,wt*=ge,gt=qe.g(1);for(;de>=V;)de/=2,wt/=2,gt>>>=1;return(de+gt)/wt};return ke.int32=function(){return 0|qe.g(4)},ke.quick=function(){return qe.g(4)/4294967296},ke.double=ke,ie(Ae(qe.S),ee),(he.pass||be||function(de,wt,gt,De){return De&&(De.S&&re(De,qe),de.state=function(){return re(qe,{})}),gt?(Q[Oe]=de,wt):de})(ke,Ge,"global"in he?he.global:this==Q,he.state)}function k(fe){var he,be=fe.length,J=this,Ge=0,qe=J.i=J.j=0,ke=J.S=[];for(be||(fe=[be++]);Ge<ge;)ke[Ge]=Ge++;for(Ge=0;Ge<ge;Ge++)ke[Ge]=ke[qe=Z&qe+fe[Ge%be]+(he=ke[Ge])],ke[qe]=he;(J.g=function(de){for(var wt,gt=0,De=J.i,nt=J.j,Be=J.S;de--;)wt=Be[De=Z&De+1],gt=gt*ge+Be[Z&(Be[De]=Be[nt=Z&nt+wt])+(Be[nt]=wt)];return J.i=De,J.j=nt,gt})(ge)}function re(fe,he){return he.i=fe.i,he.j=fe.j,he.S=fe.S.slice(),he}function $(fe,he){var Ge,be=[],J=typeof fe;if(he&&"object"==J)for(Ge in fe)try{be.push($(fe[Ge],he-1))}catch{}return be.length?be:"string"==J?fe:fe+"\0"}function ie(fe,he){for(var J,be=fe+"",Ge=0;Ge<be.length;)he[Z&Ge]=Z&(J^=19*he[Z&Ge])+be.charCodeAt(Ge++);return Ae(he)}function Ae(fe){return String.fromCharCode.apply(0,fe)}if(ie(Q.random(),ee),Me.exports){Me.exports=oe;try{ne=q(5042)}catch{}}else void 0!==(W=function(){return oe}.call(Ne,q,Ne,Me))&&(Me.exports=W)}(typeof self<"u"?self:this,[],Math)},7253:(Me,Ne,q)=>{"use strict";q.r(Ne),q.d(Ne,{default:()=>W});class W{constructor(Q=[],ge=te){if(this.data=Q,this.length=this.data.length,this.compare=ge,this.length>0)for(let ce=(this.length>>1)-1;ce>=0;ce--)this._down(ce)}push(Q){this.data.push(Q),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const Q=this.data[0],ge=this.data.pop();return this.length--,this.length>0&&(this.data[0]=ge,this._down(0)),Q}peek(){return this.data[0]}_up(Q){const{data:ge,compare:ce}=this,X=ge[Q];for(;Q>0;){const Oe=Q-1>>1,Pe=ge[Oe];if(ce(X,Pe)>=0)break;ge[Q]=Pe,Q=Oe}ge[Q]=X}_down(Q){const{data:ge,compare:ce}=this,X=this.length>>1,Oe=ge[Q];for(;Q<X;){let Pe=1+(Q<<1),se=ge[Pe];const V=Pe+1;if(V<this.length&&ce(ge[V],se)<0&&(Pe=V,se=ge[V]),ce(se,Oe)>=0)break;ge[Q]=se,Q=Pe}ge[Q]=Oe}}function te(ee,Q){return ee<Q?-1:ee>Q?1:0}},770:function(Me,Ne){!function(q){"use strict";function W(){}function te(e){this.message=e||""}function ee(e){this.message=e||""}function Q(e){this.message=e||""}function ge(){}function ce(e){return null===e?to:e.color}function X(e){return null===e?null:e.parent}function Oe(e,n){null!==e&&(e.color=n)}function Pe(e){return null===e?null:e.left}function se(e){return null===e?null:e.right}function V(){this.root_=null,this.size_=0}function Z(){}function ne(){this.array_=[],arguments[0]instanceof Un&&this.addAll(arguments[0])}function oe(){}function k(e){this.message=e||""}function re(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(null==this)throw new TypeError(this+" is not an object");var n=Object(this),f=Math.max(Math.min(n.length,9007199254740991),0)||0,h=1 in arguments&&parseInt(Number(arguments[1]),10)||0;h=h<0?Math.max(f+h,0):Math.min(h,f);var b=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:f;for(b=b<0?Math.max(f+arguments[2],0):Math.min(b,f);h<b;)n[h]=e,++h;return n},writable:!0}),Number.isFinite=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(e){return e!=e},Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var $=function(){};$.prototype.interfaces_=function(){return[]},$.prototype.getClass=function(){return $},$.prototype.equalsWithTolerance=function(e,n,f){return Math.abs(e-n)<=f};var ie=function(e){function n(f){e.call(this,f),this.name="IllegalArgumentException",this.message=f,this.stack=(new e).stack}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n}(Error),ue=function(){},Ae={MAX_VALUE:{configurable:!0}};ue.isNaN=function(e){return Number.isNaN(e)},ue.doubleToLongBits=function(e){return e},ue.longBitsToDouble=function(e){return e},ue.isInfinite=function(e){return!Number.isFinite(e)},Ae.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(ue,Ae);var fe=function(){},he=function(){},be=function(){},J=function e(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(1===arguments.length){var n=arguments[0];this.x=n.x,this.y=n.y,this.z=n.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Ge={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};J.prototype.setOrdinate=function(e,n){switch(e){case J.X:this.x=n;break;case J.Y:this.y=n;break;case J.Z:this.z=n;break;default:throw new ie("Invalid ordinate index: "+e)}},J.prototype.equals2D=function(){if(1===arguments.length){var e=arguments[0];return this.x===e.x&&this.y===e.y}if(2===arguments.length){var n=arguments[0],f=arguments[1];return!!$.equalsWithTolerance(this.x,n.x,f)&&!!$.equalsWithTolerance(this.y,n.y,f)}},J.prototype.getOrdinate=function(e){switch(e){case J.X:return this.x;case J.Y:return this.y;case J.Z:return this.z}throw new ie("Invalid ordinate index: "+e)},J.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||ue.isNaN(this.z))&&ue.isNaN(e.z)},J.prototype.equals=function(e){return e instanceof J&&this.equals2D(e)},J.prototype.equalInZ=function(e,n){return $.equalsWithTolerance(this.z,e.z,n)},J.prototype.compareTo=function(e){return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},J.prototype.clone=function(){},J.prototype.copy=function(){return new J(this)},J.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},J.prototype.distance3D=function(e){var n=this.x-e.x,f=this.y-e.y,h=this.z-e.z;return Math.sqrt(n*n+f*f+h*h)},J.prototype.distance=function(e){var n=this.x-e.x,f=this.y-e.y;return Math.sqrt(n*n+f*f)},J.prototype.hashCode=function(){var e=17;return 37*(e=37*e+J.hashCode(this.x))+J.hashCode(this.y)},J.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z},J.prototype.interfaces_=function(){return[fe,he,W]},J.prototype.getClass=function(){return J},J.hashCode=function(){if(1===arguments.length){var n=ue.doubleToLongBits(arguments[0]);return Math.trunc((n^n)>>>32)}},Ge.DimensionalComparator.get=function(){return qe},Ge.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Ge.NULL_ORDINATE.get=function(){return ue.NaN},Ge.X.get=function(){return 0},Ge.Y.get=function(){return 1},Ge.Z.get=function(){return 2},Object.defineProperties(J,Ge);var qe=function(e){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var n=arguments[0];if(2!==n&&3!==n)throw new ie("only 2 or 3 dimensions may be specified");this._dimensionsToTest=n}};qe.prototype.compare=function(e,n){var f=e,h=n,b=qe.compare(f.x,h.x);if(0!==b)return b;var P=qe.compare(f.y,h.y);return 0!==P?P:this._dimensionsToTest<=2?0:qe.compare(f.z,h.z)},qe.prototype.interfaces_=function(){return[be]},qe.prototype.getClass=function(){return qe},qe.compare=function(e,n){return e<n?-1:e>n?1:ue.isNaN(e)?ue.isNaN(n)?0:-1:ue.isNaN(n)?1:0};var ke=function(){};ke.prototype.create=function(){},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke};var de=function(){},wt={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};de.prototype.interfaces_=function(){return[]},de.prototype.getClass=function(){return de},de.toLocationSymbol=function(e){switch(e){case de.EXTERIOR:return"e";case de.BOUNDARY:return"b";case de.INTERIOR:return"i";case de.NONE:return"-"}throw new ie("Unknown location value: "+e)},wt.INTERIOR.get=function(){return 0},wt.BOUNDARY.get=function(){return 1},wt.EXTERIOR.get=function(){return 2},wt.NONE.get=function(){return-1},Object.defineProperties(de,wt);var gt=function(e,n){return e.interfaces_&&e.interfaces_().indexOf(n)>-1},De=function(){},nt={LOG_10:{configurable:!0}};De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De},De.log10=function(e){var n=Math.log(e);return ue.isInfinite(n)||ue.isNaN(n)?n:n/De.LOG_10},De.min=function(e,n,f,h){var b=e;return n<b&&(b=n),f<b&&(b=f),h<b&&(b=h),b},De.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1],f=arguments[2];return e<n?n:e>f?f:e}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var h=arguments[0],b=arguments[1],P=arguments[2];return h<b?b:h>P?P:h}},De.wrap=function(e,n){return e<0?n- -e%n:e%n},De.max=function(){if(3===arguments.length){var n=arguments[1],f=arguments[2],h=arguments[0];return n>h&&(h=n),f>h&&(h=f),h}if(4===arguments.length){var P=arguments[1],B=arguments[2],ae=arguments[3],Le=arguments[0];return P>Le&&(Le=P),B>Le&&(Le=B),ae>Le&&(Le=ae),Le}},De.average=function(e,n){return(e+n)/2},nt.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(De,nt);var Be=function(e){this.str=e};Be.prototype.append=function(e){this.str+=e},Be.prototype.setCharAt=function(e,n){this.str=this.str.substr(0,e)+n+this.str.substr(e+1)},Be.prototype.toString=function(e){return this.str};var rt=function(e){this.value=e};rt.prototype.intValue=function(){return this.value},rt.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0},rt.isNaN=function(e){return Number.isNaN(e)};var st=function(){};st.isWhitespace=function(e){return e<=32&&e>=0||127===e},st.toUpperCase=function(e){return e.toUpperCase()};var Fe=function e(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof e?this.init(arguments[0]):"string"==typeof arguments[0]&&e.call(this,e.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},St={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Fe.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo},Fe.prototype.extractSignificantDigits=function(e,n){var f=this.abs(),h=Fe.magnitude(f._hi),b=Fe.TEN.pow(h);(f=f.divide(b)).gt(Fe.TEN)?(f=f.divide(Fe.TEN),h+=1):f.lt(Fe.ONE)&&(f=f.multiply(Fe.TEN),h-=1);for(var P=h+1,B=new Be,ae=Fe.MAX_PRINT_DIGITS-1,Le=0;Le<=ae;Le++){e&&Le===P&&B.append(".");var tt=Math.trunc(f._hi);if(tt<0)break;var vt=!1,Nt=0;tt>9?(vt=!0,Nt="9"):Nt="0"+tt,B.append(Nt),f=f.subtract(Fe.valueOf(tt)).multiply(Fe.TEN),vt&&f.selfAdd(Fe.TEN);var qt=!0,kt=Fe.magnitude(f._hi);if(kt<0&&Math.abs(kt)>=ae-Le&&(qt=!1),!qt)break}return n[0]=h,B.toString()},Fe.prototype.sqr=function(){return this.multiply(this)},Fe.prototype.doubleValue=function(){return this._hi+this._lo},Fe.prototype.subtract=function(){return arguments[0]instanceof Fe?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},Fe.prototype.equals=function(){if(1===arguments.length){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}},Fe.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Fe.prototype.selfSubtract=function(){if(arguments[0]instanceof Fe){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}},Fe.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Fe.prototype.min=function(e){return this.le(e)?this:e},Fe.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Fe){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var P,ae,Le,vt,f=arguments[0],b=null,B=null,tt=null,Nt=null;return this._hi=Nt=(Le=this._hi/f)+(tt=(this._hi-(vt=Le*f)-(Nt=(b=(tt=Fe.SPLIT*Le)-(b=tt-Le))*(B=(Nt=Fe.SPLIT*f)-(B=Nt-f))-vt+b*(ae=f-B)+(P=Le-b)*B+P*ae)+this._lo-Le*arguments[1])/f),this._lo=Le-Nt+tt,this}},Fe.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Fe.prototype.divide=function(){if(arguments[0]instanceof Fe){var f,b,P,ae,e=arguments[0],n=null,h=null,B=null,Le=null;return f=(P=this._hi/e._hi)-(n=(B=Fe.SPLIT*P)-(n=B-P)),Le=n*(h=(Le=Fe.SPLIT*e._hi)-(h=Le-e._hi))-(ae=P*e._hi)+n*(b=e._hi-h)+f*h+f*b,new Fe(Le=P+(B=(this._hi-ae-Le+this._lo-P*e._lo)/e._hi),P-Le+B)}if("number"==typeof arguments[0]){var tt=arguments[0];return ue.isNaN(tt)?Fe.createNaN():Fe.copy(this).selfDivide(tt,0)}},Fe.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo},Fe.prototype.pow=function(e){if(0===e)return Fe.valueOf(1);var n=new Fe(this),f=Fe.valueOf(1),h=Math.abs(e);if(h>1)for(;h>0;)h%2==1&&f.selfMultiply(n),(h/=2)>0&&(n=n.sqr());else f=n;return e<0?f.reciprocal():f},Fe.prototype.ceil=function(){if(this.isNaN())return Fe.NaN;var e=Math.ceil(this._hi),n=0;return e===this._hi&&(n=Math.ceil(this._lo)),new Fe(e,n)},Fe.prototype.compareTo=function(e){return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Fe.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Fe.prototype.setValue=function(){return arguments[0]instanceof Fe||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},Fe.prototype.max=function(e){return this.ge(e)?this:e},Fe.prototype.sqrt=function(){if(this.isZero())return Fe.valueOf(0);if(this.isNegative())return Fe.NaN;var e=1/Math.sqrt(this._hi),f=Fe.valueOf(this._hi*e),h=this.subtract(f.sqr())._hi*(.5*e);return f.add(h)},Fe.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Fe){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}if("number"==typeof arguments[0]){var f,h,b,B,ae,n=arguments[0];return this._hi=(f=(b=this._hi+n)+(ae=n-(B=b-this._hi)+(this._hi-(b-B))+this._lo))+(h=ae+(b-f)),this._lo=h+(f-this._hi),this}}else if(2===arguments.length){var vt,Nt,kt,nr,Le=arguments[0],tt=arguments[1],qt=null,Ft=null,Zt=null;Ft=(kt=this._hi+Le)-(Zt=kt-this._hi),qt=(Nt=this._lo+tt)-(nr=Nt-this._lo);var wr=(vt=kt+(Zt=(Ft=Le-Zt+(this._hi-Ft))+Nt))+(Zt=(qt=tt-nr+(this._lo-qt))+(Zt+(kt-vt))),Cr=Zt+(vt-wr);return this._hi=wr,this._lo=Cr,this}},Fe.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Fe){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var P,ae,f=arguments[0],b=null,B=null,Le=null,tt=null;b=(Le=Fe.SPLIT*this._hi)-this._hi,b=Le-b;var vt=(Le=this._hi*f)+(tt=b*(B=(tt=Fe.SPLIT*f)-(B=tt-f))-Le+b*(ae=f-B)+(P=this._hi-b)*B+P*ae+(this._hi*arguments[1]+this._lo*f)),Nt=tt+(b=Le-vt);return this._hi=vt,this._lo=Nt,this}},Fe.prototype.selfSqr=function(){return this.selfMultiply(this)},Fe.prototype.floor=function(){if(this.isNaN())return Fe.NaN;var e=Math.floor(this._hi),n=0;return e===this._hi&&(n=Math.floor(this._lo)),new Fe(e,n)},Fe.prototype.negate=function(){return this.isNaN()?this:new Fe(-this._hi,-this._lo)},Fe.prototype.clone=function(){},Fe.prototype.multiply=function(){if(arguments[0]instanceof Fe){var e=arguments[0];return e.isNaN()?Fe.createNaN():Fe.copy(this).selfMultiply(e)}if("number"==typeof arguments[0]){var n=arguments[0];return ue.isNaN(n)?Fe.createNaN():Fe.copy(this).selfMultiply(n,0)}},Fe.prototype.isNaN=function(){return ue.isNaN(this._hi)},Fe.prototype.intValue=function(){return Math.trunc(this._hi)},Fe.prototype.toString=function(){var e=Fe.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()},Fe.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(null!==e)return e;var n=new Array(1).fill(null),f=this.extractSignificantDigits(!0,n),h=n[0]+1,b=f;return"."===f.charAt(0)?b="0"+f:h<0?b="0."+Fe.stringOfChar("0",-h)+f:-1===f.indexOf(".")&&(b=f+Fe.stringOfChar("0",h-f.length)+".0"),this.isNegative()?"-"+b:b},Fe.prototype.reciprocal=function(){var n,h,b,B,e=null,f=null,P=null,ae=null;n=(b=1/this._hi)-(e=(P=Fe.SPLIT*b)-(e=P-b)),f=(ae=Fe.SPLIT*this._hi)-this._hi;var Le=b+(P=(1-(B=b*this._hi)-(ae=e*(f=ae-f)-B+e*(h=this._hi-f)+n*f+n*h)-b*this._lo)/this._hi);return new Fe(Le,b-Le+P)},Fe.prototype.toSciNotation=function(){if(this.isZero())return Fe.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(null!==e)return e;var n=new Array(1).fill(null),f=this.extractSignificantDigits(!1,n),h=Fe.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===f.charAt(0))throw new Error("Found leading zero: "+f);var b="";f.length>1&&(b=f.substring(1));var P=f.charAt(0)+"."+b;return this.isNegative()?"-"+P+h:P+h},Fe.prototype.abs=function(){return this.isNaN()?Fe.NaN:this.isNegative()?this.negate():new Fe(this)},Fe.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Fe.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo},Fe.prototype.add=function(){if(arguments[0]instanceof Fe){var e=arguments[0];return Fe.copy(this).selfAdd(e)}if("number"==typeof arguments[0]){var n=arguments[0];return Fe.copy(this).selfAdd(n)}},Fe.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof Fe){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(2===arguments.length){var h=arguments[1];this._hi=arguments[0],this._lo=h}},Fe.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo},Fe.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Fe.prototype.trunc=function(){return this.isNaN()?Fe.NaN:this.isPositive()?this.floor():this.ceil()},Fe.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Fe.prototype.interfaces_=function(){return[W,fe,he]},Fe.prototype.getClass=function(){return Fe},Fe.sqr=function(e){return Fe.valueOf(e).selfMultiply(e)},Fe.valueOf=function(){return"string"==typeof arguments[0]?Fe.parse(arguments[0]):"number"==typeof arguments[0]?new Fe(arguments[0]):void 0},Fe.sqrt=function(e){return Fe.valueOf(e).sqrt()},Fe.parse=function(e){for(var n=0,f=e.length;st.isWhitespace(e.charAt(n));)n++;var h=!1;if(n<f){var b=e.charAt(n);"-"!==b&&"+"!==b||(n++,"-"===b&&(h=!0))}for(var P=new Fe,B=0,ae=0,Le=0;!(n>=f);){var tt=e.charAt(n);if(n++,st.isDigit(tt)){var vt=tt-"0";P.selfMultiply(Fe.TEN),P.selfAdd(vt),B++}else{if("."!==tt){if("e"===tt||"E"===tt){var Nt=e.substring(n);try{Le=rt.parseInt(Nt)}catch(nr){throw nr instanceof Error?new Error("Invalid exponent "+Nt+" in string "+e):nr}break}throw new Error("Unexpected character '"+tt+"' at position "+n+" in string "+e)}ae=B}}var qt=P,kt=B-ae-Le;if(0===kt)qt=P;else if(kt>0){var Ft=Fe.TEN.pow(kt);qt=P.divide(Ft)}else if(kt<0){var Zt=Fe.TEN.pow(-kt);qt=P.multiply(Zt)}return h?qt.negate():qt},Fe.createNaN=function(){return new Fe(ue.NaN,ue.NaN)},Fe.copy=function(e){return new Fe(e)},Fe.magnitude=function(e){var n=Math.abs(e),f=Math.log(n)/Math.log(10),h=Math.trunc(Math.floor(f));return 10*Math.pow(10,h)<=n&&(h+=1),h},Fe.stringOfChar=function(e,n){for(var f=new Be,h=0;h<n;h++)f.append(e);return f.toString()},St.PI.get=function(){return new Fe(3.141592653589793,12246467991473532e-32)},St.TWO_PI.get=function(){return new Fe(6.283185307179586,24492935982947064e-32)},St.PI_2.get=function(){return new Fe(1.5707963267948966,6123233995736766e-32)},St.E.get=function(){return new Fe(2.718281828459045,14456468917292502e-32)},St.NaN.get=function(){return new Fe(ue.NaN,ue.NaN)},St.EPS.get=function(){return 123259516440783e-46},St.SPLIT.get=function(){return 134217729},St.MAX_PRINT_DIGITS.get=function(){return 32},St.TEN.get=function(){return Fe.valueOf(10)},St.ONE.get=function(){return Fe.valueOf(1)},St.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},St.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Fe,St);var At=function(){},Bt={DP_SAFE_EPSILON:{configurable:!0}};At.prototype.interfaces_=function(){return[]},At.prototype.getClass=function(){return At},At.orientationIndex=function(e,n,f){var h=At.orientationIndexFilter(e,n,f);if(h<=1)return h;var b=Fe.valueOf(n.x).selfAdd(-e.x),P=Fe.valueOf(n.y).selfAdd(-e.y),B=Fe.valueOf(f.x).selfAdd(-n.x),ae=Fe.valueOf(f.y).selfAdd(-n.y);return b.selfMultiply(ae).selfSubtract(P.selfMultiply(B)).signum()},At.signOfDet2x2=function(e,n,f,h){return e.multiply(h).selfSubtract(n.multiply(f)).signum()},At.intersection=function(e,n,f,h){var b=Fe.valueOf(h.y).selfSubtract(f.y).selfMultiply(Fe.valueOf(n.x).selfSubtract(e.x)),P=Fe.valueOf(h.x).selfSubtract(f.x).selfMultiply(Fe.valueOf(n.y).selfSubtract(e.y)),B=b.subtract(P),ae=Fe.valueOf(h.x).selfSubtract(f.x).selfMultiply(Fe.valueOf(e.y).selfSubtract(f.y)),Le=Fe.valueOf(h.y).selfSubtract(f.y).selfMultiply(Fe.valueOf(e.x).selfSubtract(f.x)),tt=ae.subtract(Le).selfDivide(B).doubleValue(),vt=Fe.valueOf(e.x).selfAdd(Fe.valueOf(n.x).selfSubtract(e.x).selfMultiply(tt)).doubleValue(),Nt=Fe.valueOf(n.x).selfSubtract(e.x).selfMultiply(Fe.valueOf(e.y).selfSubtract(f.y)),qt=Fe.valueOf(n.y).selfSubtract(e.y).selfMultiply(Fe.valueOf(e.x).selfSubtract(f.x)),kt=Nt.subtract(qt).selfDivide(B).doubleValue(),Ft=Fe.valueOf(f.y).selfAdd(Fe.valueOf(h.y).selfSubtract(f.y).selfMultiply(kt)).doubleValue();return new J(vt,Ft)},At.orientationIndexFilter=function(e,n,f){var h=null,b=(e.x-f.x)*(n.y-f.y),P=(e.y-f.y)*(n.x-f.x),B=b-P;if(b>0){if(P<=0)return At.signum(B);h=b+P}else{if(!(b<0)||P>=0)return At.signum(B);h=-b-P}var ae=At.DP_SAFE_EPSILON*h;return B>=ae||-B>=ae?At.signum(B):2},At.signum=function(e){return e>0?1:e<0?-1:0},Bt.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(At,Bt);var _t=function(){},cr={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};cr.X.get=function(){return 0},cr.Y.get=function(){return 1},cr.Z.get=function(){return 2},cr.M.get=function(){return 3},_t.prototype.setOrdinate=function(e,n,f){},_t.prototype.size=function(){},_t.prototype.getOrdinate=function(e,n){},_t.prototype.getCoordinate=function(){},_t.prototype.getCoordinateCopy=function(e){},_t.prototype.getDimension=function(){},_t.prototype.getX=function(e){},_t.prototype.clone=function(){},_t.prototype.expandEnvelope=function(e){},_t.prototype.copy=function(){},_t.prototype.getY=function(e){},_t.prototype.toCoordinateArray=function(){},_t.prototype.interfaces_=function(){return[he]},_t.prototype.getClass=function(){return _t},Object.defineProperties(_t,cr);var sr=function(){},rr=function(e){function n(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(sr),vr=function(){};vr.arraycopy=function(e,n,f,h,b){for(var P=0,B=n;B<n+b;B++)f[h+P]=e[B],P++},vr.getProperty=function(e){return{"line.separator":"\n"}[e]};var fr=function e(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var n=arguments[0];this.x=n.x,this.y=n.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[1];this.x=arguments[0],this.y=h,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var b=arguments[0],P=arguments[1];this.x=b.y*P.w-P.y*b.w,this.y=P.x*b.w-b.x*P.w,this.w=b.x*P.y-P.x*b.y}else if(arguments[0]instanceof J&&arguments[1]instanceof J){var B=arguments[0],ae=arguments[1];this.x=B.y-ae.y,this.y=ae.x-B.x,this.w=B.x*ae.y-ae.x*B.y}}else if(3===arguments.length){var tt=arguments[1],vt=arguments[2];this.x=arguments[0],this.y=tt,this.w=vt}else if(4===arguments.length){var Nt=arguments[0],qt=arguments[1],kt=arguments[2],Ft=arguments[3],Zt=Nt.y-qt.y,nr=qt.x-Nt.x,wr=Nt.x*qt.y-qt.x*Nt.y,Cr=kt.y-Ft.y,qr=Ft.x-kt.x,Yr=kt.x*Ft.y-Ft.x*kt.y;this.x=nr*Yr-qr*wr,this.y=Cr*wr-Zt*Yr,this.w=Zt*qr-Cr*nr}};fr.prototype.getY=function(){var e=this.y/this.w;if(ue.isNaN(e)||ue.isInfinite(e))throw new rr;return e},fr.prototype.getX=function(){var e=this.x/this.w;if(ue.isNaN(e)||ue.isInfinite(e))throw new rr;return e},fr.prototype.getCoordinate=function(){var e=new J;return e.x=this.getX(),e.y=this.getY(),e},fr.prototype.interfaces_=function(){return[]},fr.prototype.getClass=function(){return fr},fr.intersection=function(e,n,f,h){var b=e.y-n.y,P=n.x-e.x,B=e.x*n.y-n.x*e.y,ae=f.y-h.y,Le=h.x-f.x,tt=f.x*h.y-h.x*f.y,vt=b*Le-ae*P,Nt=(P*tt-Le*B)/vt,qt=(ae*B-b*tt)/vt;if(ue.isNaN(Nt)||ue.isInfinite(Nt)||ue.isNaN(qt)||ue.isInfinite(qt))throw new rr;return new J(Nt,qt)};var Yt=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof J){var n=arguments[0];this.init(n.x,n.x,n.y,n.y)}else arguments[0]instanceof e&&this.init(arguments[0]);else if(2===arguments.length){var h=arguments[0],b=arguments[1];this.init(h.x,b.x,h.y,b.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},Dn={serialVersionUID:{configurable:!0}};Yt.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Yt.prototype.equals=function(e){if(!(e instanceof Yt))return!1;var n=e;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()},Yt.prototype.intersection=function(e){return this.isNull()||e.isNull()||!this.intersects(e)?new Yt:new Yt(this._minx>e._minx?this._minx:e._minx,this._maxx<e._maxx?this._maxx:e._maxx,this._miny>e._miny?this._miny:e._miny,this._maxy<e._maxy?this._maxy:e._maxy)},Yt.prototype.isNull=function(){return this._maxx<this._minx},Yt.prototype.getMaxX=function(){return this._maxx},Yt.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof J){var e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof Yt){var n=arguments[0];return!this.isNull()&&!n.isNull()&&n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(2===arguments.length){var f=arguments[0],h=arguments[1];return!this.isNull()&&f>=this._minx&&f<=this._maxx&&h>=this._miny&&h<=this._maxy}},Yt.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Yt){var e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof J){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(2===arguments.length){var f=arguments[0],h=arguments[1];return!this.isNull()&&!(f>this._maxx||f<this._minx||h>this._maxy||h<this._miny)}},Yt.prototype.getMinY=function(){return this._miny},Yt.prototype.getMinX=function(){return this._minx},Yt.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof J){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof Yt){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(2===arguments.length){var f=arguments[0],h=arguments[1];this.isNull()?(this._minx=f,this._maxx=f,this._miny=h,this._maxy=h):(f<this._minx&&(this._minx=f),f>this._maxx&&(this._maxx=f),h<this._miny&&(this._miny=h),h>this._maxy&&(this._maxy=h))}},Yt.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),n=this.getHeight();return e<n?e:n},Yt.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Yt.prototype.compareTo=function(e){var n=e;return this.isNull()?n.isNull()?0:-1:n.isNull()?1:this._minx<n._minx?-1:this._minx>n._minx?1:this._miny<n._miny?-1:this._miny>n._miny?1:this._maxx<n._maxx?-1:this._maxx>n._maxx?1:this._maxy<n._maxy?-1:this._maxy>n._maxy?1:0},Yt.prototype.translate=function(e,n){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+n,this.getMaxY()+n)},Yt.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Yt.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Yt.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Yt.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),n=this.getHeight();return e>n?e:n},Yt.prototype.expandBy=function(){if(1===arguments.length){var e=arguments[0];this.expandBy(e,e)}else if(2===arguments.length){var n=arguments[0],f=arguments[1];if(this.isNull())return null;this._minx-=n,this._maxx+=n,this._miny-=f,this._maxy+=f,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Yt.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Yt)return this.covers(arguments[0]);if(arguments[0]instanceof J)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},Yt.prototype.centre=function(){return this.isNull()?null:new J((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Yt.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof J){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof Yt){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(2===arguments.length){var f=arguments[0],h=arguments[1];this.init(f.x,h.x,f.y,h.y)}else if(4===arguments.length){var b=arguments[0],P=arguments[1],B=arguments[2],ae=arguments[3];b<P?(this._minx=b,this._maxx=P):(this._minx=P,this._maxx=b),B<ae?(this._miny=B,this._maxy=ae):(this._miny=ae,this._maxy=B)}},Yt.prototype.getMaxY=function(){return this._maxy},Yt.prototype.distance=function(e){if(this.intersects(e))return 0;var n=0;this._maxx<e._minx?n=e._minx-this._maxx:this._minx>e._maxx&&(n=this._minx-e._maxx);var f=0;return this._maxy<e._miny?f=e._miny-this._maxy:this._miny>e._maxy&&(f=this._miny-e._maxy),0===n?f:0===f?n:Math.sqrt(n*n+f*f)},Yt.prototype.hashCode=function(){var e=17;return 37*(e=37*(e=37*(e=37*e+J.hashCode(this._minx))+J.hashCode(this._maxx))+J.hashCode(this._miny))+J.hashCode(this._maxy)},Yt.prototype.interfaces_=function(){return[fe,W]},Yt.prototype.getClass=function(){return Yt},Yt.intersects=function(){if(3===arguments.length){var e=arguments[0],n=arguments[1],f=arguments[2];return f.x>=(e.x<n.x?e.x:n.x)&&f.x<=(e.x>n.x?e.x:n.x)&&f.y>=(e.y<n.y?e.y:n.y)&&f.y<=(e.y>n.y?e.y:n.y)}if(4===arguments.length){var h=arguments[0],b=arguments[1],P=arguments[2],B=arguments[3],ae=Math.min(P.x,B.x),Le=Math.max(P.x,B.x),tt=Math.min(h.x,b.x),vt=Math.max(h.x,b.x);return!(tt>Le||vt<ae||(ae=Math.min(P.y,B.y),Le=Math.max(P.y,B.y),tt=Math.min(h.y,b.y),vt=Math.max(h.y,b.y),tt>Le||vt<ae))}},Dn.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Yt,Dn);var sn={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Zr=function(e){this.geometryFactory=e||new $r};Zr.prototype.read=function(e){var n,f;e=e.replace(/[\n\r]/g," ");var b=sn.typeStr.exec(e);if(-1!==e.search("EMPTY")&&((b=sn.emptyTypeStr.exec(e))[2]=void 0),b&&(f=b[1].toLowerCase(),Ar[f]&&(n=Ar[f].apply(this,[b[2]]))),void 0===n)throw new Error("Could not parse WKT "+e);return n},Zr.prototype.write=function(e){return this.extractGeometry(e)},Zr.prototype.extractGeometry=function(e){var n=e.getGeometryType().toLowerCase();if(!pr[n])return null;var f=n.toUpperCase();return e.isEmpty()?f+" EMPTY":f+"("+pr[n].apply(this,[e])+")"};var pr={coordinate:function(e){return e.x+" "+e.y},point:function(e){return pr.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var n=[],f=0,h=e._geometries.length;f<h;++f)n.push("("+pr.point.apply(this,[e._geometries[f]])+")");return n.join(",")},linestring:function(e){for(var n=[],f=0,h=e._points._coordinates.length;f<h;++f)n.push(pr.coordinate.apply(this,[e._points._coordinates[f]]));return n.join(",")},linearring:function(e){for(var n=[],f=0,h=e._points._coordinates.length;f<h;++f)n.push(pr.coordinate.apply(this,[e._points._coordinates[f]]));return n.join(",")},multilinestring:function(e){for(var n=[],f=0,h=e._geometries.length;f<h;++f)n.push("("+pr.linestring.apply(this,[e._geometries[f]])+")");return n.join(",")},polygon:function(e){var n=[];n.push("("+pr.linestring.apply(this,[e._shell])+")");for(var f=0,h=e._holes.length;f<h;++f)n.push("("+pr.linestring.apply(this,[e._holes[f]])+")");return n.join(",")},multipolygon:function(e){for(var n=[],f=0,h=e._geometries.length;f<h;++f)n.push("("+pr.polygon.apply(this,[e._geometries[f]])+")");return n.join(",")},geometrycollection:function(e){for(var n=[],f=0,h=e._geometries.length;f<h;++f)n.push(this.extractGeometry(e._geometries[f]));return n.join(",")}},Ar={point:function(e){if(void 0===e)return this.geometryFactory.createPoint();var n=e.trim().split(sn.spaces);return this.geometryFactory.createPoint(new J(Number.parseFloat(n[0]),Number.parseFloat(n[1])))},multipoint:function(e){if(void 0===e)return this.geometryFactory.createMultiPoint();for(var n,f=e.trim().split(","),h=[],b=0,P=f.length;b<P;++b)n=f[b].replace(sn.trimParens,"$1"),h.push(Ar.point.apply(this,[n]));return this.geometryFactory.createMultiPoint(h)},linestring:function(e){if(void 0===e)return this.geometryFactory.createLineString();for(var n,f=e.trim().split(","),h=[],b=0,P=f.length;b<P;++b)n=f[b].trim().split(sn.spaces),h.push(new J(Number.parseFloat(n[0]),Number.parseFloat(n[1])));return this.geometryFactory.createLineString(h)},linearring:function(e){if(void 0===e)return this.geometryFactory.createLinearRing();for(var n,f=e.trim().split(","),h=[],b=0,P=f.length;b<P;++b)n=f[b].trim().split(sn.spaces),h.push(new J(Number.parseFloat(n[0]),Number.parseFloat(n[1])));return this.geometryFactory.createLinearRing(h)},multilinestring:function(e){if(void 0===e)return this.geometryFactory.createMultiLineString();for(var n,f=e.trim().split(sn.parenComma),h=[],b=0,P=f.length;b<P;++b)n=f[b].replace(sn.trimParens,"$1"),h.push(Ar.linestring.apply(this,[n]));return this.geometryFactory.createMultiLineString(h)},polygon:function(e){if(void 0===e)return this.geometryFactory.createPolygon();for(var n,f,h,b,P=e.trim().split(sn.parenComma),B=[],ae=0,Le=P.length;ae<Le;++ae)n=P[ae].replace(sn.trimParens,"$1"),f=Ar.linestring.apply(this,[n]),h=this.geometryFactory.createLinearRing(f._points),0===ae?b=h:B.push(h);return this.geometryFactory.createPolygon(b,B)},multipolygon:function(e){if(void 0===e)return this.geometryFactory.createMultiPolygon();for(var n,f=e.trim().split(sn.doubleParenComma),h=[],b=0,P=f.length;b<P;++b)n=f[b].replace(sn.trimParens,"$1"),h.push(Ar.polygon.apply(this,[n]));return this.geometryFactory.createMultiPolygon(h)},geometrycollection:function(e){if(void 0===e)return this.geometryFactory.createGeometryCollection();for(var n=(e=e.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),f=[],h=0,b=n.length;h<b;++h)f.push(this.read(n[h]));return this.geometryFactory.createGeometryCollection(f)}},pt=function(e){this.parser=new Zr(e)};pt.prototype.write=function(e){return this.parser.write(e)},pt.toLineString=function(e,n){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+n.x+" "+n.y+" )"};var Ie=function(e){function n(f){e.call(this,f),this.name="RuntimeException",this.message=f,this.stack=(new e).stack}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n}(Error),we=function(e){function n(){e.call(this),0===arguments.length?e.call(this):1===arguments.length&&e.call(this,arguments[0])}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Ie),_e=function(){};_e.prototype.interfaces_=function(){return[]},_e.prototype.getClass=function(){return _e},_e.shouldNeverReachHere=function(){if(0===arguments.length)_e.shouldNeverReachHere(null);else if(1===arguments.length){var e=arguments[0];throw new we("Should never reach here"+(null!==e?": "+e:""))}},_e.isTrue=function(){var n;if(1===arguments.length)_e.isTrue(arguments[0],null);else if(2===arguments.length&&(n=arguments[1],!arguments[0]))throw null===n?new we:new we(n)},_e.equals=function(){var e,n,f;if(2===arguments.length)_e.equals(e=arguments[0],n=arguments[1],null);else if(3===arguments.length&&(f=arguments[2],!(n=arguments[1]).equals(e=arguments[0])))throw new we("Expected "+e+" but encountered "+n+(null!==f?": "+f:""))};var Xe=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new J,this._intPt[1]=new J,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},me={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Xe.prototype.getIndexAlongSegment=function(e,n){return this.computeIntLineIndex(),this._intLineIndex[e][n]},Xe.prototype.getTopologySummary=function(){var e=new Be;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()},Xe.prototype.computeIntersection=function(e,n,f,h){this._inputLines[0][0]=e,this._inputLines[0][1]=n,this._inputLines[1][0]=f,this._inputLines[1][1]=h,this._result=this.computeIntersect(e,n,f,h)},Xe.prototype.getIntersectionNum=function(){return this._result},Xe.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var e=arguments[0];this.getEdgeDistance(e,0)>this.getEdgeDistance(e,1)?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}},Xe.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Xe.prototype.setPrecisionModel=function(e){this._precisionModel=e},Xe.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!this._intPt[n].equals2D(this._inputLines[e][0])&&!this._intPt[n].equals2D(this._inputLines[e][1]))return!0;return!1}},Xe.prototype.getIntersection=function(e){return this._intPt[e]},Xe.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Xe.prototype.hasIntersection=function(){return this._result!==Xe.NO_INTERSECTION},Xe.prototype.getEdgeDistance=function(e,n){return Xe.computeEdgeDistance(this._intPt[n],this._inputLines[e][0],this._inputLines[e][1])},Xe.prototype.isCollinear=function(){return this._result===Xe.COLLINEAR_INTERSECTION},Xe.prototype.toString=function(){return pt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+pt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Xe.prototype.getEndpoint=function(e,n){return this._inputLines[e][n]},Xe.prototype.isIntersection=function(e){for(var n=0;n<this._result;n++)if(this._intPt[n].equals2D(e))return!0;return!1},Xe.prototype.getIntersectionAlongSegment=function(e,n){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][n]]},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe},Xe.computeEdgeDistance=function(e,n,f){var h=Math.abs(f.x-n.x),b=Math.abs(f.y-n.y),P=-1;if(e.equals(n))P=0;else if(e.equals(f))P=h>b?h:b;else{var B=Math.abs(e.x-n.x),ae=Math.abs(e.y-n.y);0!==(P=h>b?B:ae)||e.equals(n)||(P=Math.max(B,ae))}return _e.isTrue(!(0===P&&!e.equals(n)),"Bad distance calculation"),P},Xe.nonRobustComputeEdgeDistance=function(e,n,f){var h=e.x-n.x,b=e.y-n.y,P=Math.sqrt(h*h+b*b);return _e.isTrue(!(0===P&&!e.equals(n)),"Invalid distance calculation"),P},me.DONT_INTERSECT.get=function(){return 0},me.DO_INTERSECT.get=function(){return 1},me.COLLINEAR.get=function(){return 2},me.NO_INTERSECTION.get=function(){return 0},me.POINT_INTERSECTION.get=function(){return 1},me.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Xe,me);var ze=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.isInSegmentEnvelopes=function(f){var h=new Yt(this._inputLines[0][0],this._inputLines[0][1]),b=new Yt(this._inputLines[1][0],this._inputLines[1][1]);return h.contains(f)&&b.contains(f)},n.prototype.computeIntersection=function(){if(3!==arguments.length)return e.prototype.computeIntersection.apply(this,arguments);var f=arguments[0],h=arguments[1],b=arguments[2];if(this._isProper=!1,Yt.intersects(h,b,f)&&0===je.orientationIndex(h,b,f)&&0===je.orientationIndex(b,h,f))return this._isProper=!0,(f.equals(h)||f.equals(b))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION},n.prototype.normalizeToMinimum=function(f,h,b,P,B){B.x=this.smallestInAbsValue(f.x,h.x,b.x,P.x),B.y=this.smallestInAbsValue(f.y,h.y,b.y,P.y),f.x-=B.x,f.y-=B.y,h.x-=B.x,h.y-=B.y,b.x-=B.x,b.y-=B.y,P.x-=B.x,P.y-=B.y},n.prototype.safeHCoordinateIntersection=function(f,h,b,P){var B=null;try{B=fr.intersection(f,h,b,P)}catch(ae){if(!(ae instanceof rr))throw ae;B=n.nearestEndpoint(f,h,b,P)}return B},n.prototype.intersection=function(f,h,b,P){var B=this.intersectionWithNormalization(f,h,b,P);return this.isInSegmentEnvelopes(B)||(B=new J(n.nearestEndpoint(f,h,b,P))),null!==this._precisionModel&&this._precisionModel.makePrecise(B),B},n.prototype.smallestInAbsValue=function(f,h,b,P){var B=f,ae=Math.abs(B);return Math.abs(h)<ae&&(B=h,ae=Math.abs(h)),Math.abs(b)<ae&&(B=b,ae=Math.abs(b)),Math.abs(P)<ae&&(B=P),B},n.prototype.checkDD=function(f,h,b,P,B){var ae=At.intersection(f,h,b,P),Le=this.isInSegmentEnvelopes(ae);vr.out.println("DD in env = "+Le+"  --------------------- "+ae),B.distance(ae)>1e-4&&vr.out.println("Distance = "+B.distance(ae))},n.prototype.intersectionWithNormalization=function(f,h,b,P){var B=new J(f),ae=new J(h),Le=new J(b),tt=new J(P),vt=new J;this.normalizeToEnvCentre(B,ae,Le,tt,vt);var Nt=this.safeHCoordinateIntersection(B,ae,Le,tt);return Nt.x+=vt.x,Nt.y+=vt.y,Nt},n.prototype.computeCollinearIntersection=function(f,h,b,P){var B=Yt.intersects(f,h,b),ae=Yt.intersects(f,h,P),Le=Yt.intersects(b,P,f),tt=Yt.intersects(b,P,h);return B&&ae?(this._intPt[0]=b,this._intPt[1]=P,e.COLLINEAR_INTERSECTION):Le&&tt?(this._intPt[0]=f,this._intPt[1]=h,e.COLLINEAR_INTERSECTION):B&&Le?(this._intPt[0]=b,this._intPt[1]=f,!b.equals(f)||ae||tt?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):B&&tt?(this._intPt[0]=b,this._intPt[1]=h,!b.equals(h)||ae||Le?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):ae&&Le?(this._intPt[0]=P,this._intPt[1]=f,!P.equals(f)||B||tt?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):ae&&tt?(this._intPt[0]=P,this._intPt[1]=h,!P.equals(h)||B||Le?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):e.NO_INTERSECTION},n.prototype.normalizeToEnvCentre=function(f,h,b,P,B){var ae=f.x<h.x?f.x:h.x,Le=f.y<h.y?f.y:h.y,tt=f.x>h.x?f.x:h.x,vt=f.y>h.y?f.y:h.y,Nt=b.x<P.x?b.x:P.x,qt=b.y<P.y?b.y:P.y,kt=b.x>P.x?b.x:P.x,Ft=b.y>P.y?b.y:P.y,nr=((Le>qt?Le:qt)+(vt<Ft?vt:Ft))/2;B.x=((ae>Nt?ae:Nt)+(tt<kt?tt:kt))/2,B.y=nr,f.x-=B.x,f.y-=B.y,h.x-=B.x,h.y-=B.y,b.x-=B.x,b.y-=B.y,P.x-=B.x,P.y-=B.y},n.prototype.computeIntersect=function(f,h,b,P){if(this._isProper=!1,!Yt.intersects(f,h,b,P))return e.NO_INTERSECTION;var B=je.orientationIndex(f,h,b),ae=je.orientationIndex(f,h,P);if(B>0&&ae>0||B<0&&ae<0)return e.NO_INTERSECTION;var Le=je.orientationIndex(b,P,f),tt=je.orientationIndex(b,P,h);return Le>0&&tt>0||Le<0&&tt<0?e.NO_INTERSECTION:0===B&&0===ae&&0===Le&&0===tt?this.computeCollinearIntersection(f,h,b,P):(0===B||0===ae||0===Le||0===tt?(this._isProper=!1,f.equals2D(b)||f.equals2D(P)?this._intPt[0]=f:h.equals2D(b)||h.equals2D(P)?this._intPt[0]=h:0===B?this._intPt[0]=new J(b):0===ae?this._intPt[0]=new J(P):0===Le?this._intPt[0]=new J(f):0===tt&&(this._intPt[0]=new J(h))):(this._isProper=!0,this._intPt[0]=this.intersection(f,h,b,P)),e.POINT_INTERSECTION)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n.nearestEndpoint=function(f,h,b,P){var B=f,ae=je.distancePointLine(f,b,P),Le=je.distancePointLine(h,b,P);return Le<ae&&(ae=Le,B=h),(Le=je.distancePointLine(b,f,h))<ae&&(ae=Le,B=b),(Le=je.distancePointLine(P,f,h))<ae&&(ae=Le,B=P),B},n}(Xe),Qe=function(){};Qe.prototype.interfaces_=function(){return[]},Qe.prototype.getClass=function(){return Qe},Qe.orientationIndex=function(e,n,f){return Qe.signOfDet2x2(n.x-e.x,n.y-e.y,f.x-n.x,f.y-n.y)},Qe.signOfDet2x2=function(e,n,f,h){var b=null,P=null,B=null;if(b=1,0===e||0===h)return 0===n||0===f?0:n>0?f>0?-b:b:f>0?b:-b;if(0===n||0===f)return h>0?e>0?b:-b:e>0?-b:b;if(n>0?h>0?n<=h||(b=-b,P=e,e=f,f=P,P=n,n=h,h=P):n<=-h?(b=-b,f=-f,h=-h):(P=e,e=-f,f=P,P=n,n=-h,h=P):h>0?-n<=h?(b=-b,e=-e,n=-n):(P=-e,e=f,f=P,P=-n,n=h,h=P):n>=h?(e=-e,n=-n,f=-f,h=-h):(b=-b,P=-e,e=-f,f=P,P=-n,n=-h,h=P),e>0){if(!(f>0&&e<=f))return b}else{if(f>0||!(e>=f))return-b;b=-b,e=-e,f=-f}for(;;){if((h-=(B=Math.floor(f/e))*n)<0)return-b;if(h>n)return b;if(e>(f-=B*e)+f){if(n<h+h)return b}else{if(n>h+h)return-b;f=e-f,h=n-h,b=-b}if(0===h)return 0===f?0:-b;if(0===f||(e-=(B=Math.floor(e/f))*f,(n-=B*h)<0))return b;if(n>h)return-b;if(f>e+e){if(h<n+n)return-b}else{if(h>n+n)return b;e=f-e,n=h-n,b=-b}if(0===n)return 0===e?0:b;if(0===e)return-b}};var Je=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Je.prototype.countSegment=function(e,n){if(e.x<this._p.x&&n.x<this._p.x)return null;if(this._p.x===n.x&&this._p.y===n.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&n.y===this._p.y){var f=e.x,h=n.x;return f>h&&(f=n.x,h=e.x),this._p.x>=f&&this._p.x<=h&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&n.y<=this._p.y||n.y>this._p.y&&e.y<=this._p.y){var P=e.y-this._p.y,ae=n.y-this._p.y,Le=Qe.signOfDet2x2(e.x-this._p.x,P,n.x-this._p.x,ae);if(0===Le)return this._isPointOnSegment=!0,null;ae<P&&(Le=-Le),Le>0&&this._crossingCount++}},Je.prototype.isPointInPolygon=function(){return this.getLocation()!==de.EXTERIOR},Je.prototype.getLocation=function(){return this._isPointOnSegment?de.BOUNDARY:this._crossingCount%2==1?de.INTERIOR:de.EXTERIOR},Je.prototype.isOnSegment=function(){return this._isPointOnSegment},Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je},Je.locatePointInRing=function(){if(arguments[0]instanceof J&&gt(arguments[1],_t)){for(var n=arguments[1],f=new Je(arguments[0]),h=new J,b=new J,P=1;P<n.size();P++)if(n.getCoordinate(P,h),n.getCoordinate(P-1,b),f.countSegment(h,b),f.isOnSegment())return f.getLocation();return f.getLocation()}if(arguments[0]instanceof J&&arguments[1]instanceof Array){for(var ae=arguments[1],Le=new Je(arguments[0]),tt=1;tt<ae.length;tt++)if(Le.countSegment(ae[tt],ae[tt-1]),Le.isOnSegment())return Le.getLocation();return Le.getLocation()}};var je=function(){},Gt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je},je.orientationIndex=function(e,n,f){return At.orientationIndex(e,n,f)},je.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var n=0,f=e[0].x,h=1;h<e.length-1;h++)n+=(e[h].x-f)*(e[h-1].y-e[h+1].y);return n/2}if(gt(arguments[0],_t)){var B=arguments[0],ae=B.size();if(ae<3)return 0;var Le=new J,tt=new J,vt=new J;B.getCoordinate(0,tt),B.getCoordinate(1,vt);var Nt=tt.x;vt.x-=Nt;for(var qt=0,kt=1;kt<ae-1;kt++)Le.y=tt.y,tt.x=vt.x,tt.y=vt.y,B.getCoordinate(kt+1,vt),vt.x-=Nt,qt+=tt.x*(Le.y-vt.y);return qt/2}},je.distanceLineLine=function(e,n,f,h){if(e.equals(n))return je.distancePointLine(e,f,h);if(f.equals(h))return je.distancePointLine(h,e,n);var b=!1;if(Yt.intersects(e,n,f,h)){var P=(n.x-e.x)*(h.y-f.y)-(n.y-e.y)*(h.x-f.x);if(0===P)b=!0;else{var ae=((e.y-f.y)*(n.x-e.x)-(e.x-f.x)*(n.y-e.y))/P,Le=((e.y-f.y)*(h.x-f.x)-(e.x-f.x)*(h.y-f.y))/P;(Le<0||Le>1||ae<0||ae>1)&&(b=!0)}}else b=!0;return b?De.min(je.distancePointLine(e,f,h),je.distancePointLine(n,f,h),je.distancePointLine(f,e,n),je.distancePointLine(h,e,n)):0},je.isPointInRing=function(e,n){return je.locatePointInRing(e,n)!==de.EXTERIOR},je.computeLength=function(e){var n=e.size();if(n<=1)return 0;var f=0,h=new J;e.getCoordinate(0,h);for(var b=h.x,P=h.y,B=1;B<n;B++){e.getCoordinate(B,h);var ae=h.x,Le=h.y,tt=ae-b,vt=Le-P;f+=Math.sqrt(tt*tt+vt*vt),b=ae,P=Le}return f},je.isCCW=function(e){var n=e.length-1;if(n<3)throw new ie("Ring has fewer than 4 points, so orientation cannot be determined");for(var f=e[0],h=0,b=1;b<=n;b++){var P=e[b];P.y>f.y&&(f=P,h=b)}var B=h;do{(B-=1)<0&&(B=n)}while(e[B].equals2D(f)&&B!==h);var ae=h;do{ae=(ae+1)%n}while(e[ae].equals2D(f)&&ae!==h);var Le=e[B],tt=e[ae];if(Le.equals2D(f)||tt.equals2D(f)||Le.equals2D(tt))return!1;var vt=je.computeOrientation(Le,f,tt);return 0===vt?Le.x>tt.x:vt>0},je.locatePointInRing=function(e,n){return Je.locatePointInRing(e,n)},je.distancePointLinePerpendicular=function(e,n,f){var h=(f.x-n.x)*(f.x-n.x)+(f.y-n.y)*(f.y-n.y);return Math.abs(((n.y-e.y)*(f.x-n.x)-(n.x-e.x)*(f.y-n.y))/h)*Math.sqrt(h)},je.computeOrientation=function(e,n,f){return je.orientationIndex(e,n,f)},je.distancePointLine=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(0===n.length)throw new ie("Line array must contain at least one vertex");for(var f=e.distance(n[0]),h=0;h<n.length-1;h++){var b=je.distancePointLine(e,n[h],n[h+1]);b<f&&(f=b)}return f}if(3===arguments.length){var P=arguments[0],B=arguments[1],ae=arguments[2];if(B.x===ae.x&&B.y===ae.y)return P.distance(B);var Le=(ae.x-B.x)*(ae.x-B.x)+(ae.y-B.y)*(ae.y-B.y),tt=((P.x-B.x)*(ae.x-B.x)+(P.y-B.y)*(ae.y-B.y))/Le;return tt<=0?P.distance(B):tt>=1?P.distance(ae):Math.abs(((B.y-P.y)*(ae.x-B.x)-(B.x-P.x)*(ae.y-B.y))/Le)*Math.sqrt(Le)}},je.isOnLine=function(e,n){for(var f=new ze,h=1;h<n.length;h++)if(f.computeIntersection(e,n[h-1],n[h]),f.hasIntersection())return!0;return!1},Gt.CLOCKWISE.get=function(){return-1},Gt.RIGHT.get=function(){return je.CLOCKWISE},Gt.COUNTERCLOCKWISE.get=function(){return 1},Gt.LEFT.get=function(){return je.COUNTERCLOCKWISE},Gt.COLLINEAR.get=function(){return 0},Gt.STRAIGHT.get=function(){return je.COLLINEAR},Object.defineProperties(je,Gt);var Vt=function(){};Vt.prototype.filter=function(e){},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var Mt=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},Dt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Mt.prototype.isGeometryCollection=function(){return this.getSortIndex()===Mt.SORTINDEX_GEOMETRYCOLLECTION},Mt.prototype.getFactory=function(){return this._factory},Mt.prototype.getGeometryN=function(e){return this},Mt.prototype.getArea=function(){return 0},Mt.prototype.isRectangle=function(){return!1},Mt.prototype.equals=function(){if(arguments[0]instanceof Mt){var e=arguments[0];return null!==e&&this.equalsTopo(e)}if(arguments[0]instanceof Object){var n=arguments[0];return n instanceof Mt&&this.equalsExact(n)}},Mt.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)},Mt.prototype.geometryChanged=function(){this.apply(Mt.geometryChangedFilter)},Mt.prototype.geometryChangedAction=function(){this._envelope=null},Mt.prototype.equalsNorm=function(e){return null!==e&&this.norm().equalsExact(e.norm())},Mt.prototype.getLength=function(){return 0},Mt.prototype.getNumGeometries=function(){return 1},Mt.prototype.compareTo=function(){if(1===arguments.length){var e=arguments[0],n=e;return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var f=arguments[0],h=arguments[1];return this.getSortIndex()!==f.getSortIndex()?this.getSortIndex()-f.getSortIndex():this.isEmpty()&&f.isEmpty()?0:this.isEmpty()?-1:f.isEmpty()?1:this.compareToSameClass(f,h)}},Mt.prototype.getUserData=function(){return this._userData},Mt.prototype.getSRID=function(){return this._SRID},Mt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Mt.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===Mt.SORTINDEX_GEOMETRYCOLLECTION)throw new ie("This method does not support GeometryCollection arguments")},Mt.prototype.equal=function(e,n,f){return 0===f?e.equals(n):e.distance(n)<=f},Mt.prototype.norm=function(){var e=this.copy();return e.normalize(),e},Mt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Mt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Yt(this._envelope)},Mt.prototype.setSRID=function(e){this._SRID=e},Mt.prototype.setUserData=function(e){this._userData=e},Mt.prototype.compare=function(e,n){for(var f=e.iterator(),h=n.iterator();f.hasNext()&&h.hasNext();){var b=f.next(),P=h.next(),B=b.compareTo(P);if(0!==B)return B}return f.hasNext()?1:h.hasNext()?-1:0},Mt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Mt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Mt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Mt.SORTINDEX_MULTIPOINT||this.getSortIndex()===Mt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Mt.SORTINDEX_MULTIPOLYGON},Mt.prototype.interfaces_=function(){return[he,fe,W]},Mt.prototype.getClass=function(){return Mt},Mt.hasNonEmptyElements=function(e){for(var n=0;n<e.length;n++)if(!e[n].isEmpty())return!0;return!1},Mt.hasNullElements=function(e){for(var n=0;n<e.length;n++)if(null===e[n])return!0;return!1},Dt.serialVersionUID.get=function(){return 0x799ea46522854c00},Dt.SORTINDEX_POINT.get=function(){return 0},Dt.SORTINDEX_MULTIPOINT.get=function(){return 1},Dt.SORTINDEX_LINESTRING.get=function(){return 2},Dt.SORTINDEX_LINEARRING.get=function(){return 3},Dt.SORTINDEX_MULTILINESTRING.get=function(){return 4},Dt.SORTINDEX_POLYGON.get=function(){return 5},Dt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Dt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Dt.geometryChangedFilter.get=function(){return lr},Object.defineProperties(Mt,Dt);var lr=function(){};lr.interfaces_=function(){return[Vt]},lr.filter=function(e){e.geometryChangedAction()};var Lr=function(){};Lr.prototype.filter=function(e){},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr};var Ur=function(){},un={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Ur.prototype.isInBoundary=function(e){},Ur.prototype.interfaces_=function(){return[]},Ur.prototype.getClass=function(){return Ur},un.Mod2BoundaryNodeRule.get=function(){return ai},un.EndPointBoundaryNodeRule.get=function(){return Oi},un.MultiValentEndPointBoundaryNodeRule.get=function(){return ri},un.MonoValentEndPointBoundaryNodeRule.get=function(){return Pi},un.MOD2_BOUNDARY_RULE.get=function(){return new ai},un.ENDPOINT_BOUNDARY_RULE.get=function(){return new Oi},un.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ri},un.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Pi},un.OGC_SFS_BOUNDARY_RULE.get=function(){return Ur.MOD2_BOUNDARY_RULE},Object.defineProperties(Ur,un);var ai=function(){};ai.prototype.isInBoundary=function(e){return e%2==1},ai.prototype.interfaces_=function(){return[Ur]},ai.prototype.getClass=function(){return ai};var Oi=function(){};Oi.prototype.isInBoundary=function(e){return e>0},Oi.prototype.interfaces_=function(){return[Ur]},Oi.prototype.getClass=function(){return Oi};var ri=function(){};ri.prototype.isInBoundary=function(e){return e>1},ri.prototype.interfaces_=function(){return[Ur]},ri.prototype.getClass=function(){return ri};var Pi=function(){};Pi.prototype.isInBoundary=function(e){return 1===e},Pi.prototype.interfaces_=function(){return[Ur]},Pi.prototype.getClass=function(){return Pi};var Un=function(){};Un.prototype.add=function(){},Un.prototype.addAll=function(){},Un.prototype.isEmpty=function(){},Un.prototype.iterator=function(){},Un.prototype.size=function(){},Un.prototype.toArray=function(){},Un.prototype.remove=function(){},(te.prototype=new Error).name="IndexOutOfBoundsException";var fa=function(){};fa.prototype.hasNext=function(){},fa.prototype.next=function(){},fa.prototype.remove=function(){};var di=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.get=function(){},n.prototype.set=function(){},n.prototype.isEmpty=function(){},n}(Un);(ee.prototype=new Error).name="NoSuchElementException";var zt=function(e){function n(){e.call(this),this.array_=[],arguments[0]instanceof Un&&this.addAll(arguments[0])}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.ensureCapacity=function(){},n.prototype.interfaces_=function(){return[e,Un]},n.prototype.add=function(f){return 1===arguments.length?this.array_.push(f):this.array_.splice(arguments[0],arguments[1]),!0},n.prototype.clear=function(){this.array_=[]},n.prototype.addAll=function(f){for(var h=f.iterator();h.hasNext();)this.add(h.next());return!0},n.prototype.set=function(f,h){var b=this.array_[f];return this.array_[f]=h,b},n.prototype.iterator=function(){return new Do(this)},n.prototype.get=function(f){if(f<0||f>=this.size())throw new te;return this.array_[f]},n.prototype.isEmpty=function(){return 0===this.array_.length},n.prototype.size=function(){return this.array_.length},n.prototype.toArray=function(){for(var f=[],h=0,b=this.array_.length;h<b;h++)f.push(this.array_[h]);return f},n.prototype.remove=function(f){for(var h=!1,b=0,P=this.array_.length;b<P;b++)if(this.array_[b]===f){this.array_.splice(b,1),h=!0;break}return h},n}(di),Do=function(e){function n(f){e.call(this),this.arrayList_=f,this.position_=0}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new ee;return this.arrayList_.get(this.position_++)},n.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},n.prototype.set=function(f){return this.arrayList_.set(this.position_-1,f)},n.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},n}(fa),la=function(e){function n(){if(e.call(this),0!==arguments.length)if(1===arguments.length){var h=arguments[0];this.ensureCapacity(h.length),this.add(h,!0)}else if(2===arguments.length){var b=arguments[0],P=arguments[1];this.ensureCapacity(b.length),this.add(b,P)}}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var f={coordArrayType:{configurable:!0}};return f.coordArrayType.get=function(){return new Array(0).fill(null)},n.prototype.getCoordinate=function(h){return this.get(h)},n.prototype.addAll=function(){if(2===arguments.length){for(var b=arguments[1],P=!1,B=arguments[0].iterator();B.hasNext();)this.add(B.next(),b),P=!0;return P}return e.prototype.addAll.apply(this,arguments)},n.prototype.clone=function(){for(var h=e.prototype.clone.call(this),b=0;b<this.size();b++)h.add(b,this.get(b).copy());return h},n.prototype.toCoordinateArray=function(){return this.toArray(n.coordArrayType)},n.prototype.add=function(){if(1===arguments.length)e.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof J&&"boolean"==typeof arguments[1]){var B=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(B))return null;e.prototype.add.call(this,B)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var tt=arguments[0],vt=arguments[1];if(arguments[2])for(var Nt=0;Nt<tt.length;Nt++)this.add(tt[Nt],vt);else for(var qt=tt.length-1;qt>=0;qt--)this.add(tt[qt],vt);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof J){var kt=arguments[0],Ft=arguments[1];if(!arguments[2]){var Zt=this.size();if(Zt>0&&(kt>0&&this.get(kt-1).equals2D(Ft)||kt<Zt&&this.get(kt).equals2D(Ft)))return null}e.prototype.add.call(this,kt,Ft)}}else if(4===arguments.length){var nr=arguments[0],wr=arguments[1],Cr=arguments[2],qr=arguments[3],Yr=1;Cr>qr&&(Yr=-1);for(var nn=Cr;nn!==qr;nn+=Yr)this.add(nr[nn],wr);return!0}},n.prototype.closeRing=function(){this.size()>0&&this.add(new J(this.get(0)),!1)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},Object.defineProperties(n,f),n}(zt),Fr=function(){},Vn={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Vn.ForwardComparator.get=function(){return ki},Vn.BidirectionalComparator.get=function(){return Ro},Vn.coordArrayType.get=function(){return new Array(0).fill(null)},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr},Fr.isRing=function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))},Fr.ptNotInList=function(e,n){for(var f=0;f<e.length;f++){var h=e[f];if(Fr.indexOf(h,n)<0)return h}return null},Fr.scroll=function(e,n){var f=Fr.indexOf(n,e);if(f<0)return null;var h=new Array(e.length).fill(null);vr.arraycopy(e,f,h,0,e.length-f),vr.arraycopy(e,0,h,e.length-f,f),vr.arraycopy(h,0,e,0,e.length)},Fr.equals=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e===n)return!0;if(null===e||null===n||e.length!==n.length)return!1;for(var f=0;f<e.length;f++)if(!e[f].equals(n[f]))return!1;return!0}if(3===arguments.length){var h=arguments[0],b=arguments[1],P=arguments[2];if(h===b)return!0;if(null===h||null===b||h.length!==b.length)return!1;for(var B=0;B<h.length;B++)if(0!==P.compare(h[B],b[B]))return!1;return!0}},Fr.intersection=function(e,n){for(var f=new la,h=0;h<e.length;h++)n.intersects(e[h])&&f.add(e[h],!0);return f.toCoordinateArray()},Fr.hasRepeatedPoints=function(e){for(var n=1;n<e.length;n++)if(e[n-1].equals(e[n]))return!0;return!1},Fr.removeRepeatedPoints=function(e){return Fr.hasRepeatedPoints(e)?new la(e,!1).toCoordinateArray():e},Fr.reverse=function(e){for(var n=e.length-1,f=Math.trunc(n/2),h=0;h<=f;h++){var b=e[h];e[h]=e[n-h],e[n-h]=b}},Fr.removeNull=function(e){for(var n=0,f=0;f<e.length;f++)null!==e[f]&&n++;var h=new Array(n).fill(null);if(0===n)return h;for(var b=0,P=0;P<e.length;P++)null!==e[P]&&(h[b++]=e[P]);return h},Fr.copyDeep=function(){if(1===arguments.length){for(var e=arguments[0],n=new Array(e.length).fill(null),f=0;f<e.length;f++)n[f]=new J(e[f]);return n}if(5===arguments.length)for(var h=arguments[0],b=arguments[1],P=arguments[2],B=arguments[3],ae=arguments[4],Le=0;Le<ae;Le++)P[B+Le]=new J(h[b+Le])},Fr.isEqualReversed=function(e,n){for(var f=0;f<e.length;f++)if(0!==e[f].compareTo(n[e.length-f-1]))return!1;return!0},Fr.envelope=function(e){for(var n=new Yt,f=0;f<e.length;f++)n.expandToInclude(e[f]);return n},Fr.toCoordinateArray=function(e){return e.toArray(Fr.coordArrayType)},Fr.atLeastNCoordinatesOrNothing=function(e,n){return n.length>=e?n:[]},Fr.indexOf=function(e,n){for(var f=0;f<n.length;f++)if(e.equals(n[f]))return f;return-1},Fr.increasingDirection=function(e){for(var n=0;n<Math.trunc(e.length/2);n++){var h=e[n].compareTo(e[e.length-1-n]);if(0!==h)return h}return 1},Fr.compare=function(e,n){for(var f=0;f<e.length&&f<n.length;){var h=e[f].compareTo(n[f]);if(0!==h)return h;f++}return f<n.length?-1:f<e.length?1:0},Fr.minCoordinate=function(e){for(var n=null,f=0;f<e.length;f++)(null===n||n.compareTo(e[f])>0)&&(n=e[f]);return n},Fr.extract=function(e,n,f){n=De.clamp(n,0,e.length);var h=(f=De.clamp(f,-1,e.length))-n+1;f<0&&(h=0),n>=e.length&&(h=0),f<n&&(h=0);var b=new Array(h).fill(null);if(0===h)return b;for(var P=0,B=n;B<=f;B++)b[P++]=e[B];return b},Object.defineProperties(Fr,Vn);var ki=function(){};ki.prototype.compare=function(e,n){return Fr.compare(e,n)},ki.prototype.interfaces_=function(){return[be]},ki.prototype.getClass=function(){return ki};var Ro=function(){};Ro.prototype.compare=function(e,n){var f=e,h=n;if(f.length<h.length)return-1;if(f.length>h.length)return 1;if(0===f.length)return 0;var b=Fr.compare(f,h);return Fr.isEqualReversed(f,h)?0:b},Ro.prototype.OLDcompare=function(e,n){var f=e,h=n;if(f.length<h.length)return-1;if(f.length>h.length)return 1;if(0===f.length)return 0;for(var b=Fr.increasingDirection(f),P=Fr.increasingDirection(h),B=b>0?0:f.length-1,ae=P>0?0:f.length-1,Le=0;Le<f.length;Le++){var tt=f[B].compareTo(h[ae]);if(0!==tt)return tt;B+=b,ae+=P}return 0},Ro.prototype.interfaces_=function(){return[be]},Ro.prototype.getClass=function(){return Ro};var Bo=function(){};Bo.prototype.get=function(){},Bo.prototype.put=function(){},Bo.prototype.size=function(){},Bo.prototype.values=function(){},Bo.prototype.entrySet=function(){};var Gs=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n}(Bo);(Q.prototype=new Error).name="OperationNotSupported",(ge.prototype=new Un).contains=function(){};var Iu=function(e){function n(){e.call(this),this.array_=[],arguments[0]instanceof Un&&this.addAll(arguments[0])}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.contains=function(f){for(var h=0,b=this.array_.length;h<b;h++)if(this.array_[h]===f)return!0;return!1},n.prototype.add=function(f){return!this.contains(f)&&(this.array_.push(f),!0)},n.prototype.addAll=function(f){for(var h=f.iterator();h.hasNext();)this.add(h.next());return!0},n.prototype.remove=function(f){throw new Error},n.prototype.size=function(){return this.array_.length},n.prototype.isEmpty=function(){return 0===this.array_.length},n.prototype.toArray=function(){for(var f=[],h=0,b=this.array_.length;h<b;h++)f.push(this.array_[h]);return f},n.prototype.iterator=function(){return new xs(this)},n}(ge),xs=function(e){function n(f){e.call(this),this.hashSet_=f,this.position_=0}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new ee;return this.hashSet_.array_[this.position_++]},n.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},n.prototype.remove=function(){throw new Q},n}(fa),to=0;(V.prototype=new Gs).get=function(e){for(var n=this.root_;null!==n;){var f=e.compareTo(n.key);if(f<0)n=n.left;else{if(!(f>0))return n.value;n=n.right}}return null},V.prototype.put=function(e,n){if(null===this.root_)return this.root_={key:e,value:n,left:null,right:null,parent:null,color:to,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var f,h,b=this.root_;do{if(f=b,(h=e.compareTo(b.key))<0)b=b.left;else{if(!(h>0)){var P=b.value;return b.value=n,P}b=b.right}}while(null!==b);var B={key:e,left:null,right:null,value:n,parent:f,color:to,getValue:function(){return this.value},getKey:function(){return this.key}};return h<0?f.left=B:f.right=B,this.fixAfterInsertion(B),this.size_++,null},V.prototype.fixAfterInsertion=function(e){for(e.color=1;null!=e&&e!==this.root_&&1===e.parent.color;)if(X(e)===Pe(X(X(e)))){var n=se(X(X(e)));1===ce(n)?(Oe(X(e),to),Oe(n,to),Oe(X(X(e)),1),e=X(X(e))):(e===se(X(e))&&(e=X(e),this.rotateLeft(e)),Oe(X(e),to),Oe(X(X(e)),1),this.rotateRight(X(X(e))))}else{var f=Pe(X(X(e)));1===ce(f)?(Oe(X(e),to),Oe(f,to),Oe(X(X(e)),1),e=X(X(e))):(e===Pe(X(e))&&(e=X(e),this.rotateRight(e)),Oe(X(e),to),Oe(X(X(e)),1),this.rotateLeft(X(X(e))))}this.root_.color=to},V.prototype.values=function(){var e=new zt,n=this.getFirstEntry();if(null!==n)for(e.add(n.value);null!==(n=V.successor(n));)e.add(n.value);return e},V.prototype.entrySet=function(){var e=new Iu,n=this.getFirstEntry();if(null!==n)for(e.add(n);null!==(n=V.successor(n));)e.add(n);return e},V.prototype.rotateLeft=function(e){if(null!=e){var n=e.right;e.right=n.left,null!=n.left&&(n.left.parent=e),n.parent=e.parent,null===e.parent?this.root_=n:e.parent.left===e?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n}},V.prototype.rotateRight=function(e){if(null!=e){var n=e.left;e.left=n.right,null!=n.right&&(n.right.parent=e),n.parent=e.parent,null===e.parent?this.root_=n:e.parent.right===e?e.parent.right=n:e.parent.left=n,n.right=e,e.parent=n}},V.prototype.getFirstEntry=function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e},V.successor=function(e){if(null===e)return null;if(null!==e.right){for(var n=e.right;null!==n.left;)n=n.left;return n}for(var f=e.parent,h=e;null!==f&&h===f.right;)h=f,f=f.parent;return f},V.prototype.size=function(){return this.size_};var ks=function(){};ks.prototype.interfaces_=function(){return[]},ks.prototype.getClass=function(){return ks},Z.prototype=new ge,(ne.prototype=new Z).contains=function(e){for(var n=0,f=this.array_.length;n<f;n++)if(0===this.array_[n].compareTo(e))return!0;return!1},ne.prototype.add=function(e){if(this.contains(e))return!1;for(var n=0,f=this.array_.length;n<f;n++)if(1===this.array_[n].compareTo(e))return this.array_.splice(n,0,e),!0;return this.array_.push(e),!0},ne.prototype.addAll=function(e){for(var n=e.iterator();n.hasNext();)this.add(n.next());return!0},ne.prototype.remove=function(e){throw new Q},ne.prototype.size=function(){return this.array_.length},ne.prototype.isEmpty=function(){return 0===this.array_.length},ne.prototype.toArray=function(){for(var e=[],n=0,f=this.array_.length;n<f;n++)e.push(this.array_[n]);return e},ne.prototype.iterator=function(){return new Xo(this)};var Xo=function(e){this.treeSet_=e,this.position_=0};Xo.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new ee;return this.treeSet_.array_[this.position_++]},Xo.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Xo.prototype.remove=function(){throw new Q};var Fo=function(){};Fo.sort=function(){var e,n,f,b=arguments[0];if(1===arguments.length)b.sort(function(B,ae){return B.compareTo(ae)});else if(2===arguments.length)f=arguments[1],b.sort(function(B,ae){return f.compare(B,ae)});else if(3===arguments.length){(n=b.slice(arguments[1],arguments[2])).sort();var P=b.slice(0,arguments[1]).concat(n,b.slice(arguments[2],b.length));for(b.splice(0,b.length),e=0;e<P.length;e++)b.push(P[e])}else if(4===arguments.length)for(n=b.slice(arguments[1],arguments[2]),f=arguments[3],n.sort(function(B,ae){return f.compare(B,ae)}),P=b.slice(0,arguments[1]).concat(n,b.slice(arguments[2],b.length)),b.splice(0,b.length),e=0;e<P.length;e++)b.push(P[e])},Fo.asList=function(e){for(var n=new zt,f=0,h=e.length;f<h;f++)n.add(e[f]);return n};var an=function(){},Ca={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ca.P.get=function(){return 0},Ca.L.get=function(){return 1},Ca.A.get=function(){return 2},Ca.FALSE.get=function(){return-1},Ca.TRUE.get=function(){return-2},Ca.DONTCARE.get=function(){return-3},Ca.SYM_FALSE.get=function(){return"F"},Ca.SYM_TRUE.get=function(){return"T"},Ca.SYM_DONTCARE.get=function(){return"*"},Ca.SYM_P.get=function(){return"0"},Ca.SYM_L.get=function(){return"1"},Ca.SYM_A.get=function(){return"2"},an.prototype.interfaces_=function(){return[]},an.prototype.getClass=function(){return an},an.toDimensionSymbol=function(e){switch(e){case an.FALSE:return an.SYM_FALSE;case an.TRUE:return an.SYM_TRUE;case an.DONTCARE:return an.SYM_DONTCARE;case an.P:return an.SYM_P;case an.L:return an.SYM_L;case an.A:return an.SYM_A}throw new ie("Unknown dimension value: "+e)},an.toDimensionValue=function(e){switch(st.toUpperCase(e)){case an.SYM_FALSE:return an.FALSE;case an.SYM_TRUE:return an.TRUE;case an.SYM_DONTCARE:return an.DONTCARE;case an.SYM_P:return an.P;case an.SYM_L:return an.L;case an.SYM_A:return an.A}throw new ie("Unknown dimension symbol: "+e)},Object.defineProperties(an,Ca);var Wa=function(){};Wa.prototype.filter=function(e){},Wa.prototype.interfaces_=function(){return[]},Wa.prototype.getClass=function(){return Wa};var bi=function(){};bi.prototype.filter=function(e,n){},bi.prototype.isDone=function(){},bi.prototype.isGeometryChanged=function(){},bi.prototype.interfaces_=function(){return[]},bi.prototype.getClass=function(){return bi};var Ni=function(e){function n(h,b){if(e.call(this,b),this._geometries=h||[],e.hasNullElements(this._geometries))throw new ie("geometries must not contain null elements")}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var f={serialVersionUID:{configurable:!0}};return n.prototype.computeEnvelopeInternal=function(){for(var h=new Yt,b=0;b<this._geometries.length;b++)h.expandToInclude(this._geometries[b].getEnvelopeInternal());return h},n.prototype.getGeometryN=function(h){return this._geometries[h]},n.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},n.prototype.getCoordinates=function(){for(var h=new Array(this.getNumPoints()).fill(null),b=-1,P=0;P<this._geometries.length;P++)for(var B=this._geometries[P].getCoordinates(),ae=0;ae<B.length;ae++)h[++b]=B[ae];return h},n.prototype.getArea=function(){for(var h=0,b=0;b<this._geometries.length;b++)h+=this._geometries[b].getArea();return h},n.prototype.equalsExact=function(){if(2===arguments.length){var h=arguments[0],b=arguments[1];if(!this.isEquivalentClass(h))return!1;var P=h;if(this._geometries.length!==P._geometries.length)return!1;for(var B=0;B<this._geometries.length;B++)if(!this._geometries[B].equalsExact(P._geometries[B],b))return!1;return!0}return e.prototype.equalsExact.apply(this,arguments)},n.prototype.normalize=function(){for(var h=0;h<this._geometries.length;h++)this._geometries[h].normalize();Fo.sort(this._geometries)},n.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},n.prototype.getBoundaryDimension=function(){for(var h=an.FALSE,b=0;b<this._geometries.length;b++)h=Math.max(h,this._geometries[b].getBoundaryDimension());return h},n.prototype.getDimension=function(){for(var h=an.FALSE,b=0;b<this._geometries.length;b++)h=Math.max(h,this._geometries[b].getDimension());return h},n.prototype.getLength=function(){for(var h=0,b=0;b<this._geometries.length;b++)h+=this._geometries[b].getLength();return h},n.prototype.getNumPoints=function(){for(var h=0,b=0;b<this._geometries.length;b++)h+=this._geometries[b].getNumPoints();return h},n.prototype.getNumGeometries=function(){return this._geometries.length},n.prototype.reverse=function(){for(var b=new Array(this._geometries.length).fill(null),P=0;P<this._geometries.length;P++)b[P]=this._geometries[P].reverse();return this.getFactory().createGeometryCollection(b)},n.prototype.compareToSameClass=function(){if(1===arguments.length){var h=arguments[0],b=new ne(Fo.asList(this._geometries)),P=new ne(Fo.asList(h._geometries));return this.compare(b,P)}if(2===arguments.length){for(var ae=arguments[1],Le=arguments[0],tt=this.getNumGeometries(),vt=Le.getNumGeometries(),Nt=0;Nt<tt&&Nt<vt;){var qt=this.getGeometryN(Nt),kt=Le.getGeometryN(Nt),Ft=qt.compareToSameClass(kt,ae);if(0!==Ft)return Ft;Nt++}return Nt<tt?1:Nt<vt?-1:0}},n.prototype.apply=function(){if(gt(arguments[0],Lr))for(var h=arguments[0],b=0;b<this._geometries.length;b++)this._geometries[b].apply(h);else if(gt(arguments[0],bi)){var P=arguments[0];if(0===this._geometries.length)return null;for(var B=0;B<this._geometries.length&&(this._geometries[B].apply(P),!P.isDone());B++);P.isGeometryChanged()&&this.geometryChanged()}else if(gt(arguments[0],Wa)){var ae=arguments[0];ae.filter(this);for(var Le=0;Le<this._geometries.length;Le++)this._geometries[Le].apply(ae)}else if(gt(arguments[0],Vt)){var tt=arguments[0];tt.filter(this);for(var vt=0;vt<this._geometries.length;vt++)this._geometries[vt].apply(tt)}},n.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),_e.shouldNeverReachHere(),null},n.prototype.clone=function(){var h=e.prototype.clone.call(this);h._geometries=new Array(this._geometries.length).fill(null);for(var b=0;b<this._geometries.length;b++)h._geometries[b]=this._geometries[b].clone();return h},n.prototype.getGeometryType=function(){return"GeometryCollection"},n.prototype.copy=function(){for(var h=new Array(this._geometries.length).fill(null),b=0;b<h.length;b++)h[b]=this._geometries[b].copy();return new n(h,this._factory)},n.prototype.isEmpty=function(){for(var h=0;h<this._geometries.length;h++)if(!this._geometries[h].isEmpty())return!1;return!0},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},f.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(n,f),n}(Mt),ca=function(e){function n(){e.apply(this,arguments)}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var f={serialVersionUID:{configurable:!0}};return n.prototype.getSortIndex=function(){return Mt.SORTINDEX_MULTILINESTRING},n.prototype.equalsExact=function(){if(2===arguments.length){var h=arguments[0],b=arguments[1];return!!this.isEquivalentClass(h)&&e.prototype.equalsExact.call(this,h,b)}return e.prototype.equalsExact.apply(this,arguments)},n.prototype.getBoundaryDimension=function(){return this.isClosed()?an.FALSE:0},n.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var h=0;h<this._geometries.length;h++)if(!this._geometries[h].isClosed())return!1;return!0},n.prototype.getDimension=function(){return 1},n.prototype.reverse=function(){for(var h=this._geometries.length,b=new Array(h).fill(null),P=0;P<this._geometries.length;P++)b[h-1-P]=this._geometries[P].reverse();return this.getFactory().createMultiLineString(b)},n.prototype.getBoundary=function(){return new jr(this).getBoundary()},n.prototype.getGeometryType=function(){return"MultiLineString"},n.prototype.copy=function(){for(var h=new Array(this._geometries.length).fill(null),b=0;b<h.length;b++)h[b]=this._geometries[b].copy();return new n(h,this._factory)},n.prototype.interfaces_=function(){return[ks]},n.prototype.getClass=function(){return n},f.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(n,f),n}(Ni),jr=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var e=arguments[0],n=Ur.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=n}else if(2===arguments.length){var f=arguments[0],h=arguments[1];this._geom=f,this._geomFact=f.getFactory(),this._bnRule=h}};jr.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var n=this.computeBoundaryCoordinates(e);return 1===n.length?this._geomFact.createPoint(n[0]):this._geomFact.createMultiPointFromCoords(n)},jr.prototype.getBoundary=function(){return this._geom instanceof Hn?this.boundaryLineString(this._geom):this._geom instanceof ca?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},jr.prototype.boundaryLineString=function(e){return this._geom.isEmpty()?this.getEmptyMultiPoint():e.isClosed()?this._bnRule.isInBoundary(2)?e.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])},jr.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},jr.prototype.computeBoundaryCoordinates=function(e){var n=new zt;this._endpointMap=new V;for(var f=0;f<e.getNumGeometries();f++){var h=e.getGeometryN(f);0!==h.getNumPoints()&&(this.addEndpoint(h.getCoordinateN(0)),this.addEndpoint(h.getCoordinateN(h.getNumPoints()-1)))}for(var b=this._endpointMap.entrySet().iterator();b.hasNext();){var P=b.next(),B=P.getValue().count;this._bnRule.isInBoundary(B)&&n.add(P.getKey())}return Fr.toCoordinateArray(n)},jr.prototype.addEndpoint=function(e){var n=this._endpointMap.get(e);null===n&&(n=new Yi,this._endpointMap.put(e,n)),n.count++},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},jr.getBoundary=function(){return 1===arguments.length?new jr(arguments[0]).getBoundary():2===arguments.length?new jr(arguments[0],arguments[1]).getBoundary():void 0};var Yi=function(){this.count=null};Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi};var hi=function(){},Ou={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi},hi.chars=function(e,n){for(var f=new Array(n).fill(null),h=0;h<n;h++)f[h]=e;return String(f)},hi.getStackTrace=function(){if(1===arguments.length){var e=arguments[0],n=new function(){},f=new function(){}(n);return e.printStackTrace(f),n.toString()}if(2===arguments.length){for(var b=arguments[1],P="",B=new function(){}(new function(){}(hi.getStackTrace(arguments[0]))),ae=0;ae<b;ae++)try{P+=B.readLine()+hi.NEWLINE}catch(Le){if(!(Le instanceof oe))throw Le;_e.shouldNeverReachHere()}return P}},hi.split=function(e,n){for(var f=n.length,h=new zt,b=""+e,P=b.indexOf(n);P>=0;){var B=b.substring(0,P);h.add(B),P=(b=b.substring(P+f)).indexOf(n)}b.length>0&&h.add(b);for(var ae=new Array(h.size()).fill(null),Le=0;Le<ae.length;Le++)ae[Le]=h.get(Le);return ae},hi.toString=function(){if(1===arguments.length)return hi.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},hi.spaces=function(e){return hi.chars(" ",e)},Ou.NEWLINE.get=function(){return vr.getProperty("line.separator")},Ou.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(hi,Ou);var Ot=function(){};Ot.prototype.interfaces_=function(){return[]},Ot.prototype.getClass=function(){return Ot},Ot.copyCoord=function(e,n,f,h){for(var b=Math.min(e.getDimension(),f.getDimension()),P=0;P<b;P++)f.setOrdinate(h,P,e.getOrdinate(n,P))},Ot.isRing=function(e){var n=e.size();return 0===n||!(n<=3)&&e.getOrdinate(0,_t.X)===e.getOrdinate(n-1,_t.X)&&e.getOrdinate(0,_t.Y)===e.getOrdinate(n-1,_t.Y)},Ot.isEqual=function(e,n){var f=e.size();if(f!==n.size())return!1;for(var h=Math.min(e.getDimension(),n.getDimension()),b=0;b<f;b++)for(var P=0;P<h;P++){var B=e.getOrdinate(b,P),ae=n.getOrdinate(b,P);if(!(e.getOrdinate(b,P)===n.getOrdinate(b,P)||ue.isNaN(B)&&ue.isNaN(ae)))return!1}return!0},Ot.extend=function(e,n,f){var h=e.create(f,n.getDimension()),b=n.size();if(Ot.copy(n,0,h,0,b),b>0)for(var P=b;P<f;P++)Ot.copy(n,b-1,h,P,1);return h},Ot.reverse=function(e){for(var n=e.size()-1,f=Math.trunc(n/2),h=0;h<=f;h++)Ot.swap(e,h,n-h)},Ot.swap=function(e,n,f){if(n===f)return null;for(var h=0;h<e.getDimension();h++){var b=e.getOrdinate(n,h);e.setOrdinate(n,h,e.getOrdinate(f,h)),e.setOrdinate(f,h,b)}},Ot.copy=function(e,n,f,h,b){for(var P=0;P<b;P++)Ot.copyCoord(e,n+P,f,h+P)},Ot.toString=function(){if(1===arguments.length){var e=arguments[0],n=e.size();if(0===n)return"()";var f=e.getDimension(),h=new Be;h.append("(");for(var b=0;b<n;b++){b>0&&h.append(" ");for(var P=0;P<f;P++)P>0&&h.append(","),h.append(hi.toString(e.getOrdinate(b,P)))}return h.append(")"),h.toString()}},Ot.ensureValidRing=function(e,n){var f=n.size();return 0===f?n:f<=3?Ot.createClosedRing(e,n,4):n.getOrdinate(0,_t.X)===n.getOrdinate(f-1,_t.X)&&n.getOrdinate(0,_t.Y)===n.getOrdinate(f-1,_t.Y)?n:Ot.createClosedRing(e,n,f+1)},Ot.createClosedRing=function(e,n,f){var h=e.create(f,n.getDimension()),b=n.size();Ot.copy(n,0,h,0,b);for(var P=b;P<f;P++)Ot.copy(n,0,h,P,1);return h};var Hn=function(e){function n(h,b){e.call(this,b),this._points=null,this.init(h)}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var f={serialVersionUID:{configurable:!0}};return n.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Yt:this._points.expandEnvelope(new Yt)},n.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},n.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},n.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},n.prototype.equalsExact=function(){if(2===arguments.length){var h=arguments[0],b=arguments[1];if(!this.isEquivalentClass(h))return!1;var P=h;if(this._points.size()!==P._points.size())return!1;for(var B=0;B<this._points.size();B++)if(!this.equal(this._points.getCoordinate(B),P._points.getCoordinate(B),b))return!1;return!0}return e.prototype.equalsExact.apply(this,arguments)},n.prototype.normalize=function(){for(var h=0;h<Math.trunc(this._points.size()/2);h++){var b=this._points.size()-1-h;if(!this._points.getCoordinate(h).equals(this._points.getCoordinate(b)))return this._points.getCoordinate(h).compareTo(this._points.getCoordinate(b))>0&&Ot.reverse(this._points),null}},n.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},n.prototype.getBoundaryDimension=function(){return this.isClosed()?an.FALSE:0},n.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},n.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},n.prototype.getDimension=function(){return 1},n.prototype.getLength=function(){return je.computeLength(this._points)},n.prototype.getNumPoints=function(){return this._points.size()},n.prototype.reverse=function(){var h=this._points.copy();return Ot.reverse(h),this.getFactory().createLineString(h)},n.prototype.compareToSameClass=function(){if(1===arguments.length){for(var h=arguments[0],b=0,P=0;b<this._points.size()&&P<h._points.size();){var B=this._points.getCoordinate(b).compareTo(h._points.getCoordinate(P));if(0!==B)return B;b++,P++}return b<this._points.size()?1:P<h._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},n.prototype.apply=function(){if(gt(arguments[0],Lr))for(var h=arguments[0],b=0;b<this._points.size();b++)h.filter(this._points.getCoordinate(b));else if(gt(arguments[0],bi)){var P=arguments[0];if(0===this._points.size())return null;for(var B=0;B<this._points.size()&&(P.filter(this._points,B),!P.isDone());B++);P.isGeometryChanged()&&this.geometryChanged()}else(gt(arguments[0],Wa)||gt(arguments[0],Vt))&&arguments[0].filter(this)},n.prototype.getBoundary=function(){return new jr(this).getBoundary()},n.prototype.isEquivalentClass=function(h){return h instanceof n},n.prototype.clone=function(){var h=e.prototype.clone.call(this);return h._points=this._points.clone(),h},n.prototype.getCoordinateN=function(h){return this._points.getCoordinate(h)},n.prototype.getGeometryType=function(){return"LineString"},n.prototype.copy=function(){return new n(this._points.copy(),this._factory)},n.prototype.getCoordinateSequence=function(){return this._points},n.prototype.isEmpty=function(){return 0===this._points.size()},n.prototype.init=function(h){if(null===h&&(h=this.getFactory().getCoordinateSequenceFactory().create([])),1===h.size())throw new ie("Invalid number of points in LineString (found "+h.size()+" - must be 0 or >= 2)");this._points=h},n.prototype.isCoordinate=function(h){for(var b=0;b<this._points.size();b++)if(this._points.getCoordinate(b).equals(h))return!0;return!1},n.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},n.prototype.getPointN=function(h){return this.getFactory().createPoint(this._points.getCoordinate(h))},n.prototype.interfaces_=function(){return[ks]},n.prototype.getClass=function(){return n},f.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(n,f),n}(Mt),po=function(){};po.prototype.interfaces_=function(){return[]},po.prototype.getClass=function(){return po};var ha=function(e){function n(h,b){e.call(this,b),this._coordinates=h||null,this.init(this._coordinates)}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var f={serialVersionUID:{configurable:!0}};return n.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Yt;var h=new Yt;return h.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),h},n.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},n.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},n.prototype.equalsExact=function(){if(2===arguments.length){var h=arguments[0],b=arguments[1];return!!this.isEquivalentClass(h)&&(!(!this.isEmpty()||!h.isEmpty())||this.isEmpty()===h.isEmpty()&&this.equal(h.getCoordinate(),this.getCoordinate(),b))}return e.prototype.equalsExact.apply(this,arguments)},n.prototype.normalize=function(){},n.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},n.prototype.getBoundaryDimension=function(){return an.FALSE},n.prototype.getDimension=function(){return 0},n.prototype.getNumPoints=function(){return this.isEmpty()?0:1},n.prototype.reverse=function(){return this.copy()},n.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},n.prototype.compareToSameClass=function(){if(1===arguments.length){var h=arguments[0];return this.getCoordinate().compareTo(h.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},n.prototype.apply=function(){if(gt(arguments[0],Lr)){var h=arguments[0];if(this.isEmpty())return null;h.filter(this.getCoordinate())}else if(gt(arguments[0],bi)){var b=arguments[0];if(this.isEmpty())return null;b.filter(this._coordinates,0),b.isGeometryChanged()&&this.geometryChanged()}else(gt(arguments[0],Wa)||gt(arguments[0],Vt))&&arguments[0].filter(this)},n.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},n.prototype.clone=function(){var h=e.prototype.clone.call(this);return h._coordinates=this._coordinates.clone(),h},n.prototype.getGeometryType=function(){return"Point"},n.prototype.copy=function(){return new n(this._coordinates.copy(),this._factory)},n.prototype.getCoordinateSequence=function(){return this._coordinates},n.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},n.prototype.isEmpty=function(){return 0===this._coordinates.size()},n.prototype.init=function(h){null===h&&(h=this.getFactory().getCoordinateSequenceFactory().create([])),_e.isTrue(h.size()<=1),this._coordinates=h},n.prototype.isSimple=function(){return!0},n.prototype.interfaces_=function(){return[po]},n.prototype.getClass=function(){return n},f.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(n,f),n}(Mt),go=function(){};go.prototype.interfaces_=function(){return[]},go.prototype.getClass=function(){return go};var oi=function(e){function n(h,b,P){if(e.call(this,P),this._shell=null,this._holes=null,null===h&&(h=this.getFactory().createLinearRing()),null===b&&(b=[]),e.hasNullElements(b))throw new ie("holes must not contain null elements");if(h.isEmpty()&&e.hasNonEmptyElements(b))throw new ie("shell is empty but holes are not");this._shell=h,this._holes=b}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var f={serialVersionUID:{configurable:!0}};return n.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},n.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},n.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var h=new Array(this.getNumPoints()).fill(null),b=-1,P=this._shell.getCoordinates(),B=0;B<P.length;B++)h[++b]=P[B];for(var ae=0;ae<this._holes.length;ae++)for(var Le=this._holes[ae].getCoordinates(),tt=0;tt<Le.length;tt++)h[++b]=Le[tt];return h},n.prototype.getArea=function(){var h=0;h+=Math.abs(je.signedArea(this._shell.getCoordinateSequence()));for(var b=0;b<this._holes.length;b++)h-=Math.abs(je.signedArea(this._holes[b].getCoordinateSequence()));return h},n.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var h=this._shell.getCoordinateSequence(),b=this.getEnvelopeInternal(),P=0;P<5;P++){var B=h.getX(P);if(B!==b.getMinX()&&B!==b.getMaxX())return!1;var ae=h.getY(P);if(ae!==b.getMinY()&&ae!==b.getMaxY())return!1}for(var Le=h.getX(0),tt=h.getY(0),vt=1;vt<=4;vt++){var Nt=h.getX(vt),qt=h.getY(vt);if(Nt!==Le==(qt!==tt))return!1;Le=Nt,tt=qt}return!0},n.prototype.equalsExact=function(){if(2===arguments.length){var h=arguments[0],b=arguments[1];if(!this.isEquivalentClass(h))return!1;var P=h;if(!this._shell.equalsExact(P._shell,b)||this._holes.length!==P._holes.length)return!1;for(var Le=0;Le<this._holes.length;Le++)if(!this._holes[Le].equalsExact(P._holes[Le],b))return!1;return!0}return e.prototype.equalsExact.apply(this,arguments)},n.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var h=0;h<this._holes.length;h++)this.normalize(this._holes[h],!1);Fo.sort(this._holes)}else if(2===arguments.length){var b=arguments[0],P=arguments[1];if(b.isEmpty())return null;var B=new Array(b.getCoordinates().length-1).fill(null);vr.arraycopy(b.getCoordinates(),0,B,0,B.length);var ae=Fr.minCoordinate(b.getCoordinates());Fr.scroll(B,ae),vr.arraycopy(B,0,b.getCoordinates(),0,B.length),b.getCoordinates()[B.length]=B[0],je.isCCW(b.getCoordinates())===P&&Fr.reverse(b.getCoordinates())}},n.prototype.getCoordinate=function(){return this._shell.getCoordinate()},n.prototype.getNumInteriorRing=function(){return this._holes.length},n.prototype.getBoundaryDimension=function(){return 1},n.prototype.getDimension=function(){return 2},n.prototype.getLength=function(){var h=0;h+=this._shell.getLength();for(var b=0;b<this._holes.length;b++)h+=this._holes[b].getLength();return h},n.prototype.getNumPoints=function(){for(var h=this._shell.getNumPoints(),b=0;b<this._holes.length;b++)h+=this._holes[b].getNumPoints();return h},n.prototype.reverse=function(){var h=this.copy();h._shell=this._shell.copy().reverse(),h._holes=new Array(this._holes.length).fill(null);for(var b=0;b<this._holes.length;b++)h._holes[b]=this._holes[b].copy().reverse();return h},n.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},n.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var ae=arguments[1],Le=arguments[0],Nt=this._shell.compareToSameClass(Le._shell,ae);if(0!==Nt)return Nt;for(var qt=this.getNumInteriorRing(),kt=Le.getNumInteriorRing(),Ft=0;Ft<qt&&Ft<kt;){var Zt=this.getInteriorRingN(Ft),nr=Le.getInteriorRingN(Ft),wr=Zt.compareToSameClass(nr,ae);if(0!==wr)return wr;Ft++}return Ft<qt?1:Ft<kt?-1:0}},n.prototype.apply=function(h){if(gt(h,Lr)){this._shell.apply(h);for(var b=0;b<this._holes.length;b++)this._holes[b].apply(h)}else if(gt(h,bi)){if(this._shell.apply(h),!h.isDone())for(var P=0;P<this._holes.length&&(this._holes[P].apply(h),!h.isDone());P++);h.isGeometryChanged()&&this.geometryChanged()}else if(gt(h,Wa))h.filter(this);else if(gt(h,Vt)){h.filter(this),this._shell.apply(h);for(var B=0;B<this._holes.length;B++)this._holes[B].apply(h)}},n.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var h=new Array(this._holes.length+1).fill(null);h[0]=this._shell;for(var b=0;b<this._holes.length;b++)h[b+1]=this._holes[b];return h.length<=1?this.getFactory().createLinearRing(h[0].getCoordinateSequence()):this.getFactory().createMultiLineString(h)},n.prototype.clone=function(){var h=e.prototype.clone.call(this);h._shell=this._shell.clone(),h._holes=new Array(this._holes.length).fill(null);for(var b=0;b<this._holes.length;b++)h._holes[b]=this._holes[b].clone();return h},n.prototype.getGeometryType=function(){return"Polygon"},n.prototype.copy=function(){for(var h=this._shell.copy(),b=new Array(this._holes.length).fill(null),P=0;P<b.length;P++)b[P]=this._holes[P].copy();return new n(h,b,this._factory)},n.prototype.getExteriorRing=function(){return this._shell},n.prototype.isEmpty=function(){return this._shell.isEmpty()},n.prototype.getInteriorRingN=function(h){return this._holes[h]},n.prototype.interfaces_=function(){return[go]},n.prototype.getClass=function(){return n},f.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(n,f),n}(Mt),rs=function(e){function n(){e.apply(this,arguments)}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var f={serialVersionUID:{configurable:!0}};return n.prototype.getSortIndex=function(){return Mt.SORTINDEX_MULTIPOINT},n.prototype.isValid=function(){return!0},n.prototype.equalsExact=function(){if(2===arguments.length){var h=arguments[0],b=arguments[1];return!!this.isEquivalentClass(h)&&e.prototype.equalsExact.call(this,h,b)}return e.prototype.equalsExact.apply(this,arguments)},n.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():e.prototype.getCoordinate.apply(this,arguments)},n.prototype.getBoundaryDimension=function(){return an.FALSE},n.prototype.getDimension=function(){return 0},n.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},n.prototype.getGeometryType=function(){return"MultiPoint"},n.prototype.copy=function(){for(var h=new Array(this._geometries.length).fill(null),b=0;b<h.length;b++)h[b]=this._geometries[b].copy();return new n(h,this._factory)},n.prototype.interfaces_=function(){return[po]},n.prototype.getClass=function(){return n},f.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(n,f),n}(Ni),vo=function(e){function n(h,b){h instanceof J&&b instanceof $r&&(h=b.getCoordinateSequenceFactory().create(h)),e.call(this,h,b),this.validateConstruction()}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var f={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return n.prototype.getSortIndex=function(){return Mt.SORTINDEX_LINEARRING},n.prototype.getBoundaryDimension=function(){return an.FALSE},n.prototype.isClosed=function(){return!!this.isEmpty()||e.prototype.isClosed.call(this)},n.prototype.reverse=function(){var h=this._points.copy();return Ot.reverse(h),this.getFactory().createLinearRing(h)},n.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new ie("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<n.MINIMUM_VALID_SIZE)throw new ie("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},n.prototype.getGeometryType=function(){return"LinearRing"},n.prototype.copy=function(){return new n(this._points.copy(),this._factory)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},f.MINIMUM_VALID_SIZE.get=function(){return 4},f.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(n,f),n}(Hn),na=function(e){function n(){e.apply(this,arguments)}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var f={serialVersionUID:{configurable:!0}};return n.prototype.getSortIndex=function(){return Mt.SORTINDEX_MULTIPOLYGON},n.prototype.equalsExact=function(){if(2===arguments.length){var h=arguments[0],b=arguments[1];return!!this.isEquivalentClass(h)&&e.prototype.equalsExact.call(this,h,b)}return e.prototype.equalsExact.apply(this,arguments)},n.prototype.getBoundaryDimension=function(){return 1},n.prototype.getDimension=function(){return 2},n.prototype.reverse=function(){for(var b=new Array(this._geometries.length).fill(null),P=0;P<this._geometries.length;P++)b[P]=this._geometries[P].reverse();return this.getFactory().createMultiPolygon(b)},n.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var h=new zt,b=0;b<this._geometries.length;b++)for(var P=this._geometries[b].getBoundary(),B=0;B<P.getNumGeometries();B++)h.add(P.getGeometryN(B));var ae=new Array(h.size()).fill(null);return this.getFactory().createMultiLineString(h.toArray(ae))},n.prototype.getGeometryType=function(){return"MultiPolygon"},n.prototype.copy=function(){for(var h=new Array(this._geometries.length).fill(null),b=0;b<h.length;b++)h[b]=this._geometries[b].copy();return new n(h,this._factory)},n.prototype.interfaces_=function(){return[go]},n.prototype.getClass=function(){return n},f.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(n,f),n}(Ni),Er=function(e){this._factory=e||null,this._isUserDataCopied=!1},Ys={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Er.prototype.setCopyUserData=function(e){this._isUserDataCopied=e},Er.prototype.edit=function(e,n){if(null===e)return null;var f=this.editInternal(e,n);return this._isUserDataCopied&&f.setUserData(e.getUserData()),f},Er.prototype.editInternal=function(e,n){return null===this._factory&&(this._factory=e.getFactory()),e instanceof Ni?this.editGeometryCollection(e,n):e instanceof oi?this.editPolygon(e,n):e instanceof ha||e instanceof Hn?n.edit(e,this._factory):(_e.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)},Er.prototype.editGeometryCollection=function(e,n){for(var f=n.edit(e,this._factory),h=new zt,b=0;b<f.getNumGeometries();b++){var P=this.edit(f.getGeometryN(b),n);null===P||P.isEmpty()||h.add(P)}return f.getClass()===rs?this._factory.createMultiPoint(h.toArray([])):f.getClass()===ca?this._factory.createMultiLineString(h.toArray([])):f.getClass()===na?this._factory.createMultiPolygon(h.toArray([])):this._factory.createGeometryCollection(h.toArray([]))},Er.prototype.editPolygon=function(e,n){var f=n.edit(e,this._factory);if(null===f&&(f=this._factory.createPolygon(null)),f.isEmpty())return f;var h=this.edit(f.getExteriorRing(),n);if(null===h||h.isEmpty())return this._factory.createPolygon();for(var b=new zt,P=0;P<f.getNumInteriorRing();P++){var B=this.edit(f.getInteriorRingN(P),n);null===B||B.isEmpty()||b.add(B)}return this._factory.createPolygon(h,b.toArray([]))},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er},Er.GeometryEditorOperation=function(){},Ys.NoOpGeometryOperation.get=function(){return mo},Ys.CoordinateOperation.get=function(){return Xs},Ys.CoordinateSequenceOperation.get=function(){return au},Object.defineProperties(Er,Ys);var mo=function(){};mo.prototype.edit=function(e,n){return e},mo.prototype.interfaces_=function(){return[Er.GeometryEditorOperation]},mo.prototype.getClass=function(){return mo};var Xs=function(){};Xs.prototype.edit=function(e,n){var f=this.editCoordinates(e.getCoordinates(),e);return null===f?e:e instanceof vo?n.createLinearRing(f):e instanceof Hn?n.createLineString(f):e instanceof ha?f.length>0?n.createPoint(f[0]):n.createPoint():e},Xs.prototype.interfaces_=function(){return[Er.GeometryEditorOperation]},Xs.prototype.getClass=function(){return Xs};var au=function(){};au.prototype.edit=function(e,n){return e instanceof vo?n.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof Hn?n.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof ha?n.createPoint(this.edit(e.getCoordinateSequence(),e)):e},au.prototype.interfaces_=function(){return[Er.GeometryEditorOperation]},au.prototype.getClass=function(){return au};var fi=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this._coordinates[n]=new J}else if(gt(arguments[0],_t)){var f=arguments[0];if(null===f)return this._coordinates=new Array(0).fill(null),null;this._dimension=f.getDimension(),this._coordinates=new Array(f.size()).fill(null);for(var h=0;h<this._coordinates.length;h++)this._coordinates[h]=f.getCoordinateCopy(h)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var b=arguments[0],P=arguments[1];this._coordinates=b,this._dimension=P,null===b&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var B=arguments[0],ae=arguments[1];this._coordinates=new Array(B).fill(null),this._dimension=ae;for(var Le=0;Le<B;Le++)this._coordinates[Le]=new J}},xa={serialVersionUID:{configurable:!0}};fi.prototype.setOrdinate=function(e,n,f){switch(n){case _t.X:this._coordinates[e].x=f;break;case _t.Y:this._coordinates[e].y=f;break;case _t.Z:this._coordinates[e].z=f;break;default:throw new ie("invalid ordinateIndex")}},fi.prototype.size=function(){return this._coordinates.length},fi.prototype.getOrdinate=function(e,n){switch(n){case _t.X:return this._coordinates[e].x;case _t.Y:return this._coordinates[e].y;case _t.Z:return this._coordinates[e].z}return ue.NaN},fi.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var n=arguments[0],f=arguments[1];f.x=this._coordinates[n].x,f.y=this._coordinates[n].y,f.z=this._coordinates[n].z}},fi.prototype.getCoordinateCopy=function(e){return new J(this._coordinates[e])},fi.prototype.getDimension=function(){return this._dimension},fi.prototype.getX=function(e){return this._coordinates[e].x},fi.prototype.clone=function(){for(var e=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)e[n]=this._coordinates[n].clone();return new fi(e,this._dimension)},fi.prototype.expandEnvelope=function(e){for(var n=0;n<this._coordinates.length;n++)e.expandToInclude(this._coordinates[n]);return e},fi.prototype.copy=function(){for(var e=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)e[n]=this._coordinates[n].copy();return new fi(e,this._dimension)},fi.prototype.toString=function(){if(this._coordinates.length>0){var e=new Be(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)e.append(", "),e.append(this._coordinates[n]);return e.append(")"),e.toString()}return"()"},fi.prototype.getY=function(e){return this._coordinates[e].y},fi.prototype.toCoordinateArray=function(){return this._coordinates},fi.prototype.interfaces_=function(){return[_t,W]},fi.prototype.getClass=function(){return fi},xa.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(fi,xa);var jn=function(){},jf={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};jn.prototype.readResolve=function(){return jn.instance()},jn.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new fi(arguments[0]);if(gt(arguments[0],_t))return new fi(arguments[0])}else if(2===arguments.length){var f=arguments[0],h=arguments[1];return h>3&&(h=3),h<2?new fi(f):new fi(f,h)}},jn.prototype.interfaces_=function(){return[ke,W]},jn.prototype.getClass=function(){return jn},jn.instance=function(){return jn.instanceObject},jf.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},jf.instanceObject.get=function(){return new jn},Object.defineProperties(jn,jf);var $l=function(e){function n(){e.call(this),this.map_=new Map}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.get=function(f){return this.map_.get(f)||null},n.prototype.put=function(f,h){return this.map_.set(f,h),h},n.prototype.values=function(){for(var f=new zt,h=this.map_.values(),b=h.next();!b.done;)f.add(b.value),b=h.next();return f},n.prototype.entrySet=function(){var f=new Iu;return this.map_.entries().forEach(function(h){return f.add(h)}),f},n.prototype.size=function(){return this.map_.size()},n}(Bo),In=function e(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=e.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof yi){var n=arguments[0];this._modelType=n,n===e.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var f=arguments[0];this._modelType=e.FIXED,this.setScale(f)}else if(arguments[0]instanceof e){var h=arguments[0];this._modelType=h._modelType,this._scale=h._scale}},Vs={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};In.prototype.equals=function(e){return e instanceof In&&this._modelType===e._modelType&&this._scale===e._scale},In.prototype.compareTo=function(e){var n=e,f=this.getMaximumSignificantDigits(),h=n.getMaximumSignificantDigits();return new rt(f).compareTo(new rt(h))},In.prototype.getScale=function(){return this._scale},In.prototype.isFloating=function(){return this._modelType===In.FLOATING||this._modelType===In.FLOATING_SINGLE},In.prototype.getType=function(){return this._modelType},In.prototype.toString=function(){var e="UNKNOWN";return this._modelType===In.FLOATING?e="Floating":this._modelType===In.FLOATING_SINGLE?e="Floating-Single":this._modelType===In.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e},In.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var e=arguments[0];return ue.isNaN(e)||this._modelType===In.FLOATING_SINGLE?e:this._modelType===In.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof J){var n=arguments[0];if(this._modelType===In.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},In.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===In.FLOATING?e=16:this._modelType===In.FLOATING_SINGLE?e=6:this._modelType===In.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e},In.prototype.setScale=function(e){this._scale=Math.abs(e)},In.prototype.interfaces_=function(){return[W,fe]},In.prototype.getClass=function(){return In},In.mostPrecise=function(e,n){return e.compareTo(n)>=0?e:n},Vs.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Vs.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(In,Vs);var yi=function e(n){this._name=n||null,e.nameToTypeMap.put(n,this)},Pr={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};yi.prototype.readResolve=function(){return yi.nameToTypeMap.get(this._name)},yi.prototype.toString=function(){return this._name},yi.prototype.interfaces_=function(){return[W]},yi.prototype.getClass=function(){return yi},Pr.serialVersionUID.get=function(){return-552860263173159e4},Pr.nameToTypeMap.get=function(){return new $l},Object.defineProperties(yi,Pr),In.Type=yi,In.FIXED=new yi("FIXED"),In.FLOATING=new yi("FLOATING"),In.FLOATING_SINGLE=new yi("FLOATING SINGLE");var $r=function e(){this._precisionModel=new In,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?gt(arguments[0],ke)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof In&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},el={serialVersionUID:{configurable:!0}};$r.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new J(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new J(e.getMinX(),e.getMinY()),new J(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new J(e.getMinX(),e.getMinY()),new J(e.getMinX(),e.getMaxY()),new J(e.getMaxX(),e.getMaxY()),new J(e.getMaxX(),e.getMinY()),new J(e.getMinX(),e.getMinY())]),null)},$r.prototype.createLineString=function(e){return e?e instanceof Array?new Hn(this.getCoordinateSequenceFactory().create(e),this):gt(e,_t)?new Hn(e,this):void 0:new Hn(this.getCoordinateSequenceFactory().create([]),this)},$r.prototype.createMultiLineString=function(){return 0===arguments.length?new ca(null,this):1===arguments.length?new ca(arguments[0],this):void 0},$r.prototype.buildGeometry=function(e){for(var n=null,f=!1,h=!1,b=e.iterator();b.hasNext();){var P=b.next(),B=P.getClass();null===n&&(n=B),B!==n&&(f=!0),P.isGeometryCollectionOrDerived()&&(h=!0)}if(null===n)return this.createGeometryCollection();if(f||h)return this.createGeometryCollection($r.toGeometryArray(e));var ae=e.iterator().next();if(e.size()>1){if(ae instanceof oi)return this.createMultiPolygon($r.toPolygonArray(e));if(ae instanceof Hn)return this.createMultiLineString($r.toLineStringArray(e));if(ae instanceof ha)return this.createMultiPoint($r.toPointArray(e));_e.shouldNeverReachHere("Unhandled class: "+ae.getClass().getName())}return ae},$r.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)},$r.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof J){var e=arguments[0];return this.createPoint(null!==e?this.getCoordinateSequenceFactory().create([e]):null)}if(gt(arguments[0],_t))return new ha(arguments[0],this)}},$r.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},$r.prototype.createPolygon=function(){if(0===arguments.length)return new oi(null,null,this);if(1===arguments.length){if(gt(arguments[0],_t))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof vo)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new oi(arguments[0],arguments[1],this)},$r.prototype.getSRID=function(){return this._SRID},$r.prototype.createGeometryCollection=function(){return 0===arguments.length?new Ni(null,this):1===arguments.length?new Ni(arguments[0],this):void 0},$r.prototype.createGeometry=function(e){return new Er(this).edit(e,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},$r.prototype.getPrecisionModel=function(){return this._precisionModel},$r.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(gt(arguments[0],_t))return new vo(arguments[0],this)}},$r.prototype.createMultiPolygon=function(){return 0===arguments.length?new na(null,this):1===arguments.length?new na(arguments[0],this):void 0},$r.prototype.createMultiPoint=function(){if(0===arguments.length)return new rs(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new rs(arguments[0],this);if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(gt(arguments[0],_t)){var f=arguments[0];if(null===f)return this.createMultiPoint(new Array(0).fill(null));for(var h=new Array(f.size()).fill(null),b=0;b<f.size();b++){var P=this.getCoordinateSequenceFactory().create(1,f.getDimension());Ot.copy(f,b,P,0,1),h[b]=this.createPoint(P)}return this.createMultiPoint(h)}}},$r.prototype.interfaces_=function(){return[W]},$r.prototype.getClass=function(){return $r},$r.toMultiPolygonArray=function(e){var n=new Array(e.size()).fill(null);return e.toArray(n)},$r.toGeometryArray=function(e){if(null===e)return null;var n=new Array(e.size()).fill(null);return e.toArray(n)},$r.getDefaultCoordinateSequenceFactory=function(){return jn.instance()},$r.toMultiLineStringArray=function(e){var n=new Array(e.size()).fill(null);return e.toArray(n)},$r.toLineStringArray=function(e){var n=new Array(e.size()).fill(null);return e.toArray(n)},$r.toMultiPointArray=function(e){var n=new Array(e.size()).fill(null);return e.toArray(n)},$r.toLinearRingArray=function(e){var n=new Array(e.size()).fill(null);return e.toArray(n)},$r.toPointArray=function(e){var n=new Array(e.size()).fill(null);return e.toArray(n)},$r.toPolygonArray=function(e){var n=new Array(e.size()).fill(null);return e.toArray(n)},$r.createPointFromInternalCoord=function(e,n){return n.getPrecisionModel().makePrecise(e),n.getFactory().createPoint(e)},el.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties($r,el);var gf=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Ut=function(e){this.geometryFactory=e||new $r};Ut.prototype.read=function(e){var n,f=(n="string"==typeof e?JSON.parse(e):e).type;if(!Wn[f])throw new Error("Unknown GeoJSON type: "+n.type);return-1!==gf.indexOf(f)?Wn[f].apply(this,[n.coordinates]):Wn[f].apply(this,"GeometryCollection"===f?[n.geometries]:[n])},Ut.prototype.write=function(e){var n=e.getGeometryType();if(!_i[n])throw new Error("Geometry is not supported");return _i[n].apply(this,[e])};var Wn={Feature:function(e){var n={};for(var f in e)n[f]=e[f];if(e.geometry){if(!Wn[e.geometry.type])throw new Error("Unknown GeoJSON type: "+e.type);n.geometry=this.read(e.geometry)}return e.bbox&&(n.bbox=Wn.bbox.apply(this,[e.bbox])),n},FeatureCollection:function(e){var n={};if(e.features){n.features=[];for(var f=0;f<e.features.length;++f)n.features.push(this.read(e.features[f]))}return e.bbox&&(n.bbox=this.parse.bbox.apply(this,[e.bbox])),n},coordinates:function(e){for(var n=[],f=0;f<e.length;++f){var h=e[f];n.push(new J(h[0],h[1]))}return n},bbox:function(e){return this.geometryFactory.createLinearRing([new J(e[0],e[1]),new J(e[2],e[1]),new J(e[2],e[3]),new J(e[0],e[3]),new J(e[0],e[1])])},Point:function(e){var n=new J(e[0],e[1]);return this.geometryFactory.createPoint(n)},MultiPoint:function(e){for(var n=[],f=0;f<e.length;++f)n.push(Wn.Point.apply(this,[e[f]]));return this.geometryFactory.createMultiPoint(n)},LineString:function(e){var n=Wn.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(n)},MultiLineString:function(e){for(var n=[],f=0;f<e.length;++f)n.push(Wn.LineString.apply(this,[e[f]]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(e){for(var n=Wn.coordinates.apply(this,[e[0]]),f=this.geometryFactory.createLinearRing(n),h=[],b=1;b<e.length;++b){var B=Wn.coordinates.apply(this,[e[b]]),ae=this.geometryFactory.createLinearRing(B);h.push(ae)}return this.geometryFactory.createPolygon(f,h)},MultiPolygon:function(e){for(var n=[],f=0;f<e.length;++f)n.push(Wn.Polygon.apply(this,[e[f]]));return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(e){for(var n=[],f=0;f<e.length;++f)n.push(this.read(e[f]));return this.geometryFactory.createGeometryCollection(n)}},_i={coordinate:function(e){return[e.x,e.y]},Point:function(e){return{type:"Point",coordinates:_i.coordinate.apply(this,[e.getCoordinate()])}},MultiPoint:function(e){for(var n=[],f=0;f<e._geometries.length;++f){var b=_i.Point.apply(this,[e._geometries[f]]);n.push(b.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(e){for(var n=[],f=e.getCoordinates(),h=0;h<f.length;++h)n.push(_i.coordinate.apply(this,[f[h]]));return{type:"LineString",coordinates:n}},MultiLineString:function(e){for(var n=[],f=0;f<e._geometries.length;++f){var b=_i.LineString.apply(this,[e._geometries[f]]);n.push(b.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(e){var n=[],f=_i.LineString.apply(this,[e._shell]);n.push(f.coordinates);for(var h=0;h<e._holes.length;++h){var P=_i.LineString.apply(this,[e._holes[h]]);n.push(P.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(e){for(var n=[],f=0;f<e._geometries.length;++f){var b=_i.Polygon.apply(this,[e._geometries[f]]);n.push(b.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(e){for(var n=[],f=0;f<e._geometries.length;++f){var h=e._geometries[f],b=h.getGeometryType();n.push(_i[b].apply(this,[h]))}return{type:"GeometryCollection",geometries:n}}},Vo=function(e){this.geometryFactory=e||new $r,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ut(this.geometryFactory)};Vo.prototype.read=function(e){var n=this.parser.read(e);return this.precisionModel.getType()===In.FIXED&&this.reducePrecision(n),n},Vo.prototype.reducePrecision=function(e){var n,f;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(n=0,f=e.points.length;n<f;n++)this.precisionModel.makePrecise(e.points[n]);else if(e.geometries)for(n=0,f=e.geometries.length;n<f;n++)this.reducePrecision(e.geometries[n])};var Pu=function(){this.parser=new Ut(this.geometryFactory)};Pu.prototype.write=function(e){return this.parser.write(e)};var Ht=function(){},kn={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.opposite=function(e){return e===Ht.LEFT?Ht.RIGHT:e===Ht.RIGHT?Ht.LEFT:e},kn.ON.get=function(){return 0},kn.LEFT.get=function(){return 1},kn.RIGHT.get=function(){return 2},Object.defineProperties(Ht,kn),(k.prototype=new Error).name="EmptyStackException",(re.prototype=new di).add=function(e){return this.array_.push(e),!0},re.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]},re.prototype.push=function(e){return this.array_.push(e),e},re.prototype.pop=function(e){if(0===this.array_.length)throw new k;return this.array_.pop()},re.prototype.peek=function(){if(0===this.array_.length)throw new k;return this.array_[this.array_.length-1]},re.prototype.empty=function(){return 0===this.array_.length},re.prototype.isEmpty=function(){return this.empty()},re.prototype.search=function(e){return this.array_.indexOf(e)},re.prototype.size=function(){return this.array_.length},re.prototype.toArray=function(){for(var e=[],n=0,f=this.array_.length;n<f;n++)e.push(this.array_[n]);return e};var hr=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};hr.prototype.getCoordinate=function(){return this._minCoord},hr.prototype.getRightmostSide=function(e,n){var f=this.getRightmostSideOfSegment(e,n);return f<0&&(f=this.getRightmostSideOfSegment(e,n-1)),f<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),f},hr.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();_e.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var n=e[this._minIndex-1],f=e[this._minIndex+1],h=je.computeOrientation(this._minCoord,f,n),b=!1;(n.y<this._minCoord.y&&f.y<this._minCoord.y&&h===je.COUNTERCLOCKWISE||n.y>this._minCoord.y&&f.y>this._minCoord.y&&h===je.CLOCKWISE)&&(b=!0),b&&(this._minIndex=this._minIndex-1)},hr.prototype.getRightmostSideOfSegment=function(e,n){var f=e.getEdge().getCoordinates();if(n<0||n+1>=f.length||f[n].y===f[n+1].y)return-1;var h=Ht.LEFT;return f[n].y<f[n+1].y&&(h=Ht.RIGHT),h},hr.prototype.getEdge=function(){return this._orientedDe},hr.prototype.checkForRightmostCoordinate=function(e){for(var n=e.getEdge().getCoordinates(),f=0;f<n.length-1;f++)(null===this._minCoord||n[f].x>this._minCoord.x)&&(this._minDe=e,this._minIndex=f,this._minCoord=n[f])},hr.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode().getEdges();this._minDe=e.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},hr.prototype.findEdge=function(e){for(var n=e.iterator();n.hasNext();){var f=n.next();f.isForward()&&this.checkForRightmostCoordinate(f)}_e.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ht.LEFT&&(this._orientedDe=this._minDe.getSym())},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr};var Xi=function(e){function n(f,h){e.call(this,n.msgWithCoord(f,h)),this.pt=h?new J(h):null,this.name="TopologyException"}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getCoordinate=function(){return this.pt},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n.msgWithCoord=function(f,h){return h?f:f+" [ "+h+" ]"},n}(Ie),Hs=function(){this.array_=[]};Hs.prototype.addLast=function(e){this.array_.push(e)},Hs.prototype.removeFirst=function(){return this.array_.shift()},Hs.prototype.isEmpty=function(){return 0===this.array_.length};var zi=function(){this._finder=null,this._dirEdgeList=new zt,this._nodes=new zt,this._rightMostCoord=null,this._env=null,this._finder=new hr};zi.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();)e.next().setVisited(!1)},zi.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},zi.prototype.computeNodeDepth=function(e){for(var n=null,f=e.getEdges().iterator();f.hasNext();){var h=f.next();if(h.isVisited()||h.getSym().isVisited()){n=h;break}}if(null===n)throw new Xi("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(n);for(var b=e.getEdges().iterator();b.hasNext();){var P=b.next();P.setVisited(!0),this.copySymDepths(P)}},zi.prototype.computeDepth=function(e){this.clearVisitedEdges();var n=this._finder.getEdge();n.setEdgeDepths(Ht.RIGHT,e),this.copySymDepths(n),this.computeDepths(n)},zi.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},zi.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var n=e.next();n.getDepth(Ht.RIGHT)>=1&&n.getDepth(Ht.LEFT)<=0&&!n.isInteriorAreaEdge()&&n.setInResult(!0)}},zi.prototype.computeDepths=function(e){var n=new Iu,f=new Hs,h=e.getNode();for(f.addLast(h),n.add(h),e.setVisited(!0);!f.isEmpty();){var b=f.removeFirst();n.add(b),this.computeNodeDepth(b);for(var P=b.getEdges().iterator();P.hasNext();){var B=P.next().getSym();if(!B.isVisited()){var ae=B.getNode();n.contains(ae)||(f.addLast(ae),n.add(ae))}}}},zi.prototype.compareTo=function(e){return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},zi.prototype.getEnvelope=function(){if(null===this._env){for(var e=new Yt,n=this._dirEdgeList.iterator();n.hasNext();)for(var f=n.next().getEdge().getCoordinates(),h=0;h<f.length-1;h++)e.expandToInclude(f[h]);this._env=e}return this._env},zi.prototype.addReachable=function(e){var n=new re;for(n.add(e);!n.empty();){var f=n.pop();this.add(f,n)}},zi.prototype.copySymDepths=function(e){var n=e.getSym();n.setDepth(Ht.LEFT,e.getDepth(Ht.RIGHT)),n.setDepth(Ht.RIGHT,e.getDepth(Ht.LEFT))},zi.prototype.add=function(e,n){e.setVisited(!0),this._nodes.add(e);for(var f=e.getEdges().iterator();f.hasNext();){var h=f.next();this._dirEdgeList.add(h);var b=h.getSym().getNode();b.isVisited()||n.push(b)}},zi.prototype.getNodes=function(){return this._nodes},zi.prototype.getDirectedEdges=function(){return this._dirEdgeList},zi.prototype.interfaces_=function(){return[fe]},zi.prototype.getClass=function(){return zi};var tn=function e(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var f=arguments[0];this.init(1),this.location[Ht.ON]=f}else if(arguments[0]instanceof e){var h=arguments[0];if(this.init(h.location.length),null!==h)for(var b=0;b<this.location.length;b++)this.location[b]=h.location[b]}}else if(3===arguments.length){var P=arguments[0],B=arguments[1],ae=arguments[2];this.init(3),this.location[Ht.ON]=P,this.location[Ht.LEFT]=B,this.location[Ht.RIGHT]=ae}};tn.prototype.setAllLocations=function(e){for(var n=0;n<this.location.length;n++)this.location[n]=e},tn.prototype.isNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==de.NONE)return!1;return!0},tn.prototype.setAllLocationsIfNull=function(e){for(var n=0;n<this.location.length;n++)this.location[n]===de.NONE&&(this.location[n]=e)},tn.prototype.isLine=function(){return 1===this.location.length},tn.prototype.merge=function(e){if(e.location.length>this.location.length){var n=new Array(3).fill(null);n[Ht.ON]=this.location[Ht.ON],n[Ht.LEFT]=de.NONE,n[Ht.RIGHT]=de.NONE,this.location=n}for(var f=0;f<this.location.length;f++)this.location[f]===de.NONE&&f<e.location.length&&(this.location[f]=e.location[f])},tn.prototype.getLocations=function(){return this.location},tn.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[Ht.LEFT];this.location[Ht.LEFT]=this.location[Ht.RIGHT],this.location[Ht.RIGHT]=e},tn.prototype.toString=function(){var e=new Be;return this.location.length>1&&e.append(de.toLocationSymbol(this.location[Ht.LEFT])),e.append(de.toLocationSymbol(this.location[Ht.ON])),this.location.length>1&&e.append(de.toLocationSymbol(this.location[Ht.RIGHT])),e.toString()},tn.prototype.setLocations=function(e,n,f){this.location[Ht.ON]=e,this.location[Ht.LEFT]=n,this.location[Ht.RIGHT]=f},tn.prototype.get=function(e){return e<this.location.length?this.location[e]:de.NONE},tn.prototype.isArea=function(){return this.location.length>1},tn.prototype.isAnyNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===de.NONE)return!0;return!1},tn.prototype.setLocation=function(){1===arguments.length?this.setLocation(Ht.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},tn.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(de.NONE)},tn.prototype.isEqualOnSide=function(e,n){return this.location[n]===e.location[n]},tn.prototype.allPositionsEqual=function(e){for(var n=0;n<this.location.length;n++)if(this.location[n]!==e)return!1;return!0},tn.prototype.interfaces_=function(){return[]},tn.prototype.getClass=function(){return tn};var On=function e(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var n=arguments[0];this.elt[0]=new tn(n),this.elt[1]=new tn(n)}else if(arguments[0]instanceof e){var f=arguments[0];this.elt[0]=new tn(f.elt[0]),this.elt[1]=new tn(f.elt[1])}}else if(2===arguments.length){var h=arguments[0],b=arguments[1];this.elt[0]=new tn(de.NONE),this.elt[1]=new tn(de.NONE),this.elt[h].setLocation(b)}else if(3===arguments.length){var P=arguments[0],B=arguments[1],ae=arguments[2];this.elt[0]=new tn(P,B,ae),this.elt[1]=new tn(P,B,ae)}else if(4===arguments.length){var Le=arguments[0],tt=arguments[1],vt=arguments[2],Nt=arguments[3];this.elt[0]=new tn(de.NONE,de.NONE,de.NONE),this.elt[1]=new tn(de.NONE,de.NONE,de.NONE),this.elt[Le].setLocations(tt,vt,Nt)}};On.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e},On.prototype.setAllLocations=function(e,n){this.elt[e].setAllLocations(n)},On.prototype.isNull=function(e){return this.elt[e].isNull()},On.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},On.prototype.isLine=function(e){return this.elt[e].isLine()},On.prototype.merge=function(e){for(var n=0;n<2;n++)null===this.elt[n]&&null!==e.elt[n]?this.elt[n]=new tn(e.elt[n]):this.elt[n].merge(e.elt[n])},On.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},On.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(Ht.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},On.prototype.toString=function(){var e=new Be;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()},On.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},On.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()},On.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(Ht.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},On.prototype.isEqualOnSide=function(e,n){return this.elt[0].isEqualOnSide(e.elt[0],n)&&this.elt[1].isEqualOnSide(e.elt[1],n)},On.prototype.allPositionsEqual=function(e,n){return this.elt[e].allPositionsEqual(n)},On.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new tn(this.elt[e].location[0]))},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},On.toLineLabel=function(e){for(var n=new On(de.NONE),f=0;f<2;f++)n.setLocation(f,e.getLocation(f));return n};var Yn=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new zt,this._pts=new zt,this._label=new On(de.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new zt,this._geometryFactory=null;var e=arguments[0];this._geometryFactory=arguments[1],this.computePoints(e),this.computeRing()};Yn.prototype.computeRing=function(){if(null!==this._ring)return null;for(var e=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)e[n]=this._pts.get(n);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=je.isCCW(this._ring.getCoordinates())},Yn.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Yn.prototype.computePoints=function(e){this._startDe=e;var n=e,f=!0;do{if(null===n)throw new Xi("Found null DirectedEdge");if(n.getEdgeRing()===this)throw new Xi("Directed Edge visited twice during ring-building at "+n.getCoordinate());this._edges.add(n);var h=n.getLabel();_e.isTrue(h.isArea()),this.mergeLabel(h),this.addPoints(n.getEdge(),n.isForward(),f),f=!1,this.setEdgeRing(n,this),n=this.getNext(n)}while(n!==this._startDe)},Yn.prototype.getLinearRing=function(){return this._ring},Yn.prototype.getCoordinate=function(e){return this._pts.get(e)},Yn.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(this);n>this._maxNodeDegree&&(this._maxNodeDegree=n),e=this.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Yn.prototype.addPoints=function(e,n,f){var h=e.getCoordinates();if(n){var b=1;f&&(b=0);for(var P=b;P<h.length;P++)this._pts.add(h[P])}else{var B=h.length-2;f&&(B=h.length-1);for(var ae=B;ae>=0;ae--)this._pts.add(h[ae])}},Yn.prototype.isHole=function(){return this._isHole},Yn.prototype.setInResult=function(){var e=this._startDe;do{e.getEdge().setInResult(!0),e=e.getNext()}while(e!==this._startDe)},Yn.prototype.containsPoint=function(e){var n=this.getLinearRing();if(!n.getEnvelopeInternal().contains(e)||!je.isPointInRing(e,n.getCoordinates()))return!1;for(var f=this._holes.iterator();f.hasNext();)if(f.next().containsPoint(e))return!1;return!0},Yn.prototype.addHole=function(e){this._holes.add(e)},Yn.prototype.isShell=function(){return null===this._shell},Yn.prototype.getLabel=function(){return this._label},Yn.prototype.getEdges=function(){return this._edges},Yn.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Yn.prototype.getShell=function(){return this._shell},Yn.prototype.mergeLabel=function(){if(1===arguments.length){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(2===arguments.length){var f=arguments[1],h=arguments[0].getLocation(f,Ht.RIGHT);if(h===de.NONE)return null;if(this._label.getLocation(f)===de.NONE)return this._label.setLocation(f,h),null}},Yn.prototype.setShell=function(e){this._shell=e,null!==e&&e.addHole(this)},Yn.prototype.toPolygon=function(e){for(var n=new Array(this._holes.size()).fill(null),f=0;f<this._holes.size();f++)n[f]=this._holes.get(f).getLinearRing();return e.createPolygon(this.getLinearRing(),n)},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Ql=function(e){function n(){e.call(this,arguments[0],arguments[1])}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.setEdgeRing=function(f,h){f.setMinEdgeRing(h)},n.prototype.getNext=function(f){return f.getNextMin()},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Yn),jl=function(e){function n(){e.call(this,arguments[0],arguments[1])}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.buildMinimalRings=function(){var f=new zt,h=this._startDe;do{if(null===h.getMinEdgeRing()){var b=new Ql(h,this._geometryFactory);f.add(b)}h=h.getNext()}while(h!==this._startDe);return f},n.prototype.setEdgeRing=function(f,h){f.setEdgeRing(h)},n.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var f=this._startDe;do{f.getNode().getEdges().linkMinimalDirectedEdges(this),f=f.getNext()}while(f!==this._startDe)},n.prototype.getNext=function(f){return f.getNext()},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Yn),Ia=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};Ia.prototype.setVisited=function(e){this._isVisited=e},Ia.prototype.setInResult=function(e){this._isInResult=e},Ia.prototype.isCovered=function(){return this._isCovered},Ia.prototype.isCoveredSet=function(){return this._isCoveredSet},Ia.prototype.setLabel=function(e){this._label=e},Ia.prototype.getLabel=function(){return this._label},Ia.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0},Ia.prototype.updateIM=function(e){_e.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)},Ia.prototype.isInResult=function(){return this._isInResult},Ia.prototype.isVisited=function(){return this._isVisited},Ia.prototype.interfaces_=function(){return[]},Ia.prototype.getClass=function(){return Ia};var ou=function(e){function n(){e.call(this),this._coord=null,this._edges=null;var h=arguments[1];this._coord=arguments[0],this._edges=h,this._label=new On(0,de.NONE)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.isIncidentEdgeInResult=function(){for(var f=this.getEdges().getEdges().iterator();f.hasNext();)if(f.next().getEdge().isInResult())return!0;return!1},n.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},n.prototype.getCoordinate=function(){return this._coord},n.prototype.print=function(f){f.println("node "+this._coord+" lbl: "+this._label)},n.prototype.computeIM=function(f){},n.prototype.computeMergedLocation=function(f,h){var b=de.NONE;if(b=this._label.getLocation(h),!f.isNull(h)){var P=f.getLocation(h);b!==de.BOUNDARY&&(b=P)}return b},n.prototype.setLabel=function(){if(2!==arguments.length)return e.prototype.setLabel.apply(this,arguments);var f=arguments[0],h=arguments[1];null===this._label?this._label=new On(f,h):this._label.setLocation(f,h)},n.prototype.getEdges=function(){return this._edges},n.prototype.mergeLabel=function(){if(arguments[0]instanceof n)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof On)for(var h=arguments[0],b=0;b<2;b++){var P=this.computeMergedLocation(h,b);this._label.getLocation(b)===de.NONE&&this._label.setLocation(b,P)}},n.prototype.add=function(f){this._edges.insert(f),f.setNode(this)},n.prototype.setLabelBoundary=function(f){if(null===this._label)return null;var h=de.NONE;null!==this._label&&(h=this._label.getLocation(f)),this._label.setLocation(f,h===de.BOUNDARY?de.INTERIOR:de.BOUNDARY)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Ia),ia=function(){this.nodeMap=new V,this.nodeFact=null,this.nodeFact=arguments[0]};ia.prototype.find=function(e){return this.nodeMap.get(e)},ia.prototype.addNode=function(){if(arguments[0]instanceof J){var e=arguments[0],n=this.nodeMap.get(e);return null===n&&(n=this.nodeFact.createNode(e),this.nodeMap.put(e,n)),n}if(arguments[0]instanceof ou){var f=arguments[0],h=this.nodeMap.get(f.getCoordinate());return null===h?(this.nodeMap.put(f.getCoordinate(),f),f):(h.mergeLabel(f),h)}},ia.prototype.print=function(e){for(var n=this.iterator();n.hasNext();)n.next().print(e)},ia.prototype.iterator=function(){return this.nodeMap.values().iterator()},ia.prototype.values=function(){return this.nodeMap.values()},ia.prototype.getBoundaryNodes=function(e){for(var n=new zt,f=this.iterator();f.hasNext();){var h=f.next();h.getLabel().getLocation(e)===de.BOUNDARY&&n.add(h)}return n},ia.prototype.add=function(e){var n=e.getCoordinate();this.addNode(n).add(e)},ia.prototype.interfaces_=function(){return[]},ia.prototype.getClass=function(){return ia};var Rn=function(){},Ws={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Rn.isNorthern=function(e){return e===Rn.NE||e===Rn.NW},Rn.isOpposite=function(e,n){return e!==n&&(e-n+4)%4==2},Rn.commonHalfPlane=function(e,n){if(e===n)return e;if((e-n+4)%4==2)return-1;var f=e<n?e:n;return 0===f&&3===(e>n?e:n)?3:f},Rn.isInHalfPlane=function(e,n){return n===Rn.SE?e===Rn.SE||e===Rn.SW:e===n||e===n+1},Rn.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];if(0===e&&0===n)throw new ie("Cannot compute the quadrant for point ( "+e+", "+n+" )");return e>=0?n>=0?Rn.NE:Rn.SE:n>=0?Rn.NW:Rn.SW}if(arguments[0]instanceof J&&arguments[1]instanceof J){var f=arguments[0],h=arguments[1];if(h.x===f.x&&h.y===f.y)throw new ie("Cannot compute the quadrant for two identical points "+f);return h.x>=f.x?h.y>=f.y?Rn.NE:Rn.SE:h.y>=f.y?Rn.NW:Rn.SW}},Ws.NE.get=function(){return 0},Ws.NW.get=function(){return 1},Ws.SW.get=function(){return 2},Ws.SE.get=function(){return 3},Object.defineProperties(Rn,Ws);var Vi=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var f=arguments[1],h=arguments[2];this._edge=arguments[0],this.init(f,h),this._label=null}else if(4===arguments.length){var P=arguments[1],B=arguments[2],ae=arguments[3];this._edge=arguments[0],this.init(P,B),this._label=ae}};Vi.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:je.computeOrientation(e._p0,e._p1,this._p1)},Vi.prototype.getDy=function(){return this._dy},Vi.prototype.getCoordinate=function(){return this._p0},Vi.prototype.setNode=function(e){this._node=e},Vi.prototype.print=function(e){var n=Math.atan2(this._dy,this._dx),f=this.getClass().getName(),h=f.lastIndexOf("."),b=f.substring(h+1);e.print("  "+b+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+n+"   "+this._label)},Vi.prototype.compareTo=function(e){return this.compareDirection(e)},Vi.prototype.getDirectedCoordinate=function(){return this._p1},Vi.prototype.getDx=function(){return this._dx},Vi.prototype.getLabel=function(){return this._label},Vi.prototype.getEdge=function(){return this._edge},Vi.prototype.getQuadrant=function(){return this._quadrant},Vi.prototype.getNode=function(){return this._node},Vi.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),f=n.lastIndexOf(".");return"  "+n.substring(f+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label},Vi.prototype.computeLabel=function(e){},Vi.prototype.init=function(e,n){this._p0=e,this._p1=n,this._dx=n.x-e.x,this._dy=n.y-e.y,this._quadrant=Rn.quadrant(this._dx,this._dy),_e.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Vi.prototype.interfaces_=function(){return[fe]},Vi.prototype.getClass=function(){return Vi};var vf=function(e){function n(){var f=arguments[0],h=arguments[1];if(e.call(this,f),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=h,h)this.init(f.getCoordinate(0),f.getCoordinate(1));else{var b=f.getNumPoints()-1;this.init(f.getCoordinate(b),f.getCoordinate(b-1))}this.computeDirectedLabel()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getNextMin=function(){return this._nextMin},n.prototype.getDepth=function(f){return this._depth[f]},n.prototype.setVisited=function(f){this._isVisited=f},n.prototype.computeDirectedLabel=function(){this._label=new On(this._edge.getLabel()),this._isForward||this._label.flip()},n.prototype.getNext=function(){return this._next},n.prototype.setDepth=function(f,h){if(-999!==this._depth[f]&&this._depth[f]!==h)throw new Xi("assigned depths do not match",this.getCoordinate());this._depth[f]=h},n.prototype.isInteriorAreaEdge=function(){for(var f=!0,h=0;h<2;h++)this._label.isArea(h)&&this._label.getLocation(h,Ht.LEFT)===de.INTERIOR&&this._label.getLocation(h,Ht.RIGHT)===de.INTERIOR||(f=!1);return f},n.prototype.setNextMin=function(f){this._nextMin=f},n.prototype.print=function(f){e.prototype.print.call(this,f),f.print(" "+this._depth[Ht.LEFT]+"/"+this._depth[Ht.RIGHT]),f.print(" ("+this.getDepthDelta()+")"),this._isInResult&&f.print(" inResult")},n.prototype.setMinEdgeRing=function(f){this._minEdgeRing=f},n.prototype.isLineEdge=function(){var f=this._label.isLine(0)||this._label.isLine(1),h=!this._label.isArea(0)||this._label.allPositionsEqual(0,de.EXTERIOR),b=!this._label.isArea(1)||this._label.allPositionsEqual(1,de.EXTERIOR);return f&&h&&b},n.prototype.setEdgeRing=function(f){this._edgeRing=f},n.prototype.getMinEdgeRing=function(){return this._minEdgeRing},n.prototype.getDepthDelta=function(){var f=this._edge.getDepthDelta();return this._isForward||(f=-f),f},n.prototype.setInResult=function(f){this._isInResult=f},n.prototype.getSym=function(){return this._sym},n.prototype.isForward=function(){return this._isForward},n.prototype.getEdge=function(){return this._edge},n.prototype.printEdge=function(f){this.print(f),f.print(" "),this._isForward?this._edge.print(f):this._edge.printReverse(f)},n.prototype.setSym=function(f){this._sym=f},n.prototype.setVisitedEdge=function(f){this.setVisited(f),this._sym.setVisited(f)},n.prototype.setEdgeDepths=function(f,h){var b=this.getEdge().getDepthDelta();this._isForward||(b=-b);var P=1;f===Ht.LEFT&&(P=-1);var B=Ht.opposite(f),ae=h+b*P;this.setDepth(f,h),this.setDepth(B,ae)},n.prototype.getEdgeRing=function(){return this._edgeRing},n.prototype.isInResult=function(){return this._isInResult},n.prototype.setNext=function(f){this._next=f},n.prototype.isVisited=function(){return this._isVisited},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n.depthFactor=function(f,h){return f===de.EXTERIOR&&h===de.INTERIOR?1:f===de.INTERIOR&&h===de.EXTERIOR?-1:0},n}(Vi),yo=function(){};yo.prototype.createNode=function(e){return new ou(e,null)},yo.prototype.interfaces_=function(){return[]},yo.prototype.getClass=function(){return yo};var Jn=function(){this._edges=new zt,this._nodes=null,this._edgeEndList=new zt,0===arguments.length?this._nodes=new ia(new yo):1===arguments.length&&(this._nodes=new ia(arguments[0]))};Jn.prototype.printEdges=function(e){e.println("Edges:");for(var n=0;n<this._edges.size();n++){e.println("edge "+n+":");var f=this._edges.get(n);f.print(e),f.eiList.print(e)}},Jn.prototype.find=function(e){return this._nodes.find(e)},Jn.prototype.addNode=function(){return arguments[0]instanceof ou||arguments[0]instanceof J?this._nodes.addNode(arguments[0]):void 0},Jn.prototype.getNodeIterator=function(){return this._nodes.iterator()},Jn.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()},Jn.prototype.debugPrintln=function(e){vr.out.println(e)},Jn.prototype.isBoundaryNode=function(e,n){var f=this._nodes.find(n);if(null===f)return!1;var h=f.getLabel();return null!==h&&h.getLocation(e)===de.BOUNDARY},Jn.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkAllDirectedEdges()},Jn.prototype.matchInSameDirection=function(e,n,f,h){return!!e.equals(f)&&je.computeOrientation(e,n,h)===je.COLLINEAR&&Rn.quadrant(e,n)===Rn.quadrant(f,h)},Jn.prototype.getEdgeEnds=function(){return this._edgeEndList},Jn.prototype.debugPrint=function(e){vr.out.print(e)},Jn.prototype.getEdgeIterator=function(){return this._edges.iterator()},Jn.prototype.findEdgeInSameDirection=function(e,n){for(var f=0;f<this._edges.size();f++){var h=this._edges.get(f),b=h.getCoordinates();if(this.matchInSameDirection(e,n,b[0],b[1])||this.matchInSameDirection(e,n,b[b.length-1],b[b.length-2]))return h}return null},Jn.prototype.insertEdge=function(e){this._edges.add(e)},Jn.prototype.findEdgeEnd=function(e){for(var n=this.getEdgeEnds().iterator();n.hasNext();){var f=n.next();if(f.getEdge()===e)return f}return null},Jn.prototype.addEdges=function(e){for(var n=e.iterator();n.hasNext();){var f=n.next();this._edges.add(f);var h=new vf(f,!0),b=new vf(f,!1);h.setSym(b),b.setSym(h),this.add(h),this.add(b)}},Jn.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)},Jn.prototype.getNodes=function(){return this._nodes.values()},Jn.prototype.findEdge=function(e,n){for(var f=0;f<this._edges.size();f++){var h=this._edges.get(f),b=h.getCoordinates();if(e.equals(b[0])&&n.equals(b[1]))return h}return null},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.linkResultDirectedEdges=function(e){for(var n=e.iterator();n.hasNext();)n.next().getEdges().linkResultDirectedEdges()};var wa=function(){this._geometryFactory=null,this._shellList=new zt,this._geometryFactory=arguments[0]};wa.prototype.sortShellsAndHoles=function(e,n,f){for(var h=e.iterator();h.hasNext();){var b=h.next();b.isHole()?f.add(b):n.add(b)}},wa.prototype.computePolygons=function(e){for(var n=new zt,f=e.iterator();f.hasNext();){var h=f.next().toPolygon(this._geometryFactory);n.add(h)}return n},wa.prototype.placeFreeHoles=function(e,n){for(var f=n.iterator();f.hasNext();){var h=f.next();if(null===h.getShell()){var b=this.findEdgeRingContaining(h,e);if(null===b)throw new Xi("unable to assign hole to a shell",h.getCoordinate(0));h.setShell(b)}}},wa.prototype.buildMinimalEdgeRings=function(e,n,f){for(var h=new zt,b=e.iterator();b.hasNext();){var P=b.next();if(P.getMaxNodeDegree()>2){P.linkDirectedEdgesForMinimalEdgeRings();var B=P.buildMinimalRings(),ae=this.findShell(B);null!==ae?(this.placePolygonHoles(ae,B),n.add(ae)):f.addAll(B)}else h.add(P)}return h},wa.prototype.containsPoint=function(e){for(var n=this._shellList.iterator();n.hasNext();)if(n.next().containsPoint(e))return!0;return!1},wa.prototype.buildMaximalEdgeRings=function(e){for(var n=new zt,f=e.iterator();f.hasNext();){var h=f.next();if(h.isInResult()&&h.getLabel().isArea()&&null===h.getEdgeRing()){var b=new jl(h,this._geometryFactory);n.add(b),b.setInResult()}}return n},wa.prototype.placePolygonHoles=function(e,n){for(var f=n.iterator();f.hasNext();){var h=f.next();h.isHole()&&h.setShell(e)}},wa.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},wa.prototype.findEdgeRingContaining=function(e,n){for(var f=e.getLinearRing(),h=f.getEnvelopeInternal(),b=f.getCoordinateN(0),P=null,B=null,ae=n.iterator();ae.hasNext();){var Le=ae.next(),tt=Le.getLinearRing(),vt=tt.getEnvelopeInternal();null!==P&&(B=P.getLinearRing().getEnvelopeInternal());var Nt=!1;vt.contains(h)&&je.isPointInRing(b,tt.getCoordinates())&&(Nt=!0),Nt&&(null===P||B.contains(vt))&&(P=Le)}return P},wa.prototype.findShell=function(e){for(var n=0,f=null,h=e.iterator();h.hasNext();){var b=h.next();b.isHole()||(f=b,n++)}return _e.isTrue(n<=1,"found two shells in MinimalEdgeRing list"),f},wa.prototype.add=function(){if(1===arguments.length){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(2===arguments.length){var n=arguments[0];Jn.linkResultDirectedEdges(arguments[1]);var h=this.buildMaximalEdgeRings(n),b=new zt,P=this.buildMinimalEdgeRings(h,this._shellList,b);this.sortShellsAndHoles(P,this._shellList,b),this.placeFreeHoles(this._shellList,b)}},wa.prototype.interfaces_=function(){return[]},wa.prototype.getClass=function(){return wa};var ws=function(){};ws.prototype.getBounds=function(){},ws.prototype.interfaces_=function(){return[]},ws.prototype.getClass=function(){return ws};var Za=function(){this._bounds=null,this._item=null;var n=arguments[1];this._bounds=arguments[0],this._item=n};Za.prototype.getItem=function(){return this._item},Za.prototype.getBounds=function(){return this._bounds},Za.prototype.interfaces_=function(){return[ws,W]},Za.prototype.getClass=function(){return Za};var Ho=function(){this._size=null,this._items=null,this._size=0,this._items=new zt,this._items.add(null)};Ho.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e},Ho.prototype.size=function(){return this._size},Ho.prototype.reorder=function(e){for(var n=null,f=this._items.get(e);2*e<=this._size&&((n=2*e)!==this._size&&this._items.get(n+1).compareTo(this._items.get(n))<0&&n++,this._items.get(n).compareTo(f)<0);e=n)this._items.set(e,this._items.get(n));this._items.set(e,f)},Ho.prototype.clear=function(){this._size=0,this._items.clear()},Ho.prototype.isEmpty=function(){return 0===this._size},Ho.prototype.add=function(e){this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)this._items.set(n,this._items.get(Math.trunc(n/2)));this._items.set(n,e)},Ho.prototype.interfaces_=function(){return[]},Ho.prototype.getClass=function(){return Ho};var Wo=function(){};Wo.prototype.visitItem=function(e){},Wo.prototype.interfaces_=function(){return[]},Wo.prototype.getClass=function(){return Wo};var bs=function(){};bs.prototype.insert=function(e,n){},bs.prototype.remove=function(e,n){},bs.prototype.query=function(){},bs.prototype.interfaces_=function(){return[]},bs.prototype.getClass=function(){return bs};var Mi=function(){this._childBoundables=new zt,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},ec={serialVersionUID:{configurable:!0}};Mi.prototype.getLevel=function(){return this._level},Mi.prototype.size=function(){return this._childBoundables.size()},Mi.prototype.getChildBoundables=function(){return this._childBoundables},Mi.prototype.addChildBoundable=function(e){_e.isTrue(null===this._bounds),this._childBoundables.add(e)},Mi.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Mi.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Mi.prototype.interfaces_=function(){return[ws,W]},Mi.prototype.getClass=function(){return Mi},ec.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Mi,ec);var ro=function(){};ro.reverseOrder=function(){return{compare:function(e,n){return n.compareTo(e)}}},ro.min=function(e){return ro.sort(e),e.get(0)},ro.sort=function(e,n){var f=e.toArray();n?Fo.sort(f,n):Fo.sort(f);for(var h=e.iterator(),b=0,P=f.length;b<P;b++)h.next(),h.set(f[b])},ro.singletonList=function(e){var n=new zt;return n.add(e),n};var xi=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var n=arguments[1],f=arguments[2];this._boundable1=arguments[0],this._boundable2=n,this._itemDistance=f,this._distance=this.distance()};xi.prototype.expandToQueue=function(e,n){var f=xi.isComposite(this._boundable1),h=xi.isComposite(this._boundable2);if(f&&h)return xi.area(this._boundable1)>xi.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,n),null):(this.expand(this._boundable2,this._boundable1,e,n),null);if(f)return this.expand(this._boundable1,this._boundable2,e,n),null;if(h)return this.expand(this._boundable2,this._boundable1,e,n),null;throw new ie("neither boundable is composite")},xi.prototype.isLeaves=function(){return!(xi.isComposite(this._boundable1)||xi.isComposite(this._boundable2))},xi.prototype.compareTo=function(e){return this._distance<e._distance?-1:this._distance>e._distance?1:0},xi.prototype.expand=function(e,n,f,h){for(var b=e.getChildBoundables().iterator();b.hasNext();){var P=b.next(),B=new xi(P,n,this._itemDistance);B.getDistance()<h&&f.add(B)}},xi.prototype.getBoundable=function(e){return 0===e?this._boundable1:this._boundable2},xi.prototype.getDistance=function(){return this._distance},xi.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},xi.prototype.interfaces_=function(){return[fe]},xi.prototype.getClass=function(){return xi},xi.area=function(e){return e.getBounds().getArea()},xi.isComposite=function(e){return e instanceof Mi};var Ui=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new zt,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=e.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var f=arguments[0];_e.isTrue(f>1,"Node capacity must be greater than 1"),this._nodeCapacity=f}},mf={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Ui.prototype.getNodeCapacity=function(){return this._nodeCapacity},Ui.prototype.lastNode=function(e){return e.get(e.size()-1)},Ui.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var f=n.next();f instanceof Mi?e+=this.size(f):f instanceof Za&&(e+=1)}return e}},Ui.prototype.removeItem=function(e,n){for(var f=null,h=e.getChildBoundables().iterator();h.hasNext();){var b=h.next();b instanceof Za&&b.getItem()===n&&(f=b)}return null!==f&&(e.getChildBoundables().remove(f),!0)},Ui.prototype.itemsTree=function(){if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new zt:e}if(1===arguments.length){for(var n=arguments[0],f=new zt,h=n.getChildBoundables().iterator();h.hasNext();){var b=h.next();if(b instanceof Mi){var P=this.itemsTree(b);null!==P&&f.add(P)}else b instanceof Za?f.add(b.getItem()):_e.shouldNeverReachHere()}return f.size()<=0?null:f}},Ui.prototype.insert=function(e,n){_e.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Za(e,n))},Ui.prototype.boundablesAtLevel=function(){if(1===arguments.length){var e=arguments[0],n=new zt;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var f=arguments[0],h=arguments[1],b=arguments[2];if(_e.isTrue(f>-2),h.getLevel()===f)return b.add(h),null;for(var P=h.getChildBoundables().iterator();P.hasNext();){var B=P.next();B instanceof Mi?this.boundablesAtLevel(f,B,b):(_e.isTrue(B instanceof Za),-1===f&&b.add(B))}return null}},Ui.prototype.query=function(){if(1===arguments.length){var e=arguments[0];this.build();var n=new zt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var f=arguments[0],h=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),f)&&this.query(f,this._root,h)}else if(3===arguments.length)if(gt(arguments[2],Wo)&&arguments[0]instanceof Object&&arguments[1]instanceof Mi)for(var b=arguments[0],B=arguments[2],ae=arguments[1].getChildBoundables(),Le=0;Le<ae.size();Le++){var tt=ae.get(Le);this.getIntersectsOp().intersects(tt.getBounds(),b)&&(tt instanceof Mi?this.query(b,tt,B):tt instanceof Za?B.visitItem(tt.getItem()):_e.shouldNeverReachHere())}else if(gt(arguments[2],di)&&arguments[0]instanceof Object&&arguments[1]instanceof Mi)for(var vt=arguments[0],qt=arguments[2],kt=arguments[1].getChildBoundables(),Ft=0;Ft<kt.size();Ft++){var Zt=kt.get(Ft);this.getIntersectsOp().intersects(Zt.getBounds(),vt)&&(Zt instanceof Mi?this.query(vt,Zt,qt):Zt instanceof Za?qt.add(Zt.getItem()):_e.shouldNeverReachHere())}},Ui.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Ui.prototype.getRoot=function(){return this.build(),this._root},Ui.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var f=arguments[0],h=arguments[1],b=arguments[2],P=this.removeItem(h,b);if(P)return!0;for(var B=null,ae=h.getChildBoundables().iterator();ae.hasNext();){var Le=ae.next();if(this.getIntersectsOp().intersects(Le.getBounds(),f)&&Le instanceof Mi&&(P=this.remove(f,Le,b))){B=Le;break}}return null!==B&&B.getChildBoundables().isEmpty()&&h.getChildBoundables().remove(B),P}},Ui.prototype.createHigherLevels=function(e,n){_e.isTrue(!e.isEmpty());var f=this.createParentBoundables(e,n+1);return 1===f.size()?f.get(0):this.createHigherLevels(f,n+1)},Ui.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var f=n.next();if(f instanceof Mi){var h=this.depth(f);h>e&&(e=h)}}return e+1}},Ui.prototype.createParentBoundables=function(e,n){_e.isTrue(!e.isEmpty());var f=new zt;f.add(this.createNode(n));var h=new zt(e);ro.sort(h,this.getComparator());for(var b=h.iterator();b.hasNext();){var P=b.next();this.lastNode(f).getChildBoundables().size()===this.getNodeCapacity()&&f.add(this.createNode(n)),this.lastNode(f).addChildBoundable(P)}return f},Ui.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Ui.prototype.interfaces_=function(){return[W]},Ui.prototype.getClass=function(){return Ui},Ui.compareDoubles=function(e,n){return e>n?1:e<n?-1:0},mf.IntersectsOp.get=function(){return tc},mf.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},mf.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Ui,mf);var tc=function(){},su=function(){};su.prototype.distance=function(e,n){},su.prototype.interfaces_=function(){return[]},su.prototype.getClass=function(){return su};var rc=function(e){function n(h){e.call(this,h=h||n.DEFAULT_NODE_CAPACITY)}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var f={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(h,b){_e.isTrue(h.length>0);for(var P=new zt,B=0;B<h.length;B++)P.addAll(this.createParentBoundablesFromVerticalSlice(h[B],b));return P},n.prototype.createNode=function(h){return new nc(h)},n.prototype.size=function(){return 0===arguments.length?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return e.prototype.insert.apply(this,arguments);var h=arguments[0],b=arguments[1];if(h.isNull())return null;e.prototype.insert.call(this,h,b)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(h,b){for(var P=Math.trunc(Math.ceil(h.size()/b)),B=new Array(b).fill(null),ae=h.iterator(),Le=0;Le<b;Le++){B[Le]=new zt;for(var tt=0;ae.hasNext()&&tt<P;){var vt=ae.next();B[Le].add(vt),tt++}}return B},n.prototype.query=function(){if(1===arguments.length)return e.prototype.query.call(this,arguments[0]);2===arguments.length?e.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(gt(arguments[2],Wo)&&arguments[0]instanceof Object&&arguments[1]instanceof Mi||gt(arguments[2],di)&&arguments[0]instanceof Object&&arguments[1]instanceof Mi)&&e.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(h,b){return e.prototype.createParentBoundables.call(this,h,b)},n.prototype.remove=function(){return 2===arguments.length?e.prototype.remove.call(this,arguments[0],arguments[1]):e.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(h,b){_e.isTrue(!h.isEmpty());var P=Math.trunc(Math.ceil(h.size()/this.getNodeCapacity())),B=new zt(h);ro.sort(B,n.xComparator);var ae=this.verticalSlices(B,Math.trunc(Math.ceil(Math.sqrt(P))));return this.createParentBoundablesFromVerticalSlices(ae,b)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(gt(arguments[0],su)){var h=arguments[0],b=new xi(this.getRoot(),this.getRoot(),h);return this.nearestNeighbour(b)}if(arguments[0]instanceof xi)return this.nearestNeighbour(arguments[0],ue.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof n&&gt(arguments[1],su)){var B=arguments[0],ae=arguments[1],Le=new xi(this.getRoot(),B.getRoot(),ae);return this.nearestNeighbour(Le)}if(arguments[0]instanceof xi&&"number"==typeof arguments[1]){var tt=arguments[0],vt=arguments[1],Nt=null,qt=new Ho;for(qt.add(tt);!qt.isEmpty()&&vt>0;){var kt=qt.poll(),Ft=kt.getDistance();if(Ft>=vt)break;kt.isLeaves()?(vt=Ft,Nt=kt):kt.expandToQueue(qt,vt)}return[Nt.getBoundable(0).getItem(),Nt.getBoundable(1).getItem()]}}else if(3===arguments.length){var wr=arguments[2],Cr=new Za(arguments[0],arguments[1]),qr=new xi(this.getRoot(),Cr,wr);return this.nearestNeighbour(qr)[0]}},n.prototype.interfaces_=function(){return[bs,W]},n.prototype.getClass=function(){return n},n.centreX=function(h){return n.avg(h.getMinX(),h.getMaxX())},n.avg=function(h,b){return(h+b)/2},n.centreY=function(h){return n.avg(h.getMinY(),h.getMaxY())},f.STRtreeNode.get=function(){return nc},f.serialVersionUID.get=function(){return 0x39920f7d5f261e0},f.xComparator.get=function(){return{interfaces_:function(){return[be]},compare:function(h,b){return e.compareDoubles(n.centreX(h.getBounds()),n.centreX(b.getBounds()))}}},f.yComparator.get=function(){return{interfaces_:function(){return[be]},compare:function(h,b){return e.compareDoubles(n.centreY(h.getBounds()),n.centreY(b.getBounds()))}}},f.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(h,b){return h.intersects(b)}}},f.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,f),n}(Ui),nc=function(e){function n(){e.call(this,arguments[0])}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.computeBounds=function(){for(var f=null,h=this.getChildBoundables().iterator();h.hasNext();){var b=h.next();null===f?f=new Yt(b.getBounds()):f.expandToInclude(b.getBounds())}return f},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Mi),ba=function(){};ba.prototype.interfaces_=function(){return[]},ba.prototype.getClass=function(){return ba},ba.relativeSign=function(e,n){return e<n?-1:e>n?1:0},ba.compare=function(e,n,f){if(n.equals2D(f))return 0;var h=ba.relativeSign(n.x,f.x),b=ba.relativeSign(n.y,f.y);switch(e){case 0:return ba.compareValue(h,b);case 1:return ba.compareValue(b,h);case 2:return ba.compareValue(b,-h);case 3:return ba.compareValue(-h,b);case 4:return ba.compareValue(-h,-b);case 5:return ba.compareValue(-b,-h);case 6:return ba.compareValue(-b,h);case 7:return ba.compareValue(h,-b)}return _e.shouldNeverReachHere("invalid octant value"),0},ba.compareValue=function(e,n){return e<0?-1:e>0?1:n<0?-1:n>0?1:0};var ns=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],n=arguments[1],f=arguments[2],h=arguments[3];this._segString=e,this.coord=new J(n),this.segmentIndex=f,this._segmentOctant=h,this._isInterior=!n.equals2D(e.getCoordinate(f))};ns.prototype.getCoordinate=function(){return this.coord},ns.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)},ns.prototype.compareTo=function(e){var n=e;return this.segmentIndex<n.segmentIndex?-1:this.segmentIndex>n.segmentIndex?1:this.coord.equals2D(n.coord)?0:ba.compare(this._segmentOctant,this.coord,n.coord)},ns.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===e},ns.prototype.isInterior=function(){return this._isInterior},ns.prototype.interfaces_=function(){return[fe]},ns.prototype.getClass=function(){return ns};var aa=function(){this._nodeMap=new V,this._edge=null,this._edge=arguments[0]};aa.prototype.getSplitCoordinates=function(){var e=new la;this.addEndpoints();for(var n=this.iterator(),f=n.next();n.hasNext();){var h=n.next();this.addEdgeCoordinates(f,h,e),f=h}return e.toCoordinateArray()},aa.prototype.addCollapsedNodes=function(){var e=new zt;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var n=e.iterator();n.hasNext();){var f=n.next().intValue();this.add(this._edge.getCoordinate(f),f)}},aa.prototype.print=function(e){e.println("Intersections:");for(var n=this.iterator();n.hasNext();)n.next().print(e)},aa.prototype.findCollapsesFromExistingVertices=function(e){for(var n=0;n<this._edge.size()-2;n++){var f=this._edge.getCoordinate(n),h=this._edge.getCoordinate(n+2);f.equals2D(h)&&e.add(new rt(n+1))}},aa.prototype.addEdgeCoordinates=function(e,n,f){var h=this._edge.getCoordinate(n.segmentIndex),b=n.isInterior()||!n.coord.equals2D(h);f.add(new J(e.coord),!1);for(var P=e.segmentIndex+1;P<=n.segmentIndex;P++)f.add(this._edge.getCoordinate(P));b&&f.add(new J(n.coord))},aa.prototype.iterator=function(){return this._nodeMap.values().iterator()},aa.prototype.addSplitEdges=function(e){this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),f=n.next();n.hasNext();){var h=n.next(),b=this.createSplitEdge(f,h);e.add(b),f=h}},aa.prototype.findCollapseIndex=function(e,n,f){if(!e.coord.equals2D(n.coord))return!1;var h=n.segmentIndex-e.segmentIndex;return n.isInterior()||h--,1===h&&(f[0]=e.segmentIndex+1,!0)},aa.prototype.findCollapsesFromInsertedNodes=function(e){for(var n=new Array(1).fill(null),f=this.iterator(),h=f.next();f.hasNext();){var b=f.next();this.findCollapseIndex(h,b,n)&&e.add(new rt(n[0])),h=b}},aa.prototype.getEdge=function(){return this._edge},aa.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)},aa.prototype.createSplitEdge=function(e,n){var f=n.segmentIndex-e.segmentIndex+2,h=this._edge.getCoordinate(n.segmentIndex),b=n.isInterior()||!n.coord.equals2D(h);b||f--;var P=new Array(f).fill(null),B=0;P[B++]=new J(e.coord);for(var ae=e.segmentIndex+1;ae<=n.segmentIndex;ae++)P[B++]=this._edge.getCoordinate(ae);return b&&(P[B]=new J(n.coord)),new gi(P,this._edge.getData())},aa.prototype.add=function(e,n){var f=new ns(this._edge,e,n,this._edge.getSegmentOctant(n)),h=this._nodeMap.get(f);return null!==h?(_e.isTrue(h.coord.equals2D(e),"Found equal nodes with different coordinates"),h):(this._nodeMap.put(f,f),f)},aa.prototype.checkSplitEdgesCorrectness=function(e){var n=this._edge.getCoordinates(),f=e.get(0).getCoordinate(0);if(!f.equals2D(n[0]))throw new Ie("bad split edge start point at "+f);var h=e.get(e.size()-1).getCoordinates(),b=h[h.length-1];if(!b.equals2D(n[n.length-1]))throw new Ie("bad split edge end point at "+b)},aa.prototype.interfaces_=function(){return[]},aa.prototype.getClass=function(){return aa};var Zs=function(){};Zs.prototype.interfaces_=function(){return[]},Zs.prototype.getClass=function(){return Zs},Zs.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];if(0===e&&0===n)throw new ie("Cannot compute the octant for point ( "+e+", "+n+" )");var f=Math.abs(e),h=Math.abs(n);return e>=0?n>=0?f>=h?0:1:f>=h?7:6:n>=0?f>=h?3:2:f>=h?4:5}if(arguments[0]instanceof J&&arguments[1]instanceof J){var b=arguments[0],P=arguments[1],B=P.x-b.x,ae=P.y-b.y;if(0===B&&0===ae)throw new ie("Cannot compute the octant for two identical points "+b);return Zs.octant(B,ae)}};var no=function(){};no.prototype.getCoordinates=function(){},no.prototype.size=function(){},no.prototype.getCoordinate=function(e){},no.prototype.isClosed=function(){},no.prototype.setData=function(e){},no.prototype.getData=function(){},no.prototype.interfaces_=function(){return[]},no.prototype.getClass=function(){return no};var uu=function(){};uu.prototype.addIntersection=function(e,n){},uu.prototype.interfaces_=function(){return[no]},uu.prototype.getClass=function(){return uu};var gi=function(){this._nodeList=new aa(this),this._pts=null,this._data=null;var n=arguments[1];this._pts=arguments[0],this._data=n};gi.prototype.getCoordinates=function(){return this._pts},gi.prototype.size=function(){return this._pts.length},gi.prototype.getCoordinate=function(e){return this._pts[e]},gi.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},gi.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))},gi.prototype.setData=function(e){this._data=e},gi.prototype.safeOctant=function(e,n){return e.equals2D(n)?0:Zs.octant(e,n)},gi.prototype.getData=function(){return this._data},gi.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var h=arguments[1],P=new J(arguments[0].getIntersection(arguments[3]));this.addIntersection(P,h)}},gi.prototype.toString=function(){return pt.toLineString(new fi(this._pts))},gi.prototype.getNodeList=function(){return this._nodeList},gi.prototype.addIntersectionNode=function(e,n){var f=n,h=f+1;return h<this._pts.length&&e.equals2D(this._pts[h])&&(f=h),this._nodeList.add(e,f)},gi.prototype.addIntersections=function(e,n,f){for(var h=0;h<e.getIntersectionNum();h++)this.addIntersection(e,n,f,h)},gi.prototype.interfaces_=function(){return[uu]},gi.prototype.getClass=function(){return gi},gi.getNodedSubstrings=function(){if(1===arguments.length){var e=arguments[0],n=new zt;return gi.getNodedSubstrings(e,n),n}if(2===arguments.length)for(var h=arguments[1],b=arguments[0].iterator();b.hasNext();)b.next().getNodeList().addSplitEdges(h)};var mr=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new J,this.p1=new J;else if(1===arguments.length){var e=arguments[0];this.p0=new J(e.p0),this.p1=new J(e.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var h=arguments[2],b=arguments[3];this.p0=new J(arguments[0],arguments[1]),this.p1=new J(h,b)}},ic={serialVersionUID:{configurable:!0}};mr.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},mr.prototype.orientationIndex=function(){if(arguments[0]instanceof mr){var e=arguments[0],n=je.orientationIndex(this.p0,this.p1,e.p0),f=je.orientationIndex(this.p0,this.p1,e.p1);return n>=0&&f>=0||n<=0&&f<=0?Math.max(n,f):0}if(arguments[0]instanceof J)return je.orientationIndex(this.p0,this.p1,arguments[0])},mr.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])},mr.prototype.isVertical=function(){return this.p0.x===this.p1.x},mr.prototype.equals=function(e){if(!(e instanceof mr))return!1;var n=e;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)},mr.prototype.intersection=function(e){var n=new ze;return n.computeIntersection(this.p0,this.p1,e.p0,e.p1),n.hasIntersection()?n.getIntersection(0):null},mr.prototype.project=function(){if(arguments[0]instanceof J){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new J(e);var n=this.projectionFactor(e),f=new J;return f.x=this.p0.x+n*(this.p1.x-this.p0.x),f.y=this.p0.y+n*(this.p1.y-this.p0.y),f}if(arguments[0]instanceof mr){var h=arguments[0],b=this.projectionFactor(h.p0),P=this.projectionFactor(h.p1);if(b>=1&&P>=1||b<=0&&P<=0)return null;var B=this.project(h.p0);b<0&&(B=this.p0),b>1&&(B=this.p1);var ae=this.project(h.p1);return P<0&&(ae=this.p0),P>1&&(ae=this.p1),new mr(B,ae)}},mr.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},mr.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},mr.prototype.getCoordinate=function(e){return 0===e?this.p0:this.p1},mr.prototype.distancePerpendicular=function(e){return je.distancePointLinePerpendicular(e,this.p0,this.p1)},mr.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},mr.prototype.midPoint=function(){return mr.midPoint(this.p0,this.p1)},mr.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var n=this.p1.x-this.p0.x,f=this.p1.y-this.p0.y,h=n*n+f*f;return h<=0?ue.NaN:((e.x-this.p0.x)*n+(e.y-this.p0.y)*f)/h},mr.prototype.closestPoints=function(e){var n=this.intersection(e);if(null!==n)return[n,n];var f=new Array(2).fill(null),h=ue.MAX_VALUE,b=null,P=this.closestPoint(e.p0);h=P.distance(e.p0),f[0]=P,f[1]=e.p0;var B=this.closestPoint(e.p1);(b=B.distance(e.p1))<h&&(h=b,f[0]=B,f[1]=e.p1);var ae=e.closestPoint(this.p0);(b=ae.distance(this.p0))<h&&(h=b,f[0]=this.p0,f[1]=ae);var Le=e.closestPoint(this.p1);return(b=Le.distance(this.p1))<h&&(h=b,f[0]=this.p1,f[1]=Le),f},mr.prototype.closestPoint=function(e){var n=this.projectionFactor(e);return n>0&&n<1?this.project(e):this.p0.distance(e)<this.p1.distance(e)?this.p0:this.p1},mr.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},mr.prototype.getLength=function(){return this.p0.distance(this.p1)},mr.prototype.compareTo=function(e){var n=e,f=this.p0.compareTo(n.p0);return 0!==f?f:this.p1.compareTo(n.p1)},mr.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e},mr.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)},mr.prototype.lineIntersection=function(e){try{return fr.intersection(this.p0,this.p1,e.p0,e.p1)}catch(n){if(!(n instanceof rr))throw n}return null},mr.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},mr.prototype.pointAlongOffset=function(e,n){var f=this.p0.x+e*(this.p1.x-this.p0.x),h=this.p0.y+e*(this.p1.y-this.p0.y),b=this.p1.x-this.p0.x,P=this.p1.y-this.p0.y,B=Math.sqrt(b*b+P*P),ae=0,Le=0;if(0!==n){if(B<=0)throw new Error("Cannot compute offset from zero-length line segment");ae=n*b/B,Le=n*P/B}return new J(f-Le,h+ae)},mr.prototype.setCoordinates=function(){if(1===arguments.length){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(2===arguments.length){var n=arguments[0],f=arguments[1];this.p0.x=n.x,this.p0.y=n.y,this.p1.x=f.x,this.p1.y=f.y}},mr.prototype.segmentFraction=function(e){var n=this.projectionFactor(e);return n<0?n=0:(n>1||ue.isNaN(n))&&(n=1),n},mr.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},mr.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},mr.prototype.distance=function(){if(arguments[0]instanceof mr){var e=arguments[0];return je.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof J)return je.distancePointLine(arguments[0],this.p0,this.p1)},mr.prototype.pointAlong=function(e){var n=new J;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n},mr.prototype.hashCode=function(){var e=ue.doubleToLongBits(this.p0.x);e^=31*ue.doubleToLongBits(this.p0.y);var n=Math.trunc(e)^Math.trunc(e>>32),f=ue.doubleToLongBits(this.p1.x);return f^=31*ue.doubleToLongBits(this.p1.y),n^Math.trunc(f)^Math.trunc(f>>32)},mr.prototype.interfaces_=function(){return[fe,W]},mr.prototype.getClass=function(){return mr},mr.midPoint=function(e,n){return new J((e.x+n.x)/2,(e.y+n.y)/2)},ic.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(mr,ic);var Tu=function(){this.tempEnv1=new Yt,this.tempEnv2=new Yt,this._overlapSeg1=new mr,this._overlapSeg2=new mr};Tu.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var f=arguments[2],h=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),f.getLineSegment(h,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Tu.prototype.interfaces_=function(){return[]},Tu.prototype.getClass=function(){return Tu};var Na=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var n=arguments[1],f=arguments[2],h=arguments[3];this._pts=arguments[0],this._start=n,this._end=f,this._context=h};Na.prototype.getLineSegment=function(e,n){n.p0=this._pts[e],n.p1=this._pts[e+1]},Na.prototype.computeSelect=function(e,n,f,h){if(h.tempEnv1.init(this._pts[n],this._pts[f]),f-n==1)return h.select(this,n),null;if(!e.intersects(h.tempEnv1))return null;var B=Math.trunc((n+f)/2);n<B&&this.computeSelect(e,n,B,h),B<f&&this.computeSelect(e,B,f,h)},Na.prototype.getCoordinates=function(){for(var e=new Array(this._end-this._start+1).fill(null),n=0,f=this._start;f<=this._end;f++)e[n++]=this._pts[f];return e},Na.prototype.computeOverlaps=function(e,n){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,n)},Na.prototype.setId=function(e){this._id=e},Na.prototype.select=function(e,n){this.computeSelect(e,this._start,this._end,n)},Na.prototype.getEnvelope=function(){return null===this._env&&(this._env=new Yt(this._pts[this._start],this._pts[this._end])),this._env},Na.prototype.getEndIndex=function(){return this._end},Na.prototype.getStartIndex=function(){return this._start},Na.prototype.getContext=function(){return this._context},Na.prototype.getId=function(){return this._id},Na.prototype.computeOverlapsInternal=function(e,n,f,h,b,P){var B=this._pts[e],ae=this._pts[n],Le=f._pts[h],tt=f._pts[b];if(n-e==1&&b-h==1)return P.overlap(this,e,f,h),null;if(P.tempEnv1.init(B,ae),P.tempEnv2.init(Le,tt),!P.tempEnv1.intersects(P.tempEnv2))return null;var vt=Math.trunc((e+n)/2),Nt=Math.trunc((h+b)/2);e<vt&&(h<Nt&&this.computeOverlapsInternal(e,vt,f,h,Nt,P),Nt<b&&this.computeOverlapsInternal(e,vt,f,Nt,b,P)),vt<n&&(h<Nt&&this.computeOverlapsInternal(vt,n,f,h,Nt,P),Nt<b&&this.computeOverlapsInternal(vt,n,f,Nt,b,P))},Na.prototype.interfaces_=function(){return[]},Na.prototype.getClass=function(){return Na};var io=function(){};io.prototype.interfaces_=function(){return[]},io.prototype.getClass=function(){return io},io.getChainStartIndices=function(e){var n=0,f=new zt;f.add(new rt(n));do{var h=io.findChainEnd(e,n);f.add(new rt(h)),n=h}while(n<e.length-1);return io.toIntArray(f)},io.findChainEnd=function(e,n){for(var f=n;f<e.length-1&&e[f].equals2D(e[f+1]);)f++;if(f>=e.length-1)return e.length-1;for(var h=Rn.quadrant(e[f],e[f+1]),b=n+1;b<e.length&&(e[b-1].equals2D(e[b])||Rn.quadrant(e[b-1],e[b])===h);)b++;return b-1},io.getChains=function(){if(1===arguments.length)return io.getChains(arguments[0],null);if(2===arguments.length){for(var n=arguments[0],f=arguments[1],h=new zt,b=io.getChainStartIndices(n),P=0;P<b.length-1;P++){var B=new Na(n,b[P],b[P+1],f);h.add(B)}return h}},io.toIntArray=function(e){for(var n=new Array(e.size()).fill(null),f=0;f<n.length;f++)n[f]=e.get(f).intValue();return n};var is=function(){};is.prototype.computeNodes=function(e){},is.prototype.getNodedSubstrings=function(){},is.prototype.interfaces_=function(){return[]},is.prototype.getClass=function(){return is};var Lu=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};Lu.prototype.setSegmentIntersector=function(e){this._segInt=e},Lu.prototype.interfaces_=function(){return[is]},Lu.prototype.getClass=function(){return Lu};var tl=function(e){function n(h){h?e.call(this,h):e.call(this),this._monoChains=new zt,this._index=new rc,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var f={SegmentOverlapAction:{configurable:!0}};return n.prototype.getMonotoneChains=function(){return this._monoChains},n.prototype.getNodedSubstrings=function(){return gi.getNodedSubstrings(this._nodedSegStrings)},n.prototype.getIndex=function(){return this._index},n.prototype.add=function(h){for(var b=io.getChains(h.getCoordinates(),h).iterator();b.hasNext();){var P=b.next();P.setId(this._idCounter++),this._index.insert(P.getEnvelope(),P),this._monoChains.add(P)}},n.prototype.computeNodes=function(h){this._nodedSegStrings=h;for(var b=h.iterator();b.hasNext();)this.add(b.next());this.intersectChains()},n.prototype.intersectChains=function(){for(var h=new ac(this._segInt),b=this._monoChains.iterator();b.hasNext();)for(var P=b.next(),B=this._index.query(P.getEnvelope()).iterator();B.hasNext();){var ae=B.next();if(ae.getId()>P.getId()&&(P.computeOverlaps(ae,h),this._nOverlaps++),this._segInt.isDone())return null}},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},f.SegmentOverlapAction.get=function(){return ac},Object.defineProperties(n,f),n}(Lu),ac=function(e){function n(){e.call(this),this._si=null,this._si=arguments[0]}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.overlap=function(){if(4!==arguments.length)return e.prototype.overlap.apply(this,arguments);var h=arguments[1],b=arguments[2],P=arguments[3],B=arguments[0].getContext(),ae=b.getContext();this._si.processIntersections(B,h,ae,P)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Tu),fn=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var h=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(h)}else if(4===arguments.length){var P=arguments[1],B=arguments[2],ae=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(P),this.setJoinStyle(B),this.setMitreLimit(ae)}},Zo={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};fn.prototype.getEndCapStyle=function(){return this._endCapStyle},fn.prototype.isSingleSided=function(){return this._isSingleSided},fn.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,0===this._quadrantSegments&&(this._joinStyle=fn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=fn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==fn.JOIN_ROUND&&(this._quadrantSegments=fn.DEFAULT_QUADRANT_SEGMENTS)},fn.prototype.getJoinStyle=function(){return this._joinStyle},fn.prototype.setJoinStyle=function(e){this._joinStyle=e},fn.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e},fn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},fn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},fn.prototype.setEndCapStyle=function(e){this._endCapStyle=e},fn.prototype.getMitreLimit=function(){return this._mitreLimit},fn.prototype.setMitreLimit=function(e){this._mitreLimit=e},fn.prototype.setSingleSided=function(e){this._isSingleSided=e},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn},fn.bufferDistanceError=function(e){var n=Math.PI/2/e;return 1-Math.cos(n/2)},Zo.CAP_ROUND.get=function(){return 1},Zo.CAP_FLAT.get=function(){return 2},Zo.CAP_SQUARE.get=function(){return 3},Zo.JOIN_ROUND.get=function(){return 1},Zo.JOIN_MITRE.get=function(){return 2},Zo.JOIN_BEVEL.get=function(){return 3},Zo.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Zo.DEFAULT_MITRE_LIMIT.get=function(){return 5},Zo.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(fn,Zo);var li=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=je.COUNTERCLOCKWISE,this._inputLine=e||null},Du={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};li.prototype.isDeletable=function(e,n,f,h){var b=this._inputLine[e],P=this._inputLine[n],B=this._inputLine[f];return!!this.isConcave(b,P,B)&&!!this.isShallow(b,P,B,h)&&this.isShallowSampled(b,P,e,f,h)},li.prototype.deleteShallowConcavities=function(){for(var e=1,n=this.findNextNonDeletedIndex(e),f=this.findNextNonDeletedIndex(n),h=!1;f<this._inputLine.length;){var b=!1;this.isDeletable(e,n,f,this._distanceTol)&&(this._isDeleted[n]=li.DELETE,b=!0,h=!0),n=this.findNextNonDeletedIndex(e=b?f:n),f=this.findNextNonDeletedIndex(n)}return h},li.prototype.isShallowConcavity=function(e,n,f,h){return je.computeOrientation(e,n,f)===this._angleOrientation&&je.distancePointLine(n,e,f)<h},li.prototype.isShallowSampled=function(e,n,f,h,b){var P=Math.trunc((h-f)/li.NUM_PTS_TO_CHECK);P<=0&&(P=1);for(var B=f;B<h;B+=P)if(!this.isShallow(e,n,this._inputLine[B],b))return!1;return!0},li.prototype.isConcave=function(e,n,f){return je.computeOrientation(e,n,f)===this._angleOrientation},li.prototype.simplify=function(e){this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=je.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do{n=this.deleteShallowConcavities()}while(n);return this.collapseLine()},li.prototype.findNextNonDeletedIndex=function(e){for(var n=e+1;n<this._inputLine.length&&this._isDeleted[n]===li.DELETE;)n++;return n},li.prototype.isShallow=function(e,n,f,h){return je.distancePointLine(n,e,f)<h},li.prototype.collapseLine=function(){for(var e=new la,n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==li.DELETE&&e.add(this._inputLine[n]);return e.toCoordinateArray()},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.simplify=function(e,n){return new li(e).simplify(n)},Du.INIT.get=function(){return 0},Du.DELETE.get=function(){return 1},Du.KEEP.get=function(){return 1},Du.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(li,Du);var Fa=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new zt},rl={COORDINATE_ARRAY_TYPE:{configurable:!0}};Fa.prototype.getCoordinates=function(){return this._ptList.toArray(Fa.COORDINATE_ARRAY_TYPE)},Fa.prototype.setPrecisionModel=function(e){this._precisionModel=e},Fa.prototype.addPt=function(e){var n=new J(e);if(this._precisionModel.makePrecise(n),this.isRedundant(n))return null;this._ptList.add(n)},Fa.prototype.revere=function(){},Fa.prototype.addPts=function(e,n){if(n)for(var f=0;f<e.length;f++)this.addPt(e[f]);else for(var h=e.length-1;h>=0;h--)this.addPt(e[h])},Fa.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var n=this._ptList.get(this._ptList.size()-1);return e.distance(n)<this._minimimVertexDistance},Fa.prototype.toString=function(){return(new $r).createLineString(this.getCoordinates()).toString()},Fa.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new J(this._ptList.get(0)),n=this._ptList.get(this._ptList.size()-1);if(e.equals(n))return null;this._ptList.add(e)},Fa.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e},Fa.prototype.interfaces_=function(){return[]},Fa.prototype.getClass=function(){return Fa},rl.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Fa,rl);var rn=function(){},Js={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};rn.prototype.interfaces_=function(){return[]},rn.prototype.getClass=function(){return rn},rn.toDegrees=function(e){return 180*e/Math.PI},rn.normalize=function(e){for(;e>Math.PI;)e-=rn.PI_TIMES_2;for(;e<=-Math.PI;)e+=rn.PI_TIMES_2;return e},rn.angle=function(){if(1===arguments.length){var e=arguments[0];return Math.atan2(e.y,e.x)}if(2===arguments.length){var n=arguments[0],f=arguments[1];return Math.atan2(f.y-n.y,f.x-n.x)}},rn.isAcute=function(e,n,f){return(e.x-n.x)*(f.x-n.x)+(e.y-n.y)*(f.y-n.y)>0},rn.isObtuse=function(e,n,f){return(e.x-n.x)*(f.x-n.x)+(e.y-n.y)*(f.y-n.y)<0},rn.interiorAngle=function(e,n,f){var h=rn.angle(n,e),b=rn.angle(n,f);return Math.abs(b-h)},rn.normalizePositive=function(e){if(e<0){for(;e<0;)e+=rn.PI_TIMES_2;e>=rn.PI_TIMES_2&&(e=0)}else{for(;e>=rn.PI_TIMES_2;)e-=rn.PI_TIMES_2;e<0&&(e=0)}return e},rn.angleBetween=function(e,n,f){var h=rn.angle(n,e),b=rn.angle(n,f);return rn.diff(h,b)},rn.diff=function(e,n){var f=null;return(f=e<n?n-e:e-n)>Math.PI&&(f=2*Math.PI-f),f},rn.toRadians=function(e){return e*Math.PI/180},rn.getTurn=function(e,n){var f=Math.sin(n-e);return f>0?rn.COUNTERCLOCKWISE:f<0?rn.CLOCKWISE:rn.NONE},rn.angleBetweenOriented=function(e,n,f){var h=rn.angle(n,e),b=rn.angle(n,f)-h;return b<=-Math.PI?b+rn.PI_TIMES_2:b>Math.PI?b-rn.PI_TIMES_2:b},Js.PI_TIMES_2.get=function(){return 2*Math.PI},Js.PI_OVER_2.get=function(){return Math.PI/2},Js.PI_OVER_4.get=function(){return Math.PI/4},Js.COUNTERCLOCKWISE.get=function(){return je.COUNTERCLOCKWISE},Js.CLOCKWISE.get=function(){return je.CLOCKWISE},Js.NONE.get=function(){return je.COLLINEAR},Object.defineProperties(rn,Js);var Kn=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new mr,this._seg1=new mr,this._offset0=new mr,this._offset1=new mr,this._side=0,this._hasNarrowConcaveAngle=!1;var f=arguments[1],h=arguments[2];this._precisionModel=arguments[0],this._bufParams=f,this._li=new ze,this._filletAngleQuantum=Math.PI/2/f.getQuadrantSegments(),f.getQuadrantSegments()>=8&&f.getJoinStyle()===fn.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(h)},Ks={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Kn.prototype.addNextSegment=function(e,n){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var f=je.computeOrientation(this._s0,this._s1,this._s2),h=f===je.CLOCKWISE&&this._side===Ht.LEFT||f===je.COUNTERCLOCKWISE&&this._side===Ht.RIGHT;0===f?this.addCollinear(n):h?this.addOutsideTurn(f,n):this.addInsideTurn(f,n)},Kn.prototype.addLineEndCap=function(e,n){var f=new mr(e,n),h=new mr;this.computeOffsetSegment(f,Ht.LEFT,this._distance,h);var b=new mr;this.computeOffsetSegment(f,Ht.RIGHT,this._distance,b);var ae=Math.atan2(n.y-e.y,n.x-e.x);switch(this._bufParams.getEndCapStyle()){case fn.CAP_ROUND:this._segList.addPt(h.p1),this.addFilletArc(n,ae+Math.PI/2,ae-Math.PI/2,je.CLOCKWISE,this._distance),this._segList.addPt(b.p1);break;case fn.CAP_FLAT:this._segList.addPt(h.p1),this._segList.addPt(b.p1);break;case fn.CAP_SQUARE:var Le=new J;Le.x=Math.abs(this._distance)*Math.cos(ae),Le.y=Math.abs(this._distance)*Math.sin(ae);var tt=new J(h.p1.x+Le.x,h.p1.y+Le.y),vt=new J(b.p1.x+Le.x,b.p1.y+Le.y);this._segList.addPt(tt),this._segList.addPt(vt)}},Kn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Kn.prototype.addMitreJoin=function(e,n,f,h){var b=!0,P=null;try{P=fr.intersection(n.p0,n.p1,f.p0,f.p1),(h<=0?1:P.distance(e)/Math.abs(h))>this._bufParams.getMitreLimit()&&(b=!1)}catch(B){if(!(B instanceof rr))throw B;P=new J(0,0),b=!1}b?this._segList.addPt(P):this.addLimitedMitreJoin(n,f,h,this._bufParams.getMitreLimit())},Kn.prototype.addFilletCorner=function(e,n,f,h,b){var ae=Math.atan2(n.y-e.y,n.x-e.x),vt=Math.atan2(f.y-e.y,f.x-e.x);h===je.CLOCKWISE?ae<=vt&&(ae+=2*Math.PI):ae>=vt&&(ae-=2*Math.PI),this._segList.addPt(n),this.addFilletArc(e,ae,vt,h,b),this._segList.addPt(f)},Kn.prototype.addOutsideTurn=function(e,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Kn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===fn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===fn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))},Kn.prototype.createSquare=function(e){this._segList.addPt(new J(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new J(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new J(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new J(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()},Kn.prototype.addSegments=function(e,n){this._segList.addPts(e,n)},Kn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Kn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Kn.prototype.initSideSegments=function(e,n,f){this._s1=e,this._s2=n,this._side=f,this._seg1.setCoordinates(e,n),this.computeOffsetSegment(this._seg1,f,this._distance,this._offset1)},Kn.prototype.addLimitedMitreJoin=function(e,n,f,h){var b=this._seg0.p1,P=rn.angle(b,this._seg0.p0),B=rn.angleBetweenOriented(this._seg0.p0,b,this._seg1.p1)/2,ae=rn.normalize(P+B),Le=rn.normalize(ae+Math.PI),tt=h*f,vt=f-tt*Math.abs(Math.sin(B)),Nt=b.x+tt*Math.cos(Le),qt=b.y+tt*Math.sin(Le),kt=new J(Nt,qt),Ft=new mr(b,kt),Zt=Ft.pointAlongOffset(1,vt),nr=Ft.pointAlongOffset(1,-vt);this._side===Ht.LEFT?(this._segList.addPt(Zt),this._segList.addPt(nr)):(this._segList.addPt(nr),this._segList.addPt(Zt))},Kn.prototype.computeOffsetSegment=function(e,n,f,h){var b=n===Ht.LEFT?1:-1,P=e.p1.x-e.p0.x,B=e.p1.y-e.p0.y,ae=Math.sqrt(P*P+B*B),Le=b*f*P/ae,tt=b*f*B/ae;h.p0.x=e.p0.x-tt,h.p0.y=e.p0.y+Le,h.p1.x=e.p1.x-tt,h.p1.y=e.p1.y+Le},Kn.prototype.addFilletArc=function(e,n,f,h,b){var P=h===je.CLOCKWISE?-1:1,B=Math.abs(n-f),ae=Math.trunc(B/this._filletAngleQuantum+.5);if(ae<1)return null;for(var Le=B/ae,tt=0,vt=new J;tt<B;){var Nt=n+P*tt;vt.x=e.x+b*Math.cos(Nt),vt.y=e.y+b*Math.sin(Nt),this._segList.addPt(vt),tt+=Le}},Kn.prototype.addInsideTurn=function(e,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Kn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var f=new J((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(f);var h=new J((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(h)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Kn.prototype.createCircle=function(e){var n=new J(e.x+this._distance,e.y);this._segList.addPt(n),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Kn.prototype.addBevelJoin=function(e,n){this._segList.addPt(e.p1),this._segList.addPt(n.p0)},Kn.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Fa,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*Kn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Kn.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===fn.JOIN_BEVEL||this._bufParams.getJoinStyle()===fn.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,je.CLOCKWISE,this._distance))},Kn.prototype.closeRing=function(){this._segList.closeRing()},Kn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Ks.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Ks.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Ks.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ks.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Kn,Ks);var Hi=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var n=arguments[1];this._precisionModel=arguments[0],this._bufParams=n};Hi.prototype.getOffsetCurve=function(e,n){if(this._distance=n,0===n)return null;var f=n<0,h=Math.abs(n),b=this.getSegGen(h);e.length<=1?this.computePointCurve(e[0],b):this.computeOffsetCurve(e,f,b);var P=b.getCoordinates();return f&&Fr.reverse(P),P},Hi.prototype.computeSingleSidedBufferCurve=function(e,n,f){var h=this.simplifyTolerance(this._distance);if(n){f.addSegments(e,!0);var b=li.simplify(e,-h),P=b.length-1;f.initSideSegments(b[P],b[P-1],Ht.LEFT),f.addFirstSegment();for(var B=P-2;B>=0;B--)f.addNextSegment(b[B],!0)}else{f.addSegments(e,!1);var ae=li.simplify(e,h),Le=ae.length-1;f.initSideSegments(ae[0],ae[1],Ht.LEFT),f.addFirstSegment();for(var tt=2;tt<=Le;tt++)f.addNextSegment(ae[tt],!0)}f.addLastSegment(),f.closeRing()},Hi.prototype.computeRingBufferCurve=function(e,n,f){var h=this.simplifyTolerance(this._distance);n===Ht.RIGHT&&(h=-h);var b=li.simplify(e,h),P=b.length-1;f.initSideSegments(b[P-1],b[0],n);for(var B=1;B<=P;B++)f.addNextSegment(b[B],1!==B);f.closeRing()},Hi.prototype.computeLineBufferCurve=function(e,n){var f=this.simplifyTolerance(this._distance),h=li.simplify(e,f),b=h.length-1;n.initSideSegments(h[0],h[1],Ht.LEFT);for(var P=2;P<=b;P++)n.addNextSegment(h[P],!0);n.addLastSegment(),n.addLineEndCap(h[b-1],h[b]);var B=li.simplify(e,-f),ae=B.length-1;n.initSideSegments(B[ae],B[ae-1],Ht.LEFT);for(var Le=ae-2;Le>=0;Le--)n.addNextSegment(B[Le],!0);n.addLastSegment(),n.addLineEndCap(B[1],B[0]),n.closeRing()},Hi.prototype.computePointCurve=function(e,n){switch(this._bufParams.getEndCapStyle()){case fn.CAP_ROUND:n.createCircle(e);break;case fn.CAP_SQUARE:n.createSquare(e)}},Hi.prototype.getLineCurve=function(e,n){if(this._distance=n,n<0&&!this._bufParams.isSingleSided()||0===n)return null;var f=Math.abs(n),h=this.getSegGen(f);return e.length<=1?this.computePointCurve(e[0],h):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(e,n<0,h):this.computeLineBufferCurve(e,h),h.getCoordinates()},Hi.prototype.getBufferParameters=function(){return this._bufParams},Hi.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()},Hi.prototype.getRingCurve=function(e,n,f){if(this._distance=f,e.length<=2)return this.getLineCurve(e,f);if(0===f)return Hi.copyCoordinates(e);var h=this.getSegGen(f);return this.computeRingBufferCurve(e,n,h),h.getCoordinates()},Hi.prototype.computeOffsetCurve=function(e,n,f){var h=this.simplifyTolerance(this._distance);if(n){var b=li.simplify(e,-h),P=b.length-1;f.initSideSegments(b[P],b[P-1],Ht.LEFT),f.addFirstSegment();for(var B=P-2;B>=0;B--)f.addNextSegment(b[B],!0)}else{var ae=li.simplify(e,h),Le=ae.length-1;f.initSideSegments(ae[0],ae[1],Ht.LEFT),f.addFirstSegment();for(var tt=2;tt<=Le;tt++)f.addNextSegment(ae[tt],!0)}f.addLastSegment()},Hi.prototype.getSegGen=function(e){return new Kn(this._precisionModel,this._bufParams,e)},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi},Hi.copyCoordinates=function(e){for(var n=new Array(e.length).fill(null),f=0;f<n.length;f++)n[f]=new J(e[f]);return n};var $s=function(){this._subgraphs=null,this._seg=new mr,this._cga=new je,this._subgraphs=arguments[0]},fu={DepthSegment:{configurable:!0}};$s.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var e=arguments[0],n=new zt,f=this._subgraphs.iterator();f.hasNext();){var h=f.next(),b=h.getEnvelope();e.y<b.getMinY()||e.y>b.getMaxY()||this.findStabbedSegments(e,h.getDirectedEdges(),n)}return n}if(3===arguments.length)if(gt(arguments[2],di)&&arguments[0]instanceof J&&arguments[1]instanceof vf){for(var P=arguments[0],B=arguments[1],ae=arguments[2],Le=B.getEdge().getCoordinates(),tt=0;tt<Le.length-1;tt++)if(this._seg.p0=Le[tt],this._seg.p1=Le[tt+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<P.x||this._seg.isHorizontal()||P.y<this._seg.p0.y||P.y>this._seg.p1.y||je.computeOrientation(this._seg.p0,this._seg.p1,P)===je.RIGHT)){var vt=B.getDepth(Ht.LEFT);this._seg.p0.equals(Le[tt])||(vt=B.getDepth(Ht.RIGHT));var Nt=new _o(this._seg,vt);ae.add(Nt)}}else if(gt(arguments[2],di)&&arguments[0]instanceof J&&gt(arguments[1],di))for(var qt=arguments[0],Ft=arguments[2],Zt=arguments[1].iterator();Zt.hasNext();){var nr=Zt.next();nr.isForward()&&this.findStabbedSegments(qt,nr,Ft)}},$s.prototype.getDepth=function(e){var n=this.findStabbedSegments(e);return 0===n.size()?0:ro.min(n)._leftDepth},$s.prototype.interfaces_=function(){return[]},$s.prototype.getClass=function(){return $s},fu.DepthSegment.get=function(){return _o},Object.defineProperties($s,fu);var _o=function(){this._upwardSeg=null,this._leftDepth=null;var n=arguments[1];this._upwardSeg=new mr(arguments[0]),this._leftDepth=n};_o.prototype.compareTo=function(e){var n=e;if(this._upwardSeg.minX()>=n._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=n._upwardSeg.minX())return-1;var f=this._upwardSeg.orientationIndex(n._upwardSeg);return 0!==f||0!=(f=-1*n._upwardSeg.orientationIndex(this._upwardSeg))?f:this._upwardSeg.compareTo(n._upwardSeg)},_o.prototype.compareX=function(e,n){var f=e.p0.compareTo(n.p0);return 0!==f?f:e.p1.compareTo(n.p1)},_o.prototype.toString=function(){return this._upwardSeg.toString()},_o.prototype.interfaces_=function(){return[fe]},_o.prototype.getClass=function(){return _o};var dr=function(e,n,f){this.p0=e||null,this.p1=n||null,this.p2=f||null};dr.prototype.area=function(){return dr.area(this.p0,this.p1,this.p2)},dr.prototype.signedArea=function(){return dr.signedArea(this.p0,this.p1,this.p2)},dr.prototype.interpolateZ=function(e){if(null===e)throw new ie("Supplied point is null.");return dr.interpolateZ(e,this.p0,this.p1,this.p2)},dr.prototype.longestSideLength=function(){return dr.longestSideLength(this.p0,this.p1,this.p2)},dr.prototype.isAcute=function(){return dr.isAcute(this.p0,this.p1,this.p2)},dr.prototype.circumcentre=function(){return dr.circumcentre(this.p0,this.p1,this.p2)},dr.prototype.area3D=function(){return dr.area3D(this.p0,this.p1,this.p2)},dr.prototype.centroid=function(){return dr.centroid(this.p0,this.p1,this.p2)},dr.prototype.inCentre=function(){return dr.inCentre(this.p0,this.p1,this.p2)},dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr},dr.area=function(e,n,f){return Math.abs(((f.x-e.x)*(n.y-e.y)-(n.x-e.x)*(f.y-e.y))/2)},dr.signedArea=function(e,n,f){return((f.x-e.x)*(n.y-e.y)-(n.x-e.x)*(f.y-e.y))/2},dr.det=function(e,n,f,h){return e*h-n*f},dr.interpolateZ=function(e,n,f,h){var b=n.x,P=n.y,B=f.x-b,ae=h.x-b,Le=f.y-P,tt=h.y-P,vt=B*tt-ae*Le,Nt=e.x-b,qt=e.y-P;return n.z+(tt*Nt-ae*qt)/vt*(f.z-n.z)+(-Le*Nt+B*qt)/vt*(h.z-n.z)},dr.longestSideLength=function(e,n,f){var h=e.distance(n),b=n.distance(f),P=f.distance(e),B=h;return b>B&&(B=b),P>B&&(B=P),B},dr.isAcute=function(e,n,f){return!!rn.isAcute(e,n,f)&&!!rn.isAcute(n,f,e)&&!!rn.isAcute(f,e,n)},dr.circumcentre=function(e,n,f){var h=f.x,b=f.y,P=e.x-h,B=e.y-b,ae=n.x-h,Le=n.y-b,tt=2*dr.det(P,B,ae,Le),vt=dr.det(B,P*P+B*B,Le,ae*ae+Le*Le),Nt=dr.det(P,P*P+B*B,ae,ae*ae+Le*Le);return new J(h-vt/tt,b+Nt/tt)},dr.perpendicularBisector=function(e,n){var f=n.x-e.x,h=n.y-e.y,b=new fr(e.x+f/2,e.y+h/2,1),P=new fr(e.x-h+f/2,e.y+f+h/2,1);return new fr(b,P)},dr.angleBisector=function(e,n,f){var h=n.distance(e),b=h/(h+n.distance(f));return new J(e.x+b*(f.x-e.x),e.y+b*(f.y-e.y))},dr.area3D=function(e,n,f){var h=n.x-e.x,b=n.y-e.y,P=n.z-e.z,B=f.x-e.x,ae=f.y-e.y,Le=f.z-e.z,tt=b*Le-P*ae,vt=P*B-h*Le,Nt=h*ae-b*B;return Math.sqrt(tt*tt+vt*vt+Nt*Nt)/2},dr.centroid=function(e,n,f){return new J((e.x+n.x+f.x)/3,(e.y+n.y+f.y)/3)},dr.inCentre=function(e,n,f){var h=n.distance(f),b=e.distance(f),P=e.distance(n),B=h+b+P;return new J((h*e.x+b*n.x+P*f.x)/B,(h*e.y+b*n.y+P*f.y)/B)};var Vr=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new zt;var n=arguments[1],f=arguments[2];this._inputGeom=arguments[0],this._distance=n,this._curveBuilder=f};Vr.prototype.addPoint=function(e){if(this._distance<=0)return null;var n=e.getCoordinates(),f=this._curveBuilder.getLineCurve(n,this._distance);this.addCurve(f,de.EXTERIOR,de.INTERIOR)},Vr.prototype.addPolygon=function(e){var n=this._distance,f=Ht.LEFT;this._distance<0&&(n=-this._distance,f=Ht.RIGHT);var h=e.getExteriorRing(),b=Fr.removeRepeatedPoints(h.getCoordinates());if(this._distance<0&&this.isErodedCompletely(h,this._distance)||this._distance<=0&&b.length<3)return null;this.addPolygonRing(b,n,f,de.EXTERIOR,de.INTERIOR);for(var P=0;P<e.getNumInteriorRing();P++){var B=e.getInteriorRingN(P),ae=Fr.removeRepeatedPoints(B.getCoordinates());this._distance>0&&this.isErodedCompletely(B,-this._distance)||this.addPolygonRing(ae,n,Ht.opposite(f),de.INTERIOR,de.EXTERIOR)}},Vr.prototype.isTriangleErodedCompletely=function(e,n){var f=new dr(e[0],e[1],e[2]),h=f.inCentre();return je.distancePointLine(h,f.p0,f.p1)<Math.abs(n)},Vr.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var n=Fr.removeRepeatedPoints(e.getCoordinates()),f=this._curveBuilder.getLineCurve(n,this._distance);this.addCurve(f,de.EXTERIOR,de.INTERIOR)},Vr.prototype.addCurve=function(e,n,f){if(null===e||e.length<2)return null;var h=new gi(e,new On(0,de.BOUNDARY,n,f));this._curveList.add(h)},Vr.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Vr.prototype.addPolygonRing=function(e,n,f,h,b){if(0===n&&e.length<vo.MINIMUM_VALID_SIZE)return null;var P=h,B=b;e.length>=vo.MINIMUM_VALID_SIZE&&je.isCCW(e)&&(P=b,B=h,f=Ht.opposite(f));var ae=this._curveBuilder.getRingCurve(e,f,n);this.addCurve(ae,P,B)},Vr.prototype.add=function(e){if(e.isEmpty())return null;e instanceof oi?this.addPolygon(e):e instanceof Hn?this.addLineString(e):e instanceof ha?this.addPoint(e):(e instanceof rs||e instanceof ca||e instanceof na||e instanceof Ni)&&this.addCollection(e)},Vr.prototype.isErodedCompletely=function(e,n){var f=e.getCoordinates();if(f.length<4)return n<0;if(4===f.length)return this.isTriangleErodedCompletely(f,n);var h=e.getEnvelopeInternal(),b=Math.min(h.getHeight(),h.getWidth());return n<0&&2*Math.abs(n)>b},Vr.prototype.addCollection=function(e){for(var n=0;n<e.getNumGeometries();n++){var f=e.getGeometryN(n);this.add(f)}},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr};var ao=function(){};ao.prototype.locate=function(e){},ao.prototype.interfaces_=function(){return[]},ao.prototype.getClass=function(){return ao};var qa=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};qa.prototype.next=function(){if(this._atStart)return this._atStart=!1,qa.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new ee;var e=this._parent.getGeometryN(this._index++);return e instanceof Ni?(this._subcollectionIterator=new qa(e),this._subcollectionIterator.next()):e},qa.prototype.remove=function(){throw new Error(this.getClass().getName())},qa.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},qa.prototype.interfaces_=function(){return[fa]},qa.prototype.getClass=function(){return qa},qa.isAtomic=function(e){return!(e instanceof Ni)};var oa=function(){this._geom=null,this._geom=arguments[0]};oa.prototype.locate=function(e){return oa.locate(e,this._geom)},oa.prototype.interfaces_=function(){return[ao]},oa.prototype.getClass=function(){return oa},oa.isPointInRing=function(e,n){return!!n.getEnvelopeInternal().intersects(e)&&je.isPointInRing(e,n.getCoordinates())},oa.containsPointInPolygon=function(e,n){if(n.isEmpty())return!1;var f=n.getExteriorRing();if(!oa.isPointInRing(e,f))return!1;for(var h=0;h<n.getNumInteriorRing();h++){var b=n.getInteriorRingN(h);if(oa.isPointInRing(e,b))return!1}return!0},oa.containsPoint=function(e,n){if(n instanceof oi)return oa.containsPointInPolygon(e,n);if(n instanceof Ni)for(var f=new qa(n);f.hasNext();){var h=f.next();if(h!==n&&oa.containsPoint(e,h))return!0}return!1},oa.locate=function(e,n){return n.isEmpty()?de.EXTERIOR:oa.containsPoint(e,n)?de.INTERIOR:de.EXTERIOR};var Zn=function(){this._edgeMap=new V,this._edgeList=null,this._ptInAreaLocation=[de.NONE,de.NONE]};Zn.prototype.getNextCW=function(e){this.getEdges();var n=this._edgeList.indexOf(e),f=n-1;return 0===n&&(f=this._edgeList.size()-1),this._edgeList.get(f)},Zn.prototype.propagateSideLabels=function(e){for(var n=de.NONE,f=this.iterator();f.hasNext();){var h=f.next().getLabel();h.isArea(e)&&h.getLocation(e,Ht.LEFT)!==de.NONE&&(n=h.getLocation(e,Ht.LEFT))}if(n===de.NONE)return null;for(var b=n,P=this.iterator();P.hasNext();){var B=P.next(),ae=B.getLabel();if(ae.getLocation(e,Ht.ON)===de.NONE&&ae.setLocation(e,Ht.ON,b),ae.isArea(e)){var Le=ae.getLocation(e,Ht.LEFT),tt=ae.getLocation(e,Ht.RIGHT);if(tt!==de.NONE){if(tt!==b)throw new Xi("side location conflict",B.getCoordinate());Le===de.NONE&&_e.shouldNeverReachHere("found single null side (at "+B.getCoordinate()+")"),b=Le}else _e.isTrue(ae.getLocation(e,Ht.LEFT)===de.NONE,"found single null side"),ae.setLocation(e,Ht.RIGHT,b),ae.setLocation(e,Ht.LEFT,b)}}},Zn.prototype.getCoordinate=function(){var e=this.iterator();return e.hasNext()?e.next().getCoordinate():null},Zn.prototype.print=function(e){vr.out.println("EdgeEndStar:   "+this.getCoordinate());for(var n=this.iterator();n.hasNext();)n.next().print(e)},Zn.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Zn.prototype.checkAreaLabelsConsistent=function(e){var n=this.getEdges();if(n.size()<=0)return!0;var f=n.size()-1,h=n.get(f).getLabel().getLocation(e,Ht.LEFT);_e.isTrue(h!==de.NONE,"Found unlabelled area edge");for(var b=h,P=this.iterator();P.hasNext();){var B=P.next().getLabel();_e.isTrue(B.isArea(e),"Found non-area edge");var ae=B.getLocation(e,Ht.LEFT),Le=B.getLocation(e,Ht.RIGHT);if(ae===Le||Le!==b)return!1;b=ae}return!0},Zn.prototype.findIndex=function(e){this.iterator();for(var n=0;n<this._edgeList.size();n++)if(this._edgeList.get(n)===e)return n;return-1},Zn.prototype.iterator=function(){return this.getEdges().iterator()},Zn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new zt(this._edgeMap.values())),this._edgeList},Zn.prototype.getLocation=function(e,n,f){return this._ptInAreaLocation[e]===de.NONE&&(this._ptInAreaLocation[e]=oa.locate(n,f[e].getGeometry())),this._ptInAreaLocation[e]},Zn.prototype.toString=function(){var e=new Be;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(var n=this.iterator();n.hasNext();){var f=n.next();e.append(f),e.append("\n")}return e.toString()},Zn.prototype.computeEdgeEndLabels=function(e){for(var n=this.iterator();n.hasNext();)n.next().computeLabel(e)},Zn.prototype.computeLabelling=function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],f=this.iterator();f.hasNext();)for(var h=f.next().getLabel(),b=0;b<2;b++)h.isLine(b)&&h.getLocation(b)===de.BOUNDARY&&(n[b]=!0);for(var P=this.iterator();P.hasNext();)for(var B=P.next(),ae=B.getLabel(),Le=0;Le<2;Le++)if(ae.isAnyNull(Le)){var tt=de.NONE;if(n[Le])tt=de.EXTERIOR;else{var vt=B.getCoordinate();tt=this.getLocation(Le,vt,e)}ae.setAllLocationsIfNull(Le,tt)}},Zn.prototype.getDegree=function(){return this._edgeMap.size()},Zn.prototype.insertEdgeEnd=function(e,n){this._edgeMap.put(e,n),this._edgeList=null},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn};var ei=function(e){function n(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var f=null,h=null,b=this._SCANNING_FOR_INCOMING,P=0;P<this._resultAreaEdgeList.size();P++){var B=this._resultAreaEdgeList.get(P),ae=B.getSym();if(B.getLabel().isArea())switch(null===f&&B.isInResult()&&(f=B),b){case this._SCANNING_FOR_INCOMING:if(!ae.isInResult())continue;h=ae,b=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!B.isInResult())continue;h.setNext(B),b=this._SCANNING_FOR_INCOMING}}if(b===this._LINKING_TO_OUTGOING){if(null===f)throw new Xi("no outgoing dirEdge found",this.getCoordinate());_e.isTrue(f.isInResult(),"unable to link last incoming dirEdge"),h.setNext(f)}},n.prototype.insert=function(f){this.insertEdgeEnd(f,f)},n.prototype.getRightmostEdge=function(){var f=this.getEdges(),h=f.size();if(h<1)return null;var b=f.get(0);if(1===h)return b;var P=f.get(h-1),B=b.getQuadrant(),ae=P.getQuadrant();return Rn.isNorthern(B)&&Rn.isNorthern(ae)?b:Rn.isNorthern(B)||Rn.isNorthern(ae)?0!==b.getDy()?b:0!==P.getDy()?P:(_e.shouldNeverReachHere("found two horizontal edges incident on node"),null):P},n.prototype.print=function(f){vr.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var h=this.iterator();h.hasNext();){var b=h.next();f.print("out "),b.print(f),f.println(),f.print("in "),b.getSym().print(f),f.println()}},n.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new zt;for(var f=this.iterator();f.hasNext();){var h=f.next();(h.isInResult()||h.getSym().isInResult())&&this._resultAreaEdgeList.add(h)}return this._resultAreaEdgeList},n.prototype.updateLabelling=function(f){for(var h=this.iterator();h.hasNext();){var b=h.next().getLabel();b.setAllLocationsIfNull(0,f.getLocation(0)),b.setAllLocationsIfNull(1,f.getLocation(1))}},n.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var f=null,h=null,b=this._edgeList.size()-1;b>=0;b--){var P=this._edgeList.get(b),B=P.getSym();null===h&&(h=B),null!==f&&B.setNext(f),f=P}h.setNext(f)},n.prototype.computeDepths=function(){if(1===arguments.length){var f=arguments[0],h=this.findIndex(f),b=f.getDepth(Ht.LEFT),P=f.getDepth(Ht.RIGHT),B=this.computeDepths(h+1,this._edgeList.size(),b);if(this.computeDepths(0,h,B)!==P)throw new Xi("depth mismatch at "+f.getCoordinate())}else if(3===arguments.length){for(var Le=arguments[1],tt=arguments[2],vt=arguments[0];vt<Le;vt++){var Nt=this._edgeList.get(vt);Nt.setEdgeDepths(Ht.RIGHT,tt),tt=Nt.getDepth(Ht.LEFT)}return tt}},n.prototype.mergeSymLabels=function(){for(var f=this.iterator();f.hasNext();){var h=f.next();h.getLabel().merge(h.getSym().getLabel())}},n.prototype.linkMinimalDirectedEdges=function(f){for(var h=null,b=null,P=this._SCANNING_FOR_INCOMING,B=this._resultAreaEdgeList.size()-1;B>=0;B--){var ae=this._resultAreaEdgeList.get(B),Le=ae.getSym();switch(null===h&&ae.getEdgeRing()===f&&(h=ae),P){case this._SCANNING_FOR_INCOMING:if(Le.getEdgeRing()!==f)continue;b=Le,P=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(ae.getEdgeRing()!==f)continue;b.setNextMin(ae),P=this._SCANNING_FOR_INCOMING}}P===this._LINKING_TO_OUTGOING&&(_e.isTrue(null!==h,"found null for first outgoing dirEdge"),_e.isTrue(h.getEdgeRing()===f,"unable to link last incoming dirEdge"),b.setNextMin(h))},n.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var f=0,h=this.iterator();h.hasNext();)h.next().isInResult()&&f++;return f}if(1===arguments.length){for(var b=arguments[0],P=0,B=this.iterator();B.hasNext();)B.next().getEdgeRing()===b&&P++;return P}},n.prototype.getLabel=function(){return this._label},n.prototype.findCoveredLineEdges=function(){for(var f=de.NONE,h=this.iterator();h.hasNext();){var b=h.next(),P=b.getSym();if(!b.isLineEdge()){if(b.isInResult()){f=de.INTERIOR;break}if(P.isInResult()){f=de.EXTERIOR;break}}}if(f===de.NONE)return null;for(var B=f,ae=this.iterator();ae.hasNext();){var Le=ae.next(),tt=Le.getSym();Le.isLineEdge()?Le.getEdge().setCovered(B===de.INTERIOR):(Le.isInResult()&&(B=de.EXTERIOR),tt.isInResult()&&(B=de.INTERIOR))}},n.prototype.computeLabelling=function(f){e.prototype.computeLabelling.call(this,f),this._label=new On(de.NONE);for(var h=this.iterator();h.hasNext();)for(var b=h.next().getEdge().getLabel(),P=0;P<2;P++){var B=b.getLocation(P);B!==de.INTERIOR&&B!==de.BOUNDARY||this._label.setLocation(P,de.INTERIOR)}},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Zn),Gr=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.createNode=function(f){return new ou(f,new ei)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(yo),xo=function e(){this._pts=null,this._orientation=null;var n=arguments[0];this._pts=n,this._orientation=e.orientation(n)};xo.prototype.compareTo=function(e){return xo.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},xo.prototype.interfaces_=function(){return[fe]},xo.prototype.getClass=function(){return xo},xo.orientation=function(e){return 1===Fr.increasingDirection(e)},xo.compareOriented=function(e,n,f,h){for(var b=n?1:-1,P=h?1:-1,B=n?e.length:-1,ae=h?f.length:-1,Le=n?0:e.length-1,tt=h?0:f.length-1;;){var vt=e[Le].compareTo(f[tt]);if(0!==vt)return vt;var Nt=(Le+=b)===B,qt=(tt+=P)===ae;if(Nt&&!qt)return-1;if(!Nt&&qt)return 1;if(Nt&&qt)return 0}};var pa=function(){this._edges=new zt,this._ocaMap=new V};pa.prototype.print=function(e){e.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var f=this._edges.get(n);n>0&&e.print(","),e.print("(");for(var h=f.getCoordinates(),b=0;b<h.length;b++)b>0&&e.print(","),e.print(h[b].x+" "+h[b].y);e.println(")")}e.print(")  ")},pa.prototype.addAll=function(e){for(var n=e.iterator();n.hasNext();)this.add(n.next())},pa.prototype.findEdgeIndex=function(e){for(var n=0;n<this._edges.size();n++)if(this._edges.get(n).equals(e))return n;return-1},pa.prototype.iterator=function(){return this._edges.iterator()},pa.prototype.getEdges=function(){return this._edges},pa.prototype.get=function(e){return this._edges.get(e)},pa.prototype.findEqualEdge=function(e){var n=new xo(e.getCoordinates());return this._ocaMap.get(n)},pa.prototype.add=function(e){this._edges.add(e);var n=new xo(e.getCoordinates());this._ocaMap.put(n,e)},pa.prototype.interfaces_=function(){return[]},pa.prototype.getClass=function(){return pa};var Ja=function(){};Ja.prototype.processIntersections=function(e,n,f,h){},Ja.prototype.isDone=function(){},Ja.prototype.interfaces_=function(){return[]},Ja.prototype.getClass=function(){return Ja};var ga=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};ga.prototype.isTrivialIntersection=function(e,n,f,h){if(e===f&&1===this._li.getIntersectionNum()){if(ga.isAdjacentSegments(n,h))return!0;if(e.isClosed()){var b=e.size()-1;if(0===n&&h===b||0===h&&n===b)return!0}}return!1},ga.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ga.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ga.prototype.getLineIntersector=function(){return this._li},ga.prototype.hasProperIntersection=function(){return this._hasProper},ga.prototype.processIntersections=function(e,n,f,h){if(e===f&&n===h)return null;this.numTests++;var b=e.getCoordinates()[n],P=e.getCoordinates()[n+1],B=f.getCoordinates()[h],ae=f.getCoordinates()[h+1];this._li.computeIntersection(b,P,B,ae),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,n,f,h)||(this._hasIntersection=!0,e.addIntersections(this._li,n,0),f.addIntersections(this._li,h,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},ga.prototype.hasIntersection=function(){return this._hasIntersection},ga.prototype.isDone=function(){return!1},ga.prototype.hasInteriorIntersection=function(){return this._hasInterior},ga.prototype.interfaces_=function(){return[Ja]},ga.prototype.getClass=function(){return ga},ga.isAdjacentSegments=function(e,n){return 1===Math.abs(e-n)};var va=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var n=arguments[1],f=arguments[2];this.coord=new J(arguments[0]),this.segmentIndex=n,this.dist=f};va.prototype.getSegmentIndex=function(){return this.segmentIndex},va.prototype.getCoordinate=function(){return this.coord},va.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)},va.prototype.compareTo=function(e){return this.compare(e.segmentIndex,e.dist)},va.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===e},va.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},va.prototype.getDistance=function(){return this.dist},va.prototype.compare=function(e,n){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<n?-1:this.dist>n?1:0},va.prototype.interfaces_=function(){return[fe]},va.prototype.getClass=function(){return va};var oo=function(){this._nodeMap=new V,this.edge=null,this.edge=arguments[0]};oo.prototype.print=function(e){e.println("Intersections:");for(var n=this.iterator();n.hasNext();)n.next().print(e)},oo.prototype.iterator=function(){return this._nodeMap.values().iterator()},oo.prototype.addSplitEdges=function(e){this.addEndpoints();for(var n=this.iterator(),f=n.next();n.hasNext();){var h=n.next(),b=this.createSplitEdge(f,h);e.add(b),f=h}},oo.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)},oo.prototype.createSplitEdge=function(e,n){var f=n.segmentIndex-e.segmentIndex+2,b=n.dist>0||!n.coord.equals2D(this.edge.pts[n.segmentIndex]);b||f--;var P=new Array(f).fill(null),B=0;P[B++]=new J(e.coord);for(var ae=e.segmentIndex+1;ae<=n.segmentIndex;ae++)P[B++]=this.edge.pts[ae];return b&&(P[B]=n.coord),new df(P,new On(this.edge._label))},oo.prototype.add=function(e,n,f){var h=new va(e,n,f),b=this._nodeMap.get(h);return null!==b?b:(this._nodeMap.put(h,h),h)},oo.prototype.isIntersection=function(e){for(var n=this.iterator();n.hasNext();)if(n.next().coord.equals(e))return!0;return!1},oo.prototype.interfaces_=function(){return[]},oo.prototype.getClass=function(){return oo};var wo=function(){};wo.prototype.getChainStartIndices=function(e){var n=0,f=new zt;f.add(new rt(n));do{var h=this.findChainEnd(e,n);f.add(new rt(h)),n=h}while(n<e.length-1);return wo.toIntArray(f)},wo.prototype.findChainEnd=function(e,n){for(var f=Rn.quadrant(e[n],e[n+1]),h=n+1;h<e.length&&Rn.quadrant(e[h-1],e[h])===f;)h++;return h-1},wo.prototype.interfaces_=function(){return[]},wo.prototype.getClass=function(){return wo},wo.toIntArray=function(e){for(var n=new Array(e.size()).fill(null),f=0;f<n.length;f++)n[f]=e.get(f).intValue();return n};var qo=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Yt,this.env2=new Yt;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var n=new wo;this.startIndex=n.getChainStartIndices(this.pts)};qo.prototype.getCoordinates=function(){return this.pts},qo.prototype.getMaxX=function(e){var n=this.pts[this.startIndex[e]].x,f=this.pts[this.startIndex[e+1]].x;return n>f?n:f},qo.prototype.getMinX=function(e){var n=this.pts[this.startIndex[e]].x,f=this.pts[this.startIndex[e+1]].x;return n<f?n:f},qo.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var e=arguments[0],n=arguments[1],f=arguments[2];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],n,n.startIndex[f],n.startIndex[f+1],arguments[3])}else if(6===arguments.length){var b=arguments[0],P=arguments[1],B=arguments[2],ae=arguments[3],Le=arguments[4],tt=arguments[5],vt=this.pts[b],Nt=this.pts[P],qt=B.pts[ae],kt=B.pts[Le];if(P-b==1&&Le-ae==1)return tt.addIntersections(this.e,b,B.e,ae),null;if(this.env1.init(vt,Nt),this.env2.init(qt,kt),!this.env1.intersects(this.env2))return null;var Ft=Math.trunc((b+P)/2),Zt=Math.trunc((ae+Le)/2);b<Ft&&(ae<Zt&&this.computeIntersectsForChain(b,Ft,B,ae,Zt,tt),Zt<Le&&this.computeIntersectsForChain(b,Ft,B,Zt,Le,tt)),Ft<P&&(ae<Zt&&this.computeIntersectsForChain(Ft,P,B,ae,Zt,tt),Zt<Le&&this.computeIntersectsForChain(Ft,P,B,Zt,Le,tt))}},qo.prototype.getStartIndexes=function(){return this.startIndex},qo.prototype.computeIntersects=function(e,n){for(var f=0;f<this.startIndex.length-1;f++)for(var h=0;h<e.startIndex.length-1;h++)this.computeIntersectsForChain(f,e,h,n)},qo.prototype.interfaces_=function(){return[]},qo.prototype.getClass=function(){return qo};var Wi=function e(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var f=0;f<3;f++)this._depth[n][f]=e.NULL_VALUE},oc={NULL_VALUE:{configurable:!0}};Wi.prototype.getDepth=function(e,n){return this._depth[e][n]},Wi.prototype.setDepth=function(e,n,f){this._depth[e][n]=f},Wi.prototype.isNull=function(){if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(this._depth[e][n]!==Wi.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===Wi.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===Wi.NULL_VALUE:void 0},Wi.prototype.normalize=function(){for(var e=0;e<2;e++)if(!this.isNull(e)){var n=this._depth[e][1];this._depth[e][2]<n&&(n=this._depth[e][2]),n<0&&(n=0);for(var f=1;f<3;f++){var h=0;this._depth[e][f]>n&&(h=1),this._depth[e][f]=h}}},Wi.prototype.getDelta=function(e){return this._depth[e][Ht.RIGHT]-this._depth[e][Ht.LEFT]},Wi.prototype.getLocation=function(e,n){return this._depth[e][n]<=0?de.EXTERIOR:de.INTERIOR},Wi.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Wi.prototype.add=function(){if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var f=1;f<3;f++){var h=e.getLocation(n,f);h!==de.EXTERIOR&&h!==de.INTERIOR||(this.isNull(n,f)?this._depth[n][f]=Wi.depthAtLocation(h):this._depth[n][f]+=Wi.depthAtLocation(h))}else 3===arguments.length&&arguments[2]===de.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi},Wi.depthAtLocation=function(e){return e===de.EXTERIOR?0:e===de.INTERIOR?1:Wi.NULL_VALUE},oc.NULL_VALUE.get=function(){return-1},Object.defineProperties(Wi,oc);var df=function(e){function n(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new oo(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Wi,this._depthDelta=0,1===arguments.length)n.call(this,arguments[0],null);else if(2===arguments.length){var b=arguments[1];this.pts=arguments[0],this._label=b}}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDepth=function(){return this._depth},n.prototype.getCollapsedEdge=function(){var f=new Array(2).fill(null);return f[0]=this.pts[0],f[1]=this.pts[1],new n(f,On.toLineLabel(this._label))},n.prototype.isIsolated=function(){return this._isIsolated},n.prototype.getCoordinates=function(){return this.pts},n.prototype.setIsolated=function(f){this._isIsolated=f},n.prototype.setName=function(f){this._name=f},n.prototype.equals=function(f){if(!(f instanceof n))return!1;var h=f;if(this.pts.length!==h.pts.length)return!1;for(var b=!0,P=!0,B=this.pts.length,ae=0;ae<this.pts.length;ae++)if(this.pts[ae].equals2D(h.pts[ae])||(b=!1),this.pts[ae].equals2D(h.pts[--B])||(P=!1),!b&&!P)return!1;return!0},n.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},n.prototype.print=function(f){f.print("edge "+this._name+": "),f.print("LINESTRING (");for(var h=0;h<this.pts.length;h++)h>0&&f.print(","),f.print(this.pts[h].x+" "+this.pts[h].y);f.print(")  "+this._label+" "+this._depthDelta)},n.prototype.computeIM=function(f){n.updateIM(this._label,f)},n.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},n.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},n.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},n.prototype.getDepthDelta=function(){return this._depthDelta},n.prototype.getNumPoints=function(){return this.pts.length},n.prototype.printReverse=function(f){f.print("edge "+this._name+": ");for(var h=this.pts.length-1;h>=0;h--)f.print(this.pts[h]+" ");f.println("")},n.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new qo(this)),this._mce},n.prototype.getEnvelope=function(){if(null===this._env){this._env=new Yt;for(var f=0;f<this.pts.length;f++)this._env.expandToInclude(this.pts[f])}return this._env},n.prototype.addIntersection=function(f,h,b,P){var B=new J(f.getIntersection(P)),ae=h,Le=f.getEdgeDistance(b,P),tt=ae+1;tt<this.pts.length&&B.equals2D(this.pts[tt])&&(ae=tt,Le=0),this.eiList.add(B,ae,Le)},n.prototype.toString=function(){var f=new Be;f.append("edge "+this._name+": "),f.append("LINESTRING (");for(var h=0;h<this.pts.length;h++)h>0&&f.append(","),f.append(this.pts[h].x+" "+this.pts[h].y);return f.append(")  "+this._label+" "+this._depthDelta),f.toString()},n.prototype.isPointwiseEqual=function(f){if(this.pts.length!==f.pts.length)return!1;for(var h=0;h<this.pts.length;h++)if(!this.pts[h].equals2D(f.pts[h]))return!1;return!0},n.prototype.setDepthDelta=function(f){this._depthDelta=f},n.prototype.getEdgeIntersectionList=function(){return this.eiList},n.prototype.addIntersections=function(f,h,b){for(var P=0;P<f.getIntersectionNum();P++)this.addIntersection(f,h,b,P)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n.updateIM=function(){if(2!==arguments.length)return e.prototype.updateIM.apply(this,arguments);var f=arguments[0],h=arguments[1];h.setAtLeastIfValid(f.getLocation(0,Ht.ON),f.getLocation(1,Ht.ON),1),f.isArea()&&(h.setAtLeastIfValid(f.getLocation(0,Ht.LEFT),f.getLocation(1,Ht.LEFT),2),h.setAtLeastIfValid(f.getLocation(0,Ht.RIGHT),f.getLocation(1,Ht.RIGHT),2))},n}(Ia),ma=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new pa,this._bufParams=e||null};ma.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e},ma.prototype.insertUniqueEdge=function(e){var n=this._edgeList.findEqualEdge(e);if(null!==n){var f=n.getLabel(),h=e.getLabel();n.isPointwiseEqual(e)||(h=new On(e.getLabel())).flip(),f.merge(h);var b=ma.depthDelta(h),P=n.getDepthDelta()+b;n.setDepthDelta(P)}else this._edgeList.add(e),e.setDepthDelta(ma.depthDelta(e.getLabel()))},ma.prototype.buildSubgraphs=function(e,n){for(var f=new zt,h=e.iterator();h.hasNext();){var b=h.next(),P=b.getRightmostCoordinate(),B=new $s(f).getDepth(P);b.computeDepth(B),b.findResultEdges(),f.add(b),n.add(b.getDirectedEdges(),b.getNodes())}},ma.prototype.createSubgraphs=function(e){for(var n=new zt,f=e.getNodes().iterator();f.hasNext();){var h=f.next();if(!h.isVisited()){var b=new zi;b.create(h),n.add(b)}}return ro.sort(n,ro.reverseOrder()),n},ma.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ma.prototype.getNoder=function(e){if(null!==this._workingNoder)return this._workingNoder;var n=new tl,f=new ze;return f.setPrecisionModel(e),n.setSegmentIntersector(new ga(f)),n},ma.prototype.buffer=function(e,n){var f=this._workingPrecisionModel;null===f&&(f=e.getPrecisionModel()),this._geomFact=e.getFactory();var h=new Hi(f,this._bufParams),b=new Vr(e,n,h).getCurves();if(b.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(b,f),this._graph=new Jn(new Gr),this._graph.addEdges(this._edgeList.getEdges());var P=this.createSubgraphs(this._graph),B=new wa(this._geomFact);this.buildSubgraphs(P,B);var ae=B.getPolygons();return ae.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(ae)},ma.prototype.computeNodedEdges=function(e,n){var f=this.getNoder(n);f.computeNodes(e);for(var h=f.getNodedSubstrings().iterator();h.hasNext();){var b=h.next(),P=b.getCoordinates();if(2!==P.length||!P[0].equals2D(P[1])){var B=b.getData(),ae=new df(b.getCoordinates(),new On(B));this.insertUniqueEdge(ae)}}},ma.prototype.setNoder=function(e){this._workingNoder=e},ma.prototype.interfaces_=function(){return[]},ma.prototype.getClass=function(){return ma},ma.depthDelta=function(e){var n=e.getLocation(0,Ht.LEFT),f=e.getLocation(0,Ht.RIGHT);return n===de.INTERIOR&&f===de.EXTERIOR?1:n===de.EXTERIOR&&f===de.INTERIOR?-1:0},ma.convertSegStrings=function(e){for(var n=new $r,f=new zt;e.hasNext();){var h=e.next(),b=n.createLineString(h.getCoordinates());f.add(b)}return n.buildGeometry(f)};var as=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var n=arguments[1];this._noder=arguments[0],this._scaleFactor=n,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var h=arguments[1],b=arguments[2],P=arguments[3];this._noder=arguments[0],this._scaleFactor=h,this._offsetX=b,this._offsetY=P,this._isScaled=!this.isIntegerPrecision()}};as.prototype.rescale=function(){if(gt(arguments[0],Un))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var f=arguments[0],h=0;h<f.length;h++)f[h].x=f[h].x/this._scaleFactor+this._offsetX,f[h].y=f[h].y/this._scaleFactor+this._offsetY;2===f.length&&f[0].equals2D(f[1])&&vr.out.println(f)}},as.prototype.scale=function(){if(gt(arguments[0],Un)){for(var e=arguments[0],n=new zt,f=e.iterator();f.hasNext();){var h=f.next();n.add(new gi(this.scale(h.getCoordinates()),h.getData()))}return n}if(arguments[0]instanceof Array){for(var b=arguments[0],P=new Array(b.length).fill(null),B=0;B<b.length;B++)P[B]=new J(Math.round((b[B].x-this._offsetX)*this._scaleFactor),Math.round((b[B].y-this._offsetY)*this._scaleFactor),b[B].z);return Fr.removeRepeatedPoints(P)}},as.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},as.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e},as.prototype.computeNodes=function(e){var n=e;this._isScaled&&(n=this.scale(e)),this._noder.computeNodes(n)},as.prototype.interfaces_=function(){return[is]},as.prototype.getClass=function(){return as};var bo=function(){this._li=new ze,this._segStrings=null,this._segStrings=arguments[0]},nl={fact:{configurable:!0}};bo.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next().getCoordinates();this.checkEndPtVertexIntersections(n[0],this._segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this._segStrings)}else if(2===arguments.length)for(var f=arguments[0],h=arguments[1].iterator();h.hasNext();)for(var b=h.next().getCoordinates(),P=1;P<b.length-1;P++)if(b[P].equals(f))throw new Ie("found endpt/interior pt intersection at index "+P+" :pt "+f)},bo.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),f=this._segStrings.iterator();f.hasNext();){var h=f.next();this.checkInteriorIntersections(n,h)}else if(2===arguments.length)for(var b=arguments[0],P=arguments[1],B=b.getCoordinates(),ae=P.getCoordinates(),Le=0;Le<B.length-1;Le++)for(var tt=0;tt<ae.length-1;tt++)this.checkInteriorIntersections(b,Le,P,tt);else if(4===arguments.length){var vt=arguments[0],Nt=arguments[1],qt=arguments[2],kt=arguments[3];if(vt===qt&&Nt===kt)return null;var Ft=vt.getCoordinates()[Nt],Zt=vt.getCoordinates()[Nt+1],nr=qt.getCoordinates()[kt],wr=qt.getCoordinates()[kt+1];if(this._li.computeIntersection(Ft,Zt,nr,wr),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Ft,Zt)||this.hasInteriorIntersection(this._li,nr,wr)))throw new Ie("found non-noded intersection at "+Ft+"-"+Zt+" and "+nr+"-"+wr)}},bo.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},bo.prototype.checkCollapses=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();this.checkCollapses(n)}else if(1===arguments.length)for(var f=arguments[0].getCoordinates(),h=0;h<f.length-2;h++)this.checkCollapse(f[h],f[h+1],f[h+2])},bo.prototype.hasInteriorIntersection=function(e,n,f){for(var h=0;h<e.getIntersectionNum();h++){var b=e.getIntersection(h);if(!b.equals(n)&&!b.equals(f))return!0}return!1},bo.prototype.checkCollapse=function(e,n,f){if(e.equals(f))throw new Ie("found non-noded collapse at "+bo.fact.createLineString([e,n,f]))},bo.prototype.interfaces_=function(){return[]},bo.prototype.getClass=function(){return bo},nl.fact.get=function(){return new $r},Object.defineProperties(bo,nl);var Ma=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],n=arguments[1],f=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=n,this._li=f,n<=0)throw new ie("Scale factor must be non-zero");1!==n&&(this._pt=new J(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new J,this._p1Scaled=new J),this.initCorners(this._pt)},sc={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Ma.prototype.intersectsScaled=function(e,n){var f=Math.min(e.x,n.x),h=Math.max(e.x,n.x),b=Math.min(e.y,n.y),P=Math.max(e.y,n.y),B=this._maxx<f||this._minx>h||this._maxy<b||this._miny>P;if(B)return!1;var ae=this.intersectsToleranceSquare(e,n);return _e.isTrue(!(B&&ae),"Found bad envelope test"),ae},Ma.prototype.initCorners=function(e){this._minx=e.x-.5,this._maxx=e.x+.5,this._miny=e.y-.5,this._maxy=e.y+.5,this._corner[0]=new J(this._maxx,this._maxy),this._corner[1]=new J(this._minx,this._maxy),this._corner[2]=new J(this._minx,this._miny),this._corner[3]=new J(this._maxx,this._miny)},Ma.prototype.intersects=function(e,n){return 1===this._scaleFactor?this.intersectsScaled(e,n):(this.copyScaled(e,this._p0Scaled),this.copyScaled(n,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Ma.prototype.scale=function(e){return Math.round(e*this._scaleFactor)},Ma.prototype.getCoordinate=function(){return this._originalPt},Ma.prototype.copyScaled=function(e,n){n.x=this.scale(e.x),n.y=this.scale(e.y)},Ma.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var e=Ma.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Yt(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv},Ma.prototype.intersectsPixelClosure=function(e,n){return this._li.computeIntersection(e,n,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,n,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(e,n,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(e,n,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Ma.prototype.intersectsToleranceSquare=function(e,n){var f=!1,h=!1;return this._li.computeIntersection(e,n,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,n,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(f=!0),this._li.computeIntersection(e,n,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(h=!0),this._li.computeIntersection(e,n,this._corner[3],this._corner[0]),this._li.isProper()||f&&h||e.equals(this._pt)||n.equals(this._pt)))))},Ma.prototype.addSnappedNode=function(e,n){var f=e.getCoordinate(n),h=e.getCoordinate(n+1);return!!this.intersects(f,h)&&(e.addIntersection(this.getCoordinate(),n),!0)},Ma.prototype.interfaces_=function(){return[]},Ma.prototype.getClass=function(){return Ma},sc.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Ma,sc);var lu=function(){this.tempEnv1=new Yt,this.selectedSegment=new mr};lu.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},lu.prototype.interfaces_=function(){return[]},lu.prototype.getClass=function(){return lu};var Qs=function(){this._index=null,this._index=arguments[0]},il={HotPixelSnapAction:{configurable:!0}};Qs.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var n=arguments[0],f=arguments[1],h=arguments[2],b=n.getSafeEnvelope(),P=new al(n,f,h);return this._index.query(b,{interfaces_:function(){return[Wo]},visitItem:function(B){B.select(b,P)}}),P.isNodeAdded()}},Qs.prototype.interfaces_=function(){return[]},Qs.prototype.getClass=function(){return Qs},il.HotPixelSnapAction.get=function(){return al},Object.defineProperties(Qs,il);var al=function(e){function n(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var h=arguments[1],b=arguments[2];this._hotPixel=arguments[0],this._parentEdge=h,this._hotPixelVertexIndex=b}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.isNodeAdded=function(){return this._isNodeAdded},n.prototype.select=function(){if(2!==arguments.length)return e.prototype.select.apply(this,arguments);var h=arguments[1],b=arguments[0].getContext();if(null!==this._parentEdge&&b===this._parentEdge&&h===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(b,h)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(lu),Ns=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new zt};Ns.prototype.processIntersections=function(e,n,f,h){if(e===f&&n===h)return null;var b=e.getCoordinates()[n],P=e.getCoordinates()[n+1],B=f.getCoordinates()[h],ae=f.getCoordinates()[h+1];if(this._li.computeIntersection(b,P,B,ae),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var Le=0;Le<this._li.getIntersectionNum();Le++)this._interiorIntersections.add(this._li.getIntersection(Le));e.addIntersections(this._li,n,0),f.addIntersections(this._li,h,1)}},Ns.prototype.isDone=function(){return!1},Ns.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Ns.prototype.interfaces_=function(){return[Ja]},Ns.prototype.getClass=function(){return Ns};var No=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new ze,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};No.prototype.checkCorrectness=function(e){var n=gi.getNodedSubstrings(e),f=new bo(n);try{f.checkValid()}catch(h){if(!(h instanceof sr))throw h;h.printStackTrace()}},No.prototype.getNodedSubstrings=function(){return gi.getNodedSubstrings(this._nodedSegStrings)},No.prototype.snapRound=function(e,n){var f=this.findInteriorIntersections(e,n);this.computeIntersectionSnaps(f),this.computeVertexSnaps(e)},No.prototype.findInteriorIntersections=function(e,n){var f=new Ns(n);return this._noder.setSegmentIntersector(f),this._noder.computeNodes(e),f.getInteriorIntersections()},No.prototype.computeVertexSnaps=function(){if(gt(arguments[0],Un))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof gi)for(var f=arguments[0],h=f.getCoordinates(),b=0;b<h.length;b++){var P=new Ma(h[b],this._scaleFactor,this._li);this._pointSnapper.snap(P,f,b)&&f.addIntersection(h[b],b)}},No.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new tl,this._pointSnapper=new Qs(this._noder.getIndex()),this.snapRound(e,this._li)},No.prototype.computeIntersectionSnaps=function(e){for(var n=e.iterator();n.hasNext();){var f=n.next(),h=new Ma(f,this._scaleFactor,this._li);this._pointSnapper.snap(h)}},No.prototype.interfaces_=function(){return[is]},No.prototype.getClass=function(){return No};var Ti=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new fn,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var f=arguments[1];this._argGeom=arguments[0],this._bufParams=f}},Ms={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ti.prototype.bufferFixedPrecision=function(e){var n=new as(new No(new In(1)),e.getScale()),f=new ma(this._bufParams);f.setWorkingPrecisionModel(e),f.setNoder(n),this._resultGeometry=f.buffer(this._argGeom,this._distance)},Ti.prototype.bufferReducedPrecision=function(){var e=this;if(0===arguments.length){for(var n=Ti.MAX_PRECISION_DIGITS;n>=0;n--){try{e.bufferReducedPrecision(n)}catch(P){if(!(P instanceof Xi))throw P;e._saveException=P}if(null!==e._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var h=Ti.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),b=new In(h);this.bufferFixedPrecision(b)}},Ti.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===In.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()},Ti.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)},Ti.prototype.bufferOriginalPrecision=function(){try{var e=new ma(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(n){if(!(n instanceof Ie))throw n;this._saveException=n}},Ti.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry},Ti.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ti.bufferOp=function(){if(2===arguments.length){var n=arguments[1];return new Ti(arguments[0]).getResultGeometry(n)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Mt&&"number"==typeof arguments[1]){var h=arguments[1],b=arguments[2],P=new Ti(arguments[0]);return P.setQuadrantSegments(b),P.getResultGeometry(h)}if(arguments[2]instanceof fn&&arguments[0]instanceof Mt&&"number"==typeof arguments[1]){var ae=arguments[1];return new Ti(arguments[0],arguments[2]).getResultGeometry(ae)}}else if(4===arguments.length){var vt=arguments[1],Nt=arguments[2],qt=arguments[3],kt=new Ti(arguments[0]);return kt.setQuadrantSegments(Nt),kt.setEndCapStyle(qt),kt.getResultGeometry(vt)}},Ti.precisionScaleFactor=function(e,n,f){var h=e.getEnvelopeInternal(),b=De.max(Math.abs(h.getMaxX()),Math.abs(h.getMaxY()),Math.abs(h.getMinX()),Math.abs(h.getMinY()))+2*(n>0?n:0),P=f-Math.trunc(Math.log(b)/Math.log(10)+1);return Math.pow(10,P)},Ms.CAP_ROUND.get=function(){return fn.CAP_ROUND},Ms.CAP_BUTT.get=function(){return fn.CAP_FLAT},Ms.CAP_FLAT.get=function(){return fn.CAP_FLAT},Ms.CAP_SQUARE.get=function(){return fn.CAP_SQUARE},Ms.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Ti,Ms);var Zi=function(){this._pt=[new J,new J],this._distance=ue.NaN,this._isNull=!0};Zi.prototype.getCoordinates=function(){return this._pt},Zi.prototype.getCoordinate=function(e){return this._pt[e]},Zi.prototype.setMinimum=function(){if(1===arguments.length){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(2===arguments.length){var n=arguments[0],f=arguments[1];if(this._isNull)return this.initialize(n,f),null;var h=n.distance(f);h<this._distance&&this.initialize(n,f,h)}},Zi.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(n),this._distance=e.distance(n),this._isNull=!1}else if(3===arguments.length){var h=arguments[1],b=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(h),this._distance=b,this._isNull=!1}},Zi.prototype.getDistance=function(){return this._distance},Zi.prototype.setMaximum=function(){if(1===arguments.length){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(2===arguments.length){var n=arguments[0],f=arguments[1];if(this._isNull)return this.initialize(n,f),null;var h=n.distance(f);h>this._distance&&this.initialize(n,f,h)}},Zi.prototype.interfaces_=function(){return[]},Zi.prototype.getClass=function(){return Zi};var Mo=function(){};Mo.prototype.interfaces_=function(){return[]},Mo.prototype.getClass=function(){return Mo},Mo.computeDistance=function(){if(arguments[2]instanceof Zi&&arguments[0]instanceof Hn&&arguments[1]instanceof J)for(var n=arguments[1],f=arguments[2],h=arguments[0].getCoordinates(),b=new mr,P=0;P<h.length-1;P++){b.setCoordinates(h[P],h[P+1]);var B=b.closestPoint(n);f.setMinimum(B,n)}else if(arguments[2]instanceof Zi&&arguments[0]instanceof oi&&arguments[1]instanceof J){var ae=arguments[0],Le=arguments[1],tt=arguments[2];Mo.computeDistance(ae.getExteriorRing(),Le,tt);for(var vt=0;vt<ae.getNumInteriorRing();vt++)Mo.computeDistance(ae.getInteriorRingN(vt),Le,tt)}else if(arguments[2]instanceof Zi&&arguments[0]instanceof Mt&&arguments[1]instanceof J){var Nt=arguments[0],qt=arguments[1],kt=arguments[2];if(Nt instanceof Hn)Mo.computeDistance(Nt,qt,kt);else if(Nt instanceof oi)Mo.computeDistance(Nt,qt,kt);else if(Nt instanceof Ni)for(var Ft=Nt,Zt=0;Zt<Ft.getNumGeometries();Zt++){var nr=Ft.getGeometryN(Zt);Mo.computeDistance(nr,qt,kt)}else kt.setMinimum(Nt.getCoordinate(),qt)}else if(arguments[2]instanceof Zi&&arguments[0]instanceof mr&&arguments[1]instanceof J){var Cr=arguments[1],qr=arguments[2],Yr=arguments[0].closestPoint(Cr);qr.setMinimum(Yr,Cr)}};var Es=function(e){this._maxPtDist=new Zi,this._inputGeom=e||null},ol={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Es.prototype.computeMaxMidpointDistance=function(e){var n=new $n(this._inputGeom);e.apply(n),this._maxPtDist.setMaximum(n.getMaxPointDistance())},Es.prototype.computeMaxVertexDistance=function(e){var n=new Ss(this._inputGeom);e.apply(n),this._maxPtDist.setMaximum(n.getMaxPointDistance())},Es.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()},Es.prototype.getDistancePoints=function(){return this._maxPtDist},Es.prototype.interfaces_=function(){return[]},Es.prototype.getClass=function(){return Es},ol.MaxPointDistanceFilter.get=function(){return Ss},ol.MaxMidpointDistanceFilter.get=function(){return $n},Object.defineProperties(Es,ol);var Ss=function(e){this._maxPtDist=new Zi,this._minPtDist=new Zi,this._geom=e||null};Ss.prototype.filter=function(e){this._minPtDist.initialize(),Mo.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ss.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ss.prototype.interfaces_=function(){return[Lr]},Ss.prototype.getClass=function(){return Ss};var $n=function(e){this._maxPtDist=new Zi,this._minPtDist=new Zi,this._geom=e||null};$n.prototype.filter=function(e,n){if(0===n)return null;var f=e.getCoordinate(n-1),h=e.getCoordinate(n),b=new J((f.x+h.x)/2,(f.y+h.y)/2);this._minPtDist.initialize(),Mo.computeDistance(this._geom,b,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},$n.prototype.isDone=function(){return!1},$n.prototype.isGeometryChanged=function(){return!1},$n.prototype.getMaxPointDistance=function(){return this._maxPtDist},$n.prototype.interfaces_=function(){return[bi]},$n.prototype.getClass=function(){return $n};var br=function(e){this._comps=e||null};br.prototype.filter=function(e){e instanceof oi&&this._comps.add(e)},br.prototype.interfaces_=function(){return[Wa]},br.prototype.getClass=function(){return br},br.getPolygons=function(){if(1===arguments.length)return br.getPolygons(arguments[0],new zt);if(2===arguments.length){var n=arguments[0],f=arguments[1];return n instanceof oi?f.add(n):n instanceof Ni&&n.apply(new br(f)),f}};var Ji=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var f=arguments[1];this._lines=arguments[0],this._isForcedToLineString=f}};Ji.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof vo){var n=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(n),null}e instanceof Hn&&this._lines.add(e)},Ji.prototype.setForceToLineString=function(e){this._isForcedToLineString=e},Ji.prototype.interfaces_=function(){return[Vt]},Ji.prototype.getClass=function(){return Ji},Ji.getGeometry=function(){if(1===arguments.length){var e=arguments[0];return e.getFactory().buildGeometry(Ji.getLines(e))}if(2===arguments.length){var n=arguments[0],f=arguments[1];return n.getFactory().buildGeometry(Ji.getLines(n,f))}},Ji.getLines=function(){if(1===arguments.length)return Ji.getLines(arguments[0],!1);if(2===arguments.length){if(gt(arguments[0],Un)&&gt(arguments[1],Un)){for(var f=arguments[1],h=arguments[0].iterator();h.hasNext();){var b=h.next();Ji.getLines(b,f)}return f}if(arguments[0]instanceof Mt&&"boolean"==typeof arguments[1]){var P=arguments[0],B=arguments[1],ae=new zt;return P.apply(new Ji(ae,B)),ae}if(arguments[0]instanceof Mt&&gt(arguments[1],Un)){var Le=arguments[0],tt=arguments[1];return Le instanceof Hn?tt.add(Le):Le.apply(new Ji(tt)),tt}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&gt(arguments[0],Un)&&gt(arguments[1],Un)){for(var Nt=arguments[1],qt=arguments[2],kt=arguments[0].iterator();kt.hasNext();){var Ft=kt.next();Ji.getLines(Ft,Nt,qt)}return Nt}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Mt&&gt(arguments[1],Un)){var nr=arguments[1];return arguments[0].apply(new Ji(nr,arguments[2])),nr}}};var za=function(){if(this._boundaryRule=Ur.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var e=arguments[0];if(null===e)throw new ie("Rule must be non-null");this._boundaryRule=e}};za.prototype.locateInternal=function(){if(arguments[0]instanceof J&&arguments[1]instanceof oi){var e=arguments[0],n=arguments[1];if(n.isEmpty())return de.EXTERIOR;var f=n.getExteriorRing(),h=this.locateInPolygonRing(e,f);if(h===de.EXTERIOR)return de.EXTERIOR;if(h===de.BOUNDARY)return de.BOUNDARY;for(var b=0;b<n.getNumInteriorRing();b++){var P=n.getInteriorRingN(b),B=this.locateInPolygonRing(e,P);if(B===de.INTERIOR)return de.EXTERIOR;if(B===de.BOUNDARY)return de.BOUNDARY}return de.INTERIOR}if(arguments[0]instanceof J&&arguments[1]instanceof Hn){var ae=arguments[0],Le=arguments[1];if(!Le.getEnvelopeInternal().intersects(ae))return de.EXTERIOR;var tt=Le.getCoordinates();return Le.isClosed()||!ae.equals(tt[0])&&!ae.equals(tt[tt.length-1])?je.isOnLine(ae,tt)?de.INTERIOR:de.EXTERIOR:de.BOUNDARY}if(arguments[0]instanceof J&&arguments[1]instanceof ha){var vt=arguments[0];return arguments[1].getCoordinate().equals2D(vt)?de.INTERIOR:de.EXTERIOR}},za.prototype.locateInPolygonRing=function(e,n){return n.getEnvelopeInternal().intersects(e)?je.locatePointInRing(e,n.getCoordinates()):de.EXTERIOR},za.prototype.intersects=function(e,n){return this.locate(e,n)!==de.EXTERIOR},za.prototype.updateLocationInfo=function(e){e===de.INTERIOR&&(this._isIn=!0),e===de.BOUNDARY&&this._numBoundaries++},za.prototype.computeLocation=function(e,n){if(n instanceof ha&&this.updateLocationInfo(this.locateInternal(e,n)),n instanceof Hn)this.updateLocationInfo(this.locateInternal(e,n));else if(n instanceof oi)this.updateLocationInfo(this.locateInternal(e,n));else if(n instanceof ca)for(var f=n,h=0;h<f.getNumGeometries();h++){var b=f.getGeometryN(h);this.updateLocationInfo(this.locateInternal(e,b))}else if(n instanceof na)for(var P=n,B=0;B<P.getNumGeometries();B++){var ae=P.getGeometryN(B);this.updateLocationInfo(this.locateInternal(e,ae))}else if(n instanceof Ni)for(var Le=new qa(n);Le.hasNext();){var tt=Le.next();tt!==n&&this.computeLocation(e,tt)}},za.prototype.locate=function(e,n){return n.isEmpty()?de.EXTERIOR:n instanceof Hn||n instanceof oi?this.locateInternal(e,n):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,n),this._boundaryRule.isInBoundary(this._numBoundaries)?de.BOUNDARY:this._numBoundaries>0||this._isIn?de.INTERIOR:de.EXTERIOR)},za.prototype.interfaces_=function(){return[]},za.prototype.getClass=function(){return za};var da=function e(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)e.call(this,arguments[0],e.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var b=arguments[1],P=arguments[2];this._component=arguments[0],this._segIndex=b,this._pt=P}},Ru={INSIDE_AREA:{configurable:!0}};da.prototype.isInsideArea=function(){return this._segIndex===da.INSIDE_AREA},da.prototype.getCoordinate=function(){return this._pt},da.prototype.getGeometryComponent=function(){return this._component},da.prototype.getSegmentIndex=function(){return this._segIndex},da.prototype.interfaces_=function(){return[]},da.prototype.getClass=function(){return da},Ru.INSIDE_AREA.get=function(){return-1},Object.defineProperties(da,Ru);var os=function(e){this._pts=e||null};os.prototype.filter=function(e){e instanceof ha&&this._pts.add(e)},os.prototype.interfaces_=function(){return[Wa]},os.prototype.getClass=function(){return os},os.getPoints=function(){if(1===arguments.length){var e=arguments[0];return e instanceof ha?ro.singletonList(e):os.getPoints(e,new zt)}if(2===arguments.length){var n=arguments[0],f=arguments[1];return n instanceof ha?f.add(n):n instanceof Ni&&n.apply(new os(f)),f}};var As=function(){this._locations=null,this._locations=arguments[0]};As.prototype.filter=function(e){(e instanceof ha||e instanceof Hn||e instanceof oi)&&this._locations.add(new da(e,0,e.getCoordinate()))},As.prototype.interfaces_=function(){return[Wa]},As.prototype.getClass=function(){return As},As.getLocations=function(e){var n=new zt;return e.apply(new As(n)),n};var Ki=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new za,this._minDistanceLocation=null,this._minDistance=ue.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var f=arguments[0],h=arguments[1],b=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=f,this._geom[1]=h,this._terminateDistance=b}};Ki.prototype.computeContainmentDistance=function(){if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],f=arguments[1],h=1-n,b=br.getPolygons(this._geom[n]);if(b.size()>0){var P=As.getLocations(this._geom[h]);if(this.computeContainmentDistance(P,b,f),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[h]=f[0],this._minDistanceLocation[n]=f[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&gt(arguments[0],di)&&gt(arguments[1],di)){for(var B=arguments[0],ae=arguments[1],Le=arguments[2],tt=0;tt<B.size();tt++)for(var vt=B.get(tt),Nt=0;Nt<ae.size();Nt++)if(this.computeContainmentDistance(vt,ae.get(Nt),Le),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof da&&arguments[1]instanceof oi){var qt=arguments[0],kt=arguments[1],Ft=arguments[2],Zt=qt.getCoordinate();if(de.EXTERIOR!==this._ptLocator.locate(Zt,kt))return this._minDistance=0,Ft[0]=qt,Ft[1]=new da(kt,Zt),null}},Ki.prototype.computeMinDistanceLinesPoints=function(e,n,f){for(var h=0;h<e.size();h++)for(var b=e.get(h),P=0;P<n.size();P++){var B=n.get(P);if(this.computeMinDistance(b,B,f),this._minDistance<=this._terminateDistance)return null}},Ki.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),n=Ji.getLines(this._geom[0]),f=Ji.getLines(this._geom[1]),h=os.getPoints(this._geom[0]),b=os.getPoints(this._geom[1]);return this.computeMinDistanceLines(n,f,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(n,b,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(f,h,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistancePoints(h,b,e),void this.updateMinDistance(e,!1))))},Ki.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ki.prototype.updateMinDistance=function(e,n){if(null===e[0])return null;n?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])},Ki.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ki.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Hn&&arguments[1]instanceof ha){var e=arguments[0],n=arguments[1],f=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var h=e.getCoordinates(),b=n.getCoordinate(),P=0;P<h.length-1;P++){var B=je.distancePointLine(b,h[P],h[P+1]);if(B<this._minDistance){this._minDistance=B;var ae=new mr(h[P],h[P+1]).closestPoint(b);f[0]=new da(e,P,ae),f[1]=new da(n,0,b)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Hn&&arguments[1]instanceof Hn){var Le=arguments[0],tt=arguments[1],vt=arguments[2];if(Le.getEnvelopeInternal().distance(tt.getEnvelopeInternal())>this._minDistance)return null;for(var Nt=Le.getCoordinates(),qt=tt.getCoordinates(),kt=0;kt<Nt.length-1;kt++)for(var Ft=0;Ft<qt.length-1;Ft++){var Zt=je.distanceLineLine(Nt[kt],Nt[kt+1],qt[Ft],qt[Ft+1]);if(Zt<this._minDistance){this._minDistance=Zt;var nr=new mr(Nt[kt],Nt[kt+1]),wr=new mr(qt[Ft],qt[Ft+1]),Cr=nr.closestPoints(wr);vt[0]=new da(Le,kt,Cr[0]),vt[1]=new da(tt,Ft,Cr[1])}if(this._minDistance<=this._terminateDistance)return null}}},Ki.prototype.computeMinDistancePoints=function(e,n,f){for(var h=0;h<e.size();h++)for(var b=e.get(h),P=0;P<n.size();P++){var B=n.get(P),ae=b.getCoordinate().distance(B.getCoordinate());if(ae<this._minDistance&&(this._minDistance=ae,f[0]=new da(b,0,b.getCoordinate()),f[1]=new da(B,0,B.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Ki.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new ie("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ki.prototype.computeMinDistanceLines=function(e,n,f){for(var h=0;h<e.size();h++)for(var b=e.get(h),P=0;P<n.size();P++){var B=n.get(P);if(this.computeMinDistance(b,B,f),this._minDistance<=this._terminateDistance)return null}},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki},Ki.distance=function(e,n){return new Ki(e,n).distance()},Ki.isWithinDistance=function(e,n,f){return new Ki(e,n,f).distance()<=f},Ki.nearestPoints=function(e,n){return new Ki(e,n).nearestPoints()};var sa=function(){this._pt=[new J,new J],this._distance=ue.NaN,this._isNull=!0};sa.prototype.getCoordinates=function(){return this._pt},sa.prototype.getCoordinate=function(e){return this._pt[e]},sa.prototype.setMinimum=function(){if(1===arguments.length){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(2===arguments.length){var n=arguments[0],f=arguments[1];if(this._isNull)return this.initialize(n,f),null;var h=n.distance(f);h<this._distance&&this.initialize(n,f,h)}},sa.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(n),this._distance=e.distance(n),this._isNull=!1}else if(3===arguments.length){var h=arguments[1],b=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(h),this._distance=b,this._isNull=!1}},sa.prototype.toString=function(){return pt.toLineString(this._pt[0],this._pt[1])},sa.prototype.getDistance=function(){return this._distance},sa.prototype.setMaximum=function(){if(1===arguments.length){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(2===arguments.length){var n=arguments[0],f=arguments[1];if(this._isNull)return this.initialize(n,f),null;var h=n.distance(f);h>this._distance&&this.initialize(n,f,h)}},sa.prototype.interfaces_=function(){return[]},sa.prototype.getClass=function(){return sa};var Ea=function(){};Ea.prototype.interfaces_=function(){return[]},Ea.prototype.getClass=function(){return Ea},Ea.computeDistance=function(){if(arguments[2]instanceof sa&&arguments[0]instanceof Hn&&arguments[1]instanceof J)for(var e=arguments[0],n=arguments[1],f=arguments[2],h=new mr,b=e.getCoordinates(),P=0;P<b.length-1;P++){h.setCoordinates(b[P],b[P+1]);var B=h.closestPoint(n);f.setMinimum(B,n)}else if(arguments[2]instanceof sa&&arguments[0]instanceof oi&&arguments[1]instanceof J){var ae=arguments[0],Le=arguments[1],tt=arguments[2];Ea.computeDistance(ae.getExteriorRing(),Le,tt);for(var vt=0;vt<ae.getNumInteriorRing();vt++)Ea.computeDistance(ae.getInteriorRingN(vt),Le,tt)}else if(arguments[2]instanceof sa&&arguments[0]instanceof Mt&&arguments[1]instanceof J){var Nt=arguments[0],qt=arguments[1],kt=arguments[2];if(Nt instanceof Hn)Ea.computeDistance(Nt,qt,kt);else if(Nt instanceof oi)Ea.computeDistance(Nt,qt,kt);else if(Nt instanceof Ni)for(var Ft=Nt,Zt=0;Zt<Ft.getNumGeometries();Zt++){var nr=Ft.getGeometryN(Zt);Ea.computeDistance(nr,qt,kt)}else kt.setMinimum(Nt.getCoordinate(),qt)}else if(arguments[2]instanceof sa&&arguments[0]instanceof mr&&arguments[1]instanceof J){var Cr=arguments[1],qr=arguments[2],Yr=arguments[0].closestPoint(Cr);qr.setMinimum(Yr,Cr)}};var Qr=function(){this._g0=null,this._g1=null,this._ptDist=new sa,this._densifyFrac=0;var n=arguments[1];this._g0=arguments[0],this._g1=n},yf={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Qr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Qr.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new ie("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e},Qr.prototype.compute=function(e,n){this.computeOrientedDistance(e,n,this._ptDist),this.computeOrientedDistance(n,e,this._ptDist)},Qr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Qr.prototype.computeOrientedDistance=function(e,n,f){var h=new Jo(n);if(e.apply(h),f.setMaximum(h.getMaxPointDistance()),this._densifyFrac>0){var b=new Ka(n,this._densifyFrac);e.apply(b),f.setMaximum(b.getMaxPointDistance())}},Qr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.distance=function(){if(2===arguments.length)return new Qr(arguments[0],arguments[1]).distance();if(3===arguments.length){var b=arguments[2],P=new Qr(arguments[0],arguments[1]);return P.setDensifyFraction(b),P.distance()}},yf.MaxPointDistanceFilter.get=function(){return Jo},yf.MaxDensifiedByFractionDistanceFilter.get=function(){return Ka},Object.defineProperties(Qr,yf);var Jo=function(){this._maxPtDist=new sa,this._minPtDist=new sa,this._euclideanDist=new Ea,this._geom=null,this._geom=arguments[0]};Jo.prototype.filter=function(e){this._minPtDist.initialize(),Ea.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Jo.prototype.getMaxPointDistance=function(){return this._maxPtDist},Jo.prototype.interfaces_=function(){return[Lr]},Jo.prototype.getClass=function(){return Jo};var Ka=function(){this._maxPtDist=new sa,this._minPtDist=new sa,this._geom=null,this._numSubSegs=0;var n=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/n))};Ka.prototype.filter=function(e,n){if(0===n)return null;for(var f=e.getCoordinate(n-1),h=e.getCoordinate(n),b=(h.x-f.x)/this._numSubSegs,P=(h.y-f.y)/this._numSubSegs,B=0;B<this._numSubSegs;B++){var tt=new J(f.x+B*b,f.y+B*P);this._minPtDist.initialize(),Ea.computeDistance(this._geom,tt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Ka.prototype.isDone=function(){return!1},Ka.prototype.isGeometryChanged=function(){return!1},Ka.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ka.prototype.interfaces_=function(){return[bi]},Ka.prototype.getClass=function(){return Ka};var Oa=function(e,n,f){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=n||null,this._result=f||null},Cs={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Oa.prototype.checkMaximumDistance=function(e,n,f){var h=new Qr(n,e);if(h.setDensifyFraction(.25),this._maxDistanceFound=h.orientedDistance(),this._maxDistanceFound>f){this._isValid=!1;var b=h.getCoordinates();this._errorLocation=b[1],this._errorIndicator=e.getFactory().createLineString(b),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+pt.toLineString(b[0],b[1])+")"}},Oa.prototype.isValid=function(){var e=Math.abs(this._bufDistance),n=Oa.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-n,this._maxValidDistance=e+n,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Oa.VERBOSE&&vr.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Oa.prototype.checkNegativeValid=function(){if(!(this._input instanceof oi||this._input instanceof na||this._input instanceof Ni))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)},Oa.prototype.getErrorIndicator=function(){return this._errorIndicator},Oa.prototype.checkMinimumDistance=function(e,n,f){var h=new Ki(e,n,f);if(this._minDistanceFound=h.distance(),this._minDistanceFound<f){this._isValid=!1;var b=h.nearestPoints();this._errorLocation=h.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(b),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+pt.toLineString(b[0],b[1])+" )"}},Oa.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)},Oa.prototype.getErrorLocation=function(){return this._errorLocation},Oa.prototype.getPolygonLines=function(e){for(var n=new zt,f=new Ji(n),h=br.getPolygons(e).iterator();h.hasNext();)h.next().apply(f);return e.getFactory().buildGeometry(n)},Oa.prototype.getErrorMessage=function(){return this._errMsg},Oa.prototype.interfaces_=function(){return[]},Oa.prototype.getClass=function(){return Oa},Cs.VERBOSE.get=function(){return!1},Cs.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Oa,Cs);var vi=function(e,n,f){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=n||null,this._result=f||null},Bu={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};vi.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},vi.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*vi.MAX_ENV_DIFF_FRAC;0===e&&(e=.001);var n=new Yt(this._input.getEnvelopeInternal());n.expandBy(this._distance);var f=new Yt(this._result.getEnvelopeInternal());f.expandBy(e),f.contains(n)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(f)),this.report("Envelope")},vi.prototype.checkDistance=function(){var e=new Oa(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")},vi.prototype.checkArea=function(){var e=this._input.getArea(),n=this._result.getArea();this._distance>0&&e>n&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<n&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},vi.prototype.checkPolygonal=function(){this._result instanceof oi||this._result instanceof na||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},vi.prototype.getErrorIndicator=function(){return this._errorIndicator},vi.prototype.getErrorLocation=function(){return this._errorLocation},vi.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},vi.prototype.report=function(e){if(!vi.VERBOSE)return null;vr.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))},vi.prototype.getErrorMessage=function(){return this._errorMsg},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi},vi.isValidMsg=function(e,n,f){var h=new vi(e,n,f);return h.isValid()?null:h.getErrorMessage()},vi.isValid=function(e,n,f){return!!new vi(e,n,f).isValid()},Bu.VERBOSE.get=function(){return!1},Bu.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(vi,Bu);var We=function(){this._pts=null,this._data=null;var n=arguments[1];this._pts=arguments[0],this._data=n};We.prototype.getCoordinates=function(){return this._pts},We.prototype.size=function(){return this._pts.length},We.prototype.getCoordinate=function(e){return this._pts[e]},We.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},We.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:Zs.octant(this.getCoordinate(e),this.getCoordinate(e+1))},We.prototype.setData=function(e){this._data=e},We.prototype.getData=function(){return this._data},We.prototype.toString=function(){return pt.toLineString(new fi(this._pts))},We.prototype.interfaces_=function(){return[no]},We.prototype.getClass=function(){return We};var Gi=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new zt,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};Gi.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Gi.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e},Gi.prototype.getIntersectionSegments=function(){return this._intSegments},Gi.prototype.count=function(){return this._intersectionCount},Gi.prototype.getIntersections=function(){return this._intersections},Gi.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e},Gi.prototype.setKeepIntersections=function(e){this._keepIntersections=e},Gi.prototype.processIntersections=function(e,n,f,h){if(!this._findAllIntersections&&this.hasIntersection()||e===f&&n===h||this._isCheckEndSegmentsOnly&&!this.isEndSegment(e,n)&&!this.isEndSegment(f,h))return null;var b=e.getCoordinates()[n],P=e.getCoordinates()[n+1],B=f.getCoordinates()[h],ae=f.getCoordinates()[h+1];this._li.computeIntersection(b,P,B,ae),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=b,this._intSegments[1]=P,this._intSegments[2]=B,this._intSegments[3]=ae,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Gi.prototype.isEndSegment=function(e,n){return 0===n||n>=e.size()-2},Gi.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Gi.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Gi.prototype.interfaces_=function(){return[Ja]},Gi.prototype.getClass=function(){return Gi},Gi.createAllIntersectionsFinder=function(e){var n=new Gi(e);return n.setFindAllIntersections(!0),n},Gi.createAnyIntersectionFinder=function(e){return new Gi(e)},Gi.createIntersectionCounter=function(e){var n=new Gi(e);return n.setFindAllIntersections(!0),n.setKeepIntersections(!1),n};var $a=function(){this._li=new ze,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};$a.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},$a.prototype.getIntersections=function(){return this._segInt.getIntersections()},$a.prototype.isValid=function(){return this.execute(),this._isValid},$a.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e},$a.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Gi(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new tl;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},$a.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Xi(this.getErrorMessage(),this._segInt.getInteriorIntersection())},$a.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+pt.toLineString(e[0],e[1])+" and "+pt.toLineString(e[2],e[3])},$a.prototype.interfaces_=function(){return[]},$a.prototype.getClass=function(){return $a},$a.computeIntersections=function(e){var n=new $a(e);return n.setFindAllIntersections(!0),n.isValid(),n.getIntersections()};var Eo=function e(){this._nv=null,this._nv=new $a(e.toSegmentStrings(arguments[0]))};Eo.prototype.checkValid=function(){this._nv.checkValid()},Eo.prototype.interfaces_=function(){return[]},Eo.prototype.getClass=function(){return Eo},Eo.toSegmentStrings=function(e){for(var n=new zt,f=e.iterator();f.hasNext();){var h=f.next();n.add(new We(h.getCoordinates(),h))}return n},Eo.checkValid=function(e){new Eo(e).checkValid()};var So=function(e){this._mapOp=e};So.prototype.map=function(e){for(var n=new zt,f=0;f<e.getNumGeometries();f++){var h=this._mapOp.map(e.getGeometryN(f));h.isEmpty()||n.add(h)}return e.getFactory().createGeometryCollection($r.toGeometryArray(n))},So.prototype.interfaces_=function(){return[]},So.prototype.getClass=function(){return So},So.map=function(e,n){return new So(n).map(e)};var Qa=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new zt,this._resultLineList=new zt;var n=arguments[1],f=arguments[2];this._op=arguments[0],this._geometryFactory=n,this._ptLocator=f};Qa.prototype.collectLines=function(e){for(var n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var f=n.next();this.collectLineEdge(f,e,this._lineEdgesList),this.collectBoundaryTouchEdge(f,e,this._lineEdgesList)}},Qa.prototype.labelIsolatedLine=function(e,n){var f=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(n));e.getLabel().setLocation(n,f)},Qa.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList},Qa.prototype.collectLineEdge=function(e,n,f){var h=e.getLabel(),b=e.getEdge();e.isLineEdge()&&(e.isVisited()||!Br.isResultOfOp(h,n)||b.isCovered()||(f.add(b),e.setVisitedEdge(!0)))},Qa.prototype.findCoveredLineEdges=function(){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();)e.next().getEdges().findCoveredLineEdges();for(var n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var f=n.next(),h=f.getEdge();if(f.isLineEdge()&&!h.isCoveredSet()){var b=this._op.isCoveredByA(f.getCoordinate());h.setCovered(b)}}},Qa.prototype.labelIsolatedLines=function(e){for(var n=e.iterator();n.hasNext();){var f=n.next(),h=f.getLabel();f.isIsolated()&&(h.isNull(0)?this.labelIsolatedLine(f,0):this.labelIsolatedLine(f,1))}},Qa.prototype.buildLines=function(e){for(var n=this._lineEdgesList.iterator();n.hasNext();){var f=n.next(),h=this._geometryFactory.createLineString(f.getCoordinates());this._resultLineList.add(h),f.setInResult(!0)}},Qa.prototype.collectBoundaryTouchEdge=function(e,n,f){var h=e.getLabel();return e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult()?null:(_e.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),void(Br.isResultOfOp(h,n)&&n===Br.INTERSECTION&&(f.add(e.getEdge()),e.setVisitedEdge(!0))))},Qa.prototype.interfaces_=function(){return[]},Qa.prototype.getClass=function(){return Qa};var Ko=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new zt;var n=arguments[1];this._op=arguments[0],this._geometryFactory=n};Ko.prototype.filterCoveredNodeToPoint=function(e){var n=e.getCoordinate();if(!this._op.isCoveredByLA(n)){var f=this._geometryFactory.createPoint(n);this._resultPointList.add(f)}},Ko.prototype.extractNonCoveredResultNodes=function(e){for(var n=this._op.getGraph().getNodes().iterator();n.hasNext();){var f=n.next();if(!(f.isInResult()||f.isIncidentEdgeInResult()||0!==f.getEdges().getDegree()&&e!==Br.INTERSECTION)){var h=f.getLabel();Br.isResultOfOp(h,e)&&this.filterCoveredNodeToPoint(f)}}},Ko.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList},Ko.prototype.interfaces_=function(){return[]},Ko.prototype.getClass=function(){return Ko};var $i=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};$i.prototype.transformPoint=function(e,n){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))},$i.prototype.transformPolygon=function(e,n){var f=!0,h=this.transformLinearRing(e.getExteriorRing(),e);null!==h&&h instanceof vo&&!h.isEmpty()||(f=!1);for(var b=new zt,P=0;P<e.getNumInteriorRing();P++){var B=this.transformLinearRing(e.getInteriorRingN(P),e);null===B||B.isEmpty()||(B instanceof vo||(f=!1),b.add(B))}if(f)return this._factory.createPolygon(h,b.toArray([]));var ae=new zt;return null!==h&&ae.add(h),ae.addAll(b),this._factory.buildGeometry(ae)},$i.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)},$i.prototype.getInputGeometry=function(){return this._inputGeom},$i.prototype.transformMultiLineString=function(e,n){for(var f=new zt,h=0;h<e.getNumGeometries();h++){var b=this.transformLineString(e.getGeometryN(h),e);null!==b&&(b.isEmpty()||f.add(b))}return this._factory.buildGeometry(f)},$i.prototype.transformCoordinates=function(e,n){return this.copy(e)},$i.prototype.transformLineString=function(e,n){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))},$i.prototype.transformMultiPoint=function(e,n){for(var f=new zt,h=0;h<e.getNumGeometries();h++){var b=this.transformPoint(e.getGeometryN(h),e);null!==b&&(b.isEmpty()||f.add(b))}return this._factory.buildGeometry(f)},$i.prototype.transformMultiPolygon=function(e,n){for(var f=new zt,h=0;h<e.getNumGeometries();h++){var b=this.transformPolygon(e.getGeometryN(h),e);null!==b&&(b.isEmpty()||f.add(b))}return this._factory.buildGeometry(f)},$i.prototype.copy=function(e){return e.copy()},$i.prototype.transformGeometryCollection=function(e,n){for(var f=new zt,h=0;h<e.getNumGeometries();h++){var b=this.transform(e.getGeometryN(h));null!==b&&(this._pruneEmptyGeometry&&b.isEmpty()||f.add(b))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection($r.toGeometryArray(f)):this._factory.buildGeometry(f)},$i.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof ha)return this.transformPoint(e,null);if(e instanceof rs)return this.transformMultiPoint(e,null);if(e instanceof vo)return this.transformLinearRing(e,null);if(e instanceof Hn)return this.transformLineString(e,null);if(e instanceof ca)return this.transformMultiLineString(e,null);if(e instanceof oi)return this.transformPolygon(e,null);if(e instanceof na)return this.transformMultiPolygon(e,null);if(e instanceof Ni)return this.transformGeometryCollection(e,null);throw new ie("Unknown Geometry subtype: "+e.getClass().getName())},$i.prototype.transformLinearRing=function(e,n){var f=this.transformCoordinates(e.getCoordinateSequence(),e);if(null===f)return this._factory.createLinearRing(null);var h=f.size();return h>0&&h<4&&!this._preserveType?this._factory.createLineString(f):this._factory.createLinearRing(f)},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i};var zo=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new mr,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Hn&&"number"==typeof arguments[1]){var f=arguments[1];e.call(this,arguments[0].getCoordinates(),f)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var h=arguments[0],b=arguments[1];this._srcPts=h,this._isClosed=e.isClosed(h),this._snapTolerance=b}};zo.prototype.snapVertices=function(e,n){for(var f=this._isClosed?e.size()-1:e.size(),h=0;h<f;h++){var b=e.get(h),P=this.findSnapForVertex(b,n);null!==P&&(e.set(h,new J(P)),0===h&&this._isClosed&&e.set(e.size()-1,new J(P)))}},zo.prototype.findSnapForVertex=function(e,n){for(var f=0;f<n.length;f++){if(e.equals2D(n[f]))return null;if(e.distance(n[f])<this._snapTolerance)return n[f]}return null},zo.prototype.snapTo=function(e){var n=new la(this._srcPts);return this.snapVertices(n,e),this.snapSegments(n,e),n.toCoordinateArray()},zo.prototype.snapSegments=function(e,n){if(0===n.length)return null;var f=n.length;n[0].equals2D(n[n.length-1])&&(f=n.length-1);for(var h=0;h<f;h++){var b=n[h],P=this.findSegmentIndexToSnap(b,e);P>=0&&e.add(P+1,new J(b),!1)}},zo.prototype.findSegmentIndexToSnap=function(e,n){for(var f=ue.MAX_VALUE,h=-1,b=0;b<n.size()-1;b++){if(this._seg.p0=n.get(b),this._seg.p1=n.get(b+1),this._seg.p0.equals2D(e)||this._seg.p1.equals2D(e)){if(this._allowSnappingToSourceVertices)continue;return-1}var P=this._seg.distance(e);P<this._snapTolerance&&P<f&&(f=P,h=b)}return h},zo.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e},zo.prototype.interfaces_=function(){return[]},zo.prototype.getClass=function(){return zo},zo.isClosed=function(e){return!(e.length<=1)&&e[0].equals2D(e[e.length-1])};var mi=function(e){this._srcGeom=e||null},Ua={SNAP_PRECISION_FACTOR:{configurable:!0}};mi.prototype.snapTo=function(e,n){var f=this.extractTargetCoordinates(e);return new xr(n,f).transform(this._srcGeom)},mi.prototype.snapToSelf=function(e,n){var f=this.extractTargetCoordinates(this._srcGeom),h=new xr(e,f,!0).transform(this._srcGeom),b=h;return n&&gt(b,go)&&(b=h.buffer(0)),b},mi.prototype.computeSnapTolerance=function(e){return this.computeMinimumSegmentLength(e)/10},mi.prototype.extractTargetCoordinates=function(e){for(var n=new ne,f=e.getCoordinates(),h=0;h<f.length;h++)n.add(f[h]);return n.toArray(new Array(0).fill(null))},mi.prototype.computeMinimumSegmentLength=function(e){for(var n=ue.MAX_VALUE,f=0;f<e.length-1;f++){var h=e[f].distance(e[f+1]);h<n&&(n=h)}return n},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi},mi.snap=function(e,n,f){var h=new Array(2).fill(null),b=new mi(e);h[0]=b.snapTo(n,f);var P=new mi(n);return h[1]=P.snapTo(h[0],f),h},mi.computeOverlaySnapTolerance=function(){if(1===arguments.length){var e=arguments[0],n=mi.computeSizeBasedSnapTolerance(e),f=e.getPrecisionModel();if(f.getType()===In.FIXED){var h=1/f.getScale()*2/1.415;h>n&&(n=h)}return n}if(2===arguments.length){var P=arguments[1];return Math.min(mi.computeOverlaySnapTolerance(arguments[0]),mi.computeOverlaySnapTolerance(P))}},mi.computeSizeBasedSnapTolerance=function(e){var n=e.getEnvelopeInternal();return Math.min(n.getHeight(),n.getWidth())*mi.SNAP_PRECISION_FACTOR},mi.snapToSelf=function(e,n,f){return new mi(e).snapToSelf(n,f)},Ua.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(mi,Ua);var xr=function(e){function n(f,h,b){e.call(this),this._snapTolerance=f||null,this._snapPts=h||null,this._isSelfSnap=void 0!==b&&b}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.snapLine=function(f,h){var b=new zo(f,this._snapTolerance);return b.setAllowSnappingToSourceVertices(this._isSelfSnap),b.snapTo(h)},n.prototype.transformCoordinates=function(f,h){var b=f.toCoordinateArray(),P=this.snapLine(b,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(P)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}($i),ni=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};ni.prototype.getCommon=function(){return ue.longBitsToDouble(this._commonBits)},ni.prototype.add=function(e){var n=ue.doubleToLongBits(e);return this._isFirst?(this._commonBits=n,this._commonSignExp=ni.signExpBits(this._commonBits),this._isFirst=!1,null):ni.signExpBits(n)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=ni.numCommonMostSigMantissaBits(this._commonBits,n),void(this._commonBits=ni.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},ni.prototype.toString=function(){if(1===arguments.length){var e=arguments[0],n=ue.longBitsToDouble(e),f="0000000000000000000000000000000000000000000000000000000000000000"+ue.toBinaryString(e),h=f.substring(f.length-64);return h.substring(0,1)+"  "+h.substring(1,12)+"(exp) "+h.substring(12)+" [ "+n+" ]"}},ni.prototype.interfaces_=function(){return[]},ni.prototype.getClass=function(){return ni},ni.getBit=function(e,n){return e&1<<n?1:0},ni.signExpBits=function(e){return e>>52},ni.zeroLowerBits=function(e,n){return e&~((1<<n)-1)},ni.numCommonMostSigMantissaBits=function(e,n){for(var f=0,h=52;h>=0;h--){if(ni.getBit(e,h)!==ni.getBit(n,h))return f;f++}return 52};var Uo=function(){this._commonCoord=null,this._ccFilter=new Is},cu={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Uo.prototype.addCommonBits=function(e){var n=new ss(this._commonCoord);e.apply(n),e.geometryChanged()},Uo.prototype.removeCommonBits=function(e){if(0===this._commonCoord.x&&0===this._commonCoord.y)return e;var n=new J(this._commonCoord);n.x=-n.x,n.y=-n.y;var f=new ss(n);return e.apply(f),e.geometryChanged(),e},Uo.prototype.getCommonCoordinate=function(){return this._commonCoord},Uo.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Uo.prototype.interfaces_=function(){return[]},Uo.prototype.getClass=function(){return Uo},cu.CommonCoordinateFilter.get=function(){return Is},cu.Translater.get=function(){return ss},Object.defineProperties(Uo,cu);var Is=function(){this._commonBitsX=new ni,this._commonBitsY=new ni};Is.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)},Is.prototype.getCommonCoordinate=function(){return new J(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Is.prototype.interfaces_=function(){return[Lr]},Is.prototype.getClass=function(){return Is};var ss=function(){this.trans=null,this.trans=arguments[0]};ss.prototype.filter=function(e,n){var f=e.getOrdinate(n,0)+this.trans.x,h=e.getOrdinate(n,1)+this.trans.y;e.setOrdinate(n,0,f),e.setOrdinate(n,1,h)},ss.prototype.isDone=function(){return!1},ss.prototype.isGeometryChanged=function(){return!0},ss.prototype.interfaces_=function(){return[bi]},ss.prototype.getClass=function(){return ss};var Ei=function(e,n){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=n,this.computeSnapTolerance()};Ei.prototype.selfSnap=function(e){return new mi(e).snapTo(e,this._snapTolerance)},Ei.prototype.removeCommonBits=function(e){this._cbr=new Uo,this._cbr.add(e[0]),this._cbr.add(e[1]);var n=new Array(2).fill(null);return n[0]=this._cbr.removeCommonBits(e[0].copy()),n[1]=this._cbr.removeCommonBits(e[1].copy()),n},Ei.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e},Ei.prototype.getResultGeometry=function(e){var n=this.snap(this._geom),f=Br.overlayOp(n[0],n[1],e);return this.prepareResult(f)},Ei.prototype.checkValid=function(e){e.isValid()||vr.out.println("Snapped geometry is invalid")},Ei.prototype.computeSnapTolerance=function(){this._snapTolerance=mi.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Ei.prototype.snap=function(e){var n=this.removeCommonBits(e);return mi.snap(n[0],n[1],this._snapTolerance)},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei},Ei.overlayOp=function(e,n,f){return new Ei(e,n).getResultGeometry(f)},Ei.union=function(e,n){return Ei.overlayOp(e,n,Br.UNION)},Ei.intersection=function(e,n){return Ei.overlayOp(e,n,Br.INTERSECTION)},Ei.symDifference=function(e,n){return Ei.overlayOp(e,n,Br.SYMDIFFERENCE)},Ei.difference=function(e,n){return Ei.overlayOp(e,n,Br.DIFFERENCE)};var Qi=function(e,n){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=n};Qi.prototype.getResultGeometry=function(e){var n=null,f=!1,h=null;try{n=Br.overlayOp(this._geom[0],this._geom[1],e),f=!0}catch(b){if(!(b instanceof Ie))throw b;h=b}if(!f)try{n=Ei.overlayOp(this._geom[0],this._geom[1],e)}catch(b){throw b instanceof Ie?h:b}return n},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi},Qi.overlayOp=function(e,n,f){return new Qi(e,n).getResultGeometry(f)},Qi.union=function(e,n){return Qi.overlayOp(e,n,Br.UNION)},Qi.intersection=function(e,n){return Qi.overlayOp(e,n,Br.INTERSECTION)},Qi.symDifference=function(e,n){return Qi.overlayOp(e,n,Br.SYMDIFFERENCE)},Qi.difference=function(e,n){return Qi.overlayOp(e,n,Br.DIFFERENCE)};var Ao=function(){this.mce=null,this.chainIndex=null;var n=arguments[1];this.mce=arguments[0],this.chainIndex=n};Ao.prototype.computeIntersections=function(e,n){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,n)},Ao.prototype.interfaces_=function(){return[]},Ao.prototype.getClass=function(){return Ao};var ji=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var n=arguments[0],f=arguments[1];this._eventType=e.DELETE,this._xValue=n,this._insertEvent=f}else if(3===arguments.length){var h=arguments[0],b=arguments[1],P=arguments[2];this._eventType=e.INSERT,this._label=h,this._xValue=b,this._obj=P}},Fu={INSERT:{configurable:!0},DELETE:{configurable:!0}};ji.prototype.isDelete=function(){return this._eventType===ji.DELETE},ji.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e},ji.prototype.getObject=function(){return this._obj},ji.prototype.compareTo=function(e){return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ji.prototype.getInsertEvent=function(){return this._insertEvent},ji.prototype.isInsert=function(){return this._eventType===ji.INSERT},ji.prototype.isSameLabel=function(e){return null!==this._label&&this._label===e._label},ji.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ji.prototype.interfaces_=function(){return[fe]},ji.prototype.getClass=function(){return ji},Fu.INSERT.get=function(){return 1},Fu.DELETE.get=function(){return 2},Object.defineProperties(ji,Fu);var qu=function(){};qu.prototype.interfaces_=function(){return[]},qu.prototype.getClass=function(){return qu};var Si=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var n=arguments[1],f=arguments[2];this._li=arguments[0],this._includeProper=n,this._recordIsolated=f};Si.prototype.isTrivialIntersection=function(e,n,f,h){if(e===f&&1===this._li.getIntersectionNum()){if(Si.isAdjacentSegments(n,h))return!0;if(e.isClosed()){var b=e.getNumPoints()-1;if(0===n&&h===b||0===h&&n===b)return!0}}return!1},Si.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Si.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e},Si.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Si.prototype.isBoundaryPointInternal=function(e,n){for(var f=n.iterator();f.hasNext();){var h=f.next().getCoordinate();if(e.isIntersection(h))return!0}return!1},Si.prototype.hasProperIntersection=function(){return this._hasProper},Si.prototype.hasIntersection=function(){return this._hasIntersection},Si.prototype.isDone=function(){return this._isDone},Si.prototype.isBoundaryPoint=function(e,n){return!(null===n||!this.isBoundaryPointInternal(e,n[0])&&!this.isBoundaryPointInternal(e,n[1]))},Si.prototype.setBoundaryNodes=function(e,n){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=n},Si.prototype.addIntersections=function(e,n,f,h){if(e===f&&n===h)return null;this.numTests++;var b=e.getCoordinates()[n],P=e.getCoordinates()[n+1],B=f.getCoordinates()[h],ae=f.getCoordinates()[h+1];this._li.computeIntersection(b,P,B,ae),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),f.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,n,f,h)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(e.addIntersections(this._li,n,0),f.addIntersections(this._li,h,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si},Si.isAdjacentSegments=function(e,n){return 1===Math.abs(e-n)};var sl=function(e){function n(){e.call(this),this.events=new zt,this.nOverlaps=null}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.prepareEvents=function(){ro.sort(this.events);for(var f=0;f<this.events.size();f++){var h=this.events.get(f);h.isDelete()&&h.getInsertEvent().setDeleteEventIndex(f)}},n.prototype.computeIntersections=function(){if(1===arguments.length){var f=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var h=0;h<this.events.size();h++){var b=this.events.get(h);if(b.isInsert()&&this.processOverlaps(h,b.getDeleteEventIndex(),b,f),f.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Si&&gt(arguments[0],di)&&gt(arguments[1],di)){var P=arguments[0],B=arguments[1],ae=arguments[2];this.addEdges(P,P),this.addEdges(B,B),this.computeIntersections(ae)}else if("boolean"==typeof arguments[2]&&gt(arguments[0],di)&&arguments[1]instanceof Si){var Le=arguments[0],tt=arguments[1];arguments[2]?this.addEdges(Le,null):this.addEdges(Le),this.computeIntersections(tt)}},n.prototype.addEdge=function(f,h){for(var b=f.getMonotoneChainEdge(),P=b.getStartIndexes(),B=0;B<P.length-1;B++){var ae=new Ao(b,B),Le=new ji(h,b.getMinX(B),ae);this.events.add(Le),this.events.add(new ji(b.getMaxX(B),Le))}},n.prototype.processOverlaps=function(f,h,b,P){for(var B=b.getObject(),ae=f;ae<h;ae++){var Le=this.events.get(ae);if(Le.isInsert()){var tt=Le.getObject();b.isSameLabel(Le)||(B.computeIntersections(tt,P),this.nOverlaps++)}}},n.prototype.addEdges=function(){if(1===arguments.length)for(var f=arguments[0].iterator();f.hasNext();){var h=f.next();this.addEdge(h,h)}else if(2===arguments.length)for(var P=arguments[1],B=arguments[0].iterator();B.hasNext();){var ae=B.next();this.addEdge(ae,P)}},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(qu),Ga=function(){this._min=ue.POSITIVE_INFINITY,this._max=ue.NEGATIVE_INFINITY},js={NodeComparator:{configurable:!0}};Ga.prototype.getMin=function(){return this._min},Ga.prototype.intersects=function(e,n){return!(this._min>n||this._max<e)},Ga.prototype.getMax=function(){return this._max},Ga.prototype.toString=function(){return pt.toLineString(new J(this._min,0),new J(this._max,0))},Ga.prototype.interfaces_=function(){return[]},Ga.prototype.getClass=function(){return Ga},js.NodeComparator.get=function(){return zu},Object.defineProperties(Ga,js);var zu=function(){};zu.prototype.compare=function(e,n){var b=(e._min+e._max)/2,P=(n._min+n._max)/2;return b<P?-1:b>P?1:0},zu.prototype.interfaces_=function(){return[be]},zu.prototype.getClass=function(){return zu};var ul=function(e){function n(){e.call(this),this._item=null;var h=arguments[1],b=arguments[2];this._min=arguments[0],this._max=h,this._item=b}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.query=function(f,h,b){if(!this.intersects(f,h))return null;b.visitItem(this._item)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Ga),so=function(e){function n(){e.call(this),this._node1=null,this._node2=null;var h=arguments[1];this._node1=arguments[0],this._node2=h,this.buildExtent(this._node1,this._node2)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.buildExtent=function(f,h){this._min=Math.min(f._min,h._min),this._max=Math.max(f._max,h._max)},n.prototype.query=function(f,h,b){if(!this.intersects(f,h))return null;null!==this._node1&&this._node1.query(f,h,b),null!==this._node2&&this._node2.query(f,h,b)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Ga),Go=function(){this._leaves=new zt,this._root=null,this._level=0};Go.prototype.buildTree=function(){ro.sort(this._leaves,new Ga.NodeComparator);for(var e=this._leaves,n=null,f=new zt;;){if(this.buildLevel(e,f),1===f.size())return f.get(0);n=e,e=f,f=n}},Go.prototype.insert=function(e,n,f){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new ul(e,n,f))},Go.prototype.query=function(e,n,f){this.init(),this._root.query(e,n,f)},Go.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Go.prototype.printNode=function(e){vr.out.println(pt.toLineString(new J(e._min,this._level),new J(e._max,this._level)))},Go.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Go.prototype.buildLevel=function(e,n){this._level++,n.clear();for(var f=0;f<e.size();f+=2){var h=e.get(f);if(null===(f+1<e.size()?e.get(f):null))n.add(h);else{var b=new so(e.get(f),e.get(f+1));n.add(b)}}},Go.prototype.interfaces_=function(){return[]},Go.prototype.getClass=function(){return Go};var us=function(){this._items=new zt};us.prototype.visitItem=function(e){this._items.add(e)},us.prototype.getItems=function(){return this._items},us.prototype.interfaces_=function(){return[Wo]},us.prototype.getClass=function(){return us};var hu=function(){this._index=null;var e=arguments[0];if(!gt(e,go))throw new ie("Argument must be Polygonal");this._index=new fs(e)},_f={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};hu.prototype.locate=function(e){var n=new Je(e),f=new Os(n);return this._index.query(e.y,e.y,f),n.getLocation()},hu.prototype.interfaces_=function(){return[ao]},hu.prototype.getClass=function(){return hu},_f.SegmentVisitor.get=function(){return Os},_f.IntervalIndexedGeometry.get=function(){return fs},Object.defineProperties(hu,_f);var Os=function(){this._counter=null,this._counter=arguments[0]};Os.prototype.visitItem=function(e){var n=e;this._counter.countSegment(n.getCoordinate(0),n.getCoordinate(1))},Os.prototype.interfaces_=function(){return[Wo]},Os.prototype.getClass=function(){return Os};var fs=function(){this._index=new Go,this.init(arguments[0])};fs.prototype.init=function(e){for(var n=Ji.getLines(e).iterator();n.hasNext();){var f=n.next().getCoordinates();this.addLine(f)}},fs.prototype.addLine=function(e){for(var n=1;n<e.length;n++){var f=new mr(e[n-1],e[n]),h=Math.min(f.p0.y,f.p1.y),b=Math.max(f.p0.y,f.p1.y);this._index.insert(h,b,f)}},fs.prototype.query=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1],f=new us;return this._index.query(e,n,f),f.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},fs.prototype.interfaces_=function(){return[]},fs.prototype.getClass=function(){return fs};var Uu=function(e){function n(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new $l,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new za,2===arguments.length){var h=arguments[1],b=Ur.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=h,this._boundaryNodeRule=b,null!==h&&this.add(h)}else if(3===arguments.length){var B=arguments[1],ae=arguments[2];this._argIndex=arguments[0],this._parentGeom=B,this._boundaryNodeRule=ae,null!==B&&this.add(B)}}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.insertBoundaryPoint=function(f,h){var b=this._nodes.addNode(h).getLabel(),P=1;b.getLocation(f,Ht.ON)===de.BOUNDARY&&P++;var B=n.determineBoundary(this._boundaryNodeRule,P);b.setLocation(f,B)},n.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var P=arguments[1],B=arguments[2],ae=new Si(arguments[0],!0,!1);return ae.setIsDoneIfProperInt(B),this.createEdgeSetIntersector().computeIntersections(this._edges,ae,P||!(this._parentGeom instanceof vo||this._parentGeom instanceof oi||this._parentGeom instanceof na)),this.addSelfIntersectionNodes(this._argIndex),ae}},n.prototype.computeSplitEdges=function(f){for(var h=this._edges.iterator();h.hasNext();)h.next().eiList.addSplitEdges(f)},n.prototype.computeEdgeIntersections=function(f,h,b){var P=new Si(h,b,!0);return P.setBoundaryNodes(this.getBoundaryNodes(),f.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,f._edges,P),P},n.prototype.getGeometry=function(){return this._parentGeom},n.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},n.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},n.prototype.addPoint=function(){if(arguments[0]instanceof ha){var f=arguments[0].getCoordinate();this.insertPoint(this._argIndex,f,de.INTERIOR)}else arguments[0]instanceof J&&this.insertPoint(this._argIndex,arguments[0],de.INTERIOR)},n.prototype.addPolygon=function(f){this.addPolygonRing(f.getExteriorRing(),de.EXTERIOR,de.INTERIOR);for(var h=0;h<f.getNumInteriorRing();h++){var b=f.getInteriorRingN(h);this.addPolygonRing(b,de.INTERIOR,de.EXTERIOR)}},n.prototype.addEdge=function(f){this.insertEdge(f);var h=f.getCoordinates();this.insertPoint(this._argIndex,h[0],de.BOUNDARY),this.insertPoint(this._argIndex,h[h.length-1],de.BOUNDARY)},n.prototype.addLineString=function(f){var h=Fr.removeRepeatedPoints(f.getCoordinates());if(h.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=h[0],null;var b=new df(h,new On(this._argIndex,de.INTERIOR));this._lineEdgeMap.put(f,b),this.insertEdge(b),_e.isTrue(h.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,h[0]),this.insertBoundaryPoint(this._argIndex,h[h.length-1])},n.prototype.getInvalidPoint=function(){return this._invalidPoint},n.prototype.getBoundaryPoints=function(){for(var f=this.getBoundaryNodes(),h=new Array(f.size()).fill(null),b=0,P=f.iterator();P.hasNext();){var B=P.next();h[b++]=B.getCoordinate().copy()}return h},n.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},n.prototype.addSelfIntersectionNode=function(f,h,b){if(this.isBoundaryNode(f,h))return null;b===de.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(f,h):this.insertPoint(f,h,b)},n.prototype.addPolygonRing=function(f,h,b){if(f.isEmpty())return null;var P=Fr.removeRepeatedPoints(f.getCoordinates());if(P.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=P[0],null;var B=h,ae=b;je.isCCW(P)&&(B=b,ae=h);var Le=new df(P,new On(this._argIndex,de.BOUNDARY,B,ae));this._lineEdgeMap.put(f,Le),this.insertEdge(Le),this.insertPoint(this._argIndex,P[0],de.BOUNDARY)},n.prototype.insertPoint=function(f,h,b){var P=this._nodes.addNode(h),B=P.getLabel();null===B?P._label=new On(f,b):B.setLocation(f,b)},n.prototype.createEdgeSetIntersector=function(){return new sl},n.prototype.addSelfIntersectionNodes=function(f){for(var h=this._edges.iterator();h.hasNext();)for(var b=h.next(),P=b.getLabel().getLocation(f),B=b.eiList.iterator();B.hasNext();){var ae=B.next();this.addSelfIntersectionNode(f,ae.coord,P)}},n.prototype.add=function(){if(1!==arguments.length)return e.prototype.add.apply(this,arguments);var f=arguments[0];if(f.isEmpty())return null;if(f instanceof na&&(this._useBoundaryDeterminationRule=!1),f instanceof oi)this.addPolygon(f);else if(f instanceof Hn)this.addLineString(f);else if(f instanceof ha)this.addPoint(f);else if(f instanceof rs)this.addCollection(f);else if(f instanceof ca)this.addCollection(f);else if(f instanceof na)this.addCollection(f);else{if(!(f instanceof Ni))throw new Error(f.getClass().getName());this.addCollection(f)}},n.prototype.addCollection=function(f){for(var h=0;h<f.getNumGeometries();h++){var b=f.getGeometryN(h);this.add(b)}},n.prototype.locate=function(f){return gt(this._parentGeom,go)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new hu(this._parentGeom)),this._areaPtLocator.locate(f)):this._ptLocator.locate(f,this._parentGeom)},n.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):e.prototype.findEdge.apply(this,arguments)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n.determineBoundary=function(f,h){return f.isInBoundary(h)?de.BOUNDARY:de.INTERIOR},n}(Jn),Ps=function(){if(this._li=new ze,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Uu(0,e)}else if(2===arguments.length){var n=arguments[0],f=arguments[1],h=Ur.OGC_SFS_BOUNDARY_RULE;n.getPrecisionModel().compareTo(f.getPrecisionModel())>=0?this.setComputationPrecision(n.getPrecisionModel()):this.setComputationPrecision(f.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Uu(0,n,h),this._arg[1]=new Uu(1,f,h)}else if(3===arguments.length){var b=arguments[0],P=arguments[1],B=arguments[2];b.getPrecisionModel().compareTo(P.getPrecisionModel())>=0?this.setComputationPrecision(b.getPrecisionModel()):this.setComputationPrecision(P.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Uu(0,b,B),this._arg[1]=new Uu(1,P,B)}};Ps.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()},Ps.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)},Ps.prototype.interfaces_=function(){return[]},Ps.prototype.getClass=function(){return Ps};var Ts=function(){};Ts.prototype.interfaces_=function(){return[]},Ts.prototype.getClass=function(){return Ts},Ts.map=function(){if(arguments[0]instanceof Mt&&gt(arguments[1],Ts.MapOp)){for(var e=arguments[0],n=arguments[1],f=new zt,h=0;h<e.getNumGeometries();h++){var b=n.map(e.getGeometryN(h));null!==b&&f.add(b)}return e.getFactory().buildGeometry(f)}if(gt(arguments[0],Un)&&gt(arguments[1],Ts.MapOp)){for(var P=arguments[0],B=arguments[1],ae=new zt,Le=P.iterator();Le.hasNext();){var tt=Le.next(),vt=B.map(tt);null!==vt&&ae.add(vt)}return ae}},Ts.MapOp=function(){};var Br=function(e){function n(){var f=arguments[0];e.call(this,f,arguments[1]),this._ptLocator=new za,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new pa,this._resultPolyList=new zt,this._resultLineList=new zt,this._resultPointList=new zt,this._graph=new Jn(new Gr),this._geomFact=f.getFactory()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.insertUniqueEdge=function(f){var h=this._edgeList.findEqualEdge(f);if(null!==h){var b=h.getLabel(),P=f.getLabel();h.isPointwiseEqual(f)||(P=new On(f.getLabel())).flip();var B=h.getDepth();B.isNull()&&B.add(b),B.add(P),b.merge(P)}else this._edgeList.add(f)},n.prototype.getGraph=function(){return this._graph},n.prototype.cancelDuplicateResultEdges=function(){for(var f=this._graph.getEdgeEnds().iterator();f.hasNext();){var h=f.next(),b=h.getSym();h.isInResult()&&b.isInResult()&&(h.setInResult(!1),b.setInResult(!1))}},n.prototype.isCoveredByLA=function(f){return!!this.isCovered(f,this._resultLineList)||!!this.isCovered(f,this._resultPolyList)},n.prototype.computeGeometry=function(f,h,b,P){var B=new zt;return B.addAll(f),B.addAll(h),B.addAll(b),B.isEmpty()?n.createEmptyResult(P,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(B)},n.prototype.mergeSymLabels=function(){for(var f=this._graph.getNodes().iterator();f.hasNext();)f.next().getEdges().mergeSymLabels()},n.prototype.isCovered=function(f,h){for(var b=h.iterator();b.hasNext();){var P=b.next();if(this._ptLocator.locate(f,P)!==de.EXTERIOR)return!0}return!1},n.prototype.replaceCollapsedEdges=function(){for(var f=new zt,h=this._edgeList.iterator();h.hasNext();){var b=h.next();b.isCollapsed()&&(h.remove(),f.add(b.getCollapsedEdge()))}this._edgeList.addAll(f)},n.prototype.updateNodeLabelling=function(){for(var f=this._graph.getNodes().iterator();f.hasNext();){var h=f.next(),b=h.getEdges().getLabel();h.getLabel().merge(b)}},n.prototype.getResultGeometry=function(f){return this.computeOverlay(f),this._resultGeom},n.prototype.insertUniqueEdges=function(f){for(var h=f.iterator();h.hasNext();){var b=h.next();this.insertUniqueEdge(b)}},n.prototype.computeOverlay=function(f){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var h=new zt;this._arg[0].computeSplitEdges(h),this._arg[1].computeSplitEdges(h),this.insertUniqueEdges(h),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Eo.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(f),this.cancelDuplicateResultEdges();var b=new wa(this._geomFact);b.add(this._graph),this._resultPolyList=b.getPolygons();var P=new Qa(this,this._geomFact,this._ptLocator);this._resultLineList=P.build(f);var B=new Ko(this,this._geomFact,this._ptLocator);this._resultPointList=B.build(f),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,f)},n.prototype.labelIncompleteNode=function(f,h){var b=this._ptLocator.locate(f.getCoordinate(),this._arg[h].getGeometry());f.getLabel().setLocation(h,b)},n.prototype.copyPoints=function(f){for(var h=this._arg[f].getNodeIterator();h.hasNext();){var b=h.next();this._graph.addNode(b.getCoordinate()).setLabel(f,b.getLabel().getLocation(f))}},n.prototype.findResultAreaEdges=function(f){for(var h=this._graph.getEdgeEnds().iterator();h.hasNext();){var b=h.next(),P=b.getLabel();P.isArea()&&!b.isInteriorAreaEdge()&&n.isResultOfOp(P.getLocation(0,Ht.RIGHT),P.getLocation(1,Ht.RIGHT),f)&&b.setInResult(!0)}},n.prototype.computeLabelsFromDepths=function(){for(var f=this._edgeList.iterator();f.hasNext();){var h=f.next(),b=h.getLabel(),P=h.getDepth();if(!P.isNull()){P.normalize();for(var B=0;B<2;B++)b.isNull(B)||!b.isArea()||P.isNull(B)||(0===P.getDelta(B)?b.toLine(B):(_e.isTrue(!P.isNull(B,Ht.LEFT),"depth of LEFT side has not been initialized"),b.setLocation(B,Ht.LEFT,P.getLocation(B,Ht.LEFT)),_e.isTrue(!P.isNull(B,Ht.RIGHT),"depth of RIGHT side has not been initialized"),b.setLocation(B,Ht.RIGHT,P.getLocation(B,Ht.RIGHT))))}}},n.prototype.computeLabelling=function(){for(var f=this._graph.getNodes().iterator();f.hasNext();)f.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},n.prototype.labelIncompleteNodes=function(){for(var f=this._graph.getNodes().iterator();f.hasNext();){var h=f.next(),b=h.getLabel();h.isIsolated()&&(b.isNull(0)?this.labelIncompleteNode(h,0):this.labelIncompleteNode(h,1)),h.getEdges().updateLabelling(b)}},n.prototype.isCoveredByA=function(f){return!!this.isCovered(f,this._resultPolyList)},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},n}(Ps);Br.overlayOp=function(e,n,f){return new Br(e,n).getResultGeometry(f)},Br.intersection=function(e,n){if(e.isEmpty()||n.isEmpty())return Br.createEmptyResult(Br.INTERSECTION,e,n,e.getFactory());if(e.isGeometryCollection()){var f=n;return So.map(e,{interfaces_:function(){return[Ts.MapOp]},map:function(h){return h.intersection(f)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(n),Qi.overlayOp(e,n,Br.INTERSECTION)},Br.symDifference=function(e,n){if(e.isEmpty()||n.isEmpty()){if(e.isEmpty()&&n.isEmpty())return Br.createEmptyResult(Br.SYMDIFFERENCE,e,n,e.getFactory());if(e.isEmpty())return n.copy();if(n.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(n),Qi.overlayOp(e,n,Br.SYMDIFFERENCE)},Br.resultDimension=function(e,n,f){var h=n.getDimension(),b=f.getDimension(),P=-1;switch(e){case Br.INTERSECTION:P=Math.min(h,b);break;case Br.UNION:P=Math.max(h,b);break;case Br.DIFFERENCE:P=h;break;case Br.SYMDIFFERENCE:P=Math.max(h,b)}return P},Br.createEmptyResult=function(e,n,f,h){var b=null;switch(Br.resultDimension(e,n,f)){case-1:b=h.createGeometryCollection(new Array(0).fill(null));break;case 0:b=h.createPoint();break;case 1:b=h.createLineString();break;case 2:b=h.createPolygon()}return b},Br.difference=function(e,n){return e.isEmpty()?Br.createEmptyResult(Br.DIFFERENCE,e,n,e.getFactory()):n.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(n),Qi.overlayOp(e,n,Br.DIFFERENCE))},Br.isResultOfOp=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1],f=e.getLocation(0),h=e.getLocation(1);return Br.isResultOfOp(f,h,n)}if(3===arguments.length){var b=arguments[0],P=arguments[1];switch(b===de.BOUNDARY&&(b=de.INTERIOR),P===de.BOUNDARY&&(P=de.INTERIOR),arguments[2]){case Br.INTERSECTION:return b===de.INTERIOR&&P===de.INTERIOR;case Br.UNION:return b===de.INTERIOR||P===de.INTERIOR;case Br.DIFFERENCE:return b===de.INTERIOR&&P!==de.INTERIOR;case Br.SYMDIFFERENCE:return b===de.INTERIOR&&P!==de.INTERIOR||b!==de.INTERIOR&&P===de.INTERIOR}return!1}},Br.INTERSECTION=1,Br.UNION=2,Br.DIFFERENCE=3,Br.SYMDIFFERENCE=4;var $o=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new za,this._seg=new mr;var e=arguments[0],n=arguments[1];this._g=e,this._boundaryDistanceTolerance=n,this._linework=this.extractLinework(e)};$o.prototype.isWithinToleranceOfBoundary=function(e){for(var n=0;n<this._linework.getNumGeometries();n++)for(var f=this._linework.getGeometryN(n).getCoordinateSequence(),h=0;h<f.size()-1;h++)if(f.getCoordinate(h,this._seg.p0),f.getCoordinate(h+1,this._seg.p1),this._seg.distance(e)<=this._boundaryDistanceTolerance)return!0;return!1},$o.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?de.BOUNDARY:this._ptLocator.locate(e,this._g)},$o.prototype.extractLinework=function(e){var n=new pu;e.apply(n);var f=n.getLinework(),h=$r.toLineStringArray(f);return e.getFactory().createMultiLineString(h)},$o.prototype.interfaces_=function(){return[]},$o.prototype.getClass=function(){return $o};var pu=function(){this._linework=null,this._linework=new zt};pu.prototype.getLinework=function(){return this._linework},pu.prototype.filter=function(e){if(e instanceof oi){var n=e;this._linework.add(n.getExteriorRing());for(var f=0;f<n.getNumInteriorRing();f++)this._linework.add(n.getInteriorRingN(f))}},pu.prototype.interfaces_=function(){return[Wa]},pu.prototype.getClass=function(){return pu};var Co=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};Co.prototype.extractPoints=function(e,n,f){for(var h=e.getCoordinates(),b=0;b<h.length-1;b++)this.computeOffsetPoints(h[b],h[b+1],n,f)},Co.prototype.setSidesToGenerate=function(e,n){this._doLeft=e,this._doRight=n},Co.prototype.getPoints=function(e){for(var n=new zt,f=Ji.getLines(this._g).iterator();f.hasNext();){var h=f.next();this.extractPoints(h,e,n)}return n},Co.prototype.computeOffsetPoints=function(e,n,f,h){var b=n.x-e.x,P=n.y-e.y,B=Math.sqrt(b*b+P*P),ae=f*b/B,Le=f*P/B,tt=(n.x+e.x)/2,vt=(n.y+e.y)/2;if(this._doLeft){var Nt=new J(tt-Le,vt+ae);h.add(Nt)}if(this._doRight){var qt=new J(tt+Le,vt-ae);h.add(qt)}},Co.prototype.interfaces_=function(){return[]},Co.prototype.getClass=function(){return Co};var Pa=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new zt;var n=arguments[0],f=arguments[1],h=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(n,f),this._geom=[n,f,h],this._locFinder=[new $o(this._geom[0],this._boundaryDistanceTolerance),new $o(this._geom[1],this._boundaryDistanceTolerance),new $o(this._geom[2],this._boundaryDistanceTolerance)]},Gu={TOLERANCE:{configurable:!0}};Pa.prototype.reportResult=function(e,n,f){vr.out.println("Overlay result invalid - A:"+de.toLocationSymbol(n[0])+" B:"+de.toLocationSymbol(n[1])+" expected:"+(f?"i":"e")+" actual:"+de.toLocationSymbol(n[2]))},Pa.prototype.isValid=function(e){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(e)},Pa.prototype.checkValid=function(){if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var f=this._testCoords.get(n);if(!this.checkValid(e,f))return this._invalidLocation=f,!1}return!0}if(2===arguments.length){var h=arguments[0],b=arguments[1];return this._location[0]=this._locFinder[0].getLocation(b),this._location[1]=this._locFinder[1].getLocation(b),this._location[2]=this._locFinder[2].getLocation(b),!!Pa.hasLocation(this._location,de.BOUNDARY)||this.isValidResult(h,this._location)}},Pa.prototype.addTestPts=function(e){var n=new Co(e);this._testCoords.addAll(n.getPoints(5*this._boundaryDistanceTolerance))},Pa.prototype.isValidResult=function(e,n){var f=Br.isResultOfOp(n[0],n[1],e),h=!(f^n[2]===de.INTERIOR);return h||this.reportResult(e,n,f),h},Pa.prototype.getInvalidLocation=function(){return this._invalidLocation},Pa.prototype.interfaces_=function(){return[]},Pa.prototype.getClass=function(){return Pa},Pa.hasLocation=function(e,n){for(var f=0;f<3;f++)if(e[f]===n)return!0;return!1},Pa.computeBoundaryDistanceTolerance=function(e,n){return Math.min(mi.computeSizeBasedSnapTolerance(e),mi.computeSizeBasedSnapTolerance(n))},Pa.isValid=function(e,n,f,h){return new Pa(e,n,h).isValid(f)},Gu.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Pa,Gu);var Ta=function e(n){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(n),this._inputGeoms=n};Ta.prototype.extractElements=function(e,n){if(null===e)return null;for(var f=0;f<e.getNumGeometries();f++){var h=e.getGeometryN(f);this._skipEmpty&&h.isEmpty()||n.add(h)}},Ta.prototype.combine=function(){for(var e=new zt,n=this._inputGeoms.iterator();n.hasNext();){var f=n.next();this.extractElements(f,e)}return 0===e.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(e)},Ta.prototype.interfaces_=function(){return[]},Ta.prototype.getClass=function(){return Ta},Ta.combine=function(){return 1===arguments.length?new Ta(arguments[0]).combine():2===arguments.length?new Ta(Ta.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Ta(Ta.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Ta.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()},Ta.createList=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1],f=new zt;return f.add(e),f.add(n),f}if(3===arguments.length){var h=arguments[0],b=arguments[1],P=arguments[2],B=new zt;return B.add(h),B.add(b),B.add(P),B}};var ti=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new zt)},xf={STRTREE_NODE_CAPACITY:{configurable:!0}};ti.prototype.reduceToGeometries=function(e){for(var n=new zt,f=e.iterator();f.hasNext();){var h=f.next(),b=null;gt(h,di)?b=this.unionTree(h):h instanceof Mt&&(b=h),n.add(b)}return n},ti.prototype.extractByEnvelope=function(e,n,f){for(var h=new zt,b=0;b<n.getNumGeometries();b++){var P=n.getGeometryN(b);P.getEnvelopeInternal().intersects(e)?h.add(P):f.add(P)}return this._geomFactory.buildGeometry(h)},ti.prototype.unionOptimized=function(e,n){var f=e.getEnvelopeInternal(),h=n.getEnvelopeInternal();if(!f.intersects(h))return Ta.combine(e,n);if(e.getNumGeometries()<=1&&n.getNumGeometries()<=1)return this.unionActual(e,n);var b=f.intersection(h);return this.unionUsingEnvelopeIntersection(e,n,b)},ti.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new rc(ti.STRTREE_NODE_CAPACITY),n=this._inputPolys.iterator();n.hasNext();){var f=n.next();e.insert(f.getEnvelopeInternal(),f)}this._inputPolys=null;var h=e.itemsTree();return this.unionTree(h)},ti.prototype.binaryUnion=function(){if(1===arguments.length){var e=arguments[0];return this.binaryUnion(e,0,e.size())}if(3===arguments.length){var n=arguments[0],f=arguments[1],h=arguments[2];if(h-f<=1){var b=ti.getGeometry(n,f);return this.unionSafe(b,null)}if(h-f==2)return this.unionSafe(ti.getGeometry(n,f),ti.getGeometry(n,f+1));var P=Math.trunc((h+f)/2),B=this.binaryUnion(n,f,P),ae=this.binaryUnion(n,P,h);return this.unionSafe(B,ae)}},ti.prototype.repeatedUnion=function(e){for(var n=null,f=e.iterator();f.hasNext();){var h=f.next();n=null===n?h.copy():n.union(h)}return n},ti.prototype.unionSafe=function(e,n){return null===e&&null===n?null:null===e?n.copy():null===n?e.copy():this.unionOptimized(e,n)},ti.prototype.unionActual=function(e,n){return ti.restrictToPolygons(e.union(n))},ti.prototype.unionTree=function(e){var n=this.reduceToGeometries(e);return this.binaryUnion(n)},ti.prototype.unionUsingEnvelopeIntersection=function(e,n,f){var h=new zt,b=this.extractByEnvelope(f,e,h),P=this.extractByEnvelope(f,n,h),B=this.unionActual(b,P);return h.add(B),Ta.combine(h)},ti.prototype.bufferUnion=function(){if(1===arguments.length){var e=arguments[0];return e.get(0).getFactory().buildGeometry(e).buffer(0)}if(2===arguments.length){var n=arguments[0],f=arguments[1];return n.getFactory().createGeometryCollection([n,f]).buffer(0)}},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ti.restrictToPolygons=function(e){if(gt(e,go))return e;var n=br.getPolygons(e);return 1===n.size()?n.get(0):e.getFactory().createMultiPolygon($r.toPolygonArray(n))},ti.getGeometry=function(e,n){return n>=e.size()?null:e.get(n)},ti.union=function(e){return new ti(e).union()},xf.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(ti,xf);var ku=function(){};ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku},ku.union=function(e,n){if(e.isEmpty()||n.isEmpty()){if(e.isEmpty()&&n.isEmpty())return Br.createEmptyResult(Br.UNION,e,n,e.getFactory());if(e.isEmpty())return n.copy();if(n.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(n),Qi.overlayOp(e,n,Br.UNION)},q.GeoJSONReader=Vo,q.GeoJSONWriter=Pu,q.OverlayOp=Br,q.UnionOp=ku,q.BufferOp=Ti,Object.defineProperty(q,"__esModule",{value:!0})}(Ne)},1977:function(Me,Ne){"use strict";var q,te;q=function(){function ee(){return!0}function Q(){return!1}function ge(){}return function ce(){var X=[{name:"number",test:function(me){return"number"==typeof me}},{name:"string",test:function(me){return"string"==typeof me}},{name:"boolean",test:function(me){return"boolean"==typeof me}},{name:"Function",test:function(me){return"function"==typeof me}},{name:"Array",test:Array.isArray},{name:"Date",test:function(me){return me instanceof Date}},{name:"RegExp",test:function(me){return me instanceof RegExp}},{name:"Object",test:function(me){return"object"==typeof me&&null!==me&&me.constructor===Object}},{name:"null",test:function(me){return null===me}},{name:"undefined",test:function(me){return void 0===me}}],Oe={name:"any",test:ee},Pe=[],se=[],V={types:X,conversions:se,ignore:Pe};function Z(me){var ze=pt(V.types,function(Je){return Je.name===me});if(ze)return ze;if("any"===me)return Oe;var Qe=pt(V.types,function(Je){return Je.name.toLowerCase()===me.toLowerCase()});throw new TypeError('Unknown type "'+me+'"'+(Qe?'. Did you mean "'+Qe.name+'"?':""))}function ne(me){return me===Oe?999:V.types.indexOf(me)}function oe(me){var ze=pt(V.types,function(Qe){return Qe.test(me)});if(ze)return ze.name;throw new TypeError("Value has unknown type. Value: "+me)}function $(me){return me.map(function(ze){var Qe=ze.types.map(qe);return(ze.restParam?"...":"")+Qe.join("|")}).join(",")}function ie(me,ze){var Qe=0===me.indexOf("..."),je=(Qe?me.length>3?me.slice(3):"any":me).split("|").map(rr).filter(vr).filter(sr),Gt=function rt(me,ze){var Qe={};return me.forEach(function(Je){-1===ze.indexOf(Je.from)&&-1!==ze.indexOf(Je.to)&&!Qe[Je.from]&&(Qe[Je.from]=Je)}),Object.keys(Qe).map(function(Je){return Qe[Je]})}(ze,je),Vt=je.map(function(Dt){var lr=Z(Dt);return{name:Dt,typeIndex:ne(lr),test:lr.test,conversion:null,conversionIndex:-1}}),Mt=Gt.map(function(Dt){var lr=Z(Dt.from);return{name:Dt.from,typeIndex:ne(lr),test:lr.test,conversion:Dt,conversionIndex:ze.indexOf(Dt)}});return{types:Vt.concat(Mt),restParam:Qe}}function Ae(me){var ze=sn(me);return!!ze&&ze.restParam}function fe(me){return me.types.some(function(ze){return null!=ze.conversion})}function he(me){if(!me||0===me.types.length)return ee;if(1===me.types.length)return Z(me.types[0].name).test;if(2===me.types.length){var ze=Z(me.types[0].name).test,Qe=Z(me.types[1].name).test;return function(Gt){return ze(Gt)||Qe(Gt)}}var Je=me.types.map(function(je){return Z(je.name).test});return function(Gt){for(var Vt=0;Vt<Je.length;Vt++)if(Je[Vt](Gt))return!0;return!1}}function be(me){var ze,Qe,Je;if(Ae(me)){var je=(ze=function Dn(me){return me.slice(0,me.length-1)}(me).map(he)).length,Gt=he(sn(me));return function(Dt){for(var lr=0;lr<ze.length;lr++)if(!ze[lr](Dt[lr]))return!1;return function(Mt){for(var Dt=je;Dt<Mt.length;Dt++)if(!Gt(Mt[Dt]))return!1;return!0}(Dt)&&Dt.length>=je+1}}return 0===me.length?function(Dt){return 0===Dt.length}:1===me.length?(Qe=he(me[0]),function(Dt){return Qe(Dt[0])&&1===Dt.length}):2===me.length?(Qe=he(me[0]),Je=he(me[1]),function(Dt){return Qe(Dt[0])&&Je(Dt[1])&&2===Dt.length}):(ze=me.map(he),function(Dt){for(var lr=0;lr<ze.length;lr++)if(!ze[lr](Dt[lr]))return!1;return Dt.length===ze.length})}function J(me,ze){return ze<me.params.length?me.params[ze]:Ae(me.params)?sn(me.params):null}function Ge(me,ze,Qe){var Je=J(me,ze);return(Je?Qe?Je.types.filter(ke):Je.types:[]).map(qe)}function qe(me){return me.name}function ke(me){return null==me.conversion}function de(me,ze){var Qe=function Ie(me){for(var ze={},Qe=0;Qe<me.length;Qe++)ze[me[Qe]]=!0;return Object.keys(ze)}(we(me,function(Je){return Ge(Je,ze,!1)}));return-1!==Qe.indexOf("any")?["any"]:Qe}function wt(me,ze,Qe){var Je,je,Mt,Gt=me||"unnamed",Vt=Qe;for(Mt=0;Mt<ze.length;Mt++){var Dt=Vt.filter(function(un){var ai=he(J(un,Mt));return(Mt<un.params.length||Ae(un.params))&&ai(ze[Mt])});if(0===Dt.length){if((je=de(Vt,Mt)).length>0){var lr=oe(ze[Mt]);return(Je=new TypeError("Unexpected type of argument in function "+Gt+" (expected: "+je.join(" or ")+", actual: "+lr+", index: "+Mt+")")).data={category:"wrongType",fn:Gt,index:Mt,actual:lr,expected:je},Je}}else Vt=Dt}var Lr=Vt.map(function(un){return Ae(un.params)?1/0:un.params.length});if(ze.length<Math.min.apply(null,Lr))return je=de(Vt,Mt),(Je=new TypeError("Too few arguments in function "+Gt+" (expected: "+je.join(" or ")+", index: "+ze.length+")")).data={category:"tooFewArgs",fn:Gt,index:ze.length,expected:je},Je;var Ur=Math.max.apply(null,Lr);return ze.length>Ur?((Je=new TypeError("Too many arguments in function "+Gt+" (expected: "+Ur+", actual: "+ze.length+")")).data={category:"tooManyArgs",fn:Gt,index:ze.length,expectedLength:Ur},Je):((Je=new TypeError('Arguments of type "'+ze.join(", ")+'" do not match any of the defined signatures of function '+Gt+".")).data={category:"mismatch",actual:ze.map(oe)},Je)}function gt(me){for(var ze=999,Qe=0;Qe<me.types.length;Qe++)ke(me.types[Qe])&&(ze=Math.min(ze,me.types[Qe].typeIndex));return ze}function De(me){for(var ze=999,Qe=0;Qe<me.types.length;Qe++)ke(me.types[Qe])||(ze=Math.min(ze,me.types[Qe].conversionIndex));return ze}function nt(me,ze){var Qe;return 0!=(Qe=me.restParam-ze.restParam)||0!=(Qe=fe(me)-fe(ze))||0!=(Qe=gt(me)-gt(ze))?Qe:De(me)-De(ze)}function Be(me,ze){var Je,je,Qe=Math.min(me.params.length,ze.params.length);if(0!=(je=me.params.some(fe)-ze.params.some(fe)))return je;for(Je=0;Je<Qe;Je++)if(0!=(je=fe(me.params[Je])-fe(ze.params[Je])))return je;for(Je=0;Je<Qe;Je++)if(0!==(je=nt(me.params[Je],ze.params[Je])))return je;return me.params.length-ze.params.length}function Fe(me){var ze,Qe,Je,je,Gt=[],Vt=[];switch(me.types.forEach(function(Mt){Mt.conversion&&(Gt.push(Z(Mt.conversion.from).test),Vt.push(Mt.conversion.convert))}),Vt.length){case 0:return function(Dt){return Dt};case 1:return ze=Gt[0],Je=Vt[0],function(Dt){return ze(Dt)?Je(Dt):Dt};case 2:return ze=Gt[0],Qe=Gt[1],Je=Vt[0],je=Vt[1],function(Dt){return ze(Dt)?Je(Dt):Qe(Dt)?je(Dt):Dt};default:return function(Dt){for(var lr=0;lr<Vt.length;lr++)if(Gt[lr](Dt))return Vt[lr](Dt);return Dt}}}function At(me,ze){return function Qe(Je,je,Gt){if(je<Je.length){var Dt,Vt=Je[je],Mt=ze?Vt.types.filter(ke):Vt.types;if(Vt.restParam){var lr=Mt.filter(ke);Dt=lr.length<Mt.length?[lr,Mt]:[Mt]}else Dt=Mt.map(function(Ur){return[Ur]});return we(Dt,function(Ur){return Qe(Je,je+1,Gt.concat([Ur]))})}return[Gt.map(function(Ur,un){return{types:Ur,restParam:un===Je.length-1&&Ae(Je)}})]}(me,0,[])}function _t(me,ze){if(0===Object.keys(ze).length)throw new SyntaxError("No signatures provided");var Qe=[];Object.keys(ze).map(function(jr){return function ue(me,ze,Qe){var Je=[];return""!==me.trim()&&(Je=me.split(",").map(rr).map(function(je,Gt,Vt){var Mt=ie(je,Qe);if(Mt.restParam&&Gt!==Vt.length-1)throw new SyntaxError('Unexpected rest parameter "'+je+'": only allowed for the last parameter');return Mt})),Je.some(Yt)?null:{params:Je,fn:ze}}(jr,ze[jr],V.conversions)}).filter(fr).forEach(function(jr){var Yi=pt(Qe,function(hi){return function Bt(me,ze){for(var Qe=Math.max(me.params.length,ze.params.length),Je=0;Je<Qe;Je++)if(!Ar(Ge(me,Je,!0),Ge(ze,Je,!0)))return!1;var Vt=me.params.length,Mt=ze.params.length,Dt=Ae(me.params),lr=Ae(ze.params);return Dt?lr?Vt===Mt:Mt>=Vt:lr?Vt>=Mt:Vt===Mt}(hi,jr)});if(Yi)throw new TypeError('Conflicting signatures "'+$(Yi.params)+'" and "'+$(jr.params)+'".');Qe.push(jr)});var Je=we(Qe,function(jr){return(jr?At(jr.params,!1):[]).map(function(hi){return{params:hi,fn:jr.fn}})}).filter(fr);Je.sort(Be);var je=Je[0]&&Je[0].params.length<=2&&!Ae(Je[0].params),Gt=Je[1]&&Je[1].params.length<=2&&!Ae(Je[1].params),Vt=Je[2]&&Je[2].params.length<=2&&!Ae(Je[2].params),Mt=Je[3]&&Je[3].params.length<=2&&!Ae(Je[3].params),Dt=Je[4]&&Je[4].params.length<=2&&!Ae(Je[4].params),lr=Je[5]&&Je[5].params.length<=2&&!Ae(Je[5].params),Lr=je&&Gt&&Vt&&Mt&&Dt&&lr,Ur=Je.map(function(jr){return be(jr.params)}),un=je?he(Je[0].params[0]):Q,ai=Gt?he(Je[1].params[0]):Q,Oi=Vt?he(Je[2].params[0]):Q,ri=Mt?he(Je[3].params[0]):Q,Pi=Dt?he(Je[4].params[0]):Q,Un=lr?he(Je[5].params[0]):Q,fa=je?he(Je[0].params[1]):Q,di=Gt?he(Je[1].params[1]):Q,zt=Vt?he(Je[2].params[1]):Q,Do=Mt?he(Je[3].params[1]):Q,la=Dt?he(Je[4].params[1]):Q,Fr=lr?he(Je[5].params[1]):Q,Vn=Je.map(function(jr){return function st(me,ze){var Qe=ze;if(me.some(fe)){var Je=Ae(me),je=me.map(Fe);Qe=function(){for(var Dt=[],lr=Je?arguments.length-1:arguments.length,Lr=0;Lr<lr;Lr++)Dt[Lr]=je[Lr](arguments[Lr]);return Je&&(Dt[lr]=arguments[lr].map(je[lr])),ze.apply(this,Dt)}}var Gt=Qe;if(Ae(me)){var Vt=me.length-1;Gt=function(){return Qe.apply(this,Zr(arguments,0,Vt).concat([Zr(arguments,Vt)]))}}return Gt}(jr.params,jr.fn)}),ki=je?Vn[0]:ge,Ro=Gt?Vn[1]:ge,Bo=Vt?Vn[2]:ge,Gs=Mt?Vn[3]:ge,Iu=Dt?Vn[4]:ge,xs=lr?Vn[5]:ge,to=je?Je[0].params.length:-1,ks=Gt?Je[1].params.length:-1,Xo=Vt?Je[2].params.length:-1,Fo=Mt?Je[3].params.length:-1,an=Dt?Je[4].params.length:-1,Ca=lr?Je[5].params.length:-1,Wa=Lr?6:0,bi=Je.length,Ni=function(){for(var Yi=Wa;Yi<bi;Yi++)if(Ur[Yi](arguments))return Vn[Yi].apply(this,arguments);return V.onMismatch(me,arguments,Je)},ca=function jr(Yi,hi){return arguments.length===to&&un(Yi)&&fa(hi)?ki.apply(jr,arguments):arguments.length===ks&&ai(Yi)&&di(hi)?Ro.apply(jr,arguments):arguments.length===Xo&&Oi(Yi)&&zt(hi)?Bo.apply(jr,arguments):arguments.length===Fo&&ri(Yi)&&Do(hi)?Gs.apply(jr,arguments):arguments.length===an&&Pi(Yi)&&la(hi)?Iu.apply(jr,arguments):arguments.length===Ca&&Un(Yi)&&Fr(hi)?xs.apply(jr,arguments):Ni.apply(jr,arguments)};try{Object.defineProperty(ca,"name",{value:me})}catch{}return ca.signatures=function St(me){var ze={};return me.forEach(function(Qe){Qe.params.some(fe)||At(Qe.params,!0).forEach(function(Je){ze[$(Je)]=Qe.fn})}),ze}(Je),ca}function cr(me,ze,Qe){throw wt(me,ze,Qe)}function sr(me){return-1===V.ignore.indexOf(me)}function rr(me){return me.trim()}function vr(me){return!!me}function fr(me){return null!==me}function Yt(me){return 0===me.types.length}function sn(me){return me[me.length-1]}function Zr(me,ze,Qe){return Array.prototype.slice.call(me,ze,Qe)}function pr(me,ze){return-1!==me.indexOf(ze)}function Ar(me,ze){for(var Qe=0;Qe<me.length;Qe++)if(pr(ze,me[Qe]))return!0;return!1}function pt(me,ze){for(var Qe=0;Qe<me.length;Qe++)if(ze(me[Qe]))return me[Qe]}function we(me,ze){return Array.prototype.concat.apply([],me.map(ze))}function _e(me){for(var ze="",Qe=0;Qe<me.length;Qe++){var Je=me[Qe];if(("object"==typeof Je.signatures||"string"==typeof Je.signature)&&""!==Je.name)if(""===ze)ze=Je.name;else if(ze!==Je.name){var je=new Error("Function names do not match (expected: "+ze+", actual: "+Je.name+")");throw je.data={actual:Je.name,expected:ze},je}}return ze}function Xe(me){var ze,Qe={};function Je(Mt,Dt){if(Qe.hasOwnProperty(Mt)&&Dt!==Qe[Mt])throw(ze=new Error('Signature "'+Mt+'" is defined twice')).data={signature:Mt},ze}for(var je=0;je<me.length;je++){var Gt=me[je];if("object"==typeof Gt.signatures)for(var Vt in Gt.signatures)Gt.signatures.hasOwnProperty(Vt)&&(Je(Vt,Gt.signatures[Vt]),Qe[Vt]=Gt.signatures[Vt]);else{if("string"!=typeof Gt.signature)throw(ze=new TypeError("Function is no typed-function (index: "+je+")")).data={index:je},ze;Je(Gt.signature,Gt),Qe[Gt.signature]=Gt}}return Qe}return(V=_t("typed",{"string, Object":_t,Object:function(me){var ze=[];for(var Qe in me)me.hasOwnProperty(Qe)&&ze.push(me[Qe]);return _t(_e(ze),me)},"...Function":function(me){return _t(_e(me),Xe(me))},"string, ...Function":function(me,ze){return _t(me,Xe(ze))}})).create=ce,V.types=X,V.conversions=se,V.ignore=Pe,V.onMismatch=cr,V.throwMismatchError=cr,V.createError=wt,V.convert=function re(me,ze){var Qe=oe(me);if(ze===Qe)return me;for(var Je=0;Je<V.conversions.length;Je++){var je=V.conversions[Je];if(je.from===Qe&&je.to===ze)return je.convert(me)}throw new Error("Cannot convert from "+Qe+" to "+ze)},V.find=function k(me,ze){if(!me.signatures)throw new TypeError("Function is no typed-function");var Qe;if("string"==typeof ze){Qe=ze.split(",");for(var Je=0;Je<Qe.length;Je++)Qe[Je]=Qe[Je].trim()}else{if(!Array.isArray(ze))throw new TypeError("String array or a comma separated string expected");Qe=ze}var je=Qe.join(","),Gt=me.signatures[je];if(Gt)return Gt;throw new TypeError("Signature not found (signature: "+(me.name||"unnamed")+"("+Qe.join(", ")+"))")},V.addType=function(me,ze){if(!me||"string"!=typeof me.name||"function"!=typeof me.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==ze)for(var Qe=0;Qe<V.types.length;Qe++)if("Object"===V.types[Qe].name)return void V.types.splice(Qe,0,me);V.types.push(me)},V.addConversion=function(me){if(!me||"string"!=typeof me.from||"string"!=typeof me.to||"function"!=typeof me.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");V.conversions.push(me)},V}()},void 0!==(te=q.apply(Ne,[]))&&(Me.exports=te)},5042:()=>{}},F0={};function qi(Me){var Ne=F0[Me];if(void 0!==Ne)return Ne.exports;var q=F0[Me]={id:Me,loaded:!1,exports:{}};return Yx[Me].call(q.exports,q,q.exports,qi),q.loaded=!0,q.exports}qi.amdD=function(){throw new Error("define cannot be used indirect")},qi.amdO={},qi.n=Me=>{var Ne=Me&&Me.__esModule?()=>Me.default:()=>Me;return qi.d(Ne,{a:Ne}),Ne},qi.d=(Me,Ne)=>{for(var q in Ne)qi.o(Ne,q)&&!qi.o(Me,q)&&Object.defineProperty(Me,q,{enumerable:!0,get:Ne[q]})},qi.o=(Me,Ne)=>Object.prototype.hasOwnProperty.call(Me,Ne),qi.r=Me=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Me,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Me,"__esModule",{value:!0})},qi.nmd=Me=>(Me.paths=[],Me.children||(Me.children=[]),Me),(()=>{"use strict";qi(7303);var Ne=(()=>{return(o=Ne||(Ne={}))[o.Complete=0]="Complete",o[o.Progess=1]="Progess",o[o.Error=2]="Error",Ne;var o})();function Q(o,s,l){void 0===l&&(l={});var p={type:"Feature"};return(0===l.id||l.id)&&(p.id=l.id),l.bbox&&(p.bbox=l.bbox),p.properties=s||{},p.geometry=o,p}function ce(o,s,l){if(void 0===l&&(l={}),!o)throw new Error("coordinates is required");if(!Array.isArray(o))throw new Error("coordinates must be an Array");if(o.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!qe(o[0])||!qe(o[1]))throw new Error("coordinates must contain numbers");return Q({type:"Point",coordinates:o},s,l)}function Oe(o,s,l){void 0===l&&(l={});for(var p=0,d=o;p<d.length;p++){var N=d[p];if(N.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var M=0;M<N[N.length-1].length;M++)if(N[N.length-1][M]!==N[0][M])throw new Error("First and last Position are not equivalent.")}return Q({type:"Polygon",coordinates:o},s,l)}function qe(o){return!isNaN(o)&&null!==o&&!Array.isArray(o)}function gt(o,s,l){if(null!==o)for(var p,d,N,M,I,O,C,D,T=0,L=0,z=o.type,Ye="FeatureCollection"===z,Re="Feature"===z,it=Ye?o.features.length:1,Ve=0;Ve<it;Ve++){I=(D=!!(C=Ye?o.features[Ve].geometry:Re?o.geometry:o)&&"GeometryCollection"===C.type)?C.geometries.length:1;for(var Te=0;Te<I;Te++){var Ue=0,ct=0;if(null!==(M=D?C.geometries[Te]:C)){O=M.coordinates;var ft=M.type;switch(T=!l||"Polygon"!==ft&&"MultiPolygon"!==ft?0:1,ft){case null:break;case"Point":if(!1===s(O,L,Ve,Ue,ct))return!1;L++,Ue++;break;case"LineString":case"MultiPoint":for(p=0;p<O.length;p++){if(!1===s(O[p],L,Ve,Ue,ct))return!1;L++,"MultiPoint"===ft&&Ue++}"LineString"===ft&&Ue++;break;case"Polygon":case"MultiLineString":for(p=0;p<O.length;p++){for(d=0;d<O[p].length-T;d++){if(!1===s(O[p][d],L,Ve,Ue,ct))return!1;L++}"MultiLineString"===ft&&Ue++,"Polygon"===ft&&ct++}"Polygon"===ft&&Ue++;break;case"MultiPolygon":for(p=0;p<O.length;p++){for(ct=0,d=0;d<O[p].length;d++){for(N=0;N<O[p][d].length-T;N++){if(!1===s(O[p][d][N],L,Ve,Ue,ct))return!1;L++}ct++}Ue++}break;case"GeometryCollection":for(p=0;p<M.geometries.length;p++)if(!1===gt(M.geometries[p],s,l))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Bt(o,s){!function St(o,s){var l,p,d,N,M,I,O,C,T,L,D=0,z="FeatureCollection"===o.type,Ye="Feature"===o.type,Re=z?o.features.length:1;for(l=0;l<Re;l++){for(C=z?o.features[l].properties:Ye?o.properties:{},T=z?o.features[l].bbox:Ye?o.bbox:void 0,L=z?o.features[l].id:Ye?o.id:void 0,M=(O=!!(I=z?o.features[l].geometry:Ye?o.geometry:o)&&"GeometryCollection"===I.type)?I.geometries.length:1,d=0;d<M;d++)if(null!==(N=O?I.geometries[d]:I))switch(N.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===s(N,D,C,T,L))return!1;break;case"GeometryCollection":for(p=0;p<N.geometries.length;p++)if(!1===s(N.geometries[p],D,C,T,L))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===s(null,D,C,T,L))return!1;D++}}(o,function(l,p,d,N,M){var O,I=null===l?null:l.type;switch(I){case null:case"Point":case"LineString":case"Polygon":return!1!==s(Q(l,d,{bbox:N,id:M}),p,0)&&void 0}switch(I){case"MultiPoint":O="Point";break;case"MultiLineString":O="LineString";break;case"MultiPolygon":O="Polygon"}for(var C=0;C<l.coordinates.length;C++)if(!1===s(Q({type:O,coordinates:l.coordinates[C]},d),p,C))return!1})}function Dn(o){var s=[1/0,1/0,-1/0,-1/0];return gt(o,function(l){s[0]>l[0]&&(s[0]=l[0]),s[1]>l[1]&&(s[1]=l[1]),s[2]<l[0]&&(s[2]=l[0]),s[3]<l[1]&&(s[3]=l[1])}),s}Dn.default=Dn;const sn=Dn;function zt(o,s,l){if(void 0===l&&(l={}),!o)throw new Error("point is required");if(!s)throw new Error("polygon is required");var p=function Zr(o){if(!o)throw new Error("coord is required");if(!Array.isArray(o)){if("Feature"===o.type&&null!==o.geometry&&"Point"===o.geometry.type)return o.geometry.coordinates;if("Point"===o.type)return o.coordinates}if(Array.isArray(o)&&o.length>=2&&!Array.isArray(o[0])&&!Array.isArray(o[1]))return o;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(o),d=function _e(o){return"Feature"===o.type?o.geometry:o}(s),N=d.type,M=s.bbox,I=d.coordinates;if(M&&!1===function la(o,s){return s[0]<=o[0]&&s[1]<=o[1]&&s[2]>=o[0]&&s[3]>=o[1]}(p,M))return!1;"Polygon"===N&&(I=[I]);for(var O=!1,C=0;C<I.length&&!O;C++)if(Do(p,I[C][0],l.ignoreBoundary)){for(var T=!1,L=1;L<I[C].length&&!T;)Do(p,I[C][L],!l.ignoreBoundary)&&(T=!0),L++;T||(O=!0)}return O}function Do(o,s,l){var p=!1;s[0][0]===s[s.length-1][0]&&s[0][1]===s[s.length-1][1]&&(s=s.slice(0,s.length-1));for(var d=0,N=s.length-1;d<s.length;N=d++){var M=s[d][0],I=s[d][1],O=s[N][0],C=s[N][1];if(o[1]*(M-O)+I*(O-o[0])+C*(o[0]-M)==0&&(M-o[0])*(O-o[0])<=0&&(I-o[1])*(C-o[1])<=0)return!l;I>o[1]!=C>o[1]&&o[0]<(O-M)*(o[1]-I)/(C-I)+M&&(p=!p)}return p}qi(5943),qi(1335);var bi=new ArrayBuffer(16);new Float64Array(bi),new Uint32Array(bi),qi(3544),function(){function o(s){this.points=s.points||[],this.duration=s.duration||1e4,this.sharpness=s.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=s.stepLength||60,this.length=this.points.length,this.delay=0;for(var l=0;l<this.length;l++)this.points[l].z=this.points[l].z||0;for(l=0;l<this.length-1;l++){var p=this.points[l],d=this.points[l+1];this.centers.push({x:(p.x+d.x)/2,y:(p.y+d.y)/2,z:(p.z+d.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),l=0;l<this.centers.length-1;l++){var N=this.points[l+1].x-(this.centers[l].x+this.centers[l+1].x)/2,M=this.points[l+1].y-(this.centers[l].y+this.centers[l+1].y)/2,I=this.points[l+1].z-(this.centers[l].y+this.centers[l+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[l+1].x+this.sharpness*(this.centers[l].x+N),y:(1-this.sharpness)*this.points[l+1].y+this.sharpness*(this.centers[l].y+M),z:(1-this.sharpness)*this.points[l+1].z+this.sharpness*(this.centers[l].z+I)},{x:(1-this.sharpness)*this.points[l+1].x+this.sharpness*(this.centers[l+1].x+N),y:(1-this.sharpness)*this.points[l+1].y+this.sharpness*(this.centers[l+1].y+M),z:(1-this.sharpness)*this.points[l+1].z+this.sharpness*(this.centers[l+1].z+I)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}o.prototype.cacheSteps=function(s){var l=[],p=this.pos(0);l.push(0);for(var d=0;d<this.duration;d+=10){var N=this.pos(d);Math.sqrt((N.x-p.x)*(N.x-p.x)+(N.y-p.y)*(N.y-p.y)+(N.z-p.z)*(N.z-p.z))>s&&(l.push(d),p=N)}return l},o.prototype.vector=function(s){var l=this.pos(s+10),p=this.pos(s-10);return{angle:180*Math.atan2(l.y-p.y,l.x-p.x)/3.14,speed:Math.sqrt((p.x-l.x)*(p.x-l.x)+(p.y-l.y)*(p.y-l.y)+(p.z-l.z)*(p.z-l.z))}},o.prototype.pos=function(s){var l=s-this.delay;l<0&&(l=0),l>this.duration&&(l=this.duration-1);var p=l/this.duration;if(p>=1)return this.points[this.length-1];var d=Math.floor((this.points.length-1)*p);return function On(o,s,l,p,d){var N=function Yn(o){var s=o*o;return[s*o,3*s*(1-o),3*o*(1-o)*(1-o),(1-o)*(1-o)*(1-o)]}(o);return{x:d.x*N[0]+p.x*N[1]+l.x*N[2]+s.x*N[3],y:d.y*N[0]+p.y*N[1]+l.y*N[2]+s.y*N[3],z:d.z*N[0]+p.z*N[1]+l.z*N[2]+s.z*N[3]}}((this.length-1)*p-d,this.points[d],this.controls[d][1],this.controls[d+1][0],this.points[d+1])}}();qi(5469),qi(5406);var $a=Math.PI/180,Eo=180/Math.PI,So=function(o,s){this.lon=o,this.lat=s,this.x=$a*o,this.y=$a*s};So.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},So.prototype.antipode=function(){return new So(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var Qa=function(){this.coords=[],this.length=0};Qa.prototype.move_to=function(o){this.length++,this.coords.push(o)};var Ko=function(o){this.properties=o||{},this.geometries=[]};Ko.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var o=[],s=0;s<this.geometries.length;s++)o.push(this.geometries[s].coords);return{geometry:{type:"MultiLineString",coordinates:o},type:"Feature",properties:this.properties}},Ko.prototype.wkt=function(){for(var o="",s="LINESTRING(",l=function(N){s+=N[0]+" "+N[1]+","},p=0;p<this.geometries.length;p++){if(0===this.geometries[p].coords.length)return"LINESTRING(empty)";this.geometries[p].coords.forEach(l),o+=s.substring(0,s.length-1)+")"}return o};var $i=function(o,s,l){if(!o||void 0===o.x||void 0===o.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!s||void 0===s.x||void 0===s.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new So(o.x,o.y),this.end=new So(s.x,s.y),this.properties=l||{};var p=this.start.x-this.end.x,N=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(p/2),2);if(this.g=2*Math.asin(Math.sqrt(N)),this.g===Math.PI)throw new Error("it appears "+o.view()+" and "+s.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+o+" and "+s)};$i.prototype.interpolate=function(o){var s=Math.sin((1-o)*this.g)/Math.sin(this.g),l=Math.sin(o*this.g)/Math.sin(this.g),p=s*Math.cos(this.start.y)*Math.cos(this.start.x)+l*Math.cos(this.end.y)*Math.cos(this.end.x),d=s*Math.cos(this.start.y)*Math.sin(this.start.x)+l*Math.cos(this.end.y)*Math.sin(this.end.x),N=s*Math.sin(this.start.y)+l*Math.sin(this.end.y),M=Eo*Math.atan2(N,Math.sqrt(Math.pow(p,2)+Math.pow(d,2)));return[Eo*Math.atan2(d,p),M]},$i.prototype.Arc=function(o,s){var l=[];if(!o||o<=2)l.push([this.start.lon,this.start.lat]),l.push([this.end.lon,this.end.lat]);else for(var p=1/(o-1),d=0;d<o;++d){var M=this.interpolate(p*d);l.push(M)}for(var I=!1,O=0,C=s&&s.offset?s.offset:10,T=180-C,L=-180+C,D=360-C,z=1;z<l.length;++z){var Ye=l[z-1][0],Re=l[z][0],it=Math.abs(Re-Ye);it>D&&(Re>T&&Ye<L||Ye>T&&Re<L)?I=!0:it>O&&(O=it)}var Ve=[];if(I&&O<C){var Te=[];Ve.push(Te);for(var Ue=0;Ue<l.length;++Ue){var ct=parseFloat(l[Ue][0]);if(Ue>0&&Math.abs(ct-l[Ue-1][0])>D){var ft=parseFloat(l[Ue-1][0]),yt=parseFloat(l[Ue-1][1]),mt=parseFloat(l[Ue][0]),Et=parseFloat(l[Ue][1]);if(ft>-180&&ft<L&&180===mt&&Ue+1<l.length&&l[Ue-1][0]>-180&&l[Ue-1][0]<L){Te.push([-180,l[Ue][1]]),Ue++,Te.push([l[Ue][0],l[Ue][1]]);continue}if(ft>T&&ft<180&&-180===mt&&Ue+1<l.length&&l[Ue-1][0]>T&&l[Ue-1][0]<180){Te.push([180,l[Ue][1]]),Ue++,Te.push([l[Ue][0],l[Ue][1]]);continue}if(ft<L&&mt>T){var Ke=ft;ft=mt,mt=Ke;var Or=yt;yt=Et,Et=Or}if(ft>T&&mt<L&&(mt+=360),ft<=180&&mt>=180&&ft<mt){var ir=(180-ft)/(mt-ft),Xr=ir*Et+(1-ir)*yt;Te.push([l[Ue-1][0]>T?180:-180,Xr]),(Te=[]).push([l[Ue-1][0]>T?-180:180,Xr]),Ve.push(Te)}else Ve.push(Te=[]);Te.push([ct,l[Ue][1]])}else Te.push([l[Ue][0],l[Ue][1]])}}else{var Hr=[];Ve.push(Hr);for(var Jt=0;Jt<l.length;++Jt)Hr.push([l[Jt][0],l[Jt][1]])}for(var Ir=new Ko(this.properties),yr=0;yr<Ve.length;++yr){var qn=new Qa;Ir.geometries.push(qn);for(var zn=Ve[yr],en=0;en<zn.length;++en)qn.move_to(zn[en])}return Ir},qi(6952);var Ft=[],Zt=[],nr=[],wr=[],Cr=[],qr=[],Yr=[],nn=[],Pn=[],cn=[],zr=[],hn=[],pn=[],gn=[],vn=[],mn=[],dn=[],yn=[],_n=[],xn=[],wn=[],bn=[],Nn=[],Mn=[];Yr[85]=cn[85]=-1,nn[85]=zr[85]=0,Pn[85]=hn[85]=1,_n[85]=bn[85]=1,xn[85]=Nn[85]=0,wn[85]=Mn[85]=1,Ft[85]=wr[85]=0,Zt[85]=Cr[85]=-1,nr[85]=vn[85]=0,mn[85]=pn[85]=0,dn[85]=gn[85]=1,qr[85]=yn[85]=1,bn[1]=bn[169]=0,Nn[1]=Nn[169]=-1,Mn[1]=Mn[169]=0,pn[1]=pn[169]=-1,gn[1]=gn[169]=0,vn[1]=vn[169]=0,cn[4]=cn[166]=0,zr[4]=zr[166]=-1,hn[4]=hn[166]=1,mn[4]=mn[166]=1,dn[4]=dn[166]=0,yn[4]=yn[166]=0,Yr[16]=Yr[154]=0,nn[16]=nn[154]=1,Pn[16]=Pn[154]=1,wr[16]=wr[154]=1,Cr[16]=Cr[154]=0,qr[16]=qr[154]=1,_n[64]=_n[106]=0,xn[64]=xn[106]=1,wn[64]=wn[106]=0,Ft[64]=Ft[106]=-1,Zt[64]=Zt[106]=0,nr[64]=nr[106]=1,_n[2]=_n[168]=0,xn[2]=xn[168]=-1,wn[2]=wn[168]=1,bn[2]=bn[168]=0,Nn[2]=Nn[168]=-1,Mn[2]=Mn[168]=0,pn[2]=pn[168]=-1,gn[2]=gn[168]=0,vn[2]=vn[168]=0,mn[2]=mn[168]=-1,dn[2]=dn[168]=0,yn[2]=yn[168]=1,Yr[8]=Yr[162]=0,nn[8]=nn[162]=-1,Pn[8]=Pn[162]=0,cn[8]=cn[162]=0,zr[8]=zr[162]=-1,hn[8]=hn[162]=1,pn[8]=pn[162]=1,gn[8]=gn[162]=0,vn[8]=vn[162]=1,mn[8]=mn[162]=1,dn[8]=dn[162]=0,yn[8]=yn[162]=0,Yr[32]=Yr[138]=0,nn[32]=nn[138]=1,Pn[32]=Pn[138]=1,cn[32]=cn[138]=0,zr[32]=zr[138]=1,hn[32]=hn[138]=0,Ft[32]=Ft[138]=1,Zt[32]=Zt[138]=0,nr[32]=nr[138]=0,wr[32]=wr[138]=1,Cr[32]=Cr[138]=0,qr[32]=qr[138]=1,bn[128]=bn[42]=0,Nn[128]=Nn[42]=1,Mn[128]=Mn[42]=1,_n[128]=_n[42]=0,xn[128]=xn[42]=1,wn[128]=wn[42]=0,Ft[128]=Ft[42]=-1,Zt[128]=Zt[42]=0,nr[128]=nr[42]=1,wr[128]=wr[42]=-1,Cr[128]=Cr[42]=0,qr[128]=qr[42]=0,cn[5]=cn[165]=-1,zr[5]=zr[165]=0,hn[5]=hn[165]=0,bn[5]=bn[165]=1,Nn[5]=Nn[165]=0,Mn[5]=Mn[165]=0,mn[20]=mn[150]=0,dn[20]=dn[150]=1,yn[20]=yn[150]=1,wr[20]=wr[150]=0,Cr[20]=Cr[150]=-1,qr[20]=qr[150]=1,Yr[80]=Yr[90]=-1,nn[80]=nn[90]=0,Pn[80]=Pn[90]=1,_n[80]=_n[90]=1,xn[80]=xn[90]=0,wn[80]=wn[90]=1,pn[65]=pn[105]=0,gn[65]=gn[105]=1,vn[65]=vn[105]=0,Ft[65]=Ft[105]=0,Zt[65]=Zt[105]=-1,nr[65]=nr[105]=0,Yr[160]=Yr[10]=-1,nn[160]=nn[10]=0,Pn[160]=Pn[10]=1,cn[160]=cn[10]=-1,zr[160]=zr[10]=0,hn[160]=hn[10]=0,bn[160]=bn[10]=1,Nn[160]=Nn[10]=0,Mn[160]=Mn[10]=0,_n[160]=_n[10]=1,xn[160]=xn[10]=0,wn[160]=wn[10]=1,mn[130]=mn[40]=0,dn[130]=dn[40]=1,yn[130]=yn[40]=1,pn[130]=pn[40]=0,gn[130]=gn[40]=1,vn[130]=vn[40]=0,Ft[130]=Ft[40]=0,Zt[130]=Zt[40]=-1,nr[130]=nr[40]=0,wr[130]=wr[40]=0,Cr[130]=Cr[40]=-1,qr[130]=qr[40]=1,cn[37]=cn[133]=0,zr[37]=zr[133]=1,hn[37]=hn[133]=1,bn[37]=bn[133]=0,Nn[37]=Nn[133]=1,Mn[37]=Mn[133]=0,Ft[37]=Ft[133]=-1,Zt[37]=Zt[133]=0,nr[37]=nr[133]=0,wr[37]=wr[133]=1,Cr[37]=Cr[133]=0,qr[37]=qr[133]=0,mn[148]=mn[22]=-1,dn[148]=dn[22]=0,yn[148]=yn[22]=0,bn[148]=bn[22]=0,Nn[148]=Nn[22]=-1,Mn[148]=Mn[22]=1,_n[148]=_n[22]=0,xn[148]=xn[22]=1,wn[148]=wn[22]=1,wr[148]=wr[22]=-1,Cr[148]=Cr[22]=0,qr[148]=qr[22]=1,Yr[82]=Yr[88]=0,nn[82]=nn[88]=-1,Pn[82]=Pn[88]=1,mn[82]=mn[88]=1,dn[82]=dn[88]=0,yn[82]=yn[88]=1,pn[82]=pn[88]=-1,gn[82]=gn[88]=0,vn[82]=vn[88]=1,_n[82]=_n[88]=0,xn[82]=xn[88]=-1,wn[82]=wn[88]=0,Yr[73]=Yr[97]=0,nn[73]=nn[97]=1,Pn[73]=Pn[97]=0,cn[73]=cn[97]=0,zr[73]=zr[97]=-1,hn[73]=hn[97]=0,pn[73]=pn[97]=1,gn[73]=gn[97]=0,vn[73]=vn[97]=0,Ft[73]=Ft[97]=1,Zt[73]=Zt[97]=0,nr[73]=nr[97]=1,Yr[145]=Yr[25]=0,nn[145]=nn[25]=-1,Pn[145]=Pn[25]=0,pn[145]=pn[25]=1,gn[145]=gn[25]=0,vn[145]=vn[25]=1,bn[145]=bn[25]=0,Nn[145]=Nn[25]=1,Mn[145]=Mn[25]=1,wr[145]=wr[25]=-1,Cr[145]=Cr[25]=0,qr[145]=qr[25]=0,cn[70]=cn[100]=0,zr[70]=zr[100]=1,hn[70]=hn[100]=0,mn[70]=mn[100]=-1,dn[70]=dn[100]=0,yn[70]=yn[100]=1,_n[70]=_n[100]=0,xn[70]=xn[100]=-1,wn[70]=wn[100]=1,Ft[70]=Ft[100]=1,Zt[70]=Zt[100]=0,nr[70]=nr[100]=0,cn[101]=cn[69]=0,zr[101]=zr[69]=1,hn[101]=hn[69]=0,Ft[101]=Ft[69]=1,Zt[101]=Zt[69]=0,nr[101]=nr[69]=0,bn[149]=bn[21]=0,Nn[149]=Nn[21]=1,Mn[149]=Mn[21]=1,wr[149]=wr[21]=-1,Cr[149]=Cr[21]=0,qr[149]=qr[21]=0,mn[86]=mn[84]=-1,dn[86]=dn[84]=0,yn[86]=yn[84]=1,_n[86]=_n[84]=0,xn[86]=xn[84]=-1,wn[86]=wn[84]=1,Yr[89]=Yr[81]=0,nn[89]=nn[81]=-1,Pn[89]=Pn[81]=0,pn[89]=pn[81]=1,gn[89]=gn[81]=0,vn[89]=vn[81]=1,Yr[96]=Yr[74]=0,nn[96]=nn[74]=1,Pn[96]=Pn[74]=0,cn[96]=cn[74]=-1,zr[96]=zr[74]=0,hn[96]=hn[74]=1,_n[96]=_n[74]=1,xn[96]=xn[74]=0,wn[96]=wn[74]=0,Ft[96]=Ft[74]=1,Zt[96]=Zt[74]=0,nr[96]=nr[74]=1,Yr[24]=Yr[146]=0,nn[24]=nn[146]=-1,Pn[24]=Pn[146]=1,mn[24]=mn[146]=1,dn[24]=dn[146]=0,yn[24]=yn[146]=1,pn[24]=pn[146]=0,gn[24]=gn[146]=1,vn[24]=vn[146]=1,wr[24]=wr[146]=0,Cr[24]=Cr[146]=-1,qr[24]=qr[146]=0,cn[6]=cn[164]=-1,zr[6]=zr[164]=0,hn[6]=hn[164]=1,mn[6]=mn[164]=-1,dn[6]=dn[164]=0,yn[6]=yn[164]=0,bn[6]=bn[164]=0,Nn[6]=Nn[164]=-1,Mn[6]=Mn[164]=1,_n[6]=_n[164]=1,xn[6]=xn[164]=0,wn[6]=wn[164]=0,pn[129]=pn[41]=0,gn[129]=gn[41]=1,vn[129]=vn[41]=1,bn[129]=bn[41]=0,Nn[129]=Nn[41]=1,Mn[129]=Mn[41]=0,Ft[129]=Ft[41]=-1,Zt[129]=Zt[41]=0,nr[129]=nr[41]=0,wr[129]=wr[41]=0,Cr[129]=Cr[41]=-1,qr[129]=qr[41]=0,mn[66]=mn[104]=0,dn[66]=dn[104]=1,yn[66]=yn[104]=0,pn[66]=pn[104]=-1,gn[66]=gn[104]=0,vn[66]=vn[104]=1,_n[66]=_n[104]=0,xn[66]=xn[104]=-1,wn[66]=wn[104]=0,Ft[66]=Ft[104]=0,Zt[66]=Zt[104]=-1,nr[66]=nr[104]=1,Yr[144]=Yr[26]=-1,nn[144]=nn[26]=0,Pn[144]=Pn[26]=0,bn[144]=bn[26]=1,Nn[144]=Nn[26]=0,Mn[144]=Mn[26]=1,_n[144]=_n[26]=0,xn[144]=xn[26]=1,wn[144]=wn[26]=1,wr[144]=wr[26]=-1,Cr[144]=Cr[26]=0,qr[144]=qr[26]=1,cn[36]=cn[134]=0,zr[36]=zr[134]=1,hn[36]=hn[134]=1,mn[36]=mn[134]=0,dn[36]=dn[134]=1,yn[36]=yn[134]=0,Ft[36]=Ft[134]=0,Zt[36]=Zt[134]=-1,nr[36]=nr[134]=1,wr[36]=wr[134]=1,Cr[36]=Cr[134]=0,qr[36]=qr[134]=0,Yr[9]=Yr[161]=-1,nn[9]=nn[161]=0,Pn[9]=Pn[161]=0,cn[9]=cn[161]=0,zr[9]=zr[161]=-1,hn[9]=hn[161]=0,pn[9]=pn[161]=1,gn[9]=gn[161]=0,vn[9]=vn[161]=0,bn[9]=bn[161]=1,Nn[9]=Nn[161]=0,Mn[9]=Mn[161]=1,Yr[136]=0,nn[136]=1,Pn[136]=1,cn[136]=0,zr[136]=1,hn[136]=0,mn[136]=-1,dn[136]=0,yn[136]=1,pn[136]=-1,gn[136]=0,vn[136]=0,bn[136]=0,Nn[136]=-1,Mn[136]=0,_n[136]=0,xn[136]=-1,wn[136]=1,Ft[136]=1,Zt[136]=0,nr[136]=0,wr[136]=1,Cr[136]=0,qr[136]=1,Yr[34]=0,nn[34]=-1,Pn[34]=0,cn[34]=0,zr[34]=-1,hn[34]=1,mn[34]=1,dn[34]=0,yn[34]=0,pn[34]=1,gn[34]=0,vn[34]=1,bn[34]=0,Nn[34]=1,Mn[34]=1,_n[34]=0,xn[34]=1,wn[34]=0,Ft[34]=-1,Zt[34]=0,nr[34]=1,wr[34]=-1,Cr[34]=0,qr[34]=0,Yr[35]=0,nn[35]=1,Pn[35]=1,cn[35]=0,zr[35]=-1,hn[35]=1,mn[35]=1,dn[35]=0,yn[35]=0,pn[35]=-1,gn[35]=0,vn[35]=0,bn[35]=0,Nn[35]=-1,Mn[35]=0,_n[35]=0,xn[35]=1,wn[35]=0,Ft[35]=-1,Zt[35]=0,nr[35]=1,wr[35]=1,Cr[35]=0,qr[35]=1,Yr[153]=0,nn[153]=1,Pn[153]=1,pn[153]=-1,gn[153]=0,vn[153]=0,bn[153]=0,Nn[153]=-1,Mn[153]=0,wr[153]=1,Cr[153]=0,qr[153]=1,cn[102]=0,zr[102]=-1,hn[102]=1,mn[102]=1,dn[102]=0,yn[102]=0,_n[102]=0,xn[102]=1,wn[102]=0,Ft[102]=-1,Zt[102]=0,nr[102]=1,Yr[155]=0,nn[155]=-1,Pn[155]=0,pn[155]=1,gn[155]=0,vn[155]=1,bn[155]=0,Nn[155]=1,Mn[155]=1,wr[155]=-1,Cr[155]=0,qr[155]=0,cn[103]=0,zr[103]=1,hn[103]=0,mn[103]=-1,dn[103]=0,yn[103]=1,_n[103]=0,xn[103]=-1,wn[103]=1,Ft[103]=1,Zt[103]=0,nr[103]=0,Yr[152]=0,nn[152]=1,Pn[152]=1,mn[152]=-1,dn[152]=0,yn[152]=1,pn[152]=-1,gn[152]=0,vn[152]=0,bn[152]=0,Nn[152]=-1,Mn[152]=0,_n[152]=0,xn[152]=-1,wn[152]=1,wr[152]=1,Cr[152]=0,qr[152]=1,Yr[156]=0,nn[156]=-1,Pn[156]=1,mn[156]=1,dn[156]=0,yn[156]=1,pn[156]=-1,gn[156]=0,vn[156]=0,bn[156]=0,Nn[156]=-1,Mn[156]=0,_n[156]=0,xn[156]=1,wn[156]=1,wr[156]=-1,Cr[156]=0,qr[156]=1,Yr[137]=0,nn[137]=1,Pn[137]=1,cn[137]=0,zr[137]=1,hn[137]=0,pn[137]=-1,gn[137]=0,vn[137]=0,bn[137]=0,Nn[137]=-1,Mn[137]=0,Ft[137]=1,Zt[137]=0,nr[137]=0,wr[137]=1,Cr[137]=0,qr[137]=1,Yr[139]=0,nn[139]=1,Pn[139]=1,cn[139]=0,zr[139]=-1,hn[139]=0,pn[139]=1,gn[139]=0,vn[139]=0,bn[139]=0,Nn[139]=1,Mn[139]=0,Ft[139]=-1,Zt[139]=0,nr[139]=0,wr[139]=1,Cr[139]=0,qr[139]=1,Yr[98]=0,nn[98]=-1,Pn[98]=0,cn[98]=0,zr[98]=-1,hn[98]=1,mn[98]=1,dn[98]=0,yn[98]=0,pn[98]=1,gn[98]=0,vn[98]=1,_n[98]=0,xn[98]=1,wn[98]=0,Ft[98]=-1,Zt[98]=0,nr[98]=1,Yr[99]=0,nn[99]=1,Pn[99]=0,cn[99]=0,zr[99]=-1,hn[99]=1,mn[99]=1,dn[99]=0,yn[99]=0,pn[99]=-1,gn[99]=0,vn[99]=1,_n[99]=0,xn[99]=-1,wn[99]=0,Ft[99]=1,Zt[99]=0,nr[99]=1,cn[38]=0,zr[38]=-1,hn[38]=1,mn[38]=1,dn[38]=0,yn[38]=0,bn[38]=0,Nn[38]=1,Mn[38]=1,_n[38]=0,xn[38]=1,wn[38]=0,Ft[38]=-1,Zt[38]=0,nr[38]=1,wr[38]=-1,Cr[38]=0,qr[38]=0,cn[39]=0,zr[39]=1,hn[39]=1,mn[39]=-1,dn[39]=0,yn[39]=0,bn[39]=0,Nn[39]=-1,Mn[39]=1,_n[39]=0,xn[39]=1,wn[39]=0,Ft[39]=-1,Zt[39]=0,nr[39]=1,wr[39]=1,Cr[39]=0,qr[39]=0;var uc=function(o){return[[o.bottomleft,0],[0,0],[0,o.leftbottom]]},fc=function(o){return[[1,o.rightbottom],[1,0],[o.bottomright,0]]},Rh=function(o){return[[o.topright,1],[1,1],[1,o.righttop]]},lc=function(o){return[[0,o.lefttop],[0,1],[o.topleft,1]]},cc=function(o){return[[o.bottomright,0],[o.bottomleft,0],[0,o.leftbottom],[0,o.lefttop]]},hc=function(o){return[[o.bottomright,0],[o.bottomleft,0],[1,o.righttop],[1,o.rightbottom]]},pc=function(o){return[[1,o.righttop],[1,o.rightbottom],[o.topleft,1],[o.topright,1]]},gc=function(o){return[[0,o.leftbottom],[0,o.lefttop],[o.topleft,1],[o.topright,1]]},tr=[],ar=[],Sr=[],Nr=[],Rr=[],Dr=[],En=[],Tn=[];Nr[1]=Rr[1]=18,Nr[169]=Rr[169]=18,Sr[4]=ar[4]=12,Sr[166]=ar[166]=12,tr[16]=Tn[16]=4,tr[154]=Tn[154]=4,Dr[64]=En[64]=22,Dr[106]=En[106]=22,Sr[2]=Dr[2]=17,Nr[2]=Rr[2]=18,Sr[168]=Dr[168]=17,Nr[168]=Rr[168]=18,tr[8]=Nr[8]=9,ar[8]=Sr[8]=12,tr[162]=Nr[162]=9,ar[162]=Sr[162]=12,tr[32]=Tn[32]=4,ar[32]=En[32]=1,tr[138]=Tn[138]=4,ar[138]=En[138]=1,Rr[128]=Tn[128]=21,Dr[128]=En[128]=22,Rr[42]=Tn[42]=21,Dr[42]=En[42]=22,ar[5]=Rr[5]=14,ar[165]=Rr[165]=14,Sr[20]=Tn[20]=6,Sr[150]=Tn[150]=6,tr[80]=Dr[80]=11,tr[90]=Dr[90]=11,Nr[65]=En[65]=3,Nr[105]=En[105]=3,tr[160]=Dr[160]=11,ar[160]=Rr[160]=14,tr[10]=Dr[10]=11,ar[10]=Rr[10]=14,Sr[130]=Tn[130]=6,Nr[130]=En[130]=3,Sr[40]=Tn[40]=6,Nr[40]=En[40]=3,ar[101]=En[101]=1,ar[69]=En[69]=1,Rr[149]=Tn[149]=21,Rr[21]=Tn[21]=21,Sr[86]=Dr[86]=17,Sr[84]=Dr[84]=17,tr[89]=Nr[89]=9,tr[81]=Nr[81]=9,tr[96]=En[96]=0,ar[96]=Dr[96]=15,tr[74]=En[74]=0,ar[74]=Dr[74]=15,tr[24]=Sr[24]=8,Nr[24]=Tn[24]=7,tr[146]=Sr[146]=8,Nr[146]=Tn[146]=7,ar[6]=Dr[6]=15,Sr[6]=Rr[6]=16,ar[164]=Dr[164]=15,Sr[164]=Rr[164]=16,Nr[129]=Tn[129]=7,Rr[129]=En[129]=20,Nr[41]=Tn[41]=7,Rr[41]=En[41]=20,Sr[66]=En[66]=2,Nr[66]=Dr[66]=19,Sr[104]=En[104]=2,Nr[104]=Dr[104]=19,tr[144]=Rr[144]=10,Dr[144]=Tn[144]=23,tr[26]=Rr[26]=10,Dr[26]=Tn[26]=23,ar[36]=Tn[36]=5,Sr[36]=En[36]=2,ar[134]=Tn[134]=5,Sr[134]=En[134]=2,tr[9]=Rr[9]=10,ar[9]=Nr[9]=13,tr[161]=Rr[161]=10,ar[161]=Nr[161]=13,ar[37]=Tn[37]=5,Rr[37]=En[37]=20,ar[133]=Tn[133]=5,Rr[133]=En[133]=20,Sr[148]=Rr[148]=16,Dr[148]=Tn[148]=23,Sr[22]=Rr[22]=16,Dr[22]=Tn[22]=23,tr[82]=Sr[82]=8,Nr[82]=Dr[82]=19,tr[88]=Sr[88]=8,Nr[88]=Dr[88]=19,tr[73]=En[73]=0,ar[73]=Nr[73]=13,tr[97]=En[97]=0,ar[97]=Nr[97]=13,tr[145]=Nr[145]=9,Rr[145]=Tn[145]=21,tr[25]=Nr[25]=9,Rr[25]=Tn[25]=21,ar[70]=En[70]=1,Sr[70]=Dr[70]=17,ar[100]=En[100]=1,Sr[100]=Dr[100]=17,tr[34]=Nr[34]=9,ar[34]=Sr[34]=12,Rr[34]=Tn[34]=21,Dr[34]=En[34]=22,tr[136]=Tn[136]=4,ar[136]=En[136]=1,Sr[136]=Dr[136]=17,Nr[136]=Rr[136]=18,tr[35]=Tn[35]=4,ar[35]=Sr[35]=12,Nr[35]=Rr[35]=18,Dr[35]=En[35]=22,tr[153]=Tn[153]=4,Nr[153]=Rr[153]=18,ar[102]=Sr[102]=12,Dr[102]=En[102]=22,tr[155]=Nr[155]=9,Rr[155]=Tn[155]=23,ar[103]=En[103]=1,Sr[103]=Dr[103]=17,tr[152]=Tn[152]=4,Sr[152]=Dr[152]=17,Nr[152]=Rr[152]=18,tr[156]=Sr[156]=8,Nr[156]=Rr[156]=18,Dr[156]=Tn[156]=23,tr[137]=Tn[137]=4,ar[137]=En[137]=1,Nr[137]=Rr[137]=18,tr[139]=Tn[139]=4,ar[139]=Nr[139]=13,Rr[139]=En[139]=20,tr[98]=Nr[98]=9,ar[98]=Sr[98]=12,Dr[98]=En[98]=22,tr[99]=En[99]=0,ar[99]=Sr[99]=12,Nr[99]=Dr[99]=19,ar[38]=Sr[38]=12,Rr[38]=Tn[38]=21,Dr[38]=En[38]=22,ar[39]=Tn[39]=5,Sr[39]=Rr[39]=16,Dr[39]=En[39]=22;var jt=[];function Vh(o,s,l){return function Xh(o){return(o>0)-(o<0)||+o}((s[0]-o[0])*(l[1]-s[1])-(l[0]-s[0])*(s[1]-o[1]))}function Ef(o,s){return s.geometry.coordinates[0].every(function(l){return zt(ce(l),o)})}jt[1]=jt[169]=uc,jt[4]=jt[166]=fc,jt[16]=jt[154]=Rh,jt[64]=jt[106]=lc,jt[168]=jt[2]=cc,jt[162]=jt[8]=hc,jt[138]=jt[32]=pc,jt[42]=jt[128]=gc,jt[5]=jt[165]=function(o){return[[0,0],[0,o.leftbottom],[1,o.rightbottom],[1,0]]},jt[20]=jt[150]=function(o){return[[1,0],[o.bottomright,0],[o.topright,1],[1,1]]},jt[80]=jt[90]=function(o){return[[1,1],[1,o.righttop],[0,o.lefttop],[0,1]]},jt[65]=jt[105]=function(o){return[[o.bottomleft,0],[0,0],[0,1],[o.topleft,1]]},jt[160]=jt[10]=function(o){return[[1,o.righttop],[1,o.rightbottom],[0,o.leftbottom],[0,o.lefttop]]},jt[130]=jt[40]=function(o){return[[o.topleft,1],[o.topright,1],[o.bottomright,0],[o.bottomleft,0]]},jt[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},jt[101]=jt[69]=function(o){return[[1,o.rightbottom],[1,0],[0,0],[0,1],[o.topleft,1]]},jt[149]=jt[21]=function(o){return[[o.topright,1],[1,1],[1,0],[0,0],[0,o.leftbottom]]},jt[86]=jt[84]=function(o){return[[1,0],[o.bottomright,0],[0,o.lefttop],[0,1],[1,1]]},jt[89]=jt[81]=function(o){return[[1,1],[1,o.righttop],[o.bottomleft,0],[0,0],[0,1]]},jt[96]=jt[74]=function(o){return[[1,o.righttop],[1,o.rightbottom],[0,o.lefttop],[0,1],[o.topleft,1]]},jt[24]=jt[146]=function(o){return[[1,1],[1,o.righttop],[o.bottomright,0],[o.bottomleft,0],[o.topright,1]]},jt[6]=jt[164]=function(o){return[[1,o.rightbottom],[1,0],[o.bottomright,0],[0,o.leftbottom],[0,o.lefttop]]},jt[129]=jt[41]=function(o){return[[o.topright,1],[o.bottomleft,0],[0,0],[0,o.leftbottom],[o.topleft,1]]},jt[66]=jt[104]=function(o){return[[o.bottomright,0],[o.bottomleft,0],[0,o.lefttop],[0,1],[o.topleft,1]]},jt[144]=jt[26]=function(o){return[[1,1],[1,o.righttop],[0,o.leftbottom],[0,o.lefttop],[o.topright,1]]},jt[36]=jt[134]=function(o){return[[1,o.rightbottom],[1,0],[o.bottomright,0],[o.topleft,1],[o.topright,1]]},jt[9]=jt[161]=function(o){return[[1,o.righttop],[1,o.rightbottom],[o.bottomleft,0],[0,0],[0,o.leftbottom]]},jt[37]=jt[133]=function(o){return[[1,o.rightbottom],[1,0],[0,0],[0,o.leftbottom],[o.topleft,1],[o.topright,1]]},jt[148]=jt[22]=function(o){return[[1,1],[1,0],[o.bottomright,0],[0,o.leftbottom],[0,o.lefttop],[o.topright,1]]},jt[82]=jt[88]=function(o){return[[1,1],[1,o.righttop],[o.bottomright,0],[o.bottomleft,0],[0,o.lefttop],[0,1]]},jt[73]=jt[97]=function(o){return[[1,o.righttop],[1,o.rightbottom],[o.bottomleft,0],[0,0],[0,1],[o.topleft,1]]},jt[145]=jt[25]=function(o){return[[1,1],[1,o.righttop],[o.bottomleft,0],[0,0],[0,o.leftbottom],[o.topright,1]]},jt[70]=jt[100]=function(o){return[[1,o.rightbottom],[1,0],[o.bottomright,0],[0,o.lefttop],[0,1],[o.topleft,1]]},jt[34]=function(o){return[gc(o),hc(o)]},jt[35]=function(o){return[[1,o.righttop],[1,o.rightbottom],[o.bottomright,0],[o.bottomleft,0],[0,o.leftbottom],[0,o.lefttop],[o.topleft,1],[o.topright,1]]},jt[136]=function(o){return[pc(o),cc(o)]},jt[153]=function(o){return[Rh(o),uc(o)]},jt[102]=function(o){return[fc(o),lc(o)]},jt[155]=function(o){return[[1,1],[1,o.righttop],[o.bottomleft,0],[0,0],[0,o.leftbottom],[o.topright,1]]},jt[103]=function(o){return[[1,o.rightbottom],[1,0],[o.bottomright,0],[0,o.lefttop],[0,1],[o.topleft,1]]},jt[152]=function(o){return[Rh(o),cc(o)]},jt[156]=function(o){return[[1,1],[1,o.righttop],[o.bottomright,0],[o.bottomleft,0],[0,o.leftbottom],[0,o.lefttop],[o.topright,1]]},jt[137]=function(o){return[pc(o),uc(o)]},jt[139]=function(o){return[[1,o.righttop],[1,o.rightbottom],[o.bottomleft,0],[0,0],[0,o.leftbottom],[o.topleft,1],[o.topright,1]]},jt[98]=function(o){return[hc(o),lc(o)]},jt[99]=function(o){return[[1,o.righttop],[1,o.rightbottom],[o.bottomright,0],[o.bottomleft,0],[0,o.lefttop],[0,1],[o.topleft,1]]},jt[38]=function(o){return[fc(o),gc(o)]},jt[39]=function(o){return[[1,o.rightbottom],[1,0],[o.bottomright,0],[0,o.leftbottom],[0,o.lefttop],[o.topleft,1],[o.topright,1]]};const qv=function(){function o(s){this.id=o.buildId(s),this.coordinates=s,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return o.buildId=function(s){return s.join(",")},o.prototype.removeInnerEdge=function(s){this.innerEdges=this.innerEdges.filter(function(l){return l.from.id!==s.from.id})},o.prototype.removeOuterEdge=function(s){this.outerEdges=this.outerEdges.filter(function(l){return l.to.id!==s.to.id})},o.prototype.addOuterEdge=function(s){this.outerEdges.push(s),this.outerEdgesSorted=!1},o.prototype.sortOuterEdges=function(){var s=this;this.outerEdgesSorted||(this.outerEdges.sort(function(l,p){var d=l.to,N=p.to;if(d.coordinates[0]-s.coordinates[0]>=0&&N.coordinates[0]-s.coordinates[0]<0)return 1;if(d.coordinates[0]-s.coordinates[0]<0&&N.coordinates[0]-s.coordinates[0]>=0)return-1;if(d.coordinates[0]-s.coordinates[0]==0&&N.coordinates[0]-s.coordinates[0]==0)return d.coordinates[1]-s.coordinates[1]>=0||N.coordinates[1]-s.coordinates[1]>=0?d.coordinates[1]-N.coordinates[1]:N.coordinates[1]-d.coordinates[1];var M=Vh(s.coordinates,d.coordinates,N.coordinates);return M<0?1:M>0?-1:Math.pow(d.coordinates[0]-s.coordinates[0],2)+Math.pow(d.coordinates[1]-s.coordinates[1],2)-(Math.pow(N.coordinates[0]-s.coordinates[0],2)+Math.pow(N.coordinates[1]-s.coordinates[1],2))}),this.outerEdgesSorted=!0)},o.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},o.prototype.getOuterEdge=function(s){return this.sortOuterEdges(),this.outerEdges[s]},o.prototype.addInnerEdge=function(s){this.innerEdges.push(s)},o}(),zv=function(){function o(s,l){this.from=s,this.to=l,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return o.prototype.getSymetric=function(){return this.symetric||(this.symetric=new o(this.to,this.from),this.symetric.symetric=this),this.symetric},o.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},o.prototype.isEqual=function(s){return this.from.id===s.from.id&&this.to.id===s.to.id},o.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},o.prototype.toLineString=function(){return function se(o,s,l){if(void 0===l&&(l={}),o.length<2)throw new Error("coordinates must be an array of two or more positions");return Q({type:"LineString",coordinates:o},s,l)}([this.from.coordinates,this.to.coordinates])},o.prototype.compareTo=function(s){return Vh(s.from.coordinates,s.to.coordinates,this.to.coordinates)},o}(),Gv=function(){function o(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return o.prototype.push=function(s){this.edges.push(s),this.polygon=this.envelope=void 0},o.prototype.get=function(s){return this.edges[s]},Object.defineProperty(o.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),o.prototype.forEach=function(s){this.edges.forEach(s)},o.prototype.map=function(s){return this.edges.map(s)},o.prototype.some=function(s){return this.edges.some(s)},o.prototype.isValid=function(){return!0},o.prototype.isHole=function(){var s=this,l=this.edges.reduce(function(M,I,O){return I.from.coordinates[1]>s.edges[M].from.coordinates[1]&&(M=O),M},0),p=(0===l?this.length:l)-1,d=(l+1)%this.length,N=Vh(this.edges[p].from.coordinates,this.edges[l].from.coordinates,this.edges[d].from.coordinates);return 0===N?this.edges[p].from.coordinates[0]>this.edges[d].from.coordinates[0]:N>0},o.prototype.toMultiPoint=function(){return function oe(o,s,l){return void 0===l&&(l={}),Q({type:"MultiPoint",coordinates:o},s,l)}(this.edges.map(function(s){return s.from.coordinates}))},o.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var s=this.edges.map(function(l){return l.from.coordinates});return s.push(this.edges[0].from.coordinates),this.polygon=Oe([s])},o.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=function vf(o){return function Vi(o,s){void 0===s&&(s={});var l=Number(o[0]),p=Number(o[1]),d=Number(o[2]),N=Number(o[3]);if(6===o.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var M=[l,p];return Oe([[M,[d,p],[d,N],[l,N],M]],s.properties,{bbox:o,id:s.id})}(sn(o))}(this.toPolygon())},o.findEdgeRingContaining=function(s,l){var d,N,p=s.getEnvelope();return l.forEach(function(M){var I=M.getEnvelope();if(N&&(d=N.getEnvelope()),!function Yu(o,s){var l=o.geometry.coordinates[0].map(function(M){return M[0]}),p=o.geometry.coordinates[0].map(function(M){return M[1]}),d=s.geometry.coordinates[0].map(function(M){return M[0]}),N=s.geometry.coordinates[0].map(function(M){return M[1]});return Math.max.apply(null,l)===Math.max.apply(null,d)&&Math.max.apply(null,p)===Math.max.apply(null,N)&&Math.min.apply(null,l)===Math.min.apply(null,d)&&Math.min.apply(null,p)===Math.min.apply(null,N)}(I,p)&&Ef(I,p)){for(var O=s.map(function(Ye){return Ye.from.coordinates}),C=void 0,T=function(Ye){M.some(function(Re){return function Sf(o,s){return o[0]===s[0]&&o[1]===s[1]}(Ye,Re.from.coordinates)})||(C=Ye)},L=0,D=O;L<D.length;L++)T(D[L]);C&&M.inside(ce(C))&&(!N||Ef(d,I))&&(N=M)}}),N},o.prototype.inside=function(s){return zt(s,this.toPolygon())},o}();function Ic(o){for(var s=o,l=[];s.parent;)l.unshift(s),s=s.parent;return l}!function(){function o(){this.edges=[],this.nodes={}}o.fromGeoJson=function(s){!function kv(o){if(!o)throw new Error("No geojson passed");if("FeatureCollection"!==o.type&&"GeometryCollection"!==o.type&&"MultiLineString"!==o.type&&"LineString"!==o.type&&"Feature"!==o.type)throw new Error("Invalid input type '"+o.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(s);var l=new o;return Bt(s,function(p){(function Ie(o,s,l){if(!o)throw new Error("No feature passed");if(!l)throw new Error(".featureOf() requires a name");if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+l+", Feature with geometry required");if(!o.geometry||o.geometry.type!==s)throw new Error("Invalid input to "+l+": must be a "+s+", given "+o.geometry.type)})(p,"LineString","Graph::fromGeoJson"),function De(o,s,l,p){var d=l;gt(o,function(N,M,I,O,C){d=0===M&&void 0===l?N:s(d,N,M,I,O,C)},p)}(p,function(d,N){if(d){var M=l.getNode(d),I=l.getNode(N);l.addEdge(M,I)}return N})}),l},o.prototype.getNode=function(s){var l=qv.buildId(s),p=this.nodes[l];return p||(p=this.nodes[l]=new qv(s)),p},o.prototype.addEdge=function(s,l){var p=new zv(s,l),d=p.getSymetric();this.edges.push(p),this.edges.push(d)},o.prototype.deleteDangles=function(){var s=this;Object.keys(this.nodes).map(function(l){return s.nodes[l]}).forEach(function(l){return s._removeIfDangle(l)})},o.prototype._removeIfDangle=function(s){var l=this;if(s.innerEdges.length<=1){var p=s.getOuterEdges().map(function(d){return d.to});this.removeNode(s),p.forEach(function(d){return l._removeIfDangle(d)})}},o.prototype.deleteCutEdges=function(){var s=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(l){l.label===l.symetric.label&&(s.removeEdge(l.symetric),s.removeEdge(l))})},o.prototype._computeNextCWEdges=function(s){var l=this;typeof s>"u"?Object.keys(this.nodes).forEach(function(p){return l._computeNextCWEdges(l.nodes[p])}):s.getOuterEdges().forEach(function(p,d){s.getOuterEdge((0===d?s.getOuterEdges().length:d)-1).symetric.next=p})},o.prototype._computeNextCCWEdges=function(s,l){for(var d,N,p=s.getOuterEdges(),M=p.length-1;M>=0;--M){var I=p[M],O=I.symetric,C=void 0,T=void 0;I.label===l&&(C=I),O.label===l&&(T=O),C&&T&&(T&&(N=T),C&&(N&&(N.next=C,N=void 0),d||(d=C)))}N&&(N.next=d)},o.prototype._findLabeledEdgeRings=function(){var s=[],l=0;return this.edges.forEach(function(p){if(!(p.label>=0)){s.push(p);var d=p;do{d.label=l,d=d.next}while(!p.isEqual(d));l++}}),s},o.prototype.getEdgeRings=function(){var s=this;this._computeNextCWEdges(),this.edges.forEach(function(p){p.label=void 0}),this._findLabeledEdgeRings().forEach(function(p){s._findIntersectionNodes(p).forEach(function(d){s._computeNextCCWEdges(d,p.label)})});var l=[];return this.edges.forEach(function(p){p.ring||l.push(s._findEdgeRing(p))}),l},o.prototype._findIntersectionNodes=function(s){var l=[],p=s,d=function(){var N=0;p.from.getOuterEdges().forEach(function(M){M.label===s.label&&++N}),N>1&&l.push(p.from),p=p.next};do{d()}while(!s.isEqual(p));return l},o.prototype._findEdgeRing=function(s){var l=s,p=new Gv;do{p.push(l),l.ring=p,l=l.next}while(!s.isEqual(l));return p},o.prototype.removeNode=function(s){var l=this;s.getOuterEdges().forEach(function(p){return l.removeEdge(p)}),s.innerEdges.forEach(function(p){return l.removeEdge(p)}),delete this.nodes[s.id]},o.prototype.removeEdge=function(s){this.edges=this.edges.filter(function(l){return!l.isEqual(s)}),s.deleteEdge()}}(),qi(5013),qi(7470),qi(5331);var Cf={search:function(o,s,l,p){o.cleanDirty();var d=(p=p||{}).heuristic||Cf.heuristics.manhattan,N=p.closest||!1,M=function Qh(){return new Oc(function(o){return o.f})}(),I=s;for(s.h=d(s,l),M.push(s);M.size()>0;){var O=M.pop();if(O===l)return Ic(O);O.closed=!0;for(var C=o.neighbors(O),T=0,L=C.length;T<L;++T){var D=C[T];if(!D.closed&&!D.isWall()){var z=O.g+D.getCost(O),Ye=D.visited;(!Ye||z<D.g)&&(D.visited=!0,D.parent=O,D.h=D.h||d(D,l),D.g=z,D.f=D.g+D.h,o.markDirty(D),N&&(D.h<I.h||D.h===I.h&&D.g<I.g)&&(I=D),Ye?M.rescoreElement(D):M.push(D))}}}return N?Ic(I):[]},heuristics:{manhattan:function(o,s){return Math.abs(s.x-o.x)+Math.abs(s.y-o.y)},diagonal:function(o,s){var p=Math.sqrt(2),d=Math.abs(s.x-o.x),N=Math.abs(s.y-o.y);return 1*(d+N)+(p-2)*Math.min(d,N)}},cleanNode:function(o){o.f=0,o.g=0,o.h=0,o.visited=!1,o.closed=!1,o.parent=null}};function Xu(o,s){s=s||{},this.nodes=[],this.diagonal=!!s.diagonal,this.grid=[];for(var l=0;l<o.length;l++){this.grid[l]=[];for(var p=0,d=o[l];p<d.length;p++){var N=new If(l,p,d[p]);this.grid[l][p]=N,this.nodes.push(N)}}this.init()}function If(o,s,l){this.x=o,this.y=s,this.weight=l}function Oc(o){this.content=[],this.scoreFunction=o}function Of(){this._=null}function cl(o){o.U=o.C=o.L=o.R=o.P=o.N=null}function Vu(o,s){var l=s,p=s.R,d=l.U;d?d.L===l?d.L=p:d.R=p:o._=p,p.U=d,l.U=p,l.R=p.L,l.R&&(l.R.U=l),p.L=l}function Hu(o,s){var l=s,p=s.L,d=l.U;d?d.L===l?d.L=p:d.R=p:o._=p,p.U=d,l.U=p,l.L=p.R,l.L&&(l.L.U=l),p.R=l}function Pc(o){for(;o.L;)o=o.L;return o}Xu.prototype.init=function(){this.dirtyNodes=[];for(var o=0;o<this.nodes.length;o++)Cf.cleanNode(this.nodes[o])},Xu.prototype.cleanDirty=function(){for(var o=0;o<this.dirtyNodes.length;o++)Cf.cleanNode(this.dirtyNodes[o]);this.dirtyNodes=[]},Xu.prototype.markDirty=function(o){this.dirtyNodes.push(o)},Xu.prototype.neighbors=function(o){var s=[],l=o.x,p=o.y,d=this.grid;return d[l-1]&&d[l-1][p]&&s.push(d[l-1][p]),d[l+1]&&d[l+1][p]&&s.push(d[l+1][p]),d[l]&&d[l][p-1]&&s.push(d[l][p-1]),d[l]&&d[l][p+1]&&s.push(d[l][p+1]),this.diagonal&&(d[l-1]&&d[l-1][p-1]&&s.push(d[l-1][p-1]),d[l+1]&&d[l+1][p-1]&&s.push(d[l+1][p-1]),d[l-1]&&d[l-1][p+1]&&s.push(d[l-1][p+1]),d[l+1]&&d[l+1][p+1]&&s.push(d[l+1][p+1])),s},Xu.prototype.toString=function(){for(var l,p,d,N,o=[],s=this.grid,M=0,I=s.length;M<I;M++){for(l=[],d=0,N=(p=s[M]).length;d<N;d++)l.push(p[d].weight);o.push(l.join(" "))}return o.join("\n")},If.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},If.prototype.getCost=function(o){return o&&o.x!==this.x&&o.y!==this.y?1.41421*this.weight:this.weight},If.prototype.isWall=function(){return 0===this.weight},Oc.prototype={push:function(o){this.content.push(o),this.sinkDown(this.content.length-1)},pop:function(){var o=this.content[0],s=this.content.pop();return this.content.length>0&&(this.content[0]=s,this.bubbleUp(0)),o},remove:function(o){var s=this.content.indexOf(o),l=this.content.pop();s!==this.content.length-1&&(this.content[s]=l,this.scoreFunction(l)<this.scoreFunction(o)?this.sinkDown(s):this.bubbleUp(s))},size:function(){return this.content.length},rescoreElement:function(o){this.sinkDown(this.content.indexOf(o))},sinkDown:function(o){for(var s=this.content[o];o>0;){var l=(o+1>>1)-1,p=this.content[l];if(!(this.scoreFunction(s)<this.scoreFunction(p)))break;this.content[l]=s,this.content[o]=p,o=l}},bubbleUp:function(o){for(var s=this.content.length,l=this.content[o],p=this.scoreFunction(l);;){var I,d=o+1<<1,N=d-1,M=null;if(N<s&&(I=this.scoreFunction(this.content[N]))<p&&(M=N),d<s&&this.scoreFunction(this.content[d])<(null===M?p:I)&&(M=d),null===M)break;this.content[o]=this.content[M],this.content[M]=l,o=M}}},Of.prototype={constructor:Of,insert:function(o,s){var l,p,d;if(o){if(s.P=o,s.N=o.N,o.N&&(o.N.P=s),o.N=s,o.R){for(o=o.R;o.L;)o=o.L;o.L=s}else o.R=s;l=o}else this._?(o=Pc(this._),s.P=null,s.N=o,o.P=o.L=s,l=o):(s.P=s.N=null,this._=s,l=null);for(s.L=s.R=null,s.U=l,s.C=!0,o=s;l&&l.C;)l===(p=l.U).L?(d=p.R)&&d.C?(l.C=d.C=!1,p.C=!0,o=p):(o===l.R&&(Vu(this,l),l=(o=l).U),l.C=!1,p.C=!0,Hu(this,p)):(d=p.L)&&d.C?(l.C=d.C=!1,p.C=!0,o=p):(o===l.L&&(Hu(this,l),l=(o=l).U),l.C=!1,p.C=!0,Vu(this,p)),l=o.U;this._.C=!1},remove:function(o){o.N&&(o.N.P=o.P),o.P&&(o.P.N=o.N),o.N=o.P=null;var l,N,M,s=o.U,p=o.L,d=o.R;if(N=p?d?Pc(d):p:d,s?s.L===o?s.L=N:s.R=N:this._=N,p&&d?(M=N.C,N.C=o.C,N.L=p,p.U=N,N!==d?(s=N.U,N.U=o.U,s.L=o=N.R,N.R=d,d.U=N):(N.U=s,s=N,o=N.R)):(M=o.C,o=N),o&&(o.U=s),!M){if(o&&o.C)return void(o.C=!1);do{if(o===this._)break;if(o===s.L){if((l=s.R).C&&(l.C=!1,s.C=!0,Vu(this,s),l=s.R),l.L&&l.L.C||l.R&&l.R.C){(!l.R||!l.R.C)&&(l.L.C=!1,l.C=!0,Hu(this,l),l=s.R),l.C=s.C,s.C=l.R.C=!1,Vu(this,s),o=this._;break}}else if((l=s.L).C&&(l.C=!1,s.C=!0,Hu(this,s),l=s.L),l.L&&l.L.C||l.R&&l.R.C){(!l.L||!l.L.C)&&(l.R.C=!1,l.C=!0,Vu(this,l),l=s.L),l.C=s.C,s.C=l.L.C=!1,Hu(this,s),o=this._;break}l.C=!0,o=s,s=s.U}while(!o.C);o&&(o.C=!1)}}};const Tc=Of;function Pf(o,s,l,p){var d=[null,null],N=La.push(d)-1;return d.left=o,d.right=s,l&&hl(d,o,s,l),p&&hl(d,s,o,p),uo[o.index].halfedges.push(N),uo[s.index].halfedges.push(N),d}function Wu(o,s,l){var p=[s,l];return p.left=o,p}function hl(o,s,l,p){o[0]||o[1]?o.left===l?o[1]=p:o[0]=p:(o[0]=p,o.left=s,o.right=l)}function rm(o,s,l,p,d){var Re,N=o[0],M=o[1],I=N[0],O=N[1],L=0,D=1,z=M[0]-I,Ye=M[1]-O;if(Re=s-I,z||!(Re>0)){if(Re/=z,z<0){if(Re<L)return;Re<D&&(D=Re)}else if(z>0){if(Re>D)return;Re>L&&(L=Re)}if(Re=p-I,z||!(Re<0)){if(Re/=z,z<0){if(Re>D)return;Re>L&&(L=Re)}else if(z>0){if(Re<L)return;Re<D&&(D=Re)}if(Re=l-O,Ye||!(Re>0)){if(Re/=Ye,Ye<0){if(Re<L)return;Re<D&&(D=Re)}else if(Ye>0){if(Re>D)return;Re>L&&(L=Re)}if(Re=d-O,Ye||!(Re<0)){if(Re/=Ye,Ye<0){if(Re>D)return;Re>L&&(L=Re)}else if(Ye>0){if(Re<L)return;Re<D&&(D=Re)}return!(L>0)&&!(D<1)||(L>0&&(o[0]=[I+L*z,O+L*Ye]),D<1&&(o[1]=[I+D*z,O+D*Ye])),!0}}}}}function ep(o,s,l,p,d){var N=o[1];if(N)return!0;var Re,it,M=o[0],I=o.left,O=o.right,C=I[0],T=I[1],L=O[0],D=O[1],z=(C+L)/2;if(D===T){if(z<s||z>=p)return;if(C>L){if(M){if(M[1]>=d)return}else M=[z,l];N=[z,d]}else{if(M){if(M[1]<l)return}else M=[z,d];N=[z,l]}}else if(it=(T+D)/2-(Re=(C-L)/(D-T))*z,Re<-1||Re>1)if(C>L){if(M){if(M[1]>=d)return}else M=[(l-it)/Re,l];N=[(d-it)/Re,d]}else{if(M){if(M[1]<l)return}else M=[(d-it)/Re,d];N=[(l-it)/Re,l]}else if(T<D){if(M){if(M[0]>=p)return}else M=[s,Re*s+it];N=[p,Re*p+it]}else{if(M){if(M[0]<s)return}else M=[p,Re*p+it];N=[s,Re*s+it]}return o[0]=M,o[1]=N,!0}function tp(o,s){var l=o.site,p=s.left,d=s.right;return l===d&&(d=p,p=l),d?Math.atan2(d[1]-p[1],d[0]-p[0]):(l===p?(p=s[1],d=s[0]):(p=s[0],d=s[1]),Math.atan2(p[0]-d[0],d[1]-p[1]))}function rp(o,s){return s[+(s.left!==o.site)]}function am(o,s){return s[+(s.left===o.site)]}var pl,np=[];function ip(){cl(this),this.x=this.y=this.arc=this.site=this.cy=null}function vu(o){var s=o.P,l=o.N;if(s&&l){var p=s.site,d=o.site,N=l.site;if(p!==N){var M=d[0],I=d[1],O=p[0]-M,C=p[1]-I,T=N[0]-M,L=N[1]-I,D=2*(O*L-C*T);if(!(D>=-um)){var z=O*O+C*C,Ye=T*T+L*L,Re=(L*z-C*Ye)/D,it=(O*Ye-T*z)/D,Ve=np.pop()||new ip;Ve.arc=o,Ve.site=d,Ve.x=Re+M,Ve.y=(Ve.cy=it+I)+Math.sqrt(Re*Re+it*it),o.circle=Ve;for(var Te=null,Ue=Zu._;Ue;)if(Ve.y<Ue.y||Ve.y===Ue.y&&Ve.x<=Ue.x){if(!Ue.L){Te=Ue.P;break}Ue=Ue.L}else{if(!Ue.R){Te=Ue;break}Ue=Ue.R}Zu.insert(Te,Ve),Te||(pl=Ve)}}}}function mu(o){var s=o.circle;s&&(s.P||(pl=s.N),Zu.remove(s),np.push(s),cl(s),o.circle=null)}var Lc=[];function ap(){cl(this),this.edge=this.site=this.circle=null}function Dc(o){var s=Lc.pop()||new ap;return s.site=o,s}function Rc(o){mu(o),du.remove(o),Lc.push(o),cl(o)}function op(o){var s=o.circle,l=s.x,p=s.cy,d=[l,p],N=o.P,M=o.N,I=[o];Rc(o);for(var O=N;O.circle&&Math.abs(l-O.circle.x)<Ci&&Math.abs(p-O.circle.cy)<Ci;)N=O.P,I.unshift(O),Rc(O),O=N;I.unshift(O),mu(O);for(var C=M;C.circle&&Math.abs(l-C.circle.x)<Ci&&Math.abs(p-C.circle.cy)<Ci;)M=C.N,I.push(C),Rc(C),C=M;I.push(C),mu(C);var L,T=I.length;for(L=1;L<T;++L)hl((C=I[L]).edge,(O=I[L-1]).site,C.site,d);(C=I[T-1]).edge=Pf((O=I[0]).site,C.site,null,d),vu(O),vu(C)}function sm(o){for(var p,d,N,M,s=o[0],l=o[1],I=du._;I;)if((N=sp(I,l)-s)>Ci)I=I.L;else{if(!((M=s-up(I,l))>Ci)){N>-Ci?(p=I.P,d=I):M>-Ci?(p=I,d=I.N):p=d=I;break}if(!I.R){p=I;break}I=I.R}!function im(o){uo[o.index]={site:o,halfedges:[]}}(o);var O=Dc(o);if(du.insert(p,O),p||d){if(p===d)return mu(p),d=Dc(p.site),du.insert(O,d),O.edge=d.edge=Pf(p.site,O.site),vu(p),void vu(d);if(!d)return void(O.edge=Pf(p.site,O.site));mu(p),mu(d);var C=p.site,T=C[0],L=C[1],D=o[0]-T,z=o[1]-L,Ye=d.site,Re=Ye[0]-T,it=Ye[1]-L,Ve=2*(D*it-z*Re),Te=D*D+z*z,Ue=Re*Re+it*it,ct=[(it*Te-z*Ue)/Ve+T,(D*Ue-Re*Te)/Ve+L];hl(d.edge,C,Ye,ct),O.edge=Pf(C,o,null,ct),d.edge=Pf(o,Ye,null,ct),vu(p),vu(d)}}function sp(o,s){var l=o.site,p=l[0],d=l[1],N=d-s;if(!N)return p;var M=o.P;if(!M)return-1/0;var I=(l=M.site)[0],O=l[1],C=O-s;if(!C)return I;var T=I-p,L=1/N-1/C,D=T/C;return L?(-D+Math.sqrt(D*D-2*L*(T*T/(-2*C)-O+C/2+d-N/2)))/L+p:(p+I)/2}function up(o,s){var l=o.N;if(l)return sp(l,s);var p=o.site;return p[1]===s?p[0]:1/0}var du,uo,Zu,La,Ci=1e-6,um=1e-12;function fp(o,s,l){return(o[0]-l[0])*(s[1]-o[1])-(o[0]-s[0])*(l[1]-o[1])}function lp(o,s){return s[1]-o[1]||s[0]-o[0]}function cp(o,s){var p,d,N,l=o.sort(lp).pop();for(La=[],uo=new Array(o.length),du=new Tc,Zu=new Tc;;)if(N=pl,l&&(!N||l[1]<N.y||l[1]===N.y&&l[0]<N.x))(l[0]!==p||l[1]!==d)&&(sm(l),p=l[0],d=l[1]),l=o.pop();else{if(!N)break;op(N.arc)}if(function Ai(){for(var l,p,d,N,o=0,s=uo.length;o<s;++o)if((l=uo[o])&&(N=(p=l.halfedges).length)){var M=new Array(N),I=new Array(N);for(d=0;d<N;++d)M[d]=d,I[d]=tp(l,La[p[d]]);for(M.sort(function(O,C){return I[C]-I[O]}),d=0;d<N;++d)I[d]=p[M[d]];for(d=0;d<N;++d)p[d]=I[d]}}(),s){var M=+s[0][0],I=+s[0][1],O=+s[1][0],C=+s[1][1];(function nm(o,s,l,p){for(var N,d=La.length;d--;)ep(N=La[d],o,s,l,p)&&rm(N,o,s,l,p)&&(Math.abs(N[0][0]-N[1][0])>Ci||Math.abs(N[0][1]-N[1][1])>Ci)||delete La[d]})(M,I,O,C),function om(o,s,l,p){var N,M,I,O,C,T,L,D,z,Ye,Re,it,d=uo.length,Ve=!0;for(N=0;N<d;++N)if(M=uo[N]){for(I=M.site,O=(C=M.halfedges).length;O--;)La[C[O]]||C.splice(O,1);for(O=0,T=C.length;O<T;)Re=(Ye=am(M,La[C[O]]))[0],it=Ye[1],D=(L=rp(M,La[C[++O%T]]))[0],z=L[1],(Math.abs(Re-D)>Ci||Math.abs(it-z)>Ci)&&(C.splice(O,0,La.push(Wu(I,Ye,Math.abs(Re-o)<Ci&&p-it>Ci?[o,Math.abs(D-o)<Ci?z:p]:Math.abs(it-p)<Ci&&l-Re>Ci?[Math.abs(z-p)<Ci?D:l,p]:Math.abs(Re-l)<Ci&&it-s>Ci?[l,Math.abs(D-l)<Ci?z:s]:Math.abs(it-s)<Ci&&Re-o>Ci?[Math.abs(z-s)<Ci?D:o,s]:null))-1),++T);T&&(Ve=!1)}if(Ve){var Te,Ue,ct,ft=1/0;for(N=0,Ve=null;N<d;++N)(M=uo[N])&&(ct=(Te=(I=M.site)[0]-o)*Te+(Ue=I[1]-s)*Ue)<ft&&(ft=ct,Ve=M);if(Ve){var yt=[o,s],mt=[o,p],Et=[l,p],Ke=[l,s];Ve.halfedges.push(La.push(Wu(I=Ve.site,yt,mt))-1,La.push(Wu(I,mt,Et))-1,La.push(Wu(I,Et,Ke))-1,La.push(Wu(I,Ke,yt))-1)}}for(N=0;N<d;++N)(M=uo[N])&&(M.halfedges.length||delete uo[N])}(M,I,O,C)}this.edges=La,this.cells=uo,du=Zu=La=uo=null}function Ds(){return new gl}function gl(){this.reset()}cp.prototype={constructor:cp,polygons:function(){var o=this.edges;return this.cells.map(function(s){var l=s.halfedges.map(function(p){return rp(s,o[p])});return l.data=s.site.data,l})},triangles:function(){var o=[],s=this.edges;return this.cells.forEach(function(l,p){if(I=(N=l.halfedges).length)for(var N,I,O,d=l.site,M=-1,C=s[N[I-1]],T=C.left===d?C.right:C.left;++M<I;)O=T,T=(C=s[N[M]]).left===d?C.right:C.left,O&&T&&p<O.index&&p<T.index&&fp(d,O,T)<0&&o.push([d.data,O.data,T.data])}),o},links:function(){return this.edges.filter(function(o){return o.right}).map(function(o){return{source:o.left.data,target:o.right.data}})},find:function(o,s,l){for(var d,I,p=this,N=p._found||0,M=p.cells.length;!(I=p.cells[N]);)if(++N>=M)return null;var O=o-I.site[0],C=s-I.site[1],T=O*O+C*C;do{I=p.cells[d=N],N=null,I.halfedges.forEach(function(L){var D=p.edges[L],z=D.left;if(z!==I.site&&z||(z=D.right)){var Ye=o-z[0],Re=s-z[1],it=Ye*Ye+Re*Re;it<T&&(T=it,N=z.index)}})}while(null!==N);return p._found=d,null==l||T<=l*l?I.site:null}},qi(9855),qi(770),gl.prototype={constructor:gl,reset:function(){this.s=this.t=0},add:function(o){cs(vl,o,this.t),cs(this,vl.s,this.s),this.s?this.t+=vl.t:this.s=vl.t},valueOf:function(){return this.s}};var vl=new gl;function cs(o,s,l){var p=o.s=s+l,d=p-s;o.t=s-(p-d)+(l-d)}var Li=Math.PI,fo=Li/2,Ku=2*Li,wi=Li/180,Rf=(Math,Math.atan),$u=Math.atan2,Gn=Math.cos,An=(Math,Math,Math,Math,Math,Math.sin),Rs=(Math,Math.sqrt);Math;function Qu(o){return o>1?fo:o<-1?-fo:Math.asin(o)}function Zc(o,s){return[o>Li?o-Ku:o<-Li?o+Ku:o,s]}function $p(o,s){return o<s?-1:o>s?1:o>=s?0:NaN}Ds(),Ds(),Ds(),Zc.invert=Zc,function Um(o){1===o.length&&(o=function Gm(o){return function(s,l){return $p(o(s),l)}}(o))}($p),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);Ds();function ph(){}function ya(o){return function(s,l){var p=Gn(s),d=Gn(l),N=o(p*d);return[N*d*An(s),N*An(l)]}}function Jf(o){return function(s,l){var p=Rs(s*s+l*l),d=o(p),N=An(d),M=Gn(d);return[$u(s*N,p*M),Qu(p&&l*N/p)]}}function ms(o,s){return[o,s]}Ds(),Ds(),Ds(),Ds(),function Eg(o){return"m0,"+o+"a"+o+","+o+" 0 1,1 0,"+-2*o+"a"+o+","+o+" 0 1,1 0,"+2*o+"z"}(4.5),ph.prototype={constructor:ph,point:function(o,s){this.stream.point(o,s)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Gn(30*wi),function Cg(o){return function(s){var l=new ph;for(var p in o)l[p]=o[p];return l.stream=s,l}}({point:function(o,s){this.stream.point(o*wi,s*wi)}}),ya(function(o){return Rs(2/(1+o))}).invert=Jf(function(o){return 2*Qu(o/2)}),ya(function(o){return(o=function Am(o){return o>1?0:o<-1?Li:Math.acos(o)}(o))&&o/An(o)}).invert=Jf(function(o){return o}),ms.invert=ms,Jf(Rf),Jf(Qu),Jf(function(o){return 2*Rf(o)});var Fd=qi(346);addEventListener("message",({data:o})=>{let s=function Gd(o,s){try{return(0,Fd.default)(s,o,"kmeans").indexes}catch(p){return console.warn(p),null}}(o.k,o.patientLocations);const l={labels:s};let p={};null!=s?(p.status=Ne.Complete,p.data=l):(p.status=Ne.Error,p.message="K means failed!"),postMessage(p)})})()})();